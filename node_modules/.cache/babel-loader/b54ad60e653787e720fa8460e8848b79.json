{"ast":null,"code":"import _slicedToArray from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _defineProperty from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n      pointer-events: none;\\n      position: absolute;\\n      z-index: 101;\\n      width: \", \"px;\\n      height: \", \"px;\\n\\n      \", \";\\n      \", \";\\n      \", \";\\n      \", \";\\n      \", \";\\n\\n      :before {\\n        content: ' ';\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        border-style: solid;\\n        border-width: \", \"px;\\n        border-color: \", \" transparent transparent transparent;\\n      }\\n\\n      :after {\\n        content: ' ';\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        border-style: solid;\\n        border-width: \", \"px;\\n        margin-left: 1px;\\n        border-color: \", \" transparent transparent transparent;\\n      }\\n    \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n      \", \"\\n\\n      position: absolute;\\n      z-index: 100;\\n      box-sizing: border-box;\\n      box-shadow: 0 2px 6px 0 rgba(75, 78, 82, 0.2);\\n      border: 1px solid \", \";\\n      background: \", \";\\n      color: \", \";\\n      max-width: \", \";\\n      max-height: \", \";\\n      \", \" box-sizing: border-box;\\n\\n      \", \";\\n      \", \";\\n      \", \";\\n      \", \";\\n      \", \";\\n      \", \";\\n      overflow: auto;\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport styled, { css, themed } from '../../utils/styled';\nimport { withResponsive } from '../../hoc/withResponsive';\nimport { distancePx, distance } from '../../distance';\nimport { getFontStyle } from '../../textStyles';\nvar toolTipArrowSize = 18;\n\nfunction getFlyoutArrowPosition(_ref) {\n  var mainPosition = _ref.mainPosition,\n      origSecondaryPosition = _ref.secondaryPosition,\n      offset = _ref.offset,\n      targetRect = _ref.targetRect,\n      flyoutRect = _ref.flyoutRect;\n\n  if (mainPosition && flyoutRect.width) {\n    var _ref2;\n\n    var vertical = isVertical(mainPosition);\n    var mainAxisTargetSize = vertical ? targetRect.height : targetRect.width;\n    var secondaryAxisTargetSize = vertical ? targetRect.width : targetRect.height;\n    var secondaryAxisContnetSize = vertical ? flyoutRect.width : flyoutRect.height;\n    var mainPositionValue = mainAxisTargetSize + offset + 1 - toolTipArrowSize / 2;\n    var secondaryPosition;\n    var secondaryPositionValue;\n\n    if (!origSecondaryPosition) {\n      secondaryPosition = vertical ? 'left' : 'top';\n      secondaryPositionValue = (secondaryAxisTargetSize - toolTipArrowSize) / 2;\n    } else {\n      secondaryPosition = origSecondaryPosition;\n      secondaryPositionValue = secondaryAxisTargetSize / 4 > secondaryAxisContnetSize - toolTipArrowSize ? secondaryAxisContnetSize - toolTipArrowSize : secondaryAxisTargetSize / 4;\n    }\n\n    var rotate = {\n      top: 0,\n      left: -90,\n      right: 90,\n      bottom: 180\n    };\n    return _ref2 = {\n      rotate: rotate[mainPosition]\n    }, _defineProperty(_ref2, invertPosition(mainPosition), mainPositionValue), _defineProperty(_ref2, secondaryPosition, secondaryPositionValue), _ref2;\n  }\n\n  return {};\n}\n\nfunction getDetailedPositionInfo(_ref3) {\n  var targetRect = _ref3.targetRect,\n      dimensions = _ref3.dimensions,\n      flyoutRect = _ref3.flyoutRect;\n  var viewportPosition = {\n    left: targetRect.left,\n    right: dimensions.width - targetRect.right,\n    top: targetRect.top,\n    bottom: dimensions.height - targetRect.bottom\n  };\n  var hasEnoughSpace = {};\n  var hasMoreSpace = {};\n\n  for (var _i = 0, _Object$keys = Object.keys(viewportPosition); _i < _Object$keys.length; _i++) {\n    var position = _Object$keys[_i];\n\n    if (isVertical(position)) {\n      // There is always enought space for top/bottom flyout when it lays outside of the viewport.\n      hasEnoughSpace[position] = targetRect.top > dimensions.height || viewportPosition[position] > flyoutRect.height;\n    } else {\n      hasEnoughSpace[position] = viewportPosition[position] > flyoutRect.width;\n    }\n\n    hasMoreSpace[position] = viewportPosition[position] > viewportPosition[invertPosition(position)];\n  }\n\n  return {\n    viewportPosition: viewportPosition,\n    hasEnoughSpace: hasEnoughSpace,\n    hasMoreSpace: hasMoreSpace\n  };\n}\n\nfunction getMainAxisFlyoutPositionAndSize(_ref4) {\n  var direction = _ref4.direction,\n      targetRect = _ref4.targetRect,\n      offset = _ref4.offset,\n      dimensions = _ref4.dimensions,\n      vertical = _ref4.vertical,\n      flyoutRect = _ref4.flyoutRect;\n  var targetSize = vertical ? targetRect.height : targetRect.width;\n  var flyoutSize = vertical ? flyoutRect.height : flyoutRect.width;\n\n  var _getDetailedPositionI = getDetailedPositionInfo({\n    targetRect: targetRect,\n    dimensions: dimensions,\n    flyoutRect: flyoutRect\n  }),\n      hasEnoughSpace = _getDetailedPositionI.hasEnoughSpace,\n      viewportPosition = _getDetailedPositionI.viewportPosition;\n\n  var sizeValue = hasEnoughSpace[direction] ? flyoutSize : viewportPosition[direction] - (offset + toolTipArrowSize / 2) - distancePx.medium;\n  return {\n    position: {\n      name: invertPosition(direction),\n      value: targetSize + (offset + toolTipArrowSize / 2)\n    },\n    size: {\n      name: vertical ? 'height' : 'width',\n      value: sizeValue\n    }\n  };\n}\n\nfunction getSecondaryAxisFlyoutPositionAndSize(_ref5) {\n  var direction = _ref5.direction,\n      targetRect = _ref5.targetRect,\n      dimensions = _ref5.dimensions,\n      vertical = _ref5.vertical,\n      flyoutRect = _ref5.flyoutRect;\n  var positionValue;\n  var positionName;\n  var sizeName = vertical ? 'width' : 'height';\n  var targetSize = vertical ? targetRect.width : targetRect.height;\n  var targetPosition = vertical ? targetRect.left : targetRect.top;\n  var flyoutSize = vertical ? flyoutRect.width : flyoutRect.height;\n  var windowSize = vertical ? dimensions.width : dimensions.height;\n\n  var _getDetailedPositionI2 = getDetailedPositionInfo({\n    targetRect: targetRect,\n    dimensions: dimensions,\n    flyoutRect: flyoutRect\n  }),\n      viewportPosition = _getDetailedPositionI2.viewportPosition;\n\n  var sizeValue = flyoutSize;\n\n  if (direction === undefined) {\n    positionName = vertical ? 'left' : 'top';\n    var centeredValue = (targetSize - flyoutSize) / 2;\n\n    if (viewportPosition[positionName] > 0 && viewportPosition[positionName] + centeredValue < 0) {\n      positionValue = -viewportPosition[positionName] + distancePx.medium;\n      sizeValue = flyoutSize > windowSize ? windowSize - distancePx.xlarge : flyoutSize;\n    } else {\n      positionValue = centeredValue;\n    }\n  } else {\n    positionName = direction;\n    positionValue = positionName === 'top' || positionName === 'left' ? 0 : targetPosition - flyoutSize > 0 ? targetSize - flyoutSize : -targetPosition + distancePx.medium;\n\n    if (positionName === 'top' || positionName === 'left') {\n      sizeValue = targetPosition + positionValue + flyoutSize > windowSize ? windowSize - targetPosition + positionValue - distancePx.medium : flyoutSize;\n    } else {\n      sizeValue = flyoutSize > targetPosition + targetSize ? targetPosition + targetSize - distancePx.medium : flyoutSize;\n      positionName = invertPosition(positionName);\n    }\n  }\n\n  return {\n    position: {\n      name: positionName,\n      value: positionValue\n    },\n    size: {\n      name: sizeName,\n      value: sizeValue\n    }\n  };\n}\n\nfunction invertPosition(position) {\n  var invertedPosition = {\n    top: 'bottom',\n    left: 'right',\n    right: 'left',\n    bottom: 'top'\n  };\n  return invertedPosition[position];\n}\n\nfunction isVertical(position) {\n  return position === 'top' || position === 'bottom' ? true : false;\n}\n\nvar StyledFlyoutWindow = styled('div')(themed(function (_ref6) {\n  var theme = _ref6.theme,\n      size = _ref6.size,\n      position = _ref6.position,\n      noGutter = _ref6.noGutter;\n  return css(_templateObject(), getFontStyle({\n    size: 'medium'\n  }), theme.ui4, theme.flyout.background, theme.flyout.textColor, theme.flyout.maxWidth, theme.flyout.maxHeight, !noGutter ? \"padding: \".concat(distance.small, \" \").concat(distance.medium, \";\") : '', size && size.width !== undefined ? \"width: \".concat(size.width, \"px\") : '', size && size.height !== undefined ? \"height: \".concat(size.height, \"px\") : '', position && position.top !== undefined ? \"top: \".concat(position.top, \"px\") : '', position && position.left !== undefined ? \"left: \".concat(position.left, \"px\") : '', position && position.bottom !== undefined ? \"bottom: \".concat(position.bottom, \"px\") : '', position && position.right !== undefined ? \"right: \".concat(position.right, \"px\") : '');\n}));\nvar StyledFlyoutArrow = styled('div')(themed(function (_ref7) {\n  var top = _ref7.top,\n      left = _ref7.left,\n      bottom = _ref7.bottom,\n      right = _ref7.right,\n      rotate = _ref7.rotate,\n      theme = _ref7.theme;\n  return css(_templateObject2(), toolTipArrowSize, toolTipArrowSize, top !== undefined ? \"top: \".concat(top, \"px\") : '', left !== undefined ? \"left: \".concat(left, \"px\") : '', bottom !== undefined ? \"bottom: \".concat(bottom, \"px\") : '', right !== undefined ? \"right: \".concat(right, \"px\") : '', rotate !== undefined ? \"transform: rotate(\".concat(rotate, \"deg)\") : '', toolTipArrowSize / 2, theme.ui4, toolTipArrowSize / 2 - 1, theme.flyout.background);\n}));\nexport var FlyoutWindowInt = /*#__PURE__*/function (_React$Component) {\n  _inherits(FlyoutWindowInt, _React$Component);\n\n  var _super = _createSuper(FlyoutWindowInt);\n\n  function FlyoutWindowInt(props) {\n    var _this;\n\n    _classCallCheck(this, FlyoutWindowInt);\n\n    _this = _super.call(this, props);\n    _this.scrollPosition = {\n      top: 0,\n      left: 0\n    };\n\n    _this.setFlyoutRef = function (el) {\n      if (_this.flyoutContainer) {\n        _this.flyoutContainer.removeEventListener('scroll', _this.onScroll);\n      }\n\n      if (el) {\n        el.addEventListener('scroll', _this.onScroll);\n      }\n\n      _this.flyoutContainer = el;\n    };\n\n    _this.onScroll = function (e) {\n      if (e.target && e.target instanceof HTMLElement) {\n        _this.scrollPosition = {\n          top: e.target.scrollTop,\n          left: e.target.scrollLeft\n        };\n      }\n    };\n\n    _this.state = {\n      flyoutRect: undefined,\n      children: undefined\n    };\n    return _this;\n  }\n\n  _createClass(FlyoutWindowInt, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.flyoutContainer) {\n        this.updateMeasurements();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.flyoutContainer) {\n        this.flyoutContainer.removeEventListener('scroll', this.onScroll);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.flyoutContainer) {\n        if (!this.state.flyoutRect) {\n          this.updateMeasurements();\n        }\n\n        if (this.flyoutContainer.scroll) {\n          this.flyoutContainer.scroll({\n            top: this.scrollPosition.top,\n            left: this.scrollPosition.left\n          });\n        }\n      }\n    }\n  }, {\n    key: \"updateMeasurements\",\n    value: function updateMeasurements() {\n      if (this.flyoutContainer) {\n        var flyoutRect = this.flyoutContainer.getBoundingClientRect();\n        this.setState({\n          flyoutRect: flyoutRect\n        });\n      }\n    }\n  }, {\n    key: \"getFlyoutDimensions\",\n    value: function getFlyoutDimensions() {\n      var _position, _size;\n\n      var flyoutRect = this.state.flyoutRect;\n\n      if (!flyoutRect) {\n        return {};\n      }\n\n      var _this$props = this.props,\n          position = _this$props.position,\n          _this$props$defaultPo = _this$props.defaultPosition,\n          defaultPosition = _this$props$defaultPo === void 0 ? 'bottom' : _this$props$defaultPo,\n          _this$props$offset = _this$props.offset,\n          offset = _this$props$offset === void 0 ? 4 : _this$props$offset,\n          dimensions = _this$props.dimensions,\n          targetRect = _this$props.targetRect;\n\n      var _split = (position || defaultPosition).split('-'),\n          _split2 = _slicedToArray(_split, 2),\n          mainPosition = _split2[0],\n          secondaryPosition = _split2[1];\n\n      if (!dimensions || !mainPosition) {\n        return {};\n      }\n\n      var vertical = isVertical(mainPosition);\n\n      var _getDetailedPositionI3 = getDetailedPositionInfo({\n        targetRect: targetRect,\n        dimensions: dimensions,\n        flyoutRect: flyoutRect\n      }),\n          hasMoreSpace = _getDetailedPositionI3.hasMoreSpace,\n          hasEnoughSpace = _getDetailedPositionI3.hasEnoughSpace;\n\n      var mainDirection = mainPosition;\n      var main = getMainAxisFlyoutPositionAndSize({\n        direction: mainDirection,\n        targetRect: targetRect,\n        offset: offset,\n        dimensions: dimensions,\n        vertical: vertical,\n        flyoutRect: flyoutRect\n      });\n\n      if (!position && !hasEnoughSpace[mainDirection] && !hasMoreSpace[mainDirection]) {\n        mainDirection = invertPosition(mainDirection);\n        main = getMainAxisFlyoutPositionAndSize({\n          direction: mainDirection,\n          targetRect: targetRect,\n          offset: offset,\n          dimensions: dimensions,\n          vertical: vertical,\n          flyoutRect: flyoutRect\n        });\n      }\n\n      var secondaryDirection = secondaryPosition;\n      var secondary = getSecondaryAxisFlyoutPositionAndSize({\n        direction: secondaryDirection,\n        targetRect: targetRect,\n        dimensions: dimensions,\n        vertical: vertical,\n        flyoutRect: flyoutRect\n      });\n\n      if (!position && secondaryDirection && !hasEnoughSpace[secondaryDirection] && hasMoreSpace[secondaryDirection]) {\n        secondaryDirection = invertPosition(secondaryDirection);\n        secondary = getSecondaryAxisFlyoutPositionAndSize({\n          direction: secondaryDirection,\n          targetRect: targetRect,\n          dimensions: dimensions,\n          vertical: vertical,\n          flyoutRect: flyoutRect\n        });\n      }\n\n      return {\n        position: (_position = {}, _defineProperty(_position, main.position.name, main.position.value), _defineProperty(_position, secondary.position.name, secondary.position.value), _position),\n        size: (_size = {}, _defineProperty(_size, main.size.name, main.size.value), _defineProperty(_size, secondary.size.name, secondary.size.value), _size),\n        arrowPosition: getFlyoutArrowPosition({\n          mainPosition: mainDirection,\n          secondaryPosition: secondaryDirection,\n          offset: offset,\n          targetRect: targetRect,\n          flyoutRect: flyoutRect\n        })\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _a = this.props,\n          children = _a.children,\n          _0 = _a.targetRect,\n          _1 = _a.position,\n          _2 = _a.offset,\n          _3 = _a.dimensions,\n          _4 = _a.innerRef,\n          props = __rest(_a, [\"children\", \"targetRect\", \"position\", \"offset\", \"dimensions\", \"innerRef\"]);\n\n      var _b = this.getFlyoutDimensions(),\n          arrowPosition = _b.arrowPosition,\n          flyoutDimensions = __rest(_b, [\"arrowPosition\"]);\n\n      return children && React.createElement(React.Fragment, null, React.createElement(StyledFlyoutArrow, Object.assign({}, arrowPosition, {\n        theme: props.theme\n      })), React.createElement(StyledFlyoutWindow, Object.assign({}, flyoutDimensions, props, {\n        ref: this.setFlyoutRef\n      }), children));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.children !== prevState.children) {\n        return {\n          flyoutRect: undefined,\n          children: nextProps.children\n        };\n      }\n\n      return {\n        children: nextProps.children\n      };\n    }\n  }]);\n\n  return FlyoutWindowInt;\n}(React.Component);\nFlyoutWindowInt.inner = {\n  get StyledFlyoutArrow() {\n    return StyledFlyoutArrow;\n  },\n\n  get StyledFlyoutWindow() {\n    return StyledFlyoutWindow;\n  }\n\n};\nexport var FlyoutWindow = withResponsive(FlyoutWindowInt);","map":{"version":3,"sources":["../../../../src/components/Flyout/FlyoutWindow.part.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled, { css, themed } from '../../utils/styled';\nimport { withResponsive, ResponsiveComponentProps } from '../../hoc/withResponsive';\nimport { FlyoutPosition, BasicPosition } from './Flyout.types.part';\nimport { distancePx, distance } from '../../distance';\nimport { StandardProps } from '../../common';\nimport { getFontStyle } from '../../textStyles';\nconst toolTipArrowSize = 18;\nexport interface Dimensions {\n    width: number;\n    height: number;\n}\ninterface InvertedPosition {\n    top: 'bottom';\n    left: 'right';\n    right: 'left';\n    bottom: 'top';\n}\nexport interface FlyoutWindowProps extends ResponsiveComponentProps, StandardProps {\n    targetRect: ClientRect;\n    children: React.ReactNode;\n    position?: FlyoutPosition;\n    defaultPosition?: FlyoutPosition;\n    offset?: number;\n}\nexport interface Position {\n    top?: number;\n    right?: number;\n    bottom?: number;\n    left?: number;\n}\nfunction getFlyoutArrowPosition({ mainPosition, secondaryPosition: origSecondaryPosition, offset, targetRect, flyoutRect, }: {\n    mainPosition: BasicPosition;\n    secondaryPosition?: BasicPosition;\n    targetRect: ClientRect;\n    flyoutRect: ClientRect;\n    offset: number;\n}) {\n    if (mainPosition && flyoutRect.width) {\n        const vertical = isVertical(mainPosition);\n        const mainAxisTargetSize = vertical ? targetRect.height : targetRect.width;\n        const secondaryAxisTargetSize = vertical ? targetRect.width : targetRect.height;\n        const secondaryAxisContnetSize = vertical ? flyoutRect.width : flyoutRect.height;\n        const mainPositionValue = mainAxisTargetSize + offset + 1 - toolTipArrowSize / 2;\n        let secondaryPosition: string;\n        let secondaryPositionValue: number;\n        if (!origSecondaryPosition) {\n            secondaryPosition = vertical ? 'left' : 'top';\n            secondaryPositionValue = (secondaryAxisTargetSize - toolTipArrowSize) / 2;\n        }\n        else {\n            secondaryPosition = origSecondaryPosition;\n            secondaryPositionValue =\n                secondaryAxisTargetSize / 4 > secondaryAxisContnetSize - toolTipArrowSize\n                    ? secondaryAxisContnetSize - toolTipArrowSize\n                    : secondaryAxisTargetSize / 4;\n        }\n        const rotate = {\n            top: 0,\n            left: -90,\n            right: 90,\n            bottom: 180,\n        };\n        return {\n            rotate: rotate[mainPosition],\n            [invertPosition(mainPosition)]: mainPositionValue,\n            [secondaryPosition]: secondaryPositionValue,\n        };\n    }\n    return {};\n}\nfunction getDetailedPositionInfo({ targetRect, dimensions, flyoutRect, }: {\n    targetRect: ClientRect;\n    dimensions: Dimensions;\n    flyoutRect: ClientRect;\n}) {\n    const viewportPosition = {\n        left: targetRect.left,\n        right: dimensions.width - targetRect.right,\n        top: targetRect.top,\n        bottom: dimensions.height - targetRect.bottom,\n    };\n    const hasEnoughSpace = {};\n    const hasMoreSpace = {};\n    for (const position of Object.keys(viewportPosition)) {\n        if (isVertical(position as BasicPosition)) {\n            // There is always enought space for top/bottom flyout when it lays outside of the viewport.\n            hasEnoughSpace[position] = targetRect.top > dimensions.height || viewportPosition[position] > flyoutRect.height;\n        }\n        else {\n            hasEnoughSpace[position] = viewportPosition[position] > flyoutRect.width;\n        }\n        hasMoreSpace[position] = viewportPosition[position] > viewportPosition[invertPosition(position as BasicPosition)];\n    }\n    return {\n        viewportPosition,\n        hasEnoughSpace,\n        hasMoreSpace,\n    };\n}\nfunction getMainAxisFlyoutPositionAndSize({ direction, targetRect, offset, dimensions, vertical, flyoutRect, }: {\n    direction: BasicPosition;\n    targetRect: ClientRect;\n    flyoutRect: ClientRect;\n    offset: number;\n    dimensions: Dimensions;\n    vertical: boolean;\n}) {\n    const targetSize = vertical ? targetRect.height : targetRect.width;\n    const flyoutSize = vertical ? flyoutRect.height : flyoutRect.width;\n    const { hasEnoughSpace, viewportPosition } = getDetailedPositionInfo({\n        targetRect,\n        dimensions,\n        flyoutRect,\n    });\n    const sizeValue = hasEnoughSpace[direction]\n        ? flyoutSize\n        : viewportPosition[direction] - (offset + toolTipArrowSize / 2) - distancePx.medium;\n    return {\n        position: {\n            name: invertPosition(direction),\n            value: targetSize + (offset + toolTipArrowSize / 2),\n        },\n        size: {\n            name: vertical ? 'height' : 'width',\n            value: sizeValue,\n        },\n    };\n}\nfunction getSecondaryAxisFlyoutPositionAndSize({ direction, targetRect, dimensions, vertical, flyoutRect, }: {\n    direction: BasicPosition;\n    targetRect: ClientRect;\n    dimensions: Dimensions;\n    vertical: boolean;\n    flyoutRect: ClientRect;\n}) {\n    let positionValue: number;\n    let positionName: BasicPosition;\n    const sizeName = vertical ? 'width' : 'height';\n    const targetSize = vertical ? targetRect.width : targetRect.height;\n    const targetPosition = vertical ? targetRect.left : targetRect.top;\n    const flyoutSize = vertical ? flyoutRect.width : flyoutRect.height;\n    const windowSize = vertical ? dimensions.width : dimensions.height;\n    const { viewportPosition } = getDetailedPositionInfo({\n        targetRect,\n        dimensions,\n        flyoutRect,\n    });\n    let sizeValue = flyoutSize;\n    if (direction === undefined) {\n        positionName = vertical ? 'left' : 'top';\n        const centeredValue = (targetSize - flyoutSize) / 2;\n        if (viewportPosition[positionName] > 0 && viewportPosition[positionName] + centeredValue < 0) {\n            positionValue = -viewportPosition[positionName] + distancePx.medium;\n            sizeValue = flyoutSize > windowSize ? windowSize - distancePx.xlarge : flyoutSize;\n        }\n        else {\n            positionValue = centeredValue;\n        }\n    }\n    else {\n        positionName = direction;\n        positionValue =\n            positionName === 'top' || positionName === 'left'\n                ? 0\n                : targetPosition - flyoutSize > 0\n                    ? targetSize - flyoutSize\n                    : -targetPosition + distancePx.medium;\n        if (positionName === 'top' || positionName === 'left') {\n            sizeValue =\n                targetPosition + positionValue + flyoutSize > windowSize\n                    ? windowSize - targetPosition + positionValue - distancePx.medium\n                    : flyoutSize;\n        }\n        else {\n            sizeValue =\n                flyoutSize > targetPosition + targetSize ? targetPosition + targetSize - distancePx.medium : flyoutSize;\n            positionName = invertPosition(positionName);\n        }\n    }\n    return {\n        position: {\n            name: positionName,\n            value: positionValue,\n        },\n        size: {\n            name: sizeName,\n            value: sizeValue,\n        },\n    };\n}\nfunction invertPosition(position: BasicPosition) {\n    const invertedPosition: InvertedPosition = {\n        top: 'bottom',\n        left: 'right',\n        right: 'left',\n        bottom: 'top',\n    };\n    return invertedPosition[position];\n}\nfunction isVertical(position: BasicPosition) {\n    return position === 'top' || position === 'bottom' ? true : false;\n}\nexport interface StyledFlyoutWindowProps {\n    size?: {\n        width?: number;\n        height?: number;\n    };\n    position?: Position;\n    noGutter?: boolean;\n}\nconst StyledFlyoutWindow = styled('div')<StyledFlyoutWindowProps>(themed(({ theme, size, position, noGutter }) => css `\n      ${getFontStyle({ size: 'medium' })}\n\n      position: absolute;\n      z-index: 100;\n      box-sizing: border-box;\n      box-shadow: 0 2px 6px 0 rgba(75, 78, 82, 0.2);\n      border: 1px solid ${theme.ui4};\n      background: ${theme.flyout.background};\n      color: ${theme.flyout.textColor};\n      max-width: ${theme.flyout.maxWidth};\n      max-height: ${theme.flyout.maxHeight};\n      ${!noGutter ? `padding: ${distance.small} ${distance.medium};` : ''} box-sizing: border-box;\n\n      ${size && size.width !== undefined ? `width: ${size.width}px` : ''};\n      ${size && size.height !== undefined ? `height: ${size.height}px` : ''};\n      ${position && position.top !== undefined ? `top: ${position.top}px` : ''};\n      ${position && position.left !== undefined ? `left: ${position.left}px` : ''};\n      ${position && position.bottom !== undefined ? `bottom: ${position.bottom}px` : ''};\n      ${position && position.right !== undefined ? `right: ${position.right}px` : ''};\n      overflow: auto;\n    `));\ninterface StyledFlyoutArrowProps extends Position {\n    rotate?: number;\n}\nconst StyledFlyoutArrow = styled('div')<StyledFlyoutArrowProps>(themed(({ top, left, bottom, right, rotate, theme }) => css `\n      pointer-events: none;\n      position: absolute;\n      z-index: 101;\n      width: ${toolTipArrowSize}px;\n      height: ${toolTipArrowSize}px;\n\n      ${top !== undefined ? `top: ${top}px` : ''};\n      ${left !== undefined ? `left: ${left}px` : ''};\n      ${bottom !== undefined ? `bottom: ${bottom}px` : ''};\n      ${right !== undefined ? `right: ${right}px` : ''};\n      ${rotate !== undefined ? `transform: rotate(${rotate}deg)` : ''};\n\n      :before {\n        content: ' ';\n        position: absolute;\n        top: 0;\n        left: 0;\n        border-style: solid;\n        border-width: ${toolTipArrowSize / 2}px;\n        border-color: ${theme.ui4} transparent transparent transparent;\n      }\n\n      :after {\n        content: ' ';\n        position: absolute;\n        top: 0;\n        left: 0;\n        border-style: solid;\n        border-width: ${toolTipArrowSize / 2 - 1}px;\n        margin-left: 1px;\n        border-color: ${theme.flyout.background} transparent transparent transparent;\n      }\n    `));\nexport interface FlyoutWindowState {\n    flyoutRect?: ClientRect;\n    children?: React.ReactNode;\n}\ninterface ScrollPosition {\n    top: number;\n    left: number;\n}\nexport class FlyoutWindowInt extends React.Component<FlyoutWindowProps, FlyoutWindowState> {\n    private flyoutContainer: HTMLDivElement | null;\n    private scrollPosition: ScrollPosition = { top: 0, left: 0 };\n    constructor(props: FlyoutWindowProps) {\n        super(props);\n        this.state = {\n            flyoutRect: undefined,\n            children: undefined,\n        };\n    }\n    static getDerivedStateFromProps(nextProps: FlyoutWindowProps, prevState: FlyoutWindowState) {\n        if (nextProps.children !== prevState.children) {\n            return {\n                flyoutRect: undefined,\n                children: nextProps.children,\n            };\n        }\n        return {\n            children: nextProps.children,\n        };\n    }\n    private setFlyoutRef = (el: HTMLDivElement) => {\n        if (this.flyoutContainer) {\n            this.flyoutContainer.removeEventListener('scroll', this.onScroll);\n        }\n        if (el) {\n            el.addEventListener('scroll', this.onScroll);\n        }\n        this.flyoutContainer = el;\n    };\n    private onScroll = (e: UIEvent) => {\n        if (e.target && e.target instanceof HTMLElement) {\n            this.scrollPosition = {\n                top: e.target.scrollTop,\n                left: e.target.scrollLeft,\n            };\n        }\n    };\n    componentDidMount() {\n        if (this.flyoutContainer) {\n            this.updateMeasurements();\n        }\n    }\n    componentWillUnmount() {\n        if (this.flyoutContainer) {\n            this.flyoutContainer.removeEventListener('scroll', this.onScroll);\n        }\n    }\n    componentDidUpdate() {\n        if (this.flyoutContainer) {\n            if (!this.state.flyoutRect) {\n                this.updateMeasurements();\n            }\n            if (this.flyoutContainer.scroll) {\n                this.flyoutContainer.scroll({\n                    top: this.scrollPosition.top,\n                    left: this.scrollPosition.left,\n                });\n            }\n        }\n    }\n    private updateMeasurements() {\n        if (this.flyoutContainer) {\n            const flyoutRect = this.flyoutContainer.getBoundingClientRect();\n            this.setState({\n                flyoutRect,\n            });\n        }\n    }\n    private getFlyoutDimensions(): {\n        size?: {\n            width?: number;\n            height?: number;\n        };\n        position?: Position;\n        arrowPosition?: Position & {\n            rotate?: number;\n        };\n    } {\n        const { flyoutRect } = this.state;\n        if (!flyoutRect) {\n            return {};\n        }\n        const { position, defaultPosition = 'bottom', offset = 4, dimensions, targetRect } = this.props;\n        const [mainPosition, secondaryPosition] = (position || defaultPosition).split('-') as Array<BasicPosition>;\n        if (!dimensions || !mainPosition) {\n            return {};\n        }\n        const vertical = isVertical(mainPosition);\n        const { hasMoreSpace, hasEnoughSpace } = getDetailedPositionInfo({\n            targetRect,\n            dimensions,\n            flyoutRect,\n        });\n        let mainDirection = mainPosition;\n        let main = getMainAxisFlyoutPositionAndSize({\n            direction: mainDirection,\n            targetRect,\n            offset,\n            dimensions,\n            vertical,\n            flyoutRect,\n        });\n        if (!position && !hasEnoughSpace[mainDirection] && !hasMoreSpace[mainDirection]) {\n            mainDirection = invertPosition(mainDirection);\n            main = getMainAxisFlyoutPositionAndSize({\n                direction: mainDirection,\n                targetRect,\n                offset,\n                dimensions,\n                vertical,\n                flyoutRect,\n            });\n        }\n        let secondaryDirection = secondaryPosition;\n        let secondary = getSecondaryAxisFlyoutPositionAndSize({\n            direction: secondaryDirection,\n            targetRect,\n            dimensions,\n            vertical,\n            flyoutRect,\n        });\n        if (!position && secondaryDirection && !hasEnoughSpace[secondaryDirection] && hasMoreSpace[secondaryDirection]) {\n            secondaryDirection = invertPosition(secondaryDirection);\n            secondary = getSecondaryAxisFlyoutPositionAndSize({\n                direction: secondaryDirection,\n                targetRect,\n                dimensions,\n                vertical,\n                flyoutRect,\n            });\n        }\n        return {\n            position: {\n                [main.position.name]: main.position.value,\n                [secondary.position.name]: secondary.position.value,\n            },\n            size: {\n                [main.size.name]: main.size.value,\n                [secondary.size.name]: secondary.size.value,\n            },\n            arrowPosition: getFlyoutArrowPosition({\n                mainPosition: mainDirection,\n                secondaryPosition: secondaryDirection,\n                offset,\n                targetRect,\n                flyoutRect,\n            }),\n        };\n    }\n    render() {\n        const { children, targetRect: _0, position: _1, offset: _2, dimensions: _3, innerRef: _4, ...props } = this.props;\n        const { arrowPosition, ...flyoutDimensions } = this.getFlyoutDimensions();\n        return (children && (<>\n          <StyledFlyoutArrow {...arrowPosition} theme={props.theme}/>\n          <StyledFlyoutWindow {...flyoutDimensions} {...props} ref={this.setFlyoutRef}>\n            {children}\n          </StyledFlyoutWindow>\n        </>));\n    }\n    static inner = {\n        get StyledFlyoutArrow() { return StyledFlyoutArrow as typeof StyledFlyoutArrow; },\n        get StyledFlyoutWindow() { return StyledFlyoutWindow as typeof StyledFlyoutWindow; }\n    };\n}\nexport const FlyoutWindow = withResponsive(FlyoutWindowInt);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}