{"ast":null,"code":"import _toConsumableArray from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  vertical-align: middle;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline;\\n  padding-bottom: \", \";\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0 \", \" \", \" 0;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \"\\n  box-sizing: content-box;\\n  box-shadow: none;\\n  border: none;\\n  border-radius: 0;\\n  margin: 0;\\n  outline: none;\\n  outline-color: transparent !important;\\n  background: \", \";\\n  width: \", \";\\n  color: \", \";\\n  cursor: \", \";\\n  font-family: inherit;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: \", \";\\n  margin: 0;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  display: flex;\\n  flex-wrap: wrap;\\n  align-items: center;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \"\\n\\n  cursor: pointer;\\n  vertical-align: middle;\\n  color: \", \";\\n  font-family: \", \";\\n  margin-left: \", \";\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport * as React from 'react';\nimport styled, { themed } from '../../utils/styled';\nimport { showInputInfo } from '../../utils/input';\nimport { lowerize } from '../../utils/text';\nimport { Icon } from '../Icon';\nimport { InputIcon } from '../InputIcon';\nimport { transparent, dark, purpleRed } from '../../colors';\nimport { distance } from '../../distance';\nimport { withFormContext } from '../../hoc/withFormContext';\nimport { StyledInputRow, StyledInputBox, getTextFieldBorderType, StyledTagItem } from '../../quarks';\nimport { getFontStyle, getFontSize } from '../../textStyles';\nvar finishTagKeys = [13\n/* enter */\n, 32\n/* space */\n, 188\n/* comma */\n, 186\n/* semicolon */\n];\nvar StyledIcon = styled(Icon)(_templateObject(), getFontStyle({\n  size: 'small'\n}), themed(function (props) {\n  return props.theme.ui5;\n}), themed(function (props) {\n  return props.theme.fontFamily;\n}), distance.small);\nvar TagBuilderContainer = styled.div(_templateObject2());\n\nfunction getContainerPadding(props) {\n  var tagRenderer = props.tagRenderer,\n      labelShown = props.labelShown;\n\n  if (!tagRenderer) {\n    return !labelShown ? \"\".concat(distance.medium, \" \").concat(distance.medium, \" \").concat(distance.small) : \"\".concat(distance.large, \" \").concat(distance.medium, \" 0\");\n  }\n\n  return !labelShown ? \"\".concat(distance.medium) : \"\".concat(distance.large, \" \").concat(distance.medium, \" \").concat(distance.small);\n}\n\nvar StyledTagsContainer = styled.div(_templateObject3(), getContainerPadding);\nvar StyledInput = styled('input')(_templateObject4(), getFontSize('medium'), transparent, function (props) {\n  return props.value.length > 2 ? props.value.length * 10 + 'px' : '20px';\n}, themed(function (_ref) {\n  var disabled = _ref.disabled,\n      theme = _ref.theme,\n      valid = _ref.valid;\n  return valid ? disabled ? theme.textDisabled : dark : purpleRed;\n}), function (props) {\n  return props.disabled ? 'not-allowed' : 'auto';\n});\nvar RestyledTagItem = styled(StyledTagItem)(_templateObject5(), distance.small, distance.small);\nvar InputContainer = styled('div')(_templateObject6(), function (_ref2) {\n  var tagRenderer = _ref2.tagRenderer;\n  return !tagRenderer ? \"\".concat(distance.small) : '0';\n});\nvar StyledText = styled.span(_templateObject7());\nvar CloseIcon = Object.assign(function (_ref3) {\n  var theme = _ref3.theme,\n      onClick = _ref3.onClick,\n      onMouseDown = _ref3.onMouseDown;\n  return React.createElement(StyledIcon, {\n    theme: theme,\n    name: \"Close\",\n    onClick: onClick,\n    onMouseDown: onMouseDown\n  });\n}, {\n  inner: {\n    get StyledIcon() {\n      return StyledIcon;\n    }\n\n  }\n});\nexport var TagBuilderInt = /*#__PURE__*/function (_React$Component) {\n  _inherits(TagBuilderInt, _React$Component);\n\n  var _super = _createSuper(TagBuilderInt);\n\n  function TagBuilderInt(props) {\n    var _this;\n\n    _classCallCheck(this, TagBuilderInt);\n\n    _this = _super.call(this, props);\n\n    _this.inputChanged = function (e) {\n      var onInput = _this.props.onInput;\n      var _this$state = _this.state,\n          controlled = _this$state.controlled,\n          prevTags = _this$state.value;\n      var value = e.currentTarget.value;\n\n      if (typeof onInput === 'function') {\n        onInput({\n          value: value\n        });\n      }\n\n      if (!controlled) {\n        _this.setState({\n          inputValue: value,\n          valid: value.length > 0 ? prevTags.indexOf(value) === -1 : true\n        });\n      }\n    };\n\n    _this.keyDownHandler = function (e) {\n      var _this$state2 = _this.state,\n          inputValue = _this$state2.inputValue,\n          controlled = _this$state2.controlled;\n      var shouldFinishTag = _this.props.shouldFinishTag;\n      var isHandled = false;\n\n      var handleKeyEvent = function handleKeyEvent() {\n        e.stopPropagation();\n        e.preventDefault();\n        isHandled = true;\n      };\n\n      if (inputValue.length === 0) {\n        switch (e.keyCode) {\n          case 8\n          /* backspace */\n          :\n            _this.removePrevTag();\n\n            handleKeyEvent();\n            break;\n\n          case 46\n          /* delete */\n          :\n            _this.removeNextTag();\n\n            handleKeyEvent();\n            break;\n        }\n      }\n\n      if (!isHandled && !controlled) {\n        if (typeof shouldFinishTag === 'function') {\n          if (shouldFinishTag(e)) {\n            _this.addTag(inputValue);\n\n            handleKeyEvent();\n            return;\n          }\n        } else if (finishTagKeys.indexOf(e.keyCode) !== -1) {\n          _this.addTag(inputValue);\n\n          handleKeyEvent();\n        }\n\n        if (inputValue.length === 0) {\n          switch (e.keyCode) {\n            case 35\n            /* end */\n            :\n              _this.inputMoveEnd();\n\n              handleKeyEvent();\n              break;\n\n            case 36\n            /* home */\n            :\n              _this.inputMoveHome();\n\n              handleKeyEvent();\n              break;\n\n            case 37\n            /* left */\n            :\n              _this.inputMoveLeft();\n\n              handleKeyEvent();\n              break;\n\n            case 39\n            /* right */\n            :\n              _this.inputMoveRight();\n\n              handleKeyEvent();\n              break;\n          }\n        }\n      }\n    };\n\n    _this.inputFocused = function () {\n      var onFocus = _this.props.onFocus;\n\n      _this.setState({\n        focused: true\n      }, onFocus);\n    };\n\n    _this.inputBlurred = function () {\n      var _this$props = _this.props,\n          onBlur = _this$props.onBlur,\n          appendTagOnBlur = _this$props.appendTagOnBlur;\n\n      if (!!appendTagOnBlur && !_this.state.controlled) {\n        var inputValue = _this.state.inputValue;\n\n        if (inputValue) {\n          _this.addTag(inputValue);\n        }\n      }\n\n      _this.setState({\n        focused: false\n      }, onBlur);\n    };\n\n    _this.setFocus = function () {\n      _this._input && _this._input.focus();\n    };\n\n    _this.removeTagMouseDownHandler = function (event) {\n      event.preventDefault();\n    };\n\n    _this.renderTag = function (e) {\n      var _this$props2 = _this.props,\n          theme = _this$props2.theme,\n          disabled = _this$props2.disabled;\n      return React.createElement(RestyledTagItem, {\n        theme: theme,\n        key: e.item + e.index\n      }, React.createElement(StyledText, null, e.item), !disabled && React.createElement(CloseIcon, {\n        theme: theme,\n        onMouseDown: _this.removeTagMouseDownHandler,\n        onClick: function onClick() {\n          return _this.removeTag(e.index);\n        }\n      }));\n    };\n\n    _this.setContainer = function (node) {\n      _this._input = node;\n      var inputRef = _this.props.inputRef;\n\n      if (typeof inputRef === 'function') {\n        inputRef(node);\n      }\n    };\n\n    var tags = (props.value || props.defaultValue || []).map(lowerize);\n    _this.state = {\n      value: tags,\n      inputValue: props.inputValue || '',\n      controlled: props.value !== undefined || props.inputValue !== undefined,\n      focused: false,\n      valid: true,\n      error: props.error\n    };\n    return _this;\n  }\n\n  _createClass(TagBuilderInt, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(_ref4) {\n      var value = _ref4.value,\n          _ref4$inputValue = _ref4.inputValue,\n          inputValue = _ref4$inputValue === void 0 ? '' : _ref4$inputValue,\n          error = _ref4.error;\n\n      if (this.state.controlled && value !== undefined) {\n        this.setState({\n          value: _toConsumableArray(value),\n          inputValue: inputValue\n        });\n      }\n\n      this.setState({\n        error: error\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var form = this.props.form;\n      var controlled = this.state.controlled;\n\n      if (!controlled && form) {\n        form.subscribe(this);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var form = this.props.form;\n      var controlled = this.state.controlled;\n\n      if (!controlled && form) {\n        form.unsubscribe(this);\n      }\n    }\n  }, {\n    key: \"fireBeforeTagRemoveEvent\",\n    value: function fireBeforeTagRemoveEvent(index) {\n      var onBeforeTagRemove = this.props.onBeforeTagRemove;\n\n      if (typeof onBeforeTagRemove === 'function') {\n        onBeforeTagRemove(index);\n      }\n    }\n  }, {\n    key: \"inputMoveLeft\",\n    value: function inputMoveLeft() {\n      var value = this.state.value;\n      var _this$state$inputPosi = this.state.inputPosition,\n          inputPosition = _this$state$inputPosi === void 0 ? value.length : _this$state$inputPosi;\n\n      if (inputPosition > 0) {\n        this.setState({\n          inputPosition: inputPosition - 1\n        });\n      }\n    }\n  }, {\n    key: \"inputMoveRight\",\n    value: function inputMoveRight() {\n      var _this$state3 = this.state,\n          value = _this$state3.value,\n          inputPosition = _this$state3.inputPosition;\n\n      if (inputPosition !== undefined && inputPosition < value.length) {\n        this.setState({\n          inputPosition: inputPosition + 1\n        });\n      }\n    }\n  }, {\n    key: \"inputMoveEnd\",\n    value: function inputMoveEnd() {\n      var value = this.state.value;\n      this.setState({\n        inputPosition: value.length\n      });\n    }\n  }, {\n    key: \"inputMoveHome\",\n    value: function inputMoveHome() {\n      this.setState({\n        inputPosition: 0\n      });\n    }\n  }, {\n    key: \"addTag\",\n    value: function addTag(inputValue) {\n      var _this2 = this;\n\n      var _this$state4 = this.state,\n          prevTags = _this$state4.value,\n          valid = _this$state4.valid;\n      var _this$state$inputPosi2 = this.state.inputPosition,\n          inputPosition = _this$state$inputPosi2 === void 0 ? prevTags.length : _this$state$inputPosi2;\n      inputValue = inputValue.trim().toLowerCase();\n\n      if (inputValue.length > 0 && valid) {\n        var tags = _toConsumableArray(prevTags);\n\n        tags.splice(inputPosition, 0, inputValue);\n        this.setState({\n          inputValue: '',\n          inputPosition: inputPosition + 1\n        }, function () {\n          return _this2.onChange(tags);\n        });\n      }\n    }\n  }, {\n    key: \"removePrevTag\",\n    value: function removePrevTag() {\n      var prevTags = this.state.value;\n      var _this$state$inputPosi3 = this.state.inputPosition,\n          inputPosition = _this$state$inputPosi3 === void 0 ? prevTags.length : _this$state$inputPosi3;\n\n      if (inputPosition > 0) {\n        this.removeTag(inputPosition - 1);\n        this.setState({\n          inputPosition: inputPosition - 1\n        });\n      }\n    }\n  }, {\n    key: \"removeNextTag\",\n    value: function removeNextTag() {\n      var _this$state5 = this.state,\n          prevTags = _this$state5.value,\n          inputPosition = _this$state5.inputPosition;\n\n      if (inputPosition !== undefined && inputPosition < prevTags.length) {\n        this.removeTag(inputPosition);\n      }\n    }\n  }, {\n    key: \"removeTag\",\n    value: function removeTag(index) {\n      var prevTags = this.state.value;\n      this.fireBeforeTagRemoveEvent(index);\n      var tags = [].concat(_toConsumableArray(prevTags.slice(0, index)), _toConsumableArray(prevTags.slice(index + 1)));\n      this.onChange(tags);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(value) {\n      var _this$props3 = this.props,\n          onChange = _this$props3.onChange,\n          _this$props3$name = _this$props3.name,\n          name = _this$props3$name === void 0 ? '' : _this$props3$name,\n          form = _this$props3.form;\n\n      if (!this.state.controlled) {\n        if (form) {\n          form.change({\n            name: name,\n            value: value\n          });\n        } else {\n          this.setState({\n            value: value\n          });\n        }\n      }\n\n      if (typeof onChange === 'function') {\n        onChange({\n          value: value\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          tagRenderer = _this$props4.tagRenderer,\n          info = _this$props4.info,\n          disabled = _this$props4.disabled,\n          borderless = _this$props4.borderless,\n          theme = _this$props4.theme,\n          label = _this$props4.label,\n          placeholder = _this$props4.placeholder;\n      var _this$state6 = this.state,\n          value = _this$state6.value,\n          inputValue = _this$state6.inputValue,\n          focused = _this$state6.focused,\n          valid = _this$state6.valid,\n          error = _this$state6.error;\n      var _this$state$inputPosi4 = this.state.inputPosition,\n          inputPosition = _this$state$inputPosi4 === void 0 ? value.length : _this$state$inputPosi4;\n      var border = getTextFieldBorderType(borderless, !!error, focused);\n      var renderer = tagRenderer || this.renderTag;\n      var children = value.map(function (item, index) {\n        return renderer({\n          item: item,\n          index: index,\n          tags: value\n        });\n      });\n      var hasValue = !!inputValue || value.length > 0;\n      children.splice(inputPosition, 0, React.createElement(InputContainer, {\n        key: \"input\",\n        onKeyDown: this.keyDownHandler,\n        tagRenderer: !!tagRenderer\n      }, React.createElement(StyledInput, {\n        theme: theme,\n        disabled: disabled,\n        ref: this.setContainer,\n        type: \"text\",\n        value: inputValue,\n        onChange: this.inputChanged,\n        onFocus: this.inputFocused,\n        onBlur: this.inputBlurred,\n        valid: valid\n      })));\n      return React.createElement(TagBuilderContainer, null, React.createElement(StyledInputBox, {\n        border: border,\n        disabled: disabled,\n        focused: focused,\n        hasValue: hasValue\n      }, React.createElement(StyledInputRow, {\n        onClick: this.setFocus,\n        label: label,\n        hasValue: hasValue,\n        placeholder: placeholder,\n        error: !!error,\n        focused: focused\n      }, React.createElement(StyledTagsContainer, {\n        labelShown: !!label,\n        tagRenderer: !!tagRenderer\n      }, children)), React.createElement(InputIcon, {\n        disabled: disabled,\n        theme: theme,\n        error: error,\n        hasValue: hasValue\n      })), showInputInfo(error, info));\n    }\n  }]);\n\n  return TagBuilderInt;\n}(React.Component);\nTagBuilderInt.inner = {\n  get RestyledTagItem() {\n    return RestyledTagItem;\n  },\n\n  get StyledText() {\n    return StyledText;\n  },\n\n  get CloseIcon() {\n    return CloseIcon;\n  },\n\n  get InputContainer() {\n    return InputContainer;\n  },\n\n  get StyledInput() {\n    return StyledInput;\n  },\n\n  get TagBuilderContainer() {\n    return TagBuilderContainer;\n  },\n\n  get StyledInputBox() {\n    return StyledInputBox;\n  },\n\n  get StyledInputRow() {\n    return StyledInputRow;\n  },\n\n  get StyledTagsContainer() {\n    return StyledTagsContainer;\n  },\n\n  get InputIcon() {\n    return InputIcon;\n  }\n\n};\nexport var TagBuilder = withFormContext(TagBuilderInt);\nTagBuilder.displayName = 'TagBuilder';","map":{"version":3,"sources":["../../../../src/components/TagBuilder/TagBuilderInt.part.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled, { themed } from '../../utils/styled';\nimport { PreciseTheme } from '../../common';\nimport { showInputInfo } from '../../utils/input';\nimport { KeyCodes } from '../../utils/keyCodes';\nimport { lowerize } from '../../utils/text';\nimport { Icon } from '../Icon';\nimport { InputIcon } from '../InputIcon';\nimport { transparent, dark, purpleRed } from '../../colors';\nimport { distance } from '../../distance';\nimport { FormContextProps, withFormContext } from '../../hoc/withFormContext';\nimport { TagBuilderRenderEvent, TagBuilderProps } from './TagBuilder.types.part';\nimport { StyledInputRow, StyledInputBox, getTextFieldBorderType, StyledTagItem } from '../../quarks';\nimport { getFontStyle, getFontSize } from '../../textStyles';\nconst finishTagKeys = [KeyCodes.enter, KeyCodes.space, KeyCodes.comma, KeyCodes.semicolon];\nconst StyledIcon = styled(Icon) `\n  ${getFontStyle({ size: 'small' })}\n\n  cursor: pointer;\n  vertical-align: middle;\n  color: ${themed(props => props.theme.ui5)};\n  font-family: ${themed(props => props.theme.fontFamily)};\n  margin-left: ${distance.small};\n`;\nconst TagBuilderContainer = styled.div ``;\ninterface StyledTagsContainerProps {\n    labelShown: boolean;\n    tagRenderer: boolean;\n}\nfunction getContainerPadding(props: StyledTagsContainerProps) {\n    const { tagRenderer, labelShown } = props;\n    if (!tagRenderer) {\n        return !labelShown\n            ? `${distance.medium} ${distance.medium} ${distance.small}`\n            : `${distance.large} ${distance.medium} 0`;\n    }\n    return !labelShown ? `${distance.medium}` : `${distance.large} ${distance.medium} ${distance.small}`;\n}\nconst StyledTagsContainer = styled.div `\n  padding: ${getContainerPadding};\n  margin: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n`;\ninterface StyledInputProps {\n    value: string;\n    disabled?: boolean;\n    theme: any;\n    valid?: boolean;\n}\nconst StyledInput = styled('input')<StyledInputProps> `\n  ${getFontSize('medium')}\n  box-sizing: content-box;\n  box-shadow: none;\n  border: none;\n  border-radius: 0;\n  margin: 0;\n  outline: none;\n  outline-color: transparent !important;\n  background: ${transparent};\n  width: ${props => (props.value.length > 2 ? props.value.length * 10 + 'px' : '20px')};\n  color: ${themed(({ disabled, theme, valid }) => (valid ? (disabled ? theme.textDisabled : dark) : purpleRed))};\n  cursor: ${props => (props.disabled ? 'not-allowed' : 'auto')};\n  font-family: inherit;\n`;\nconst RestyledTagItem = styled(StyledTagItem) `\n  margin: 0 ${distance.small} ${distance.small} 0;\n`;\ninterface InputContainerProps {\n    tagRenderer: boolean;\n}\nconst InputContainer = styled('div')<InputContainerProps> `\n  display: inline;\n  padding-bottom: ${({ tagRenderer }) => (!tagRenderer ? `${distance.small}` : '0')};\n`;\nconst StyledText = styled.span `\n  display: inline-block;\n  vertical-align: middle;\n`;\ninterface CloseIconProps {\n    onClick?(): void;\n    onMouseDown?(event: React.MouseEvent): void;\n    theme?: PreciseTheme;\n}\nconst CloseIcon = Object.assign(((({ theme, onClick, onMouseDown }) => (<StyledIcon theme={theme} name=\"Close\" onClick={onClick} onMouseDown={onMouseDown}/>)) as React.SFC<CloseIconProps>), { inner: {\n        get StyledIcon() { return StyledIcon as typeof StyledIcon; }\n    } });\nexport interface TagBuilderState {\n    inputValue: string;\n    value: Array<string>;\n    error?: React.ReactChild;\n    focused: boolean;\n    controlled: boolean;\n    inputPosition?: number;\n    valid?: boolean;\n}\nexport class TagBuilderInt extends React.Component<TagBuilderProps & FormContextProps, TagBuilderState> {\n    private _input: HTMLInputElement | null;\n    constructor(props: TagBuilderProps) {\n        super(props);\n        const tags = (props.value || props.defaultValue || []).map(lowerize);\n        this.state = {\n            value: tags,\n            inputValue: props.inputValue || '',\n            controlled: props.value !== undefined || props.inputValue !== undefined,\n            focused: false,\n            valid: true,\n            error: props.error,\n        };\n    }\n    UNSAFE_componentWillReceiveProps({ value, inputValue = '', error }: TagBuilderProps) {\n        if (this.state.controlled && value !== undefined) {\n            this.setState({\n                value: [...value],\n                inputValue: inputValue,\n            });\n        }\n        this.setState({ error });\n    }\n    componentDidMount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.subscribe(this);\n        }\n    }\n    componentWillUnmount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.unsubscribe(this);\n        }\n    }\n    private fireBeforeTagRemoveEvent(index: number): void {\n        const { onBeforeTagRemove } = this.props;\n        if (typeof onBeforeTagRemove === 'function') {\n            onBeforeTagRemove(index);\n        }\n    }\n    private inputChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { onInput } = this.props;\n        const { controlled, value: prevTags } = this.state;\n        const { value } = e.currentTarget;\n        if (typeof onInput === 'function') {\n            onInput({ value: value });\n        }\n        if (!controlled) {\n            this.setState({ inputValue: value, valid: value.length > 0 ? prevTags.indexOf(value) === -1 : true });\n        }\n    };\n    private keyDownHandler = (e: React.KeyboardEvent<HTMLDivElement>) => {\n        const { inputValue, controlled } = this.state;\n        const { shouldFinishTag } = this.props;\n        let isHandled = false;\n        const handleKeyEvent = () => {\n            e.stopPropagation();\n            e.preventDefault();\n            isHandled = true;\n        };\n        if (inputValue.length === 0) {\n            switch (e.keyCode) {\n                case KeyCodes.backspace:\n                    this.removePrevTag();\n                    handleKeyEvent();\n                    break;\n                case KeyCodes.delete:\n                    this.removeNextTag();\n                    handleKeyEvent();\n                    break;\n            }\n        }\n        if (!isHandled && !controlled) {\n            if (typeof shouldFinishTag === 'function') {\n                if (shouldFinishTag(e)) {\n                    this.addTag(inputValue);\n                    handleKeyEvent();\n                    return;\n                }\n            }\n            else if (finishTagKeys.indexOf(e.keyCode) !== -1) {\n                this.addTag(inputValue);\n                handleKeyEvent();\n            }\n            if (inputValue.length === 0) {\n                switch (e.keyCode) {\n                    case KeyCodes.end:\n                        this.inputMoveEnd();\n                        handleKeyEvent();\n                        break;\n                    case KeyCodes.home:\n                        this.inputMoveHome();\n                        handleKeyEvent();\n                        break;\n                    case KeyCodes.left:\n                        this.inputMoveLeft();\n                        handleKeyEvent();\n                        break;\n                    case KeyCodes.right:\n                        this.inputMoveRight();\n                        handleKeyEvent();\n                        break;\n                }\n            }\n        }\n    };\n    private inputFocused = () => {\n        const { onFocus } = this.props;\n        this.setState({\n            focused: true,\n        }, onFocus);\n    };\n    private inputBlurred = () => {\n        const { onBlur, appendTagOnBlur } = this.props;\n        if (!!appendTagOnBlur && !this.state.controlled) {\n            const { inputValue } = this.state;\n            if (inputValue) {\n                this.addTag(inputValue);\n            }\n        }\n        this.setState({\n            focused: false,\n        }, onBlur);\n    };\n    private inputMoveLeft() {\n        const { value } = this.state;\n        const { inputPosition = value.length } = this.state;\n        if (inputPosition > 0) {\n            this.setState({ inputPosition: inputPosition - 1 });\n        }\n    }\n    private inputMoveRight() {\n        const { value, inputPosition } = this.state;\n        if (inputPosition !== undefined && inputPosition < value.length) {\n            this.setState({ inputPosition: inputPosition + 1 });\n        }\n    }\n    private inputMoveEnd() {\n        const { value } = this.state;\n        this.setState({ inputPosition: value.length });\n    }\n    private inputMoveHome() {\n        this.setState({ inputPosition: 0 });\n    }\n    private setFocus = () => {\n        this._input && this._input.focus();\n    };\n    private addTag(inputValue: string) {\n        const { value: prevTags, valid } = this.state;\n        const { inputPosition = prevTags.length } = this.state;\n        inputValue = inputValue.trim().toLowerCase();\n        if (inputValue.length > 0 && valid) {\n            const tags = [...prevTags];\n            tags.splice(inputPosition, 0, inputValue);\n            this.setState({ inputValue: '', inputPosition: inputPosition + 1 }, () => this.onChange(tags));\n        }\n    }\n    private removePrevTag() {\n        const { value: prevTags } = this.state;\n        const { inputPosition = prevTags.length } = this.state;\n        if (inputPosition > 0) {\n            this.removeTag(inputPosition - 1);\n            this.setState({ inputPosition: inputPosition - 1 });\n        }\n    }\n    private removeNextTag() {\n        const { value: prevTags, inputPosition } = this.state;\n        if (inputPosition !== undefined && inputPosition < prevTags.length) {\n            this.removeTag(inputPosition);\n        }\n    }\n    private removeTag(index: number) {\n        const { value: prevTags } = this.state;\n        this.fireBeforeTagRemoveEvent(index);\n        const tags = [...prevTags.slice(0, index), ...prevTags.slice(index + 1)];\n        this.onChange(tags);\n    }\n    private onChange(value: Array<string>) {\n        const { onChange, name = '', form } = this.props;\n        if (!this.state.controlled) {\n            if (form) {\n                form.change({\n                    name,\n                    value,\n                });\n            }\n            else {\n                this.setState({\n                    value,\n                });\n            }\n        }\n        if (typeof onChange === 'function') {\n            onChange({\n                value,\n            });\n        }\n    }\n    private removeTagMouseDownHandler = (event: React.MouseEvent) => {\n        event.preventDefault();\n    };\n    private renderTag = (e: TagBuilderRenderEvent) => {\n        const { theme, disabled } = this.props;\n        return (<RestyledTagItem theme={theme} key={e.item + e.index}>\n        <StyledText>{e.item}</StyledText>\n        {!disabled && (<CloseIcon theme={theme} onMouseDown={this.removeTagMouseDownHandler} onClick={() => this.removeTag(e.index)}/>)}\n      </RestyledTagItem>);\n    };\n    private setContainer = (node: HTMLInputElement | null) => {\n        this._input = node;\n        const { inputRef } = this.props;\n        if (typeof inputRef === 'function') {\n            inputRef(node);\n        }\n    };\n    render() {\n        const { tagRenderer, info, disabled, borderless, theme, label, placeholder } = this.props;\n        const { value, inputValue, focused, valid, error } = this.state;\n        const { inputPosition = value.length } = this.state;\n        const border = getTextFieldBorderType(borderless, !!error, focused);\n        const renderer = tagRenderer || this.renderTag;\n        const children = value.map((item, index) => renderer({ item, index, tags: value }));\n        const hasValue = !!inputValue || value.length > 0;\n        children.splice(inputPosition, 0, <InputContainer key=\"input\" onKeyDown={this.keyDownHandler} tagRenderer={!!tagRenderer}>\n        <StyledInput theme={theme} disabled={disabled} ref={this.setContainer} type=\"text\" value={inputValue} onChange={this.inputChanged} onFocus={this.inputFocused} onBlur={this.inputBlurred} valid={valid}/>\n      </InputContainer>);\n        return (<TagBuilderContainer>\n        <StyledInputBox border={border} disabled={disabled} focused={focused} hasValue={hasValue}>\n          <StyledInputRow onClick={this.setFocus} label={label} hasValue={hasValue} placeholder={placeholder} error={!!error} focused={focused}>\n            <StyledTagsContainer labelShown={!!label} tagRenderer={!!tagRenderer}>\n              {children}\n            </StyledTagsContainer>\n          </StyledInputRow>\n          <InputIcon disabled={disabled} theme={theme} error={error} hasValue={hasValue}/>\n        </StyledInputBox>\n        {showInputInfo(error, info)}\n      </TagBuilderContainer>);\n    }\n    static inner = {\n        get RestyledTagItem() { return RestyledTagItem as typeof RestyledTagItem; },\n        get StyledText() { return StyledText as typeof StyledText; },\n        get CloseIcon() { return CloseIcon as typeof CloseIcon; },\n        get InputContainer() { return InputContainer as typeof InputContainer; },\n        get StyledInput() { return StyledInput as typeof StyledInput; },\n        get TagBuilderContainer() { return TagBuilderContainer as typeof TagBuilderContainer; },\n        get StyledInputBox() { return StyledInputBox as typeof StyledInputBox; },\n        get StyledInputRow() { return StyledInputRow as typeof StyledInputRow; },\n        get StyledTagsContainer() { return StyledTagsContainer as typeof StyledTagsContainer; },\n        get InputIcon() { return InputIcon as typeof InputIcon; }\n    };\n}\nexport const TagBuilder = withFormContext(TagBuilderInt);\nTagBuilder.displayName = 'TagBuilder';\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}