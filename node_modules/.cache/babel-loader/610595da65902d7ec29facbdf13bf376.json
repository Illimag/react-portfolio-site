{"ast":null,"code":"import _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  display: inline-block;\\n  width: fit-content;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport onClickOutside from 'react-onclickoutside';\nimport styled from '../../utils/styled';\nimport { FlyoutWindow } from './FlyoutWindow.part';\nvar FlyoutContainer = styled.div(_templateObject());\nvar StyledTargetWrapper = styled.div(_templateObject2());\n\nvar FlyoutInt = /*#__PURE__*/function (_React$Component) {\n  _inherits(FlyoutInt, _React$Component);\n\n  var _super = _createSuper(FlyoutInt);\n\n  function FlyoutInt(props) {\n    var _this;\n\n    _classCallCheck(this, FlyoutInt);\n\n    _this = _super.call(this, props);\n\n    _this.handleClickOutside = function () {\n      _this.state.open && !_this.state.controlled && _this.setOpen(false);\n    };\n\n    _this.setTargetRef = function (el) {\n      _this.targetContainer = el;\n    };\n\n    _this.onClick = function () {\n      if (!_this.state.controlled) {\n        _this.setOpen(!_this.state.open);\n      }\n    };\n\n    _this.state = {\n      controlled: props.open !== undefined,\n      open: props.open || false,\n      targetRect: undefined,\n      dirtyFlag: false\n    };\n    return _this;\n  }\n\n  _createClass(FlyoutInt, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateMeasurements();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (this.state.controlled && nextProps.open !== undefined) {\n        this.setOpen(nextProps.open);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var dirtyFlag = this.state.dirtyFlag;\n\n      if (dirtyFlag) {\n        this.updateMeasurements();\n        this.setState({\n          dirtyFlag: false\n        });\n      }\n    }\n  }, {\n    key: \"updateMeasurements\",\n    value: function updateMeasurements() {\n      if (this.targetContainer) {\n        var targetRect = this.targetContainer.getBoundingClientRect();\n        this.setState({\n          targetRect: targetRect\n        });\n      }\n    }\n  }, {\n    key: \"setOpen\",\n    value: function setOpen(open) {\n      var onChange = this.props.onChange;\n\n      if (typeof onChange === 'function') {\n        onChange({\n          open: open\n        });\n      }\n\n      this.setState({\n        open: open,\n        dirtyFlag: open === true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _a = this.props,\n          children = _a.children,\n          content = _a.content,\n          _0 = _a.open,\n          _1 = _a.onChange,\n          props = __rest(_a, [\"children\", \"content\", \"open\", \"onChange\"]);\n\n      var targetRect = this.state.targetRect;\n      var open = this.state.open;\n      return React.createElement(FlyoutContainer, {\n        ref: this.setTargetRef\n      }, React.createElement(StyledTargetWrapper, {\n        onClick: this.onClick\n      }, children), !!content && targetRect && open && React.createElement(FlyoutWindow, Object.assign({}, props, {\n        targetRect: targetRect\n      }), content));\n    }\n  }]);\n\n  return FlyoutInt;\n}(React.Component);\n\nFlyoutInt.inner = {\n  get FlyoutContainer() {\n    return FlyoutContainer;\n  },\n\n  get StyledTargetWrapper() {\n    return StyledTargetWrapper;\n  },\n\n  get FlyoutWindow() {\n    return FlyoutWindow;\n  }\n\n};\nexport var Flyout = onClickOutside(FlyoutInt);\nFlyout.displayName = 'Flyout';","map":{"version":3,"sources":["../../../../src/components/Flyout/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport onClickOutside, { AdditionalProps } from 'react-onclickoutside';\nimport styled from '../../utils/styled';\nimport { FlyoutWindow } from './FlyoutWindow.part';\nimport { FlyoutProps } from './Flyout.types.part';\nexport { FlyoutPosition, FlyoutChangeEvent, FlyoutProps } from './Flyout.types.part';\nconst FlyoutContainer = styled.div `\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n`;\nconst StyledTargetWrapper = styled.div ``;\nexport interface FlyoutState {\n    controlled: boolean;\n    targetRect?: ClientRect;\n    dirtyFlag: boolean;\n    open: boolean;\n}\nclass FlyoutInt extends React.Component<FlyoutProps, FlyoutState> {\n    private targetContainer: HTMLDivElement | null;\n    constructor(props: FlyoutProps) {\n        super(props);\n        this.state = {\n            controlled: props.open !== undefined,\n            open: props.open || false,\n            targetRect: undefined,\n            dirtyFlag: false,\n        };\n    }\n    handleClickOutside = () => {\n        this.state.open && !this.state.controlled && this.setOpen(false);\n    };\n    componentDidMount() {\n        this.updateMeasurements();\n    }\n    UNSAFE_componentWillReceiveProps(nextProps: FlyoutProps) {\n        if (this.state.controlled && nextProps.open !== undefined) {\n            this.setOpen(nextProps.open);\n        }\n    }\n    componentDidUpdate() {\n        const { dirtyFlag } = this.state;\n        if (dirtyFlag) {\n            this.updateMeasurements();\n            this.setState({\n                dirtyFlag: false,\n            });\n        }\n    }\n    private updateMeasurements() {\n        if (this.targetContainer) {\n            const targetRect = this.targetContainer.getBoundingClientRect();\n            this.setState({\n                targetRect,\n            });\n        }\n    }\n    private setTargetRef = (el: HTMLDivElement | null) => {\n        this.targetContainer = el;\n    };\n    private setOpen(open: boolean) {\n        const { onChange } = this.props;\n        if (typeof onChange === 'function') {\n            onChange({ open });\n        }\n        this.setState({\n            open,\n            dirtyFlag: open === true,\n        });\n    }\n    private onClick = () => {\n        if (!this.state.controlled) {\n            this.setOpen(!this.state.open);\n        }\n    };\n    render() {\n        const { children, content, open: _0, onChange: _1, ...props } = this.props;\n        const { targetRect } = this.state;\n        const { open } = this.state;\n        return (<FlyoutContainer ref={this.setTargetRef}>\n        <StyledTargetWrapper onClick={this.onClick}>{children}</StyledTargetWrapper>\n        {!!content && targetRect && open && (<FlyoutWindow {...props} targetRect={targetRect}>\n            {content}\n          </FlyoutWindow>)}\n      </FlyoutContainer>);\n    }\n    static inner = {\n        get FlyoutContainer() { return FlyoutContainer as typeof FlyoutContainer; },\n        get StyledTargetWrapper() { return StyledTargetWrapper as typeof StyledTargetWrapper; },\n        get FlyoutWindow() { return FlyoutWindow as typeof FlyoutWindow; }\n    };\n}\nexport const Flyout: React.ComponentClass<FlyoutProps & AdditionalProps> = onClickOutside(FlyoutInt);\nFlyout.displayName = 'Flyout';\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}