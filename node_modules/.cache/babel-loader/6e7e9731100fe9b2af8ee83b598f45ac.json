{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport styled from '../../utils/styled';\nimport { eventManagers } from '../../utils/eventManager';\nimport { FileUploadActions } from './FileUploaderDetails.types.part';\nimport { UploaderProgressBar } from './UploaderProgressBar.part';\nimport { UploaderProgressDetails } from './UploaderProgressDetails.part';\nimport { mergeData } from './helpers';\nimport { distance } from '../../distance';\nexport { FileUploadActions };\nconst initialState = {\n  files: [],\n  showDetails: false,\n  showUploader: false\n};\nconst StyledUploaderHost = styled.div`\n  z-index: 10001;\n  width: 100%;\n  position: fixed;\n  left: 0;\n  bottom: ${distance.large};\n  height: 0px;\n  overflow: visible;\n  display: flex;\n  align-items: flex-end;\n`;\nconst StyledDetailsHost = styled.div`\n  // We override the 'z-index' of the styled component 'FixedContainer' of 'Blocker' (which is called by 'Modal').\n  // This fixes the problem of showing 'UploadProgressDetails' behind modal in IE.\n  & > div:first-child {\n    z-index: 10001;\n  }\n`;\n/**\n * The host element for global async file upload process. Use as a singleton only.\n */\n\nexport class FileUploaderDetails extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onStart = e => {\n      this.props.onUpload(e);\n      this.setState({\n        showUploader: true\n      });\n    };\n\n    this.onChange = ({\n      files\n    }) => {\n      const {\n        files: currentFiles\n      } = this.state;\n      this.setState({\n        files: mergeData(files, currentFiles)\n      });\n    };\n\n    this.onCancel = ({\n      files\n    }) => {\n      const {\n        onCancel\n      } = this.props;\n\n      if (typeof onCancel === 'function') {\n        onCancel({\n          files: files.filter(item => item.progress < 100 && !item.canceled && !item.error)\n        });\n      }\n    };\n\n    this.onDelete = ({\n      files\n    }) => {\n      const {\n        onDelete\n      } = this.props;\n\n      if (typeof onDelete === 'function') {\n        onDelete({\n          files: files.filter(item => item.progress >= 100 && !item.canceled && !item.error)\n        });\n      }\n    };\n\n    this.onClear = uploaderId => {\n      const {\n        files: currentFiles\n      } = this.state;\n      const newFiles = currentFiles.filter(item => item.uploaderId !== uploaderId);\n      const oldFiles = currentFiles.filter(item => item.uploaderId === uploaderId);\n      this.setState({\n        files: newFiles\n      }, () => {\n        this.onCancel({\n          files: oldFiles\n        });\n      });\n    };\n\n    this.closeUploader = () => {\n      const {\n        onClose\n      } = this.props;\n\n      if (typeof onClose === 'function') {\n        onClose();\n      }\n\n      this.setState(Object.assign({}, initialState));\n    };\n\n    this.hideDetails = () => {\n      this.setState({\n        showDetails: false\n      });\n    };\n\n    this.showDetails = () => {\n      this.setState({\n        showDetails: true\n      });\n    };\n\n    const {\n      events\n    } = props;\n    this.eventManager = events || eventManagers[0];\n    this.state = Object.assign({}, initialState);\n  }\n\n  componentDidMount() {\n    const em = this.eventManager;\n    em.on(FileUploadActions.startUpload, this.onStart);\n    em.on(FileUploadActions.cancelUpload, this.onCancel);\n    em.on(FileUploadActions.uploadProgress, this.onChange);\n    em.on(FileUploadActions.uploadFailure, this.onChange);\n    em.on(FileUploadActions.showUploads, this.showDetails);\n    em.on(FileUploadActions.clearUploads, this.onClear);\n    em.on(FileUploadActions.deleteUploads, this.onDelete);\n    eventManagers.push(em);\n  }\n\n  componentWillUnmount() {\n    const em = this.eventManager;\n    em.off(FileUploadActions.startUpload, this.onStart);\n    em.off(FileUploadActions.cancelUpload, this.onCancel);\n    em.off(FileUploadActions.uploadProgress, this.onChange);\n    em.off(FileUploadActions.uploadFailure, this.onChange);\n    em.off(FileUploadActions.showUploads, this.showDetails);\n    em.off(FileUploadActions.clearUploads, this.onClear);\n    em.off(FileUploadActions.deleteUploads, this.onDelete);\n    eventManagers.splice(eventManagers.lastIndexOf(em), 1);\n  }\n\n  render() {\n    const _a = this.props,\n          {\n      events,\n      onCancel,\n      onClose,\n      onDelete,\n      onUpload\n    } = _a,\n          props = __rest(_a, [\"events\", \"onCancel\", \"onClose\", \"onDelete\", \"onUpload\"]);\n\n    const {\n      showDetails,\n      showUploader,\n      files\n    } = this.state;\n    const inprogressFiles = files.filter(item => !(item.canceled || item.error)).map(item => item.progress);\n    const errorFiles = files.filter(item => item.canceled || item.error);\n    const totalProgress = inprogressFiles.length > 0 ? inprogressFiles.reduce((acc, curr) => acc + curr, 0) / inprogressFiles.length : 100;\n    const scanning = files.filter(item => item.scanning && !item.canceled).length > 0;\n    const show = showUploader && files.length > 0;\n    return show && React.createElement(React.Fragment, null, React.createElement(StyledDetailsHost, null, React.createElement(UploaderProgressDetails, Object.assign({}, props, {\n      open: showDetails,\n      files: files,\n      onCancel: this.onCancel,\n      onDelete: this.onDelete,\n      onHide: this.hideDetails,\n      progressValue: totalProgress\n    }))), !showDetails && React.createElement(StyledUploaderHost, null, React.createElement(UploaderProgressBar, Object.assign({}, props, {\n      scanning: scanning,\n      progressValue: totalProgress,\n      inProgress: inprogressFiles.length,\n      errors: errorFiles.length,\n      total: files.length,\n      onShow: this.showDetails,\n      onClose: this.closeUploader\n    }))));\n  }\n\n}\nFileUploaderDetails.inner = {\n  get StyledDetailsHost() {\n    return StyledDetailsHost;\n  },\n\n  get UploaderProgressDetails() {\n    return UploaderProgressDetails;\n  },\n\n  get StyledUploaderHost() {\n    return StyledUploaderHost;\n  },\n\n  get UploaderProgressBar() {\n    return UploaderProgressBar;\n  }\n\n};","map":{"version":3,"sources":["../../../../src/components/FileUploaderDetails/index.tsx"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,MAAP,MAAmB,oBAAnB;AAEA,SAAuB,aAAvB,QAA4C,0BAA5C;AACA,SAA2C,iBAA3C,QAA+F,kCAA/F;AACA,SAAS,mBAAT,QAAoC,4BAApC;AACA,SAAS,uBAAT,QAAwC,gCAAxC;AACA,SAAS,SAAT,QAA0B,WAA1B;AACA,SAAS,QAAT,QAAyB,gBAAzB;AACA,SAAS,iBAAT;AA4BA,MAAM,YAAY,GAA6B;AAC3C,EAAA,KAAK,EAAE,EADoC;AAE3C,EAAA,WAAW,EAAE,KAF8B;AAG3C,EAAA,YAAY,EAAE;AAH6B,CAA/C;AAKA,MAAM,kBAAkB,GAAG,MAAM,CAAC,GAAI;;;;;YAK1B,QAAQ,CAAC,KAAK;;;;;CAL1B;AAWA,MAAM,iBAAiB,GAAG,MAAM,CAAC,GAAI;;;;;;CAArC;AAOA;;;;AAGA,OAAM,MAAO,mBAAP,SAAmC,KAAK,CAAC,SAAzC,CAAsG;AAExG,EAAA,WAAA,CAAY,KAAZ,EAA2C;AACvC,UAAM,KAAN;;AA6BI,SAAA,OAAA,GAAW,CAAD,IAA0C;AACxD,WAAK,KAAL,CAAW,QAAX,CAAoB,CAApB;AACA,WAAK,QAAL,CAAc;AACV,QAAA,YAAY,EAAE;AADJ,OAAd;AAGH,KALO;;AAMA,SAAA,QAAA,GAAW,CAAC;AAAE,MAAA;AAAF,KAAD,KAAsD;AACrE,YAAM;AAAE,QAAA,KAAK,EAAE;AAAT,UAA0B,KAAK,KAArC;AACA,WAAK,QAAL,CAAc;AACV,QAAA,KAAK,EAAE,SAAS,CAAC,KAAD,EAAQ,YAAR;AADN,OAAd;AAGH,KALO;;AAMA,SAAA,QAAA,GAAW,CAAC;AAAE,MAAA;AAAF,KAAD,KAAsD;AACrE,YAAM;AAAE,QAAA;AAAF,UAAe,KAAK,KAA1B;;AACA,UAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,QAAA,QAAQ,CAAC;AACL,UAAA,KAAK,EAAE,KAAK,CAAC,MAAN,CAAa,IAAI,IAAI,IAAI,CAAC,QAAL,GAAgB,GAAhB,IAAuB,CAAC,IAAI,CAAC,QAA7B,IAAyC,CAAC,IAAI,CAAC,KAApE;AADF,SAAD,CAAR;AAGH;AACJ,KAPO;;AAQA,SAAA,QAAA,GAAW,CAAC;AAAE,MAAA;AAAF,KAAD,KAAsD;AACrE,YAAM;AAAE,QAAA;AAAF,UAAe,KAAK,KAA1B;;AACA,UAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,QAAA,QAAQ,CAAC;AACL,UAAA,KAAK,EAAE,KAAK,CAAC,MAAN,CAAa,IAAI,IAAI,IAAI,CAAC,QAAL,IAAiB,GAAjB,IAAwB,CAAC,IAAI,CAAC,QAA9B,IAA0C,CAAC,IAAI,CAAC,KAArE;AADF,SAAD,CAAR;AAGH;AACJ,KAPO;;AAQA,SAAA,OAAA,GAAW,UAAD,IAAuB;AACrC,YAAM;AAAE,QAAA,KAAK,EAAE;AAAT,UAA0B,KAAK,KAArC;AACA,YAAM,QAAQ,GAAG,YAAY,CAAC,MAAb,CAAoB,IAAI,IAAI,IAAI,CAAC,UAAL,KAAoB,UAAhD,CAAjB;AACA,YAAM,QAAQ,GAAG,YAAY,CAAC,MAAb,CAAoB,IAAI,IAAI,IAAI,CAAC,UAAL,KAAoB,UAAhD,CAAjB;AACA,WAAK,QAAL,CAAc;AACV,QAAA,KAAK,EAAE;AADG,OAAd,EAEG,MAAK;AACJ,aAAK,QAAL,CAAc;AACV,UAAA,KAAK,EAAE;AADG,SAAd;AAGH,OAND;AAOH,KAXO;;AAYA,SAAA,aAAA,GAAgB,MAAK;AACzB,YAAM;AAAE,QAAA;AAAF,UAAc,KAAK,KAAzB;;AACA,UAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,QAAA,OAAO;AACV;;AACD,WAAK,QAAL,CAAa,MAAA,CAAA,MAAA,CAAA,EAAA,EACN,YADM,CAAb;AAGH,KARO;;AASA,SAAA,WAAA,GAAc,MAAK;AACvB,WAAK,QAAL,CAAc;AACV,QAAA,WAAW,EAAE;AADH,OAAd;AAGH,KAJO;;AAKA,SAAA,WAAA,GAAc,MAAK;AACvB,WAAK,QAAL,CAAc;AACV,QAAA,WAAW,EAAE;AADH,OAAd;AAGH,KAJO;;AAlFJ,UAAM;AAAE,MAAA;AAAF,QAAa,KAAnB;AACA,SAAK,YAAL,GAAoB,MAAM,IAAI,aAAa,CAAC,CAAD,CAA3C;AACA,SAAK,KAAL,GAAU,MAAA,CAAA,MAAA,CAAA,EAAA,EACH,YADG,CAAV;AAGH;;AACD,EAAA,iBAAiB,GAAA;AACb,UAAM,EAAE,GAAG,KAAK,YAAhB;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,WAAxB,EAAqC,KAAK,OAA1C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,YAAxB,EAAsC,KAAK,QAA3C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,cAAxB,EAAwC,KAAK,QAA7C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,aAAxB,EAAuC,KAAK,QAA5C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,WAAxB,EAAqC,KAAK,WAA1C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,YAAxB,EAAsC,KAAK,OAA3C;AACA,IAAA,EAAE,CAAC,EAAH,CAAM,iBAAiB,CAAC,aAAxB,EAAuC,KAAK,QAA5C;AACA,IAAA,aAAa,CAAC,IAAd,CAAmB,EAAnB;AACH;;AACD,EAAA,oBAAoB,GAAA;AAChB,UAAM,EAAE,GAAG,KAAK,YAAhB;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,WAAzB,EAAsC,KAAK,OAA3C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,YAAzB,EAAuC,KAAK,QAA5C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,cAAzB,EAAyC,KAAK,QAA9C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,aAAzB,EAAwC,KAAK,QAA7C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,WAAzB,EAAsC,KAAK,WAA3C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,YAAzB,EAAuC,KAAK,OAA5C;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,iBAAiB,CAAC,aAAzB,EAAwC,KAAK,QAA7C;AACA,IAAA,aAAa,CAAC,MAAd,CAAqB,aAAa,CAAC,WAAd,CAA0B,EAA1B,CAArB,EAAoD,CAApD;AACH;;AA4DD,EAAA,MAAM,GAAA;AACF,UAAM,EAAA,GAAA,KAAA,KAAN;AAAA,UAAM;AAAE,MAAA,MAAF;AAAU,MAAA,QAAV;AAAoB,MAAA,OAApB;AAA6B,MAAA,QAA7B;AAAuC,MAAA;AAAvC,QAA+C,EAArD;AAAA,UAAuD,KAAA,GAAA,MAAA,CAAA,EAAA,EAAA,CAAA,QAAA,EAAA,UAAA,EAAA,SAAA,EAAA,UAAA,EAAA,UAAA,CAAA,CAAvD;;AACA,UAAM;AAAE,MAAA,WAAF;AAAe,MAAA,YAAf;AAA6B,MAAA;AAA7B,QAAuC,KAAK,KAAlD;AACA,UAAM,eAAe,GAAG,KAAK,CAAC,MAAN,CAAa,IAAI,IAAI,EAAE,IAAI,CAAC,QAAL,IAAiB,IAAI,CAAC,KAAxB,CAArB,EAAqD,GAArD,CAAyD,IAAI,IAAI,IAAI,CAAC,QAAtE,CAAxB;AACA,UAAM,UAAU,GAAG,KAAK,CAAC,MAAN,CAAa,IAAI,IAAI,IAAI,CAAC,QAAL,IAAiB,IAAI,CAAC,KAA3C,CAAnB;AACA,UAAM,aAAa,GAAG,eAAe,CAAC,MAAhB,GAAyB,CAAzB,GAA6B,eAAe,CAAC,MAAhB,CAAuB,CAAC,GAAD,EAAM,IAAN,KAAe,GAAG,GAAG,IAA5C,EAAkD,CAAlD,IAAuD,eAAe,CAAC,MAApG,GAA6G,GAAnI;AACA,UAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,CAAa,IAAI,IAAI,IAAI,CAAC,QAAL,IAAiB,CAAC,IAAI,CAAC,QAA5C,EAAsD,MAAtD,GAA+D,CAAhF;AACA,UAAM,IAAI,GAAG,YAAY,IAAI,KAAK,CAAC,MAAN,GAAe,CAA5C;AACA,WAAQ,IAAI,IAAK,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACf,KAAA,CAAA,aAAA,CAAC,iBAAD,EAAkB,IAAlB,EACE,KAAA,CAAA,aAAA,CAAC,uBAAD,EAAwB,MAAA,CAAA,MAAA,CAAA,EAAA,EAAK,KAAL,EAAU;AAAE,MAAA,IAAI,EAAE,WAAR;AAAqB,MAAA,KAAK,EAAE,KAA5B;AAAmC,MAAA,QAAQ,EAAE,KAAK,QAAlD;AAA4D,MAAA,QAAQ,EAAE,KAAK,QAA3E;AAAqF,MAAA,MAAM,EAAE,KAAK,WAAlG;AAA+G,MAAA,aAAa,EAAE;AAA9H,KAAV,CAAxB,CADF,CADe,EAId,CAAC,WAAD,IAAiB,KAAA,CAAA,aAAA,CAAC,kBAAD,EAAmB,IAAnB,EACd,KAAA,CAAA,aAAA,CAAC,mBAAD,EAAoB,MAAA,CAAA,MAAA,CAAA,EAAA,EAAK,KAAL,EAAU;AAAE,MAAA,QAAQ,EAAE,QAAZ;AAAsB,MAAA,aAAa,EAAE,aAArC;AAAoD,MAAA,UAAU,EAAE,eAAe,CAAC,MAAhF;AAAwF,MAAA,MAAM,EAAE,UAAU,CAAC,MAA3G;AAAmH,MAAA,KAAK,EAAE,KAAK,CAAC,MAAhI;AAAwI,MAAA,MAAM,EAAE,KAAK,WAArJ;AAAkK,MAAA,OAAO,EAAE,KAAK;AAAhL,KAAV,CAApB,CADc,CAJH,CAAjB;AAQH;;AA3GuG;AA4GjG,mBAAA,CAAA,KAAA,GAAQ;AACX,MAAI,iBAAJ,GAAqB;AAAK,WAAO,iBAAP;AAAuD,GADtE;;AAEX,MAAI,uBAAJ,GAA2B;AAAK,WAAO,uBAAP;AAAmE,GAFxF;;AAGX,MAAI,kBAAJ,GAAsB;AAAK,WAAO,kBAAP;AAAyD,GAHzE;;AAIX,MAAI,mBAAJ,GAAuB;AAAK,WAAO,mBAAP;AAA2D;;AAJ5E,CAAR","sourcesContent":["import * as React from 'react';\nimport styled from '../../utils/styled';\nimport { UploadProgressDetailsLabels, UploaderProgressBarLabels } from '../../utils/labels';\nimport { EventManager, eventManagers } from '../../utils/eventManager';\nimport { FileBase, FileItem, FileProgress, FileUploadActions, FileUploaderDetailsEvent, } from './FileUploaderDetails.types.part';\nimport { UploaderProgressBar } from './UploaderProgressBar.part';\nimport { UploaderProgressDetails } from './UploaderProgressDetails.part';\nimport { mergeData } from './helpers';\nimport { distance } from '../../distance';\nexport { FileUploadActions, FileItem, FileProgress, FileBase, FileUploaderDetailsEvent };\nexport interface FileUploaderDetailsProps extends UploadProgressDetailsLabels, UploaderProgressBarLabels {\n    /**\n     * Sets the event manager to use. By default a standard event manager is used.\n     */\n    events?: EventManager;\n    /**\n     * Event emitted when files to upload are selected.\n     */\n    onUpload(e: FileUploaderDetailsEvent<FileItem>): void;\n    /**\n     * Event emitted when file upload has been canceled.\n     */\n    onCancel?(e: FileUploaderDetailsEvent<FileProgress>): void;\n    /**\n     * Event emitted when file upload should be deleted.\n     */\n    onDelete?(e: FileUploaderDetailsEvent<FileProgress>): void;\n    /**\n     * Event emitted when total progress overlay is closed.\n     */\n    onClose?(): void;\n}\nexport interface FileUploaderDetailsState {\n    files: Array<FileProgress>;\n    showDetails: boolean;\n    showUploader: boolean;\n}\nconst initialState: FileUploaderDetailsState = {\n    files: [],\n    showDetails: false,\n    showUploader: false,\n};\nconst StyledUploaderHost = styled.div `\n  z-index: 10001;\n  width: 100%;\n  position: fixed;\n  left: 0;\n  bottom: ${distance.large};\n  height: 0px;\n  overflow: visible;\n  display: flex;\n  align-items: flex-end;\n`;\nconst StyledDetailsHost = styled.div `\n  // We override the 'z-index' of the styled component 'FixedContainer' of 'Blocker' (which is called by 'Modal').\n  // This fixes the problem of showing 'UploadProgressDetails' behind modal in IE.\n  & > div:first-child {\n    z-index: 10001;\n  }\n`;\n/**\n * The host element for global async file upload process. Use as a singleton only.\n */\nexport class FileUploaderDetails extends React.Component<FileUploaderDetailsProps, FileUploaderDetailsState> {\n    private eventManager: EventManager;\n    constructor(props: FileUploaderDetailsProps) {\n        super(props);\n        const { events } = props;\n        this.eventManager = events || eventManagers[0];\n        this.state = {\n            ...initialState,\n        };\n    }\n    componentDidMount() {\n        const em = this.eventManager;\n        em.on(FileUploadActions.startUpload, this.onStart);\n        em.on(FileUploadActions.cancelUpload, this.onCancel);\n        em.on(FileUploadActions.uploadProgress, this.onChange);\n        em.on(FileUploadActions.uploadFailure, this.onChange);\n        em.on(FileUploadActions.showUploads, this.showDetails);\n        em.on(FileUploadActions.clearUploads, this.onClear);\n        em.on(FileUploadActions.deleteUploads, this.onDelete);\n        eventManagers.push(em);\n    }\n    componentWillUnmount() {\n        const em = this.eventManager;\n        em.off(FileUploadActions.startUpload, this.onStart);\n        em.off(FileUploadActions.cancelUpload, this.onCancel);\n        em.off(FileUploadActions.uploadProgress, this.onChange);\n        em.off(FileUploadActions.uploadFailure, this.onChange);\n        em.off(FileUploadActions.showUploads, this.showDetails);\n        em.off(FileUploadActions.clearUploads, this.onClear);\n        em.off(FileUploadActions.deleteUploads, this.onDelete);\n        eventManagers.splice(eventManagers.lastIndexOf(em), 1);\n    }\n    private onStart = (e: FileUploaderDetailsEvent<FileItem>) => {\n        this.props.onUpload(e);\n        this.setState({\n            showUploader: true,\n        });\n    };\n    private onChange = ({ files }: FileUploaderDetailsEvent<FileProgress>) => {\n        const { files: currentFiles } = this.state;\n        this.setState({\n            files: mergeData(files, currentFiles),\n        });\n    };\n    private onCancel = ({ files }: FileUploaderDetailsEvent<FileProgress>) => {\n        const { onCancel } = this.props;\n        if (typeof onCancel === 'function') {\n            onCancel({\n                files: files.filter(item => item.progress < 100 && !item.canceled && !item.error),\n            });\n        }\n    };\n    private onDelete = ({ files }: FileUploaderDetailsEvent<FileProgress>) => {\n        const { onDelete } = this.props;\n        if (typeof onDelete === 'function') {\n            onDelete({\n                files: files.filter(item => item.progress >= 100 && !item.canceled && !item.error),\n            });\n        }\n    };\n    private onClear = (uploaderId: string) => {\n        const { files: currentFiles } = this.state;\n        const newFiles = currentFiles.filter(item => item.uploaderId !== uploaderId);\n        const oldFiles = currentFiles.filter(item => item.uploaderId === uploaderId);\n        this.setState({\n            files: newFiles,\n        }, () => {\n            this.onCancel({\n                files: oldFiles,\n            });\n        });\n    };\n    private closeUploader = () => {\n        const { onClose } = this.props;\n        if (typeof onClose === 'function') {\n            onClose();\n        }\n        this.setState({\n            ...initialState,\n        });\n    };\n    private hideDetails = () => {\n        this.setState({\n            showDetails: false,\n        });\n    };\n    private showDetails = () => {\n        this.setState({\n            showDetails: true,\n        });\n    };\n    render() {\n        const { events, onCancel, onClose, onDelete, onUpload, ...props } = this.props;\n        const { showDetails, showUploader, files } = this.state;\n        const inprogressFiles = files.filter(item => !(item.canceled || item.error)).map(item => item.progress);\n        const errorFiles = files.filter(item => item.canceled || item.error);\n        const totalProgress = inprogressFiles.length > 0 ? inprogressFiles.reduce((acc, curr) => acc + curr, 0) / inprogressFiles.length : 100;\n        const scanning = files.filter(item => item.scanning && !item.canceled).length > 0;\n        const show = showUploader && files.length > 0;\n        return (show && (<>\n          <StyledDetailsHost>\n            <UploaderProgressDetails {...props} open={showDetails} files={files} onCancel={this.onCancel} onDelete={this.onDelete} onHide={this.hideDetails} progressValue={totalProgress}/>\n          </StyledDetailsHost>\n          {!showDetails && (<StyledUploaderHost>\n              <UploaderProgressBar {...props} scanning={scanning} progressValue={totalProgress} inProgress={inprogressFiles.length} errors={errorFiles.length} total={files.length} onShow={this.showDetails} onClose={this.closeUploader}/>\n            </StyledUploaderHost>)}\n        </>));\n    }\n    static inner = {\n        get StyledDetailsHost() { return StyledDetailsHost as typeof StyledDetailsHost; },\n        get UploaderProgressDetails() { return UploaderProgressDetails as typeof UploaderProgressDetails; },\n        get StyledUploaderHost() { return StyledUploaderHost as typeof StyledUploaderHost; },\n        get UploaderProgressBar() { return UploaderProgressBar as typeof UploaderProgressBar; }\n    };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}