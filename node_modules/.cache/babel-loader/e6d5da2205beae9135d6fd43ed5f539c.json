{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport styled from '../../utils/styled';\nimport { Slider } from '../Slider';\nimport { IndicatorKnob } from '../IndicatorKnob';\nimport { InteractiveSurface } from '../InteractiveSurface';\nimport { rgbToHsv, hsvToRgb, parseColor } from '../../utils/colors';\nimport { withFormContext } from '../../hoc/withFormContext';\nimport { distance } from '../../distance';\nimport { PaddedContainer } from '../PaddedContainer';\nimport { InputNotification } from '../InputNotification';\n\nfunction rgb(c) {\n  return `rgb(${c.r}, ${c.g}, ${c.b})`;\n}\n\nfunction computeColor(color) {\n  const fc = color;\n\n  if (typeof color === 'string') {\n    color = parseColor(color);\n  } else if (typeof fc.h === 'number') {\n    return {\n      hsv: fc,\n      color,\n      base: hsvToRgb(fc.h, 1, 1)\n    };\n  } else {\n    color = {\n      r: color.r,\n      g: color.g,\n      b: color.b,\n      a: color.a\n    };\n  }\n\n  const hsv = rgbToHsv(color.r, color.g, color.b, color.a);\n  return {\n    hsv,\n    color,\n    base: hsvToRgb(hsv.h, 1, 1)\n  };\n}\n\nconst PickerContainer = styled.div`\n  margin: ${distance.small};\n`;\nconst PickerSurface = styled(InteractiveSurface)`\n  width: ${props => props.width};\n  height: ${props => props.height};\n  position: relative;\n  background-color: ${props => props.color};\n`;\nconst PickerSaturation = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent 0%, black 100%);\n`;\nconst PickerValue = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: linear-gradient(to right, white 0%, transparent 100%);\n`;\nconst ColorSlider = styled(Slider)`\n  margin: ${distance.large} 0 -${distance.xsmall} 0;\n  background: linear-gradient(\n    to left,\n    red 0,\n    #f09 10%,\n    #cd00ff 20%,\n    #3200ff 30%,\n    #06f 40%,\n    #00fffd 50%,\n    #0f6 60%,\n    #35ff00 70%,\n    #cdff00 80%,\n    #f90 90%,\n    red 100%\n  );\n`;\nconst OpacitySlider = styled(Slider)`\n  margin: ${distance.large} 0 -${distance.xsmall} 0;\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAJUlEQVQYV2N89erVfwY0ICYmxoguxjgUFKI7GsTH5m4M3w1ChQC1/Ca8i2n1WgAAAABJRU5ErkJggg==');\n  &:before {\n    background: linear-gradient(to right, transparent 0px, rgba(0, 117, 120, 0.357) 100%);\n    border-radius: 10px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    content: '';\n  }\n`;\nconst ColorIndicator = styled(IndicatorKnob)`\n  box-shadow: 0 0 20px -5px ${props => props.disabled ? 'transparent' : '#000'};\n  border: 2px solid ${props => props.disabled ? '#ccc' : props.active ? '#eee' : '#fff'};\n`;\n\nclass ColorPickerInt extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.changeColor = e => {\n      const s = e.x;\n      const v = 1 - e.y;\n      const notify = this.props.onChange;\n      const current = this.state.value;\n      const rgb = hsvToRgb(current.h, s, v, current.a);\n      const selected = Object.assign({}, current, {\n        s: s,\n        v: v\n      }, rgb);\n\n      if (!this.state.controlled) {\n        this.changeTo({\n          value: selected\n        });\n      }\n\n      this.setState({\n        active: e.active\n      });\n\n      if (typeof notify === 'function') {\n        notify({\n          value: selected\n        });\n      }\n    };\n\n    this.changeBackground = e => {\n      const h = e.value;\n      const notify = this.props.onChange;\n      const current = this.state.value;\n      const rgb = hsvToRgb(h, current.s, current.v, current.a);\n      const selected = Object.assign({}, current, {\n        h,\n        s: current.s,\n        v: current.v\n      }, rgb);\n\n      if (!this.state.controlled) {\n        const base = hsvToRgb(h, 1, 1);\n        this.changeTo({\n          base,\n          value: selected\n        });\n      }\n\n      if (typeof notify === 'function') {\n        notify({\n          value: selected\n        });\n      }\n    };\n\n    this.changeOpacity = e => {\n      const alpha = e.value;\n      const notify = this.props.onChange;\n      const current = this.state.value;\n      const selected = Object.assign({}, current, {\n        a: alpha\n      });\n\n      if (!this.state.controlled) {\n        this.changeTo({\n          value: selected\n        });\n      }\n\n      if (typeof notify === 'function') {\n        notify({\n          value: selected\n        });\n      }\n    };\n\n    const {\n      hsv,\n      color,\n      base\n    } = computeColor(props.value || props.defaultValue || {\n      r: 0,\n      g: 0,\n      b: 0\n    });\n    this.state = {\n      controlled: props.value !== undefined,\n      active: false,\n      value: Object.assign({\n        a: 1\n      }, color, {\n        h: hsv.h,\n        s: hsv.s,\n        v: hsv.v\n      }),\n      base,\n      error: props.error\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps({\n    value,\n    error\n  }) {\n    if (value && value !== this.state.value) {\n      const {\n        hsv,\n        color,\n        base\n      } = computeColor(value || this.state.value);\n      this.setState({\n        value: Object.assign({\n          a: 1\n        }, color, {\n          h: hsv.h,\n          s: hsv.s,\n          v: hsv.v\n        }),\n        base\n      });\n    }\n\n    this.setState({\n      error\n    });\n  }\n\n  componentDidMount() {\n    const {\n      form\n    } = this.props;\n    const {\n      controlled\n    } = this.state;\n\n    if (!controlled && form) {\n      form.subscribe(this);\n    }\n  }\n\n  componentWillUnmount() {\n    const {\n      form\n    } = this.props;\n    const {\n      controlled\n    } = this.state;\n\n    if (!controlled && form) {\n      form.unsubscribe(this);\n    }\n  }\n\n  changeTo(state) {\n    const {\n      form,\n      name = ''\n    } = this.props;\n\n    if (form) {\n      form.change({\n        name,\n        value: state.value\n      });\n    } else {\n      this.setState(state);\n    }\n  }\n\n  render() {\n    const {\n      value,\n      active,\n      base,\n      error\n    } = this.state;\n\n    const _a = this.props,\n          {\n      defaultValue: _0,\n      value: _1,\n      onChange: _2,\n      onInput: _3,\n      allowOpacity,\n      hideBar,\n      width = '100%',\n      height = '200px',\n      info\n    } = _a,\n          props = __rest(_a, [\"defaultValue\", \"value\", \"onChange\", \"onInput\", \"allowOpacity\", \"hideBar\", \"width\", \"height\", \"info\"]);\n\n    const baseRgb = rgb(base);\n    const currentRgb = rgb(value);\n    const surface = {\n      color: baseRgb,\n      width,\n      height\n    };\n    return React.createElement(PickerContainer, Object.assign({}, props), React.createElement(PickerSurface, Object.assign({}, surface, {\n      onChange: this.changeColor\n    }), React.createElement(PickerValue, null), React.createElement(PickerSaturation, null), React.createElement(ColorIndicator, {\n      x: value.s,\n      y: 1 - value.v,\n      color: currentRgb,\n      active: active\n    })), !hideBar && React.createElement(ColorSlider, {\n      onChange: this.changeBackground,\n      value: value.h,\n      color: baseRgb\n    }), allowOpacity && React.createElement(OpacitySlider, {\n      onChange: this.changeOpacity,\n      value: value.a\n    }), (error || info) && React.createElement(PaddedContainer, {\n      top: \"small\",\n      bottom: \"xsmall\"\n    }, React.createElement(InputNotification, {\n      error: error,\n      info: info\n    })));\n  }\n\n}\n\nColorPickerInt.inner = {\n  get PickerContainer() {\n    return PickerContainer;\n  },\n\n  get PickerSurface() {\n    return PickerSurface;\n  },\n\n  get PickerValue() {\n    return PickerValue;\n  },\n\n  get PickerSaturation() {\n    return PickerSaturation;\n  },\n\n  get ColorIndicator() {\n    return ColorIndicator;\n  },\n\n  get ColorSlider() {\n    return ColorSlider;\n  },\n\n  get OpacitySlider() {\n    return OpacitySlider;\n  },\n\n  get PaddedContainer() {\n    return PaddedContainer;\n  },\n\n  get InputNotification() {\n    return InputNotification;\n  }\n\n};\n/**\n * A color picker for selecting a color in the UI.\n */\n\nexport const ColorPicker = withFormContext(ColorPickerInt);\nColorPicker.displayName = 'ColorPicker';","map":{"version":3,"sources":["../../../../src/components/ColorPicker/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled from '../../utils/styled';\nimport { InputProps } from '../../common';\nimport { Slider, SliderChangeEvent } from '../Slider';\nimport { IndicatorKnob } from '../IndicatorKnob';\nimport { InteractiveSurface, InteractiveSurfaceChangeEvent } from '../InteractiveSurface';\nimport { rgbToHsv, hsvToRgb, parseColor } from '../../utils/colors';\nimport { withFormContext, FormContextProps } from '../../hoc/withFormContext';\nimport { showInputInfo } from '../../utils/input';\nimport { distance } from '../../distance';\nimport { PaddedContainer } from '../PaddedContainer';\nimport { InputNotification } from '../InputNotification';\nexport interface ColorChangeEvent {\n    /**\n     * Gets the selected color.\n     */\n    value: FullColor;\n}\nexport interface FullColor {\n    h: number;\n    s: number;\n    v: number;\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n}\nexport interface RgbaColor {\n    /**\n     * The red part of the color.\n     */\n    r: number;\n    /**\n     * The green part of the color.\n     */\n    g: number;\n    /**\n     * The blue part of the color.\n     */\n    b: number;\n    /**\n     * The optional alpha part of the color - by default 1.\n     */\n    a?: number;\n}\nexport interface ColorPickerProps extends InputProps<FullColor | RgbaColor | string> {\n    /**\n     * Sets if the color wheel bar should be hidden.\n     */\n    hideBar?: boolean;\n    /**\n     * Sets if the transparency can be changed.\n     */\n    allowOpacity?: boolean;\n    /**\n     * Emitted once color changed.\n     */\n    onChange?(e: ColorChangeEvent): void;\n    /**\n     * Sets the height of the picker area, usually 200px.\n     */\n    height?: string;\n    /**\n     * Sets the width of the picker area, usually 100%.\n     */\n    width?: string;\n    /**\n     * @ignore\n     */\n    children?: void;\n}\nexport interface ColorPickerState {\n    controlled: boolean;\n    value: FullColor;\n    error?: React.ReactChild;\n    base: RgbaColor;\n    active: boolean;\n}\nfunction rgb(c: RgbaColor) {\n    return `rgb(${c.r}, ${c.g}, ${c.b})`;\n}\nfunction computeColor(color: FullColor | RgbaColor | string) {\n    const fc = color as FullColor;\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    else if (typeof fc.h === 'number') {\n        return {\n            hsv: fc,\n            color,\n            base: hsvToRgb(fc.h, 1, 1),\n        };\n    }\n    else {\n        color = {\n            r: color.r,\n            g: color.g,\n            b: color.b,\n            a: color.a,\n        };\n    }\n    const hsv = rgbToHsv(color.r, color.g, color.b, color.a);\n    return {\n        hsv,\n        color,\n        base: hsvToRgb(hsv.h, 1, 1),\n    };\n}\nconst PickerContainer = styled.div `\n  margin: ${distance.small};\n`;\ninterface PickerSurfaceProps {\n    color: string;\n    width: string;\n    height: string;\n}\nconst PickerSurface = styled(InteractiveSurface)<PickerSurfaceProps> `\n  width: ${props => props.width};\n  height: ${props => props.height};\n  position: relative;\n  background-color: ${props => props.color};\n`;\nconst PickerSaturation = styled.div `\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent 0%, black 100%);\n`;\nconst PickerValue = styled.div `\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: linear-gradient(to right, white 0%, transparent 100%);\n`;\nconst ColorSlider = styled(Slider) `\n  margin: ${distance.large} 0 -${distance.xsmall} 0;\n  background: linear-gradient(\n    to left,\n    red 0,\n    #f09 10%,\n    #cd00ff 20%,\n    #3200ff 30%,\n    #06f 40%,\n    #00fffd 50%,\n    #0f6 60%,\n    #35ff00 70%,\n    #cdff00 80%,\n    #f90 90%,\n    red 100%\n  );\n`;\nconst OpacitySlider = styled(Slider) `\n  margin: ${distance.large} 0 -${distance.xsmall} 0;\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAJUlEQVQYV2N89erVfwY0ICYmxoguxjgUFKI7GsTH5m4M3w1ChQC1/Ca8i2n1WgAAAABJRU5ErkJggg==');\n  &:before {\n    background: linear-gradient(to right, transparent 0px, rgba(0, 117, 120, 0.357) 100%);\n    border-radius: 10px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    content: '';\n  }\n`;\ninterface ColorIndicatorProps {\n    disabled?: boolean;\n    active: boolean;\n}\nconst ColorIndicator = styled(IndicatorKnob)<ColorIndicatorProps> `\n  box-shadow: 0 0 20px -5px ${props => (props.disabled ? 'transparent' : '#000')};\n  border: 2px solid ${props => (props.disabled ? '#ccc' : props.active ? '#eee' : '#fff')};\n`;\nclass ColorPickerInt extends React.PureComponent<ColorPickerProps & FormContextProps, ColorPickerState> {\n    constructor(props: ColorPickerProps) {\n        super(props);\n        const { hsv, color, base } = computeColor(props.value || props.defaultValue || { r: 0, g: 0, b: 0 });\n        this.state = {\n            controlled: props.value !== undefined,\n            active: false,\n            value: {\n                a: 1,\n                ...color,\n                h: hsv.h,\n                s: hsv.s,\n                v: hsv.v,\n            },\n            base,\n            error: props.error,\n        };\n    }\n    UNSAFE_componentWillReceiveProps({ value, error }: ColorPickerProps) {\n        if (value && value !== this.state.value) {\n            const { hsv, color, base } = computeColor(value || this.state.value);\n            this.setState({\n                value: {\n                    a: 1,\n                    ...color,\n                    h: hsv.h,\n                    s: hsv.s,\n                    v: hsv.v,\n                },\n                base,\n            });\n        }\n        this.setState({ error });\n    }\n    componentDidMount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.subscribe(this);\n        }\n    }\n    componentWillUnmount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.unsubscribe(this);\n        }\n    }\n    private changeTo<K extends keyof ColorPickerState>(state: Pick<ColorPickerState, K>) {\n        const { form, name = '' } = this.props;\n        if (form) {\n            form.change({\n                name,\n                value: (state as Pick<ColorPickerState, 'value'>).value,\n            });\n        }\n        else {\n            this.setState(state);\n        }\n    }\n    private changeColor = (e: InteractiveSurfaceChangeEvent) => {\n        const s = e.x;\n        const v = 1 - e.y;\n        const notify = this.props.onChange;\n        const current = this.state.value;\n        const rgb = hsvToRgb(current.h, s, v, current.a);\n        const selected = {\n            ...current,\n            s: s,\n            v: v,\n            ...rgb,\n        };\n        if (!this.state.controlled) {\n            this.changeTo({\n                value: selected,\n            });\n        }\n        this.setState({\n            active: e.active,\n        });\n        if (typeof notify === 'function') {\n            notify({\n                value: selected,\n            });\n        }\n    };\n    private changeBackground = (e: SliderChangeEvent) => {\n        const h = e.value;\n        const notify = this.props.onChange;\n        const current = this.state.value;\n        const rgb = hsvToRgb(h, current.s, current.v, current.a);\n        const selected = {\n            ...current,\n            h,\n            s: current.s,\n            v: current.v,\n            ...rgb,\n        };\n        if (!this.state.controlled) {\n            const base = hsvToRgb(h, 1, 1);\n            this.changeTo({\n                base,\n                value: selected,\n            });\n        }\n        if (typeof notify === 'function') {\n            notify({\n                value: selected,\n            });\n        }\n    };\n    private changeOpacity = (e: SliderChangeEvent) => {\n        const alpha = e.value;\n        const notify = this.props.onChange;\n        const current = this.state.value;\n        const selected = {\n            ...current,\n            a: alpha,\n        };\n        if (!this.state.controlled) {\n            this.changeTo({\n                value: selected,\n            });\n        }\n        if (typeof notify === 'function') {\n            notify({\n                value: selected,\n            });\n        }\n    };\n    render() {\n        const { value, active, base, error } = this.state;\n        const { defaultValue: _0, value: _1, onChange: _2, onInput: _3, allowOpacity, hideBar, width = '100%', height = '200px', info, ...props } = this.props;\n        const baseRgb = rgb(base);\n        const currentRgb = rgb(value);\n        const surface = {\n            color: baseRgb,\n            width,\n            height,\n        };\n        return (<PickerContainer {...props}>\n        <PickerSurface {...surface} onChange={this.changeColor}>\n          <PickerValue />\n          <PickerSaturation />\n          <ColorIndicator x={value.s} y={1 - value.v} color={currentRgb} active={active}/>\n        </PickerSurface>\n        {!hideBar && <ColorSlider onChange={this.changeBackground} value={value.h} color={baseRgb}/>}\n        {allowOpacity && <OpacitySlider onChange={this.changeOpacity} value={value.a}/>}\n        {(error || info) && (<PaddedContainer top=\"small\" bottom=\"xsmall\">\n            <InputNotification error={error} info={info}/>\n          </PaddedContainer>)}\n      </PickerContainer>);\n    }\n    static inner = {\n        get PickerContainer() { return PickerContainer as typeof PickerContainer; },\n        get PickerSurface() { return PickerSurface as typeof PickerSurface; },\n        get PickerValue() { return PickerValue as typeof PickerValue; },\n        get PickerSaturation() { return PickerSaturation as typeof PickerSaturation; },\n        get ColorIndicator() { return ColorIndicator as typeof ColorIndicator; },\n        get ColorSlider() { return ColorSlider as typeof ColorSlider; },\n        get OpacitySlider() { return OpacitySlider as typeof OpacitySlider; },\n        get PaddedContainer() { return PaddedContainer as typeof PaddedContainer; },\n        get InputNotification() { return InputNotification as typeof InputNotification; }\n    };\n}\n/**\n * A color picker for selecting a color in the UI.\n */\nexport const ColorPicker = withFormContext(ColorPickerInt);\nColorPicker.displayName = 'ColorPicker';\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}