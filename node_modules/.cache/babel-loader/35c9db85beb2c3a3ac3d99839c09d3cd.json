{"ast":null,"code":"import _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n  z-index: 9999;\\n  background: \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 0;\\n  width: 0;\\n  overflow: hidden;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  position: fixed;\\n  z-index: 10000;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport styled from '../../utils/styled';\nimport { transparentize } from '../../utils';\nimport { dark } from '../../colors';\nvar FixedContainer = styled.div(_templateObject());\nvar FocusKeeper = styled.a(_templateObject2());\nvar StyledModalBackground = styled(FixedContainer)(_templateObject3(), transparentize(dark, 0.4));\n/**\n * Defines a generic content blocking overlay element, e.g., for a modal dialog.\n */\n\nexport var Blocker = /*#__PURE__*/function (_React$Component) {\n  _inherits(Blocker, _React$Component);\n\n  var _super = _createSuper(Blocker);\n\n  function Blocker() {\n    var _this;\n\n    _classCallCheck(this, Blocker);\n\n    _this = _super.apply(this, arguments);\n\n    _this.keepFirstFocus = function () {\n      _this.keepFocus('first');\n    };\n\n    _this.keepLastFocus = function () {\n      _this.keepFocus('last');\n    };\n\n    _this.setElement = function (node) {\n      if (node && node !== _this.modalNode) {\n        var el = node.querySelector('*[tabindex]');\n        (el || node).focus();\n      }\n\n      _this.modalNode = node;\n    };\n\n    _this.onContainerClick = function (e) {\n      e.stopPropagation();\n\n      if (!_this.onScrollbarClick(e) && (e.target === e.currentTarget || e.target instanceof HTMLElement && e.target.parentElement === e.currentTarget)) {\n        _this.notifyClose(e);\n      }\n    };\n\n    _this.onScrollbarClick = function (e) {\n      return e.target instanceof HTMLElement && e.target.offsetLeft + e.target.scrollWidth < e.clientX;\n    };\n\n    _this.onKeyPress = function (e) {\n      if (e.keyCode === 27\n      /* escape */\n      ) {\n          _this.notifyClose(e);\n        }\n    };\n\n    return _this;\n  }\n\n  _createClass(Blocker, [{\n    key: \"getFocusables\",\n    value: function getFocusables() {\n      if (this.modalNode) {\n        return this.modalNode.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]');\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.changeBodyOverflow(true);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.changeBodyOverflow(false);\n    }\n  }, {\n    key: \"changeBodyOverflow\",\n    value: function changeBodyOverflow(open) {\n      var body = document.querySelector('body');\n\n      if (body) {\n        if (open) {\n          body.style.setProperty('overflow', 'hidden');\n        } else {\n          body.style.removeProperty('overflow');\n        }\n      }\n    }\n  }, {\n    key: \"keepFocus\",\n    value: function keepFocus(position) {\n      var focusables = this.getFocusables();\n\n      if (focusables && focusables.length > 2) {\n        var nextElement = position === 'first' ? focusables[1] : focusables[focusables.length - 2];\n        nextElement.focus();\n      }\n    }\n  }, {\n    key: \"notifyClose\",\n    value: function notifyClose(e) {\n      var onClose = this.props.onClose;\n\n      if (typeof onClose === 'function') {\n        onClose(e);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _a = this.props,\n          children = _a.children,\n          onClose = _a.onClose,\n          props = __rest(_a, [\"children\", \"onClose\"]);\n\n      return React.createElement(React.Fragment, null, React.createElement(FixedContainer, Object.assign({\n        ref: this.setElement,\n        onMouseDown: this.onContainerClick,\n        onKeyDown: this.onKeyPress\n      }, props), React.createElement(FocusKeeper, {\n        href: \"#\",\n        onFocus: this.keepLastFocus\n      }), children, React.createElement(FocusKeeper, {\n        href: \"#\",\n        onFocus: this.keepFirstFocus\n      })), React.createElement(StyledModalBackground, Object.assign({}, props)));\n    }\n  }]);\n\n  return Blocker;\n}(React.Component);\nBlocker.inner = {\n  get FixedContainer() {\n    return FixedContainer;\n  },\n\n  get FocusKeeper() {\n    return FocusKeeper;\n  },\n\n  get StyledModalBackground() {\n    return StyledModalBackground;\n  }\n\n};","map":{"version":3,"sources":["../../../../src/components/Blocker/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled from '../../utils/styled';\nimport { StandardProps } from '../../common';\nimport { KeyCodes, transparentize } from '../../utils';\nimport { dark } from '../../colors';\nexport interface BlockerProps extends StandardProps {\n    /**\n     * Event emitted when the user wants to remove the blocker.\n     */\n    onClose?(e: React.SyntheticEvent<HTMLElement>): void;\n}\nconst FixedContainer = styled.div `\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: fixed;\n  z-index: 10000;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\nconst FocusKeeper = styled.a `\n  height: 0;\n  width: 0;\n  overflow: hidden;\n`;\nconst StyledModalBackground = styled(FixedContainer) `\n  overflow: hidden;\n  z-index: 9999;\n  background: ${transparentize(dark, 0.4)};\n`;\n/**\n * Defines a generic content blocking overlay element, e.g., for a modal dialog.\n */\nexport class Blocker extends React.Component<BlockerProps> {\n    private modalNode: HTMLDivElement | null;\n    private getFocusables(): NodeListOf<Element> | undefined {\n        if (this.modalNode) {\n            return this.modalNode.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]');\n        }\n        return undefined;\n    }\n    componentDidMount() {\n        this.changeBodyOverflow(true);\n    }\n    componentWillUnmount() {\n        this.changeBodyOverflow(false);\n    }\n    private changeBodyOverflow(open: boolean) {\n        const body = document.querySelector('body');\n        if (body) {\n            if (open) {\n                body.style.setProperty('overflow', 'hidden');\n            }\n            else {\n                body.style.removeProperty('overflow');\n            }\n        }\n    }\n    private keepFocus(position: 'first' | 'last') {\n        const focusables = this.getFocusables();\n        if (focusables && focusables.length > 2) {\n            const nextElement = (position === 'first' ? focusables[1] : focusables[focusables.length - 2]) as HTMLElement;\n            nextElement.focus();\n        }\n    }\n    private keepFirstFocus = () => {\n        this.keepFocus('first');\n    };\n    private keepLastFocus = () => {\n        this.keepFocus('last');\n    };\n    private setElement = (node: HTMLDivElement | null) => {\n        if (node && node !== this.modalNode) {\n            const el = node.querySelector('*[tabindex]') as HTMLElement;\n            (el || node).focus();\n        }\n        this.modalNode = node;\n    };\n    private notifyClose(e: React.SyntheticEvent<HTMLElement>) {\n        const { onClose } = this.props;\n        if (typeof onClose === 'function') {\n            onClose(e);\n        }\n    }\n    private onContainerClick = (e: React.MouseEvent<HTMLElement>) => {\n        e.stopPropagation();\n        if (!this.onScrollbarClick(e) &&\n            (e.target === e.currentTarget || (e.target instanceof HTMLElement && e.target.parentElement === e.currentTarget))) {\n            this.notifyClose(e);\n        }\n    };\n    private onScrollbarClick = (e: React.MouseEvent<HTMLElement>) => {\n        return e.target instanceof HTMLElement && e.target.offsetLeft + e.target.scrollWidth < e.clientX;\n    };\n    private onKeyPress = (e: React.KeyboardEvent<HTMLElement>) => {\n        if (e.keyCode === KeyCodes.escape) {\n            this.notifyClose(e);\n        }\n    };\n    render() {\n        const { children, onClose, ...props } = this.props;\n        return (<>\n        <FixedContainer ref={this.setElement} onMouseDown={this.onContainerClick} onKeyDown={this.onKeyPress} {...props}>\n          <FocusKeeper href=\"#\" onFocus={this.keepLastFocus}/>\n          {children}\n          <FocusKeeper href=\"#\" onFocus={this.keepFirstFocus}/>\n        </FixedContainer>\n        <StyledModalBackground {...props}/>\n      </>);\n    }\n    static inner = {\n        get FixedContainer() { return FixedContainer as typeof FixedContainer; },\n        get FocusKeeper() { return FocusKeeper as typeof FocusKeeper; },\n        get StyledModalBackground() { return StyledModalBackground as typeof StyledModalBackground; }\n    };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}