{"ast":null,"code":"import _regeneratorRuntime from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0 \", \" 0 0;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  border: 2em solid transparent;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  padding-left: \", \";\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  list-style: none;\\n  width: 100%;\\n  position: absolute;\\n  transform: translateY(\", \"%);\\n  box-sizing: border-box;\\n  box-shadow: none;\\n  margin: 0;\\n  padding: 0;\\n  background: \", \";\\n  border: 1px solid\\n    \", \";\\n  max-height: 50vh;\\n  \", \";\\n  top: \", \"px;\\n  overflow-y: auto;\\n  z-index: 100;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  line-height: normal;\\n  border: 0;\\n  color: \", \";\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \"\\n  padding: \", \";\\n  margin: 0;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  color: \", \";\\n  font-family: inherit;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  cursor: \", \";\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  border: 1px solid \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  outline: 0;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport styled, { themed } from '../../utils/styled';\nimport { showInputInfo } from '../../utils/input';\nimport { InputIcon } from '../InputIcon';\nimport { transparent } from '../../colors';\nimport { distance } from '../../distance';\nimport { light } from '../../themes';\nimport { Icon } from '../Icon';\nimport { Responsive } from '../Responsive';\nimport { WindowPopup } from '../WindowPopup';\nimport { InteractiveList, InteractiveListDirection } from '../InteractiveList';\nimport { StyledInputRow, StyledInputBox, getTextFieldBorderType, StyledTagItem, StyledIconContainer } from '../../quarks';\nimport { getFontStyle } from '../../textStyles';\nvar DropdownContainer = styled.div(_templateObject());\nexport var DropdownSelect = styled.div(_templateObject2());\nvar DropdownInputBox = styled(StyledInputBox)(_templateObject3(), themed(function (_ref) {\n  var focused = _ref.focused,\n      ui4 = _ref.theme.ui4;\n  return focused ? ui4 : transparent;\n}));\nvar DropdownOptionText = styled.div(_templateObject4(), getFontStyle({\n  size: 'medium'\n}), function (props) {\n  return !props.labelShown ? \"\".concat(distance.medium) : \"\".concat(distance.large, \" \").concat(distance.medium, \" \").concat(distance.small);\n}, themed(function (_ref2) {\n  var theme = _ref2.theme,\n      disabled = _ref2.disabled;\n  return disabled ? theme.text3 : theme.text1;\n}), function (props) {\n  return props.disabled ? 'not-allowed' : 'auto';\n});\nvar SingleDropdownItem = styled.span(_templateObject5(), themed(function (props) {\n  return props.theme.text6;\n}));\nvar StyledStandardWrapper = styled('ul')(_templateObject6(), function (props) {\n  return props.direction === InteractiveListDirection.normal ? 0 : -100;\n}, themed(function (props) {\n  return props.theme.ui1;\n}), themed(function (_ref3) {\n  var border = _ref3.border,\n      _ref3$theme = _ref3.theme,\n      ui0 = _ref3$theme.ui0,\n      ui4 = _ref3$theme.ui4;\n  return border === 0\n  /* none */\n  ? ui0 : ui4;\n}), function (props) {\n  return props.direction === InteractiveListDirection.normal ? 'border-top-color: transparent' : 'border-bottom-color: transparent';\n}, function (props) {\n  return props.direction === InteractiveListDirection.normal ? -1 : -53;\n});\nvar StyledLabel = styled.div(_templateObject7(), distance.medium);\nvar DropdownPopup = styled(WindowPopup)(_templateObject8()); // tslint:disable-next-line\n\nvar NotOpenComponent = null;\nvar StandardWrapper = Object.assign(function (_a) {\n  var open = _a.open,\n      props = __rest(_a, [\"open\"]);\n\n  return open ? React.createElement(StyledStandardWrapper, Object.assign({}, props)) : NotOpenComponent;\n}, {\n  inner: {\n    get StyledStandardWrapper() {\n      return StyledStandardWrapper;\n    }\n\n  }\n});\nStandardWrapper.displayName = 'StandardWrapper';\n\nvar getMobileWrapper = function getMobileWrapper(label) {\n  return function (_ref4) {\n    var onClick = _ref4.onClick,\n        children = _ref4.children,\n        open = _ref4.open;\n    return open ? React.createElement(DropdownPopup, {\n      onClose: onClick,\n      label: label\n    }, children) : NotOpenComponent;\n  };\n};\n\nfunction getChosen(selected, multiple) {\n  if (multiple) {\n    return Array.isArray(selected) ? selected : [selected];\n  } else {\n    return [Array.isArray(selected) ? selected[0] : selected];\n  }\n}\n\nfunction getKeys(data, selected) {\n  return selected.map(function (index) {\n    var item = data[index];\n    return typeof item === 'string' ? item : item.key;\n  });\n}\n\nfunction getIndices(data, selected, multiple) {\n  var chosen = getChosen(selected, multiple);\n  var indices = [];\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var key = typeof item === 'string' ? item : item.key;\n\n    if (chosen.indexOf(key) !== -1) {\n      indices.push(i);\n    }\n  }\n\n  if (!multiple && indices.length > 1) {\n    indices.splice(1);\n  }\n\n  return indices;\n}\n\nfunction getContent(item) {\n  if (typeof item !== 'string') {\n    return item.content || item.key;\n  }\n\n  return item;\n}\n\nfunction getSingleContent(item, theme) {\n  var key = typeof item === 'string' ? item : item.key;\n  return React.createElement(SingleDropdownItem, {\n    theme: theme,\n    key: key\n  }, getContent(item));\n}\n\nvar MultipleDropdownItem = styled(StyledTagItem)(_templateObject9(), distance.small);\n\nfunction getMultipleContent(item, theme) {\n  var key = typeof item === 'string' ? item : item.key;\n  return React.createElement(MultipleDropdownItem, {\n    theme: theme,\n    key: key\n  }, getContent(item));\n}\n\nexport var DropdownFieldInt = /*#__PURE__*/function (_React$Component) {\n  _inherits(DropdownFieldInt, _React$Component);\n\n  var _super = _createSuper(DropdownFieldInt);\n\n  function DropdownFieldInt(props) {\n    var _this;\n\n    _classCallCheck(this, DropdownFieldInt);\n\n    _this = _super.call(this, props);\n\n    _this.show = function () {\n      return new Promise(function (resolve) {\n        _this.setState({\n          open: true\n        }, resolve);\n      });\n    };\n\n    _this.hide = function () {\n      return new Promise(function (resolve) {\n        _this.setState({\n          open: false\n        }, resolve);\n      });\n    };\n\n    _this.handleClickOutside = _this.hide;\n\n    _this.toggle = function () {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this$props, onToggle, disabled, open;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props = this.props, onToggle = _this$props.onToggle, disabled = _this$props.disabled;\n\n                if (disabled) {\n                  _context.next = 11;\n                  break;\n                }\n\n                open = this.state.open;\n\n                if (typeof onToggle === 'function') {\n                  onToggle({\n                    state: open ? 'close' : 'open'\n                  });\n                }\n\n                if (!open) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 7;\n                return this.hide();\n\n              case 7:\n                _context.next = 11;\n                break;\n\n              case 9:\n                _context.next = 11;\n                return this.show();\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    };\n\n    _this.control = function (e) {\n      switch (e.keyCode) {\n        case 13\n        /* enter */\n        :\n        case 32\n        /* space */\n        :\n          _this.show();\n\n          break;\n\n        case 27\n        /* escape */\n        :\n          _this.hide();\n\n          break;\n\n        case 38\n        /* up */\n        :\n        case 40\n        /* down */\n        :\n          if (!_this.state.open) {\n            _this.show();\n          }\n\n          return;\n\n        default:\n          return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n    };\n\n    _this.handleMouseDown = function (e) {\n      _this.toggle();\n\n      e.preventDefault();\n    };\n\n    _this.handleChange = function (_ref5) {\n      var value = _ref5.value;\n      var controlled = _this.state.controlled;\n      var _this$props2 = _this.props,\n          onChange = _this$props2.onChange,\n          data = _this$props2.data,\n          multiple = _this$props2.multiple,\n          form = _this$props2.form,\n          _this$props2$name = _this$props2.name,\n          name = _this$props2$name === void 0 ? '' : _this$props2$name;\n\n      if (!multiple) {\n        _this.hide();\n      }\n\n      if (!controlled) {\n        if (form) {\n          form.change({\n            name: name,\n            value: value\n          });\n        } else {\n          _this.setState({\n            value: value\n          });\n        }\n      }\n\n      if (typeof onChange === 'function') {\n        onChange({\n          value: value.length ? getKeys(data, value) : []\n        });\n      }\n    };\n\n    _this.renderList = function (screenSize) {\n      var _this$props3 = _this.props,\n          _this$props3$data = _this$props3.data,\n          data = _this$props3$data === void 0 ? [] : _this$props3$data,\n          theme = _this$props3.theme,\n          disabled = _this$props3.disabled,\n          multiple = _this$props3.multiple,\n          direction = _this$props3.direction,\n          disabledItems = _this$props3.disabledItems;\n      var _this$state = _this.state,\n          open = _this$state.open,\n          value = _this$state.value;\n      var mobile = screenSize === 'small';\n      var wrapper = mobile ? getMobileWrapper(React.createElement(StyledLabel, null, _this.props.label)) : StandardWrapper;\n      return React.createElement(InteractiveList, {\n        theme: theme,\n        data: data,\n        multiple: multiple,\n        open: open && !disabled,\n        onChange: _this.handleChange,\n        onClick: mobile ? _this.toggle : undefined,\n        onBlur: mobile ? undefined : _this.hide,\n        onKeyDown: mobile ? _this.control : undefined,\n        indices: value,\n        customWrapper: wrapper,\n        onClickOutside: function onClickOutside() {},\n        direction: direction,\n        autoPosition: undefined === direction,\n        disabledItems: disabledItems,\n        autoFocus: true\n      });\n    };\n\n    var data = props.data || [];\n    var value = [];\n\n    if (typeof props.value === 'string' || Array.isArray(props.value)) {\n      value = props.value;\n    } else if (typeof props.defaultValue === 'string' || Array.isArray(props.defaultValue)) {\n      value = props.defaultValue;\n    }\n\n    _this.state = {\n      value: getIndices(data, value, props.multiple),\n      open: props.open === true,\n      controlled: props.value !== undefined,\n      error: props.error\n    };\n    return _this;\n  }\n\n  _createClass(DropdownFieldInt, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var form = this.props.form;\n      var controlled = this.state.controlled;\n\n      if (!controlled && form) {\n        form.subscribe(this);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var form = this.props.form;\n      var controlled = this.state.controlled;\n\n      if (!controlled && form) {\n        form.unsubscribe(this);\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(_ref6) {\n      var _ref6$data = _ref6.data,\n          data = _ref6$data === void 0 ? [] : _ref6$data,\n          _ref6$value = _ref6.value,\n          value = _ref6$value === void 0 ? [] : _ref6$value,\n          error = _ref6.error,\n          multiple = _ref6.multiple;\n      var controlled = this.state.controlled;\n\n      if (controlled) {\n        this.setState({\n          value: getIndices(data, value, multiple)\n        });\n      }\n\n      this.setState({\n        error: error\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _a = this.props,\n          borderless = _a.borderless,\n          _0 = _a.children,\n          _1 = _a.value,\n          _2 = _a.defaultValue,\n          _3 = _a.onInput,\n          _a$data = _a.data,\n          data = _a$data === void 0 ? [] : _a$data,\n          theme = _a.theme,\n          classNameProp = _a.className,\n          label = _a.label,\n          placeholder = _a.placeholder,\n          _a$maxSelectedShown = _a.maxSelectedShown,\n          maxSelectedShown = _a$maxSelectedShown === void 0 ? 8 : _a$maxSelectedShown,\n          disabled = _a.disabled,\n          multiple = _a.multiple,\n          info = _a.info,\n          onChange = _a.onChange,\n          disabledItems = _a.disabledItems,\n          other = __rest(_a, [\"borderless\", \"children\", \"value\", \"defaultValue\", \"onInput\", \"data\", \"theme\", \"className\", \"label\", \"placeholder\", \"maxSelectedShown\", \"disabled\", \"multiple\", \"info\", \"onChange\", \"disabledItems\"]);\n\n      var _this$state2 = this.state,\n          openState = _this$state2.open,\n          value = _this$state2.value,\n          error = _this$state2.error;\n      var open = openState && !disabled;\n      var getContent = multiple ? getMultipleContent : getSingleContent;\n      var hasValue = !!value.length;\n      var border = getTextFieldBorderType(borderless, !!error, open);\n      var items = value.map(function (i) {\n        return data[i];\n      });\n      var th = theme || light;\n\n      if (value.length > maxSelectedShown) {\n        var rest = 1 + value.length - maxSelectedShown;\n        items.splice(maxSelectedShown - 1, rest, \"+ \".concat(rest));\n      }\n\n      return React.createElement(DropdownContainer, Object.assign({}, other), React.createElement(DropdownSelect, {\n        onMouseDown: this.handleMouseDown,\n        tabIndex: 0,\n        onKeyDown: this.control\n      }, React.createElement(DropdownInputBox, {\n        disabled: disabled,\n        hasValue: hasValue,\n        border: border,\n        focused: open,\n        theme: theme\n      }, React.createElement(StyledInputRow, {\n        label: label,\n        placeholder: placeholder,\n        error: !!error,\n        focused: open,\n        hasValue: hasValue\n      }, React.createElement(DropdownOptionText, {\n        labelShown: label !== undefined,\n        disabled: disabled\n      }, hasValue || label ? items.map(function (item) {\n        return getContent(item, theme);\n      }) : placeholder)), React.createElement(InputIcon, {\n        disabled: disabled,\n        theme: theme,\n        error: error,\n        hasValue: hasValue\n      }), React.createElement(StyledIconContainer, null, React.createElement(Icon, {\n        name: open ? 'KeyboardArrowUp' : 'KeyboardArrowDown',\n        color: disabled ? th.ui4 : th.ui5,\n        size: \"22px\"\n      })))), React.createElement(Responsive, {\n        render: this.renderList\n      }), showInputInfo(error, info));\n    }\n  }]);\n\n  return DropdownFieldInt;\n}(React.Component);\nDropdownFieldInt.inner = {\n  get StyledLabel() {\n    return StyledLabel;\n  },\n\n  get InteractiveList() {\n    return InteractiveList;\n  },\n\n  get DropdownContainer() {\n    return DropdownContainer;\n  },\n\n  get DropdownSelect() {\n    return DropdownSelect;\n  },\n\n  get DropdownInputBox() {\n    return DropdownInputBox;\n  },\n\n  get StyledInputRow() {\n    return StyledInputRow;\n  },\n\n  get DropdownOptionText() {\n    return DropdownOptionText;\n  },\n\n  get InputIcon() {\n    return InputIcon;\n  },\n\n  get StyledIconContainer() {\n    return StyledIconContainer;\n  },\n\n  get Icon() {\n    return Icon;\n  },\n\n  get Responsive() {\n    return Responsive;\n  }\n\n};","map":{"version":3,"sources":["../../../../src/components/DropdownField/DropdownFieldInt.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled, { themed } from '../../utils/styled';\nimport { KeyCodes } from '../../utils/keyCodes';\nimport { showInputInfo } from '../../utils/input';\nimport { ScreenSize } from '../../common';\nimport { InputIcon } from '../InputIcon';\nimport { FormContextProps } from '../../hoc/withFormContext';\nimport { transparent } from '../../colors';\nimport { distance } from '../../distance';\nimport { light } from '../../themes';\nimport { Icon } from '../Icon';\nimport { Responsive } from '../Responsive';\nimport { WindowPopup } from '../WindowPopup';\nimport { InteractiveList, InteractiveListChangeEvent, InteractiveListWrapperProps, InteractiveListDirection, InteractiveListBorderType, } from '../InteractiveList';\nimport { StyledInputRow, StyledInputBox, getTextFieldBorderType, StyledTagItem, StyledIconContainer, } from '../../quarks';\nimport { getFontStyle } from '../../textStyles';\nimport { DropdownFieldItem, DropdownFieldProps } from './DropdownField.types.part';\nconst DropdownContainer = styled.div `\n  position: relative;\n  outline: 0;\n`;\nexport const DropdownSelect = styled.div `\n  display: flex;\n`;\ninterface DropDownOptionsTextProps {\n    labelShown: boolean;\n    disabled?: boolean;\n}\nconst DropdownInputBox = styled(StyledInputBox) `\n  border: 1px solid ${themed(({ focused, theme: { ui4 } }) => (focused ? ui4 : transparent))};\n`;\nconst DropdownOptionText = styled.div<DropDownOptionsTextProps> `\n  ${getFontStyle({ size: 'medium' })}\n  padding: ${props => !props.labelShown ? `${distance.medium}` : `${distance.large} ${distance.medium} ${distance.small}`};\n  margin: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  color: ${themed(({ theme, disabled }) => (disabled ? theme.text3 : theme.text1))};\n  font-family: inherit;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  cursor: ${props => (props.disabled ? 'not-allowed' : 'auto')};\n`;\nconst SingleDropdownItem = styled.span `\n  display: inline-block;\n  line-height: normal;\n  border: 0;\n  color: ${themed(props => props.theme.text6)};\n`;\ninterface StyledStandardWrapperProps {\n    direction: InteractiveListDirection;\n    border: InteractiveListBorderType;\n}\nconst StyledStandardWrapper = styled('ul')<StyledStandardWrapperProps> `\n  list-style: none;\n  width: 100%;\n  position: absolute;\n  transform: translateY(${props => (props.direction === InteractiveListDirection.normal ? 0 : -100)}%);\n  box-sizing: border-box;\n  box-shadow: none;\n  margin: 0;\n  padding: 0;\n  background: ${themed(props => props.theme.ui1)};\n  border: 1px solid\n    ${themed(({ border, theme: { ui0, ui4 } }) => (border === InteractiveListBorderType.none ? ui0 : ui4))};\n  max-height: 50vh;\n  ${props => props.direction === InteractiveListDirection.normal\n    ? 'border-top-color: transparent'\n    : 'border-bottom-color: transparent'};\n  top: ${props => (props.direction === InteractiveListDirection.normal ? -1 : -53)}px;\n  overflow-y: auto;\n  z-index: 100;\n`;\nconst StyledLabel = styled.div `\n  padding-left: ${distance.medium};\n`;\nconst DropdownPopup = styled(WindowPopup) `\n  border: 2em solid transparent;\n`;\n// tslint:disable-next-line\nconst NotOpenComponent = null;\nconst StandardWrapper = Object.assign(((({ open, ...props }) => open ? <StyledStandardWrapper {...props}/> : NotOpenComponent) as React.SFC<InteractiveListWrapperProps>), { inner: {\n        get StyledStandardWrapper() { return StyledStandardWrapper as typeof StyledStandardWrapper; }\n    } });\nStandardWrapper.displayName = 'StandardWrapper';\nconst getMobileWrapper = (label?: React.ReactChild) => ({ onClick, children, open, }: InteractiveListWrapperProps & {\n    children?: React.ReactNode;\n}) => open ? (<DropdownPopup onClose={onClick} label={label}>\n      {children}\n    </DropdownPopup>) : (NotOpenComponent);\nfunction getChosen(selected: string | Array<string>, multiple?: boolean) {\n    if (multiple) {\n        return Array.isArray(selected) ? selected : [selected];\n    }\n    else {\n        return [Array.isArray(selected) ? selected[0] : selected];\n    }\n}\nfunction getKeys(data: Array<string | DropdownFieldItem>, selected: Array<number>) {\n    return selected.map(index => {\n        const item = data[index];\n        return typeof item === 'string' ? item : item.key;\n    });\n}\nfunction getIndices(data: Array<string | DropdownFieldItem>, selected: string | Array<string>, multiple?: boolean) {\n    const chosen = getChosen(selected, multiple);\n    const indices: Array<number> = [];\n    for (let i = 0; i < data.length; i++) {\n        const item = data[i];\n        const key = typeof item === 'string' ? item : item.key;\n        if (chosen.indexOf(key) !== -1) {\n            indices.push(i);\n        }\n    }\n    if (!multiple && indices.length > 1) {\n        indices.splice(1);\n    }\n    return indices;\n}\nfunction getContent(item: string | DropdownFieldItem) {\n    if (typeof item !== 'string') {\n        return item.content || item.key;\n    }\n    return item;\n}\nfunction getSingleContent(item: string | DropdownFieldItem, theme?: any) {\n    const key = typeof item === 'string' ? item : item.key;\n    return (<SingleDropdownItem theme={theme} key={key}>\n      {getContent(item)}\n    </SingleDropdownItem>);\n}\nconst MultipleDropdownItem = styled(StyledTagItem as any) `\n  margin: 0 ${distance.small} 0 0;\n`;\nfunction getMultipleContent(item: string | DropdownFieldItem, theme?: any) {\n    const key = typeof item === 'string' ? item : item.key;\n    return (<MultipleDropdownItem theme={theme} key={key}>\n      {getContent(item)}\n    </MultipleDropdownItem>);\n}\ninterface DropdownState {\n    value: Array<number>;\n    error?: React.ReactChild;\n    open: boolean;\n    controlled: boolean;\n}\nexport class DropdownFieldInt extends React.Component<DropdownFieldProps & FormContextProps, DropdownState> {\n    constructor(props: DropdownFieldProps) {\n        super(props);\n        const data = props.data || [];\n        let value: string | Array<string> = [];\n        if (typeof props.value === 'string' || Array.isArray(props.value)) {\n            value = props.value;\n        }\n        else if (typeof props.defaultValue === 'string' || Array.isArray(props.defaultValue)) {\n            value = props.defaultValue;\n        }\n        this.state = {\n            value: getIndices(data, value, props.multiple),\n            open: props.open === true,\n            controlled: props.value !== undefined,\n            error: props.error,\n        };\n    }\n    componentDidMount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.subscribe(this);\n        }\n    }\n    componentWillUnmount() {\n        const { form } = this.props;\n        const { controlled } = this.state;\n        if (!controlled && form) {\n            form.unsubscribe(this);\n        }\n    }\n    UNSAFE_componentWillReceiveProps({ data = [], value = [], error, multiple }: DropdownFieldProps) {\n        const { controlled } = this.state;\n        if (controlled) {\n            this.setState({\n                value: getIndices(data, value, multiple),\n            });\n        }\n        this.setState({ error });\n    }\n    private show = () => new Promise(resolve => {\n        this.setState({ open: true }, resolve);\n    });\n    private hide = () => new Promise(resolve => {\n        this.setState({ open: false }, resolve);\n    });\n    handleClickOutside = this.hide;\n    private toggle = async () => {\n        const { onToggle, disabled } = this.props;\n        if (!disabled) {\n            const { open } = this.state;\n            if (typeof onToggle === 'function') {\n                onToggle({\n                    state: open ? 'close' : 'open',\n                });\n            }\n            if (open) {\n                await this.hide();\n            }\n            else {\n                await this.show();\n            }\n        }\n    };\n    private control = (e: React.KeyboardEvent<HTMLDivElement>) => {\n        switch (e.keyCode) {\n            case KeyCodes.enter:\n            case KeyCodes.space:\n                this.show();\n                break;\n            case KeyCodes.escape:\n                this.hide();\n                break;\n            case KeyCodes.up:\n            case KeyCodes.down:\n                if (!this.state.open) {\n                    this.show();\n                }\n                return;\n            default:\n                return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n    };\n    private handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n        this.toggle();\n        e.preventDefault();\n    };\n    private handleChange = ({ value }: InteractiveListChangeEvent) => {\n        const { controlled } = this.state;\n        const { onChange, data, multiple, form, name = '' } = this.props;\n        if (!multiple) {\n            this.hide();\n        }\n        if (!controlled) {\n            if (form) {\n                form.change({\n                    name,\n                    value,\n                });\n            }\n            else {\n                this.setState({\n                    value: value,\n                });\n            }\n        }\n        if (typeof onChange === 'function') {\n            onChange({\n                value: value.length ? getKeys(data, value) : [],\n            });\n        }\n    };\n    private renderList = (screenSize?: ScreenSize) => {\n        const { data = [], theme, disabled, multiple, direction, disabledItems } = this.props;\n        const { open, value } = this.state;\n        const mobile = screenSize === 'small';\n        const wrapper = mobile ? getMobileWrapper(<StyledLabel>{this.props.label}</StyledLabel>) : StandardWrapper;\n        return (<InteractiveList theme={theme} data={data} multiple={multiple} open={open && !disabled} onChange={this.handleChange} onClick={mobile ? this.toggle : undefined} onBlur={mobile ? undefined : this.hide} onKeyDown={mobile ? this.control : undefined} indices={value} customWrapper={wrapper} onClickOutside={() => { }} direction={direction} autoPosition={undefined === direction} disabledItems={disabledItems} autoFocus/>);\n    };\n    render() {\n        const { borderless, children: _0, value: _1, defaultValue: _2, onInput: _3, data = [], theme, className: classNameProp, label, placeholder, maxSelectedShown = 8, disabled, multiple, info, onChange, disabledItems, ...other } = this.props;\n        const { open: openState, value, error } = this.state;\n        const open = openState && !disabled;\n        const getContent = multiple ? getMultipleContent : getSingleContent;\n        const hasValue = !!value.length;\n        const border = getTextFieldBorderType(borderless, !!error, open);\n        const items = value.map(i => data[i]);\n        const th = theme || light;\n        if (value.length > maxSelectedShown) {\n            const rest = 1 + value.length - maxSelectedShown;\n            items.splice(maxSelectedShown - 1, rest, `+ ${rest}`);\n        }\n        return (<DropdownContainer {...other}>\n        <DropdownSelect onMouseDown={this.handleMouseDown} tabIndex={0} onKeyDown={this.control}>\n          <DropdownInputBox disabled={disabled} hasValue={hasValue} border={border} focused={open} theme={theme}>\n            <StyledInputRow label={label} placeholder={placeholder} error={!!error} focused={open} hasValue={hasValue}>\n              <DropdownOptionText labelShown={label !== undefined} disabled={disabled}>\n                {hasValue || label ? items.map(item => getContent(item, theme)) : placeholder}\n              </DropdownOptionText>\n            </StyledInputRow>\n            <InputIcon disabled={disabled} theme={theme} error={error} hasValue={hasValue}/>\n            <StyledIconContainer>\n              <Icon name={open ? 'KeyboardArrowUp' : 'KeyboardArrowDown'} color={disabled ? th.ui4 : th.ui5} size=\"22px\"/>\n            </StyledIconContainer>\n          </DropdownInputBox>\n        </DropdownSelect>\n        <Responsive render={this.renderList}/>\n        {showInputInfo(error, info)}\n      </DropdownContainer>);\n    }\n    static inner = {\n        get StyledLabel() { return StyledLabel as typeof StyledLabel; },\n        get InteractiveList() { return InteractiveList as typeof InteractiveList; },\n        get DropdownContainer() { return DropdownContainer as typeof DropdownContainer; },\n        get DropdownSelect() { return DropdownSelect as typeof DropdownSelect; },\n        get DropdownInputBox() { return DropdownInputBox as typeof DropdownInputBox; },\n        get StyledInputRow() { return StyledInputRow as typeof StyledInputRow; },\n        get DropdownOptionText() { return DropdownOptionText as typeof DropdownOptionText; },\n        get InputIcon() { return InputIcon as typeof InputIcon; },\n        get StyledIconContainer() { return StyledIconContainer as typeof StyledIconContainer; },\n        get Icon() { return Icon as typeof Icon; },\n        get Responsive() { return Responsive as typeof Responsive; }\n    };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}