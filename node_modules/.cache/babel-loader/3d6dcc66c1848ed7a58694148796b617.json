{"ast":null,"code":"import _classCallCheck from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: left;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: none;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    \", \"\\n\\n    table-layout: \", \";\\n    border-collapse: collapse;\\n    width: 100%;\\n    color: \", \";\\n    border: \", \";\\n\\n    > thead > tr > th,\\n    > tbody > tr > td {\\n      padding: \", \";\\n\\n      &:not(:last-child) {\\n        padding-right: 0;\\n      }\\n    }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport memoize from 'memoize-one';\nimport styled, { themed, css } from '../../utils/styled';\nimport { sortObjectList } from '../../utils/sort';\nimport { distance } from '../../distance';\nimport { defaultCellRenderer, StyledTableHead, StyledTableHeaderRow, StyledTableHeader, StyledTableRow, StyledTableFoot, defaultBodyRenderer, getColumns, getDefaultHeaderCellRenderer, handleDataClickedEvent } from './TableShared.part';\nimport { getFontStyle } from '../../textStyles';\nvar StyledTable = styled.table(themed(function (_ref) {\n  var theme = _ref.theme,\n      borderless = _ref.borderless,\n      condensed = _ref.condensed;\n  return css(_templateObject(), getFontStyle({\n    size: 'small',\n    lineHeight: 'xSmall'\n  }), theme.tableLayout, theme.text6, borderless ? 'none' : theme.tableBorder, condensed ? \"\".concat(distance.small, \" \").concat(distance.large) : theme.tableHeadPadding);\n}));\nvar StyledTableBody = styled.tbody(_templateObject2());\nvar TableHost = Object.assign(function (_a) {\n  var head = _a.head,\n      foot = _a.foot,\n      theme = _a.theme,\n      children = _a.children,\n      props = __rest(_a, [\"head\", \"foot\", \"theme\", \"children\"]);\n\n  return React.createElement(StyledTable, Object.assign({\n    theme: theme\n  }, props), head, React.createElement(StyledTableBody, {\n    theme: theme\n  }, children), foot);\n}, {\n  inner: {\n    get StyledTable() {\n      return StyledTable;\n    },\n\n    get StyledTableBody() {\n      return StyledTableBody;\n    }\n\n  }\n});\nvar HiddenCell = styled.td(_templateObject3());\nvar StyledTableCell = styled.td(_templateObject4());\nvar StyledPlaceholderCell = styled(StyledTableCell)(_templateObject5());\n\nfunction defaultRowKeyGetter(_ref2) {\n  var key = _ref2.key;\n  return key;\n}\n\nfunction normalizeSortBy(sortBy) {\n  if (!sortBy) {\n    return undefined;\n  }\n\n  if (typeof sortBy === 'string') {\n    if (sortBy[0] === '-') {\n      return {\n        columnKey: sortBy.substr(1),\n        order: 'descending'\n      };\n    } else {\n      return {\n        columnKey: sortBy,\n        order: 'ascending'\n      };\n    }\n  }\n\n  return {\n    columnKey: sortBy.columnKey,\n    order: sortBy.order || 'ascending'\n  };\n}\n\nexport var TableBasic = /*#__PURE__*/function (_React$Component) {\n  _inherits(TableBasic, _React$Component);\n\n  var _super = _createSuper(TableBasic);\n\n  function TableBasic(props) {\n    var _this;\n\n    _classCallCheck(this, TableBasic);\n\n    _this = _super.call(this, props);\n    _this.getIndices = memoize(function (data, grouping, sorting) {\n      return sorting ? sortObjectList(data, sorting.columnKey, sorting.order, grouping) : sortObjectList(data, undefined, undefined, grouping);\n    });\n\n    _this.defaultHeadRenderer = function (_ref3) {\n      var columns = _ref3.columns,\n          sortBy = _ref3.sortBy,\n          keys = _ref3.keys;\n      var onSort = _this.props.onSort;\n      var defaultHeaderCellRenderer = getDefaultHeaderCellRenderer(function (columnKey, order) {\n        _this.setState({\n          sorting: {\n            columnKey: columnKey,\n            order: order\n          }\n        }, function () {\n          if (typeof onSort === 'function') {\n            onSort({\n              column: keys.indexOf(columnKey),\n              key: columnKey,\n              order: order\n            });\n          }\n        });\n      });\n      var _this$props = _this.props,\n          indexed = _this$props.indexed,\n          theme = _this$props.theme,\n          _this$props$headerCel = _this$props.headerCellRenderer,\n          headerCellRenderer = _this$props$headerCel === void 0 ? defaultHeaderCellRenderer : _this$props$headerCel;\n      return React.createElement(StyledTableHead, {\n        theme: theme\n      }, React.createElement(StyledTableHeaderRow, {\n        theme: theme\n      }, indexed && React.createElement(StyledTableHeader, {\n        onClick: function onClick(e) {\n          return _this.headerClicked(e, -1, '#');\n        },\n        theme: theme\n      }, headerCellRenderer({\n        column: -1,\n        key: '',\n        row: -1,\n        value: '#',\n        render: defaultHeaderCellRenderer\n      })), keys.map(function (key, cell) {\n        var column = columns[key];\n        var hidden = typeof column !== 'string' && column.hidden;\n\n        if (!hidden) {\n          var name = typeof column === 'string' ? column : column.header;\n          var width = typeof column === 'string' ? undefined : column.width;\n\n          var sortable = _this.isSortable(key, columns);\n\n          var direction = sortable && sortBy && (sortBy.columnKey !== key ? undefined : sortBy.order);\n          return React.createElement(StyledTableHeader, {\n            sortable: sortable,\n            width: width,\n            key: key,\n            onClick: function onClick(e) {\n              return _this.headerClicked(e, cell, key);\n            },\n            theme: theme\n          }, headerCellRenderer({\n            column: cell,\n            key: key,\n            row: -1,\n            sorting: direction,\n            value: name,\n            render: defaultHeaderCellRenderer\n          }));\n        }\n\n        return React.createElement(HiddenCell, {\n          key: key\n        });\n      })));\n    };\n\n    _this.defaultFootRenderer = function (_ref4) {\n      var columns = _ref4.columns,\n          keys = _ref4.keys,\n          sortBy = _ref4.sortBy;\n      var _this$props2 = _this.props,\n          indexed = _this$props2.indexed,\n          theme = _this$props2.theme,\n          _this$props2$footerCe = _this$props2.footerCellRenderer,\n          footerCellRenderer = _this$props2$footerCe === void 0 ? defaultCellRenderer : _this$props2$footerCe;\n      return React.createElement(StyledTableFoot, {\n        theme: theme\n      }, React.createElement(StyledTableRow, {\n        theme: theme\n      }, indexed && React.createElement(StyledTableCell, {\n        onClick: function onClick(e) {\n          return _this.footerClicked(e, -1, '#');\n        },\n        theme: theme\n      }, footerCellRenderer({\n        column: -1,\n        key: '',\n        row: -1,\n        value: '',\n        render: defaultCellRenderer\n      })), keys.map(function (key, i) {\n        var column = columns[key];\n\n        var sortable = _this.isSortable(key, columns);\n\n        var direction = sortable && sortBy && (sortBy.columnKey !== key ? undefined : sortBy.order);\n        var hidden = typeof column !== 'string' && column.hidden;\n\n        if (!hidden) {\n          var name = typeof column === 'string' ? undefined : column.footer;\n          return React.createElement(StyledTableCell, {\n            key: key,\n            theme: theme,\n            onClick: function onClick(e) {\n              return _this.footerClicked(e, i, key);\n            }\n          }, footerCellRenderer({\n            column: i,\n            key: key,\n            row: -1,\n            value: name,\n            sorting: direction,\n            render: defaultCellRenderer\n          }));\n        }\n\n        return React.createElement(HiddenCell, {\n          key: key\n        });\n      })));\n    };\n\n    _this.defaultRowRenderer = function (_ref5) {\n      var cells = _ref5.cells,\n          index = _ref5.index;\n      var theme = _this.props.theme;\n      return React.createElement(StyledTableRow, {\n        key: index,\n        theme: theme\n      }, cells);\n    };\n\n    _this.state = {\n      controlledSorting: false\n    };\n    return _this;\n  }\n\n  _createClass(TableBasic, [{\n    key: \"isSortable\",\n    value: function isSortable(key, cols) {\n      var sortBy = this.props.sortBy;\n      var col = cols[key];\n      return !sortBy && (!col || typeof col !== 'string' && col.sortable);\n    }\n  }, {\n    key: \"headerClicked\",\n    value: function headerClicked(e, column, key) {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          onHeaderClick = _this$props3.onHeaderClick,\n          onSort = _this$props3.onSort,\n          _this$props3$data = _this$props3.data,\n          data = _this$props3$data === void 0 ? [] : _this$props3$data,\n          columns = _this$props3.columns;\n      e.preventDefault();\n\n      if (typeof onHeaderClick === 'function') {\n        onHeaderClick({\n          column: column,\n          key: key,\n          row: -1\n        });\n      } else if (this.isSortable(key, getColumns(data, columns))) {\n        this.setState(function (_ref6) {\n          var sorting = _ref6.sorting;\n          var isAscending = sorting && sorting.order === 'descending' && sorting.columnKey === key;\n          var order = sorting && sorting.columnKey === key ? 'descending' : 'ascending';\n          var newSortingValue = undefined;\n\n          if (!isAscending && column !== -1) {\n            newSortingValue = {\n              columnKey: key,\n              order: order\n            };\n          }\n\n          return {\n            sorting: newSortingValue\n          };\n        }, function () {\n          if (typeof onSort === 'function') {\n            onSort({\n              column: column,\n              key: key,\n              order: _this2.state.sorting && _this2.state.sorting.order\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"footerClicked\",\n    value: function footerClicked(e, column, key) {\n      e.preventDefault();\n      var onFooterClick = this.props.onFooterClick;\n\n      if (typeof onFooterClick === 'function') {\n        onFooterClick({\n          column: column,\n          key: key,\n          row: -1\n        });\n      }\n    }\n  }, {\n    key: \"renderCells\",\n    value: function renderCells(keys, rowIndex) {\n      var _this$props4 = this.props,\n          _this$props4$data = _this$props4.data,\n          data = _this$props4$data === void 0 ? [] : _this$props4$data,\n          _this$props4$cellRend = _this$props4.cellRenderer,\n          cellRenderer = _this$props4$cellRend === void 0 ? defaultCellRenderer : _this$props4$cellRend,\n          indexed = _this$props4.indexed,\n          theme = _this$props4.theme,\n          columns = _this$props4.columns,\n          onDataClick = _this$props4.onDataClick;\n      var cols = getColumns(data, columns);\n      var row = data[rowIndex];\n      var cells = keys.map(function (key, cell) {\n        var column = cols[key];\n        var hidden = typeof column !== 'string' && column.hidden;\n\n        if (!hidden) {\n          return React.createElement(StyledTableCell, {\n            key: key,\n            onClick: handleDataClickedEvent({\n              row: rowIndex,\n              column: cell,\n              key: key,\n              data: row\n            }, onDataClick),\n            theme: theme\n          }, cellRenderer({\n            column: cell,\n            key: key,\n            data: row,\n            row: rowIndex,\n            value: row[key],\n            render: defaultCellRenderer\n          }));\n        }\n\n        return React.createElement(HiddenCell, {\n          key: key\n        });\n      });\n\n      if (indexed) {\n        cells.unshift(React.createElement(StyledTableCell, {\n          key: \"index#\",\n          onClick: handleDataClickedEvent({\n            row: rowIndex,\n            column: -1,\n            key: '__indexed',\n            data: row\n          }, onDataClick),\n          theme: theme\n        }, rowIndex + 1));\n      }\n\n      return cells;\n    }\n  }, {\n    key: \"renderRows\",\n    value: function renderRows(keys) {\n      var _this3 = this;\n\n      var _this$props5 = this.props,\n          data = _this$props5.data,\n          groupBy = _this$props5.groupBy,\n          indexed = _this$props5.indexed,\n          placeholder = _this$props5.placeholder,\n          _this$props5$rowRende = _this$props5.rowRenderer,\n          rowRenderer = _this$props5$rowRende === void 0 ? this.defaultRowRenderer : _this$props5$rowRende,\n          _this$props5$getRowKe = _this$props5.getRowKey,\n          getRowKey = _this$props5$getRowKe === void 0 ? defaultRowKeyGetter : _this$props5$getRowKe,\n          theme = _this$props5.theme;\n      var indices = this.getIndices(data, groupBy, this.state.sorting);\n      var cols = keys.length + (indexed ? 1 : 0);\n      var state = {};\n\n      if (indices.length === 0) {\n        return placeholder ? [React.createElement(StyledTableRow, {\n          theme: theme,\n          key: \"placeholder\"\n        }, React.createElement(StyledPlaceholderCell, {\n          colSpan: cols,\n          theme: theme\n        }, placeholder))] : [];\n      } else {\n        return indices.map(function (index) {\n          var cells = _this3.renderCells(keys, index);\n\n          var renderData = {\n            theme: theme,\n            index: index,\n            cells: cells,\n            data: data[index],\n            key: index.toString(),\n            state: state\n          };\n          renderData.key = getRowKey(renderData);\n          return rowRenderer(renderData);\n        });\n      }\n    }\n  }, {\n    key: \"renderHead\",\n    value: function renderHead(keys) {\n      var _this$props6 = this.props,\n          _this$props6$headRend = _this$props6.headRenderer,\n          headRenderer = _this$props6$headRend === void 0 ? this.defaultHeadRenderer : _this$props6$headRend,\n          groupBy = _this$props6.groupBy,\n          _this$props6$data = _this$props6.data,\n          data = _this$props6$data === void 0 ? [] : _this$props6$data,\n          columns = _this$props6.columns;\n      var sorting = this.state.sorting;\n      return headRenderer({\n        columns: getColumns(data, columns),\n        sortBy: sorting,\n        groupBy: groupBy,\n        data: data,\n        keys: keys\n      });\n    }\n  }, {\n    key: \"renderFoot\",\n    value: function renderFoot(keys) {\n      var _this$props7 = this.props,\n          _this$props7$footRend = _this$props7.footRenderer,\n          footRenderer = _this$props7$footRend === void 0 ? this.defaultFootRenderer : _this$props7$footRend,\n          groupBy = _this$props7.groupBy,\n          _this$props7$data = _this$props7.data,\n          data = _this$props7$data === void 0 ? [] : _this$props7$data,\n          columns = _this$props7.columns;\n      var sorting = this.state.sorting;\n      return footRenderer({\n        columns: getColumns(data, columns),\n        sortBy: sorting,\n        groupBy: groupBy,\n        data: data,\n        keys: keys\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _a = this.props,\n          _a$data = _a.data,\n          data = _a$data === void 0 ? [] : _a$data,\n          columns = _a.columns,\n          noHeader = _a.noHeader,\n          theme = _a.theme,\n          _a$bodyRenderer = _a.bodyRenderer,\n          bodyRenderer = _a$bodyRenderer === void 0 ? defaultBodyRenderer : _a$bodyRenderer,\n          _1 = _a.cellRenderer,\n          _2 = _a.indexed,\n          _3 = _a.sortBy,\n          _4 = _a.onDataClick,\n          _5 = _a.onFooterClick,\n          _6 = _a.onHeaderClick,\n          _7 = _a.placeholder,\n          _8 = _a.columns,\n          _9 = _a.groupBy,\n          _10 = _a.headRenderer,\n          _11 = _a.footRenderer,\n          _12 = _a.headerCellRenderer,\n          _13 = _a.footerCellRenderer,\n          _14 = _a.onSort,\n          props = __rest(_a, [\"data\", \"columns\", \"noHeader\", \"theme\", \"bodyRenderer\", \"cellRenderer\", \"indexed\", \"sortBy\", \"onDataClick\", \"onFooterClick\", \"onHeaderClick\", \"placeholder\", \"columns\", \"groupBy\", \"headRenderer\", \"footRenderer\", \"headerCellRenderer\", \"footerCellRenderer\", \"onSort\"]);\n\n      var cols = getColumns(data, columns);\n      var keys = Object.keys(cols);\n      var showFooter = keys.filter(function (key) {\n        var col = cols[key];\n        return typeof col === 'object' && !!col.footer && !col.hidden;\n      }).length > 0;\n      var rows = this.renderRows(keys);\n      return bodyRenderer({\n        table: TableHost,\n        props: Object.assign({\n          theme: theme,\n          head: !noHeader && this.renderHead(keys),\n          foot: showFooter && this.renderFoot(keys)\n        }, props),\n        rows: rows,\n        mode: 'table'\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var controlledSorting = props.sortBy !== undefined || state.controlledSorting;\n\n      if (controlledSorting) {\n        return {\n          sorting: normalizeSortBy(props.sortBy),\n          controlledSorting: controlledSorting\n        };\n      }\n\n      return state;\n    }\n  }]);\n\n  return TableBasic;\n}(React.Component);\nTableBasic.inner = {\n  get StyledTableHead() {\n    return StyledTableHead;\n  },\n\n  get StyledTableHeaderRow() {\n    return StyledTableHeaderRow;\n  },\n\n  get StyledTableHeader() {\n    return StyledTableHeader;\n  },\n\n  get HiddenCell() {\n    return HiddenCell;\n  },\n\n  get StyledTableFoot() {\n    return StyledTableFoot;\n  },\n\n  get StyledTableRow() {\n    return StyledTableRow;\n  },\n\n  get StyledTableCell() {\n    return StyledTableCell;\n  },\n\n  get StyledPlaceholderCell() {\n    return StyledPlaceholderCell;\n  }\n\n};","map":{"version":3,"sources":["../../../../src/components/Table/TableBasic.part.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport memoize from 'memoize-one';\nimport styled, { themed, css } from '../../utils/styled';\nimport { sortObjectList } from '../../utils/sort';\nimport { distance } from '../../distance';\nimport { RefProps, StandardProps } from '../../common';\nimport { TableRowEvent, TableProps, TableSorting, TableColumns, TableSectionRenderEvent } from './Table.types.part';\nimport { defaultCellRenderer, StyledTableHead, StyledTableHeaderRow, StyledTableHeader, StyledTableRow, StyledTableFoot, defaultBodyRenderer, getColumns, getDefaultHeaderCellRenderer, handleDataClickedEvent, } from './TableShared.part';\nimport { getFontStyle } from '../../textStyles';\nexport interface TableBasicState {\n    sorting?: TableSorting;\n    controlledSorting: boolean;\n}\ninterface StyledTableProps {\n    condensed?: boolean;\n    borderless?: boolean;\n}\nconst StyledTable = styled.table<StyledTableProps>(themed(({ theme, borderless, condensed }) => css `\n    ${getFontStyle({ size: 'small', lineHeight: 'xSmall' })}\n\n    table-layout: ${theme.tableLayout};\n    border-collapse: collapse;\n    width: 100%;\n    color: ${theme.text6};\n    border: ${borderless ? 'none' : theme.tableBorder};\n\n    > thead > tr > th,\n    > tbody > tr > td {\n      padding: ${condensed ? `${distance.small} ${distance.large}` : theme.tableHeadPadding};\n\n      &:not(:last-child) {\n        padding-right: 0;\n      }\n    }\n    `));\nconst StyledTableBody = styled.tbody ``;\ninterface TableHostProps extends StandardProps {\n    head: React.ReactNode;\n    foot: React.ReactNode;\n}\nconst TableHost = Object.assign(((({ head, foot, theme, children, ...props }) => (<StyledTable theme={theme} {...props}>\n    {head}\n    <StyledTableBody theme={theme}>{children}</StyledTableBody>\n    {foot}\n  </StyledTable>)) as React.SFC<TableHostProps>), { inner: {\n        get StyledTable() { return StyledTable as typeof StyledTable; },\n        get StyledTableBody() { return StyledTableBody as typeof StyledTableBody; }\n    } });\nconst HiddenCell = styled.td `\n  display: none;\n`;\nconst StyledTableCell = styled.td `\n  text-align: left;\n`;\nconst StyledPlaceholderCell = styled(StyledTableCell) `\n  text-align: center;\n`;\nfunction defaultRowKeyGetter<T>({ key }: TableRowEvent<T>) {\n    return key;\n}\nfunction normalizeSortBy(sortBy?: TableSorting | string): TableSorting | undefined {\n    if (!sortBy) {\n        return undefined;\n    }\n    if (typeof sortBy === 'string') {\n        if (sortBy[0] === '-') {\n            return {\n                columnKey: sortBy.substr(1),\n                order: 'descending',\n            };\n        }\n        else {\n            return {\n                columnKey: sortBy,\n                order: 'ascending',\n            };\n        }\n    }\n    return {\n        columnKey: sortBy.columnKey,\n        order: sortBy.order || 'ascending',\n    };\n}\nexport class TableBasic<T> extends React.Component<TableProps<T> & RefProps, TableBasicState> {\n    constructor(props: TableProps<T> & RefProps) {\n        super(props);\n        this.state = {\n            controlledSorting: false,\n        };\n    }\n    static getDerivedStateFromProps(props: TableProps<any>, state: TableBasicState) {\n        const controlledSorting = props.sortBy !== undefined || state.controlledSorting;\n        if (controlledSorting) {\n            return {\n                sorting: normalizeSortBy(props.sortBy),\n                controlledSorting,\n            };\n        }\n        return state;\n    }\n    private getIndices = memoize((data: Array<T>, grouping?: keyof T, sorting?: TableSorting) => sorting\n        ? sortObjectList(data, sorting.columnKey as keyof T, sorting.order, grouping)\n        : sortObjectList(data, undefined, undefined, grouping));\n    private isSortable(key: string, cols: TableColumns) {\n        const { sortBy } = this.props;\n        const col = cols[key];\n        return !sortBy && (!col || (typeof col !== 'string' && col.sortable));\n    }\n    private headerClicked(e: React.MouseEvent<HTMLTableCellElement>, column: number, key: string) {\n        const { onHeaderClick, onSort, data = [], columns } = this.props;\n        e.preventDefault();\n        if (typeof onHeaderClick === 'function') {\n            onHeaderClick({\n                column,\n                key,\n                row: -1,\n            });\n        }\n        else if (this.isSortable(key, getColumns(data, columns))) {\n            this.setState(({ sorting }) => {\n                const isAscending = sorting && sorting.order === 'descending' && sorting.columnKey === key;\n                const order = sorting && sorting.columnKey === key ? 'descending' : 'ascending';\n                let newSortingValue: TableSorting | undefined = undefined;\n                if (!isAscending && column !== -1) {\n                    newSortingValue = {\n                        columnKey: key,\n                        order,\n                    };\n                }\n                return { sorting: newSortingValue };\n            }, () => {\n                if (typeof onSort === 'function') {\n                    onSort({\n                        column,\n                        key,\n                        order: this.state.sorting && this.state.sorting.order,\n                    });\n                }\n            });\n        }\n    }\n    private footerClicked(e: React.MouseEvent<HTMLTableCellElement>, column: number, key: string) {\n        e.preventDefault();\n        const { onFooterClick } = this.props;\n        if (typeof onFooterClick === 'function') {\n            onFooterClick({\n                column,\n                key,\n                row: -1,\n            });\n        }\n    }\n    private defaultHeadRenderer = ({ columns, sortBy, keys }: TableSectionRenderEvent<T>) => {\n        const { onSort } = this.props;\n        const defaultHeaderCellRenderer = getDefaultHeaderCellRenderer((columnKey, order) => {\n            this.setState({\n                sorting: {\n                    columnKey,\n                    order,\n                },\n            }, () => {\n                if (typeof onSort === 'function') {\n                    onSort({\n                        column: keys.indexOf(columnKey),\n                        key: columnKey,\n                        order,\n                    });\n                }\n            });\n        });\n        const { indexed, theme, headerCellRenderer = defaultHeaderCellRenderer } = this.props;\n        return (<StyledTableHead theme={theme}>\n        <StyledTableHeaderRow theme={theme}>\n          {indexed && (<StyledTableHeader onClick={e => this.headerClicked(e, -1, '#')} theme={theme}>\n              {headerCellRenderer({\n            column: -1,\n            key: '',\n            row: -1,\n            value: '#',\n            render: defaultHeaderCellRenderer,\n        })}\n            </StyledTableHeader>)}\n          {keys.map((key, cell) => {\n            const column = columns[key];\n            const hidden = typeof column !== 'string' && column.hidden;\n            if (!hidden) {\n                const name = typeof column === 'string' ? column : column.header;\n                const width = typeof column === 'string' ? undefined : column.width;\n                const sortable = this.isSortable(key, columns);\n                const direction = sortable && sortBy && (sortBy.columnKey !== key ? undefined : sortBy.order);\n                return (<StyledTableHeader sortable={sortable} width={width} key={key} onClick={e => this.headerClicked(e, cell, key)} theme={theme}>\n                  {headerCellRenderer({\n                    column: cell,\n                    key,\n                    row: -1,\n                    sorting: direction,\n                    value: name,\n                    render: defaultHeaderCellRenderer,\n                })}\n                </StyledTableHeader>);\n            }\n            return <HiddenCell key={key}/>;\n        })}\n        </StyledTableHeaderRow>\n      </StyledTableHead>);\n    };\n    private defaultFootRenderer = ({ columns, keys, sortBy }: TableSectionRenderEvent<T>) => {\n        const { indexed, theme, footerCellRenderer = defaultCellRenderer } = this.props;\n        return (<StyledTableFoot theme={theme}>\n        <StyledTableRow theme={theme}>\n          {indexed && (<StyledTableCell onClick={e => this.footerClicked(e, -1, '#')} theme={theme}>\n              {footerCellRenderer({\n            column: -1,\n            key: '',\n            row: -1,\n            value: '',\n            render: defaultCellRenderer,\n        })}\n            </StyledTableCell>)}\n          {keys.map((key, i) => {\n            const column = columns[key];\n            const sortable = this.isSortable(key, columns);\n            const direction = sortable && sortBy && (sortBy.columnKey !== key ? undefined : sortBy.order);\n            const hidden = typeof column !== 'string' && column.hidden;\n            if (!hidden) {\n                const name = typeof column === 'string' ? undefined : column.footer;\n                return (<StyledTableCell key={key} theme={theme} onClick={e => this.footerClicked(e, i, key)}>\n                  {footerCellRenderer({\n                    column: i,\n                    key,\n                    row: -1,\n                    value: name,\n                    sorting: direction,\n                    render: defaultCellRenderer,\n                })}\n                </StyledTableCell>);\n            }\n            return <HiddenCell key={key}/>;\n        })}\n        </StyledTableRow>\n      </StyledTableFoot>);\n    };\n    private defaultRowRenderer = ({ cells, index }: TableRowEvent<T>) => {\n        const { theme } = this.props;\n        return (<StyledTableRow key={index} theme={theme}>\n        {cells}\n      </StyledTableRow>);\n    };\n    private renderCells(keys: Array<string>, rowIndex: number) {\n        const { data = [], cellRenderer = defaultCellRenderer, indexed, theme, columns, onDataClick } = this.props;\n        const cols = getColumns(data, columns);\n        const row = data[rowIndex];\n        const cells = keys.map((key, cell) => {\n            const column = cols[key];\n            const hidden = typeof column !== 'string' && column.hidden;\n            if (!hidden) {\n                return (<StyledTableCell key={key} onClick={handleDataClickedEvent({ row: rowIndex, column: cell, key, data: row }, onDataClick)} theme={theme}>\n            {cellRenderer({\n                    column: cell,\n                    key,\n                    data: row,\n                    row: rowIndex,\n                    value: row[key],\n                    render: defaultCellRenderer,\n                })}\n          </StyledTableCell>);\n            }\n            return <HiddenCell key={key}/>;\n        });\n        if (indexed) {\n            cells.unshift(<StyledTableCell key=\"index#\" onClick={handleDataClickedEvent({ row: rowIndex, column: -1, key: '__indexed', data: row }, onDataClick)} theme={theme}>\n          {rowIndex + 1}\n        </StyledTableCell>);\n        }\n        return cells;\n    }\n    private renderRows(keys: Array<string>) {\n        const { data, groupBy, indexed, placeholder, rowRenderer = this.defaultRowRenderer, getRowKey = defaultRowKeyGetter, theme, } = this.props;\n        const indices = this.getIndices(data, groupBy, this.state.sorting);\n        const cols = keys.length + (indexed ? 1 : 0);\n        const state = {};\n        if (indices.length === 0) {\n            return placeholder\n                ? [\n                    <StyledTableRow theme={theme} key=\"placeholder\">\n              <StyledPlaceholderCell colSpan={cols} theme={theme}>\n                {placeholder}\n              </StyledPlaceholderCell>\n            </StyledTableRow>,\n                ]\n                : [];\n        }\n        else {\n            return indices.map(index => {\n                const cells = this.renderCells(keys, index);\n                const renderData = { theme, index, cells, data: data[index], key: index.toString(), state };\n                renderData.key = getRowKey(renderData);\n                return rowRenderer(renderData);\n            });\n        }\n    }\n    private renderHead(keys: Array<string>) {\n        const { headRenderer = this.defaultHeadRenderer, groupBy, data = [], columns } = this.props;\n        const { sorting } = this.state;\n        return headRenderer({\n            columns: getColumns(data, columns),\n            sortBy: sorting,\n            groupBy,\n            data,\n            keys,\n        });\n    }\n    private renderFoot(keys: Array<string>) {\n        const { footRenderer = this.defaultFootRenderer, groupBy, data = [], columns } = this.props;\n        const { sorting } = this.state;\n        return footRenderer({\n            columns: getColumns(data, columns),\n            sortBy: sorting,\n            groupBy,\n            data,\n            keys,\n        });\n    }\n    render() {\n        const { data = [], columns, noHeader, theme, bodyRenderer = defaultBodyRenderer, cellRenderer: _1, indexed: _2, sortBy: _3, onDataClick: _4, onFooterClick: _5, onHeaderClick: _6, placeholder: _7, columns: _8, groupBy: _9, headRenderer: _10, footRenderer: _11, headerCellRenderer: _12, footerCellRenderer: _13, onSort: _14, ...props } = this.props;\n        const cols = getColumns(data, columns);\n        const keys = Object.keys(cols);\n        const showFooter = keys.filter(key => {\n            const col = cols[key];\n            return typeof col === 'object' && !!col.footer && !col.hidden;\n        }).length > 0;\n        const rows = this.renderRows(keys);\n        return bodyRenderer({\n            table: TableHost,\n            props: {\n                theme,\n                head: !noHeader && this.renderHead(keys),\n                foot: showFooter && this.renderFoot(keys),\n                ...props,\n            },\n            rows,\n            mode: 'table',\n        });\n    }\n    static inner = {\n        get StyledTableHead() { return StyledTableHead as typeof StyledTableHead; },\n        get StyledTableHeaderRow() { return StyledTableHeaderRow as typeof StyledTableHeaderRow; },\n        get StyledTableHeader() { return StyledTableHeader as typeof StyledTableHeader; },\n        get HiddenCell() { return HiddenCell as typeof HiddenCell; },\n        get StyledTableFoot() { return StyledTableFoot as typeof StyledTableFoot; },\n        get StyledTableRow() { return StyledTableRow as typeof StyledTableRow; },\n        get StyledTableCell() { return StyledTableCell as typeof StyledTableCell; },\n        get StyledPlaceholderCell() { return StyledPlaceholderCell as typeof StyledPlaceholderCell; }\n    };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}