{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport onClickOutside from 'react-onclickoutside';\nimport styled from '../../utils/styled';\nimport { FlyoutWindow } from './FlyoutWindow.part';\nconst FlyoutContainer = styled.div`\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n`;\nconst StyledTargetWrapper = styled.div``;\n\nclass FlyoutInt extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickOutside = () => {\n      this.state.open && !this.state.controlled && this.setOpen(false);\n    };\n\n    this.setTargetRef = el => {\n      this.targetContainer = el;\n    };\n\n    this.onClick = () => {\n      if (!this.state.controlled) {\n        this.setOpen(!this.state.open);\n      }\n    };\n\n    this.state = {\n      controlled: props.open !== undefined,\n      open: props.open || false,\n      targetRect: undefined,\n      dirtyFlag: false\n    };\n  }\n\n  componentDidMount() {\n    this.updateMeasurements();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.state.controlled && nextProps.open !== undefined) {\n      this.setOpen(nextProps.open);\n    }\n  }\n\n  componentDidUpdate() {\n    const {\n      dirtyFlag\n    } = this.state;\n\n    if (dirtyFlag) {\n      this.updateMeasurements();\n      this.setState({\n        dirtyFlag: false\n      });\n    }\n  }\n\n  updateMeasurements() {\n    if (this.targetContainer) {\n      const targetRect = this.targetContainer.getBoundingClientRect();\n      this.setState({\n        targetRect\n      });\n    }\n  }\n\n  setOpen(open) {\n    const {\n      onChange\n    } = this.props;\n\n    if (typeof onChange === 'function') {\n      onChange({\n        open\n      });\n    }\n\n    this.setState({\n      open,\n      dirtyFlag: open === true\n    });\n  }\n\n  render() {\n    const _a = this.props,\n          {\n      children,\n      content,\n      open: _0,\n      onChange: _1\n    } = _a,\n          props = __rest(_a, [\"children\", \"content\", \"open\", \"onChange\"]);\n\n    const {\n      targetRect\n    } = this.state;\n    const {\n      open\n    } = this.state;\n    return React.createElement(FlyoutContainer, {\n      ref: this.setTargetRef\n    }, React.createElement(StyledTargetWrapper, {\n      onClick: this.onClick\n    }, children), !!content && targetRect && open && React.createElement(FlyoutWindow, Object.assign({}, props, {\n      targetRect: targetRect\n    }), content));\n  }\n\n}\n\nFlyoutInt.inner = {\n  get FlyoutContainer() {\n    return FlyoutContainer;\n  },\n\n  get StyledTargetWrapper() {\n    return StyledTargetWrapper;\n  },\n\n  get FlyoutWindow() {\n    return FlyoutWindow;\n  }\n\n};\nexport const Flyout = onClickOutside(FlyoutInt);\nFlyout.displayName = 'Flyout';","map":{"version":3,"sources":["../../../../src/components/Flyout/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport onClickOutside, { AdditionalProps } from 'react-onclickoutside';\nimport styled from '../../utils/styled';\nimport { FlyoutWindow } from './FlyoutWindow.part';\nimport { FlyoutProps } from './Flyout.types.part';\nexport { FlyoutPosition, FlyoutChangeEvent, FlyoutProps } from './Flyout.types.part';\nconst FlyoutContainer = styled.div `\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n`;\nconst StyledTargetWrapper = styled.div ``;\nexport interface FlyoutState {\n    controlled: boolean;\n    targetRect?: ClientRect;\n    dirtyFlag: boolean;\n    open: boolean;\n}\nclass FlyoutInt extends React.Component<FlyoutProps, FlyoutState> {\n    private targetContainer: HTMLDivElement | null;\n    constructor(props: FlyoutProps) {\n        super(props);\n        this.state = {\n            controlled: props.open !== undefined,\n            open: props.open || false,\n            targetRect: undefined,\n            dirtyFlag: false,\n        };\n    }\n    handleClickOutside = () => {\n        this.state.open && !this.state.controlled && this.setOpen(false);\n    };\n    componentDidMount() {\n        this.updateMeasurements();\n    }\n    UNSAFE_componentWillReceiveProps(nextProps: FlyoutProps) {\n        if (this.state.controlled && nextProps.open !== undefined) {\n            this.setOpen(nextProps.open);\n        }\n    }\n    componentDidUpdate() {\n        const { dirtyFlag } = this.state;\n        if (dirtyFlag) {\n            this.updateMeasurements();\n            this.setState({\n                dirtyFlag: false,\n            });\n        }\n    }\n    private updateMeasurements() {\n        if (this.targetContainer) {\n            const targetRect = this.targetContainer.getBoundingClientRect();\n            this.setState({\n                targetRect,\n            });\n        }\n    }\n    private setTargetRef = (el: HTMLDivElement | null) => {\n        this.targetContainer = el;\n    };\n    private setOpen(open: boolean) {\n        const { onChange } = this.props;\n        if (typeof onChange === 'function') {\n            onChange({ open });\n        }\n        this.setState({\n            open,\n            dirtyFlag: open === true,\n        });\n    }\n    private onClick = () => {\n        if (!this.state.controlled) {\n            this.setOpen(!this.state.open);\n        }\n    };\n    render() {\n        const { children, content, open: _0, onChange: _1, ...props } = this.props;\n        const { targetRect } = this.state;\n        const { open } = this.state;\n        return (<FlyoutContainer ref={this.setTargetRef}>\n        <StyledTargetWrapper onClick={this.onClick}>{children}</StyledTargetWrapper>\n        {!!content && targetRect && open && (<FlyoutWindow {...props} targetRect={targetRect}>\n            {content}\n          </FlyoutWindow>)}\n      </FlyoutContainer>);\n    }\n    static inner = {\n        get FlyoutContainer() { return FlyoutContainer as typeof FlyoutContainer; },\n        get StyledTargetWrapper() { return StyledTargetWrapper as typeof StyledTargetWrapper; },\n        get FlyoutWindow() { return FlyoutWindow as typeof FlyoutWindow; }\n    };\n}\nexport const Flyout: React.ComponentClass<FlyoutProps & AdditionalProps> = onClickOutside(FlyoutInt);\nFlyout.displayName = 'Flyout';\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}