{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar PdfJs = require('pdfjs-dist');\n\nvar reactDom = require('react-dom');\n\nvar ThemeContext = React__default.createContext({\n  prefixClass: 'viewer'\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var _b;\n\n  var children = _a.children,\n      _c = _a.isSelected,\n      isSelected = _c === void 0 ? false : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"button\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-button\"] = true, _b[theme.prefixClass + \"-button-selected\"] = isSelected, _b)),\n    onClick: onClick\n  }, children);\n};\n\nvar MenuDivider = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-divider\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.size,\n      size = _b === void 0 ? 24 : _b;\n  var theme = React.useContext(ThemeContext);\n  var width = (size || 24) + \"px\";\n  return React__default.createElement(\"svg\", {\n    className: theme.prefixClass + \"-icon\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-item\",\n    onClick: onClick\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-icon\"\n  }, icon), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-label\"\n  }, children), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-check\"\n  }, checked && React__default.createElement(CheckIcon, null)));\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"button\", {\n    className: theme.prefixClass + \"-primary-button\",\n    onClick: onClick\n  }, children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar-inner\",\n    style: {\n      width: progress + \"%\"\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-separator\"\n  });\n};\n\nvar Spinner = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"svg\", {\n    className: theme.prefixClass + \"-spinner\",\n    width: \"64px\",\n    height: \"64px\",\n    viewBox: \"0 0 32 32\"\n  }, React__default.createElement(\"circle\", {\n    className: theme.prefixClass + \"-spinner-circle\",\n    cx: \"16\",\n    cy: \"16\",\n    r: \"12\",\n    strokeDasharray: Math.PI * 2 * 9\n  }));\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar defaultLayout = function (isSidebarOpened, container, main, toolbar, sidebar) {\n  var _a;\n\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", __assign({}, container.attrs, {\n    className: classNames((_a = {}, _a[theme.prefixClass + \"-layout-container\"] = true, _a[theme.prefixClass + \"-layout-with-sidebar\"] = isSidebarOpened, _a)),\n    style: container.attrs.style\n  }), container.children, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-layout-toolbar\"\n  }, toolbar), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-layout-sidebar\"\n  }, sidebar.children), React__default.createElement(\"div\", __assign({}, main.attrs, {\n    className: theme.prefixClass + \"-layout-main\",\n    style: main.attrs.style\n  }), main.children));\n};\n\nvar defaultToolbar = function (toolbarSlot) {\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-left\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.toggleSidebarButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.searchPopover), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.previousPageButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.currentPageInput, \" / \", toolbarSlot.numPages), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.nextPageButton)), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-center\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomOutButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomPopover), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomInButton)), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-right\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.fullScreenButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.openFileButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.downloadButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.printButton), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.moreActionsPopover)));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    document.addEventListener('click', clickHandler);\n    return function () {\n      document.removeEventListener('click', clickHandler);\n    };\n  }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n  var keyUpHandler = function (e) {\n    e.keyCode === targetKeyCode && handler();\n  };\n\n  React.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  useLockScroll();\n  useKeyUp(27, function () {\n    return closeOnEscape && onToggle();\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-body\",\n    ref: contentRef\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-overlay\"\n  }, children);\n};\n\nvar ToggleStatus;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\n\nvar useToggle = function () {\n  var _a = React.useState(false),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      target = _a.target;\n\n  var _b = useToggle(),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  return React__default.createElement(React__default.Fragment, null, target(toggle, opened), opened && content(toggle));\n};\n\nvar Modal = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      target = _a.target;\n\n  var renderContent = function (toggle) {\n    return React__default.createElement(ModalOverlay, null, React__default.createElement(ModalBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__default.createElement(Portal, {\n    target: target,\n    content: renderContent\n  });\n};\n\nvar Position;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\n\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case Position$1.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  React.useLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = top - anchorRect.top + \"px\";\n    contentEle.style.left = left - anchorRect.left + \"px\";\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-arrow\"] = true, _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft, _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter, _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight, _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop, _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter, _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom, _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft, _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter, _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight, _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop, _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter, _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom, _b[\"\" + customClassName] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  var anchorRef = React.createRef();\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-body\",\n    ref: contentRef\n  }, React__default.createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-popover-body-arrow\",\n    position: position\n  }), children));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n  useKeyUp(27, function () {\n    return closeOnEscape && onClose();\n  });\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-overlay\"\n  });\n};\n\nvar Popover = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__default.createRef();\n\n  var renderTarget = function (toggle, opened) {\n    return React__default.createElement(\"div\", {\n      ref: targetRef\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__default.createElement(React__default.Fragment, null, React__default.createElement(PopoverOverlay, {\n      closeOnEscape: closeOnEscape,\n      onClose: toggle\n    }), React__default.createElement(PopoverBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      offset: offset,\n      position: position,\n      targetRef: targetRef,\n      onClose: toggle\n    }, content(toggle)));\n  };\n\n  return React__default.createElement(Portal, {\n    content: renderContent,\n    target: renderTarget\n  });\n};\n\nvar TooltipBody = function (_a) {\n  var children = _a.children,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  var anchorRef = React.createRef();\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body\",\n    ref: contentRef\n  }, React__default.createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-tooltip-body-arrow\",\n    position: position\n  }), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__default.createRef();\n\n  var renderTarget = function (toggle) {\n    var show = function () {\n      toggle(ToggleStatus.Open);\n    };\n\n    var hide = function () {\n      toggle(ToggleStatus.Close);\n    };\n\n    return React__default.createElement(\"div\", {\n      ref: targetRef,\n      onMouseEnter: show,\n      onMouseLeave: hide\n    }, target);\n  };\n\n  var renderContent = function () {\n    return React__default.createElement(TooltipBody, {\n      offset: offset,\n      position: position,\n      targetRef: targetRef\n    }, content());\n  };\n\n  return React__default.createElement(Portal, {\n    target: renderTarget,\n    content: renderContent\n  });\n};\n\nvar ScrollMode;\n\n(function (ScrollMode) {\n  ScrollMode[\"Horizontal\"] = \"Horizontal\";\n  ScrollMode[\"Vertical\"] = \"Vertical\";\n  ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(ScrollMode || (ScrollMode = {}));\n\nvar ScrollMode$1 = ScrollMode;\nvar SelectionMode;\n\n(function (SelectionMode) {\n  SelectionMode[SelectionMode[\"Hand\"] = 0] = \"Hand\";\n  SelectionMode[SelectionMode[\"Text\"] = 1] = \"Text\";\n})(SelectionMode || (SelectionMode = {}));\n\nvar SelectionMode$1 = SelectionMode;\nvar SpecialZoomLevel;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\n\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\nvar useDragScroll = function (ref) {\n  var theme = React.useContext(ThemeContext);\n\n  var _a = React.useState(false),\n      enabled = _a[0],\n      setEnabled = _a[1];\n\n  var pos = React.useRef({\n    top: 0,\n    left: 0,\n    x: 0,\n    y: 0\n  });\n\n  var onMouseMoveHandler = function (e) {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.scrollTop = pos.current.top - (e.clientY - pos.current.y);\n    ele.scrollLeft = pos.current.left - (e.clientX - pos.current.x);\n  };\n\n  var onMouseUpHandler = function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.classList.add(theme.prefixClass + \"-grab\");\n    ele.classList.remove(theme.prefixClass + \"-grabbing\");\n    document.removeEventListener('mousemove', onMouseMoveHandler);\n    document.removeEventListener('mouseup', onMouseUpHandler);\n  };\n\n  var onMouseDownHandler = function (e) {\n    var ele = ref.current;\n\n    if (!enabled || !ele) {\n      return;\n    }\n\n    ele.classList.remove(theme.prefixClass + \"-grab\");\n    ele.classList.add(theme.prefixClass + \"-grabbing\");\n    e.preventDefault();\n    e.stopPropagation();\n    pos.current = {\n      left: ele.scrollLeft,\n      top: ele.scrollTop,\n      x: e.clientX,\n      y: e.clientY\n    };\n    document.addEventListener('mousemove', onMouseMoveHandler);\n    document.addEventListener('mouseup', onMouseUpHandler);\n  };\n\n  React.useEffect(function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    enabled ? ele.classList.add(theme.prefixClass + \"-grab\") : ele.classList.remove(theme.prefixClass + \"-grab\");\n    ele.addEventListener('mousedown', onMouseDownHandler);\n    return function () {\n      ele.removeEventListener('mousedown', onMouseDownHandler);\n    };\n  }, [enabled]);\n  return {\n    toggleDragScroll: setEnabled\n  };\n};\n\nvar useDrop = function (ref, onDrop) {\n  var dragCount = React.useRef(0);\n\n  var _a = React.useState(false),\n      isDragging = _a[0],\n      setDragging = _a[1];\n\n  var onDropHandler = function (e) {\n    e.preventDefault();\n    setDragging(false);\n    dragCount.current = 0;\n\n    if (e.dataTransfer) {\n      onDrop(e.dataTransfer.files);\n    }\n  };\n\n  var onDragOverHandler = function (e) {\n    e.preventDefault();\n  };\n\n  var onDragEnterHandler = function (e) {\n    e.preventDefault();\n    dragCount.current += 1;\n\n    if (dragCount.current <= 1) {\n      setDragging(true);\n    }\n  };\n\n  var onDragLeaveHandler = function (e) {\n    e.preventDefault();\n    dragCount.current -= 1;\n\n    if (dragCount.current <= 0) {\n      setDragging(false);\n    }\n  };\n\n  React.useEffect(function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.addEventListener('drop', onDropHandler);\n    ele.addEventListener('dragover', onDragOverHandler);\n    ele.addEventListener('dragenter', onDragEnterHandler);\n    ele.addEventListener('dragleave', onDragLeaveHandler);\n    return function () {\n      ele.removeEventListener('drop', onDropHandler);\n      ele.removeEventListener('dragover', onDragOverHandler);\n      ele.removeEventListener('dragenter', onDragEnterHandler);\n      ele.removeEventListener('dragleave', onDragLeaveHandler);\n    };\n  }, [ref.current]);\n  return {\n    isDragging: isDragging\n  };\n};\n\nvar Api;\n\n(function (Api) {\n  Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n  Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n  Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n  Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n  Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\n\nvar defaultVendor = {\n  ExitFullScreen: 'exitFullscreen',\n  FullScreenChange: 'fullscreenchange',\n  FullScreenElement: 'fullscreenElement',\n  FullScreenEnabled: 'fullscreenEnabled',\n  RequestFullScreen: 'requestFullscreen'\n};\nvar webkitVendor = {\n  ExitFullScreen: 'webkitExitFullscreen',\n  FullScreenChange: 'webkitfullscreenchange',\n  FullScreenElement: 'webkitFullscreenElement',\n  FullScreenEnabled: 'webkitFullscreenEnabled',\n  RequestFullScreen: 'webkitRequestFullscreen'\n};\nvar msVendor = {\n  ExitFullScreen: 'msExitFullscreen',\n  FullScreenChange: 'MSFullscreenChange',\n  FullScreenElement: 'msFullscreenElement',\n  FullScreenEnabled: 'msFullscreenEnabled',\n  RequestFullScreen: 'msRequestFullscreen'\n};\nvar isBrowser = typeof window !== 'undefined';\nvar vendor = isBrowser ? Api.FullScreenEnabled in document && defaultVendor || webkitVendor.FullScreenEnabled in document && webkitVendor || msVendor.FullScreenEnabled in document && msVendor || defaultVendor : defaultVendor;\n\nvar addFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.addEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar removeFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.removeEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar exitFullScreen = function (element) {\n  return isBrowser ? element[vendor.ExitFullScreen]() : Promise.resolve({});\n};\n\nvar getFullScreenElement = function () {\n  return isBrowser ? document[vendor.FullScreenElement] : null;\n};\n\nvar requestFullScreen = function (element) {\n  if (isBrowser) {\n    element[vendor.RequestFullScreen]();\n  }\n};\n\nvar useFullScreen = function (ref) {\n  var _a = React.useState(false),\n      isFullScreen = _a[0],\n      setIsFullScreen = _a[1];\n\n  var closeOtherFullScreen = function () {\n    var ele = getFullScreenElement();\n    return ele && ele !== ref.current ? exitFullScreen(ele) : Promise.resolve();\n  };\n\n  var openFullScreen = function () {\n    closeOtherFullScreen().then(function () {\n      if (ref.current) {\n        requestFullScreen(ref.current);\n      }\n    });\n  };\n\n  var closeFullScreen = function () {\n    var ele = getFullScreenElement();\n\n    if (isFullScreen && ele && ele === ref.current) {\n      exitFullScreen(document);\n    }\n  };\n\n  var onFullScreenChange = function () {\n    var ele = getFullScreenElement();\n    setIsFullScreen(ele === ref.current);\n  };\n\n  React.useEffect(function () {\n    addFullScreenChangeListener(onFullScreenChange);\n    return function () {\n      removeFullScreenChangeListener(onFullScreenChange);\n    };\n  }, [ref.current]);\n  return {\n    closeFullScreen: closeFullScreen,\n    isFullScreen: isFullScreen,\n    openFullScreen: openFullScreen\n  };\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n\n  var _b = React.useState(true),\n      loading = _b[0],\n      setLoading = _b[1];\n\n  var _c = React.useState([]),\n      annotations = _c[0],\n      setAnnotations = _c[1];\n\n  React.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      setLoading(false);\n      setAnnotations(result);\n    });\n  }, []);\n  return loading ? React__default.createElement(React__default.Fragment, null) : renderAnnotations(annotations);\n};\n\nvar AnnotationType;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\n\nvar AnnotationType$1 = AnnotationType;\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + '\\'?' + '(\\\\d{2})?' + '\\'?');\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var theme = React.useContext(ThemeContext);\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n  }\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper\",\n    style: {\n      top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-header\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-title\"\n  }, annotation.title), React__default.createElement(\"span\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-date\"\n  }, dateStr)), annotation.contents && React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__default.createElement(React.Fragment, {\n      key: index\n    }, item, React__default.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType$1.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType$1.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType$1.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType$1.Beveled:\n      case AnnotationBorderStyleType$1.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = borderWidth + \"px\";\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\" : styles.borderWidth = '0';\n  }\n\n  return React__default.createElement(React__default.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: height + \"px\",\n          left: bound[0] + \"px\",\n          top: bound[1] + \"px\",\n          transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n          transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n          width: width + \"px\"\n        }, styles)\n      },\n      children: React__default.createElement(React__default.Fragment, null, hasPopup && opened && React__default.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default.createElement(\"circle\", {\n      cy: height / 2,\n      fill: 'none',\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar fileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', fileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__default.createElement(\"polyline\", {\n        key: index,\n        fill: 'none',\n        stroke: 'transparent',\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return item.x - rect[0] + \",\" + (rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default.createElement(\"line\", {\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar parse$1 = function (pageIndex, destArray) {\n  var bottomOffset;\n  var scale;\n\n  switch (destArray[1].name) {\n    case 'XYZ':\n      bottomOffset = destArray[3];\n      scale = destArray[4];\n      return {\n        bottomOffset: bottomOffset,\n        pageIndex: pageIndex - 1,\n        scaleTo: scale\n      };\n\n    case 'Fit':\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: SpecialZoomLevel$1.PageFit\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: 1\n      };\n  }\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n        var target = parse$1(pageIndex, destArray);\n        res(target);\n      });\n    });\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n  var attrs = annotation.url ? {\n    href: annotation.url,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: annotation.url\n  } : {\n    href: '',\n    onClick: link\n  };\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-link\",\n      \"data-annotation-id\": annotation.id\n    }), React__default.createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default.createElement(\"polygon\", {\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default.createElement(\"polyline\", {\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  React.useLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n    var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = left + \"px\";\n    container.style.top = top + \"px\";\n    container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n  }, []);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__default.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default.createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z'\n  }), React__default.createElement(\"path\", {\n    d: 'M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25'\n  }), React__default.createElement(\"path\", {\n    d: 'M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75'\n  }), React__default.createElement(\"path\", {\n    d: 'M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25'\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z'\n  }), React__default.createElement(\"path\", {\n    d: 'M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z'\n  }), React__default.createElement(\"path\", {\n    d: 'M21.423 5.406L17.415 9.414'\n  }), React__default.createElement(\"path\", {\n    d: 'M14.587 6.585L18.607 2.565'\n  }), React__default.createElement(\"path\", {\n    d: 'M5.405 21.424L9.413 17.416'\n  }), React__default.createElement(\"path\", {\n    d: 'M6.585 14.588L2.577 18.596'\n  }), React__default.createElement(\"path\", {\n    d: 'M18.602 21.419L14.595 17.412'\n  }), React__default.createElement(\"path\", {\n    d: 'M17.419 14.58L21.428 18.589'\n  }), React__default.createElement(\"path\", {\n    d: 'M2.582 5.399L6.588 9.406'\n  }), React__default.createElement(\"path\", {\n    d: 'M9.421 6.581L5.412 2.572'\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z'\n  }), React__default.createElement(\"path\", {\n    d: 'M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z'\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z'\n  }), React__default.createElement(\"path\", {\n    d: 'M6 4.5L6 0.5'\n  }), React__default.createElement(\"path\", {\n    d: 'M18 4.5L18 0.5'\n  }), React__default.createElement(\"path\", {\n    d: 'M10 4.5L10 0.5'\n  }), React__default.createElement(\"path\", {\n    d: 'M14 4.5L14 0.5'\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M17.5 0.498L17.5 23.498'\n  }), React__default.createElement(\"path\", {\n    d: 'M10.5 0.498L10.5 23.498'\n  }), React__default.createElement(\"path\", {\n    d: 'M23.5.5H6.5a6,6,0,0,0,0,12h4'\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: 'M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z'\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-annotation-text-icon\"\n    }, name === 'check' && React__default.createElement(CheckIcon, null), name === 'comment' && React__default.createElement(CommentIcon, null), name === 'help' && React__default.createElement(HelpIcon, null), name === 'insert' && React__default.createElement(TriangleIcon, null), name === 'key' && React__default.createElement(KeyIcon, null), name === 'note' && React__default.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__default.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && React__default.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n\n  var renderAnnotations = function (annotations) {\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    var clonedViewPort = viewport.clone({\n      dontFlip: true\n    });\n    return React__default.createElement(React__default.Fragment, null, annotations.filter(function (annotation) {\n      return !annotation.parentId;\n    }).map(function (annotation) {\n      var childAnnotation = annotations.find(function (item) {\n        return item.parentId === annotation.id;\n      });\n\n      switch (annotation.annotationType) {\n        case AnnotationType$1.Caret:\n          return React__default.createElement(Caret, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Circle:\n          return React__default.createElement(Circle, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.FileAttachment:\n          return React__default.createElement(FileAttachment, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.FreeText:\n          return React__default.createElement(FreeText, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Highlight:\n          return React__default.createElement(Highlight, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Ink:\n          return React__default.createElement(Ink, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Line:\n          return React__default.createElement(Line, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Link:\n          return React__default.createElement(Link, {\n            key: annotation.id,\n            annotation: annotation,\n            doc: doc,\n            page: page,\n            viewport: clonedViewPort,\n            onExecuteNamedAction: onExecuteNamedAction,\n            onJumpToDest: onJumpToDest\n          });\n\n        case AnnotationType$1.Polygon:\n          return React__default.createElement(Polygon, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Polyline:\n          return React__default.createElement(Polyline, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Popup:\n          return React__default.createElement(Popup, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Square:\n          return React__default.createElement(Square, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Squiggly:\n          return React__default.createElement(Squiggly, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Stamp:\n          return React__default.createElement(Stamp, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.StrikeOut:\n          return React__default.createElement(StrikeOut, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Text:\n          return React__default.createElement(Text, {\n            key: annotation.id,\n            annotation: annotation,\n            childAnnotation: childAnnotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        case AnnotationType$1.Underline:\n          return React__default.createElement(Underline, {\n            key: annotation.id,\n            annotation: annotation,\n            page: page,\n            viewport: clonedViewPort\n          });\n\n        default:\n          return React__default.createElement(React.Fragment, {\n            key: annotation.id\n          });\n      }\n    }));\n  };\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-layer\"\n  }, React__default.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  }));\n};\n\nvar Observer = function (_a) {\n  var children = _a.children,\n      threshold = _a.threshold,\n      onVisibilityChanged = _a.onVisibilityChanged;\n  var containerRef = React.useRef(null);\n  React.useEffect(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n  return React__default.createElement(\"div\", {\n    ref: containerRef\n  }, children);\n};\n\nvar WithScale = function (_a) {\n  var callback = _a.callback,\n      children = _a.children,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  React.useLayoutEffect(function () {\n    callback();\n  }, [rotation, scale]);\n  return React__default.createElement(React__default.Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onCanvasLayerRender = _a.onCanvasLayerRender;\n  var theme = React.useContext(ThemeContext);\n  var canvasRef = React.createRef();\n  var renderTask = React.useRef();\n  var devicePixelRatio = window.devicePixelRatio || 1;\n\n  var renderCanvas = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    canvasEle.height = height * devicePixelRatio;\n    canvasEle.width = width * devicePixelRatio;\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale * devicePixelRatio\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      onCanvasLayerRender({\n        ele: canvasEle,\n        pageIndex: pageIndex,\n        rotation: rotation,\n        scale: scale\n      });\n    }, function () {});\n  };\n\n  return React__default.createElement(WithScale, {\n    callback: renderCanvas,\n    rotation: rotation,\n    scale: scale\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-canvas-layer\",\n    style: {\n      height: height + \"px\",\n      width: width + \"px\"\n    }\n  }, React__default.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n      transformOrigin: \"top left\"\n    }\n  })));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  var renderSvg = function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJs.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = height + \"px\";\n        svg.style.width = width + \"px\";\n        containerEle.appendChild(svg);\n      });\n    });\n  };\n\n  return React__default.createElement(WithScale, {\n    callback: renderSvg,\n    rotation: rotation,\n    scale: scale\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-svg-layer\",\n    ref: containerRef\n  }));\n};\n\nvar calculateOffset = function (children, parent) {\n  var top = children.offsetTop;\n  var left = children.offsetLeft;\n  var p = children.parentElement;\n\n  while (p && p !== parent) {\n    top += p.offsetTop;\n    left += p.offsetLeft;\n    p = p.parentElement;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n};\n\nvar removeNode = function (ele) {\n  var parent = ele.parentNode;\n\n  if (parent) {\n    parent.removeChild(ele);\n  }\n};\n\nvar replaceNode = function (replacementNode, node) {\n  removeNode(replacementNode);\n  var parent = node.parentNode;\n\n  if (parent) {\n    parent.insertBefore(replacementNode, node);\n  }\n\n  removeNode(node);\n};\n\nvar unwrap = function (ele) {\n  var parent = ele.parentNode;\n\n  if (!parent) {\n    return;\n  }\n\n  var range = document.createRange();\n  range.selectNodeContents(ele);\n  replaceNode(range.extractContents(), ele);\n  parent.normalize();\n};\n\nvar wrap = function (ele, startOffset, endOffset) {\n  var range = new Range();\n  range.setStart(ele, startOffset);\n  range.setEnd(ele, endOffset);\n  var wrapper = document.createElement('span');\n  range.surroundContents(wrapper);\n  return wrapper;\n};\n\nvar TextLayer = function (_a) {\n  var keywordRegexp = _a.keywordRegexp,\n      match = _a.match,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onJumpToMatch = _a.onJumpToMatch,\n      onTextLayerRender = _a.onTextLayerRender;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n  var renderTask = React.useRef();\n  var isRendered = React.useRef(false);\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n    var numSpans = spans.length;\n\n    for (var i = 0; i < numSpans; i++) {\n      var span = spans[i];\n      containerEle.removeChild(span);\n    }\n  };\n\n  var highlight = function (span) {\n    var text = span.textContent;\n\n    if (!keywordRegexp.source.trim() || !text) {\n      return;\n    }\n\n    var startOffset = text.search(keywordRegexp);\n    var firstChild = span.firstChild;\n\n    if (startOffset === -1 || !firstChild) {\n      return;\n    }\n\n    var endOffset = startOffset + keywordRegexp.source.length;\n    var wrapper = wrap(firstChild, startOffset, endOffset);\n    wrapper.classList.add(theme.prefixClass + \"-text-highlight\");\n  };\n\n  var unhighlightAll = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var highlightNodes = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n    var total = highlightNodes.length;\n\n    for (var i = 0; i < total; i++) {\n      unwrap(highlightNodes[i]);\n    }\n  };\n\n  var scrollToMatch = function () {\n    var containerEle = containerRef.current;\n\n    if (match.pageIndex !== pageIndex || !containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n\n    if (match.matchIndex < spans.length) {\n      var span = spans[match.matchIndex];\n\n      var _a = calculateOffset(span, containerEle),\n          top_1 = _a.top,\n          left = _a.left;\n\n      onJumpToMatch(pageIndex, top_1 / scale, left / scale);\n    }\n  };\n\n  var renderText = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    isRendered.current = false;\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJs.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport\n      });\n      renderTask.current.promise.then(function () {\n        isRendered.current = true;\n        var spans = containerEle.childNodes;\n        var numSpans = spans.length;\n\n        if (keywordRegexp) {\n          unhighlightAll();\n        }\n\n        for (var i = 0; i < numSpans; i++) {\n          var span = spans[i];\n          span.classList.add(theme.prefixClass + \"-text\");\n\n          if (keywordRegexp) {\n            highlight(span);\n          }\n        }\n\n        scrollToMatch();\n        onTextLayerRender({\n          ele: containerEle\n        });\n      }, function () {});\n    });\n  };\n\n  React.useEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!keywordRegexp || !isRendered.current || !containerEle) {\n      return;\n    }\n\n    unhighlightAll();\n\n    if (keywordRegexp.source.trim()) {\n      var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n      var numSpans = spans.length;\n\n      for (var i = 0; i < numSpans; i++) {\n        highlight(spans[i]);\n      }\n    }\n  }, [keywordRegexp, isRendered.current]);\n  React.useEffect(function () {\n    if (isRendered.current) {\n      scrollToMatch();\n    }\n  }, [match]);\n  return React__default.createElement(WithScale, {\n    callback: renderText,\n    rotation: rotation,\n    scale: scale\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-text-layer\",\n    ref: containerRef\n  }));\n};\n\nvar PageLayer = function (_a) {\n  var doc = _a.doc,\n      height = _a.height,\n      keywordRegexp = _a.keywordRegexp,\n      match = _a.match,\n      pageIndex = _a.pageIndex,\n      renderPage = _a.renderPage,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onCanvasLayerRender = _a.onCanvasLayerRender,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onPageVisibilityChanged = _a.onPageVisibilityChanged,\n      onTextLayerRender = _a.onTextLayerRender;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    isCalculated: false,\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var isCalculated = pageSize.isCalculated,\n      page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var intersectionThreshold = Array(10).fill(null).map(function (_, i) {\n    return i / 10;\n  });\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n\n  var visibilityChanged = function (params) {\n    var ratio = params.isVisible ? params.ratio : 0;\n    onPageVisibilityChanged(pageIndex, ratio);\n\n    if (params.isVisible && !isCalculated) {\n      doc.getPage(pageIndex + 1).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        setPageSize({\n          isCalculated: true,\n          page: pdfPage,\n          pageHeight: viewport.height,\n          pageWidth: viewport.width,\n          viewportRotation: viewport.rotation\n        });\n      });\n    }\n  };\n\n  var jumpToMatch = function (indexOfPage, top, left) {\n    onJumpToDest(indexOfPage, pageHeight - top, scale);\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__default.createElement(React__default.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  return React__default.createElement(Observer, {\n    onVisibilityChanged: visibilityChanged,\n    threshold: intersectionThreshold\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-page-layer\",\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React__default.createElement(Spinner, null) : renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__default.createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        rotation: rotationNumber,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__default.createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w,\n        onCanvasLayerRender: onCanvasLayerRender\n      })\n    },\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotation,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__default.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__default.createElement(TextLayer, {\n        keywordRegexp: keywordRegexp,\n        match: match,\n        page: page,\n        pageIndex: pageIndex,\n        rotation: rotationNumber,\n        scale: scale,\n        onJumpToMatch: jumpToMatch,\n        onTextLayerRender: onTextLayerRender\n      })\n    },\n    width: w\n  })));\n};\n\nvar LocalizationContext = React__default.createContext({});\n\nvar DropArea = function () {\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-drop-area\"\n  }, l10n.main.dragDropFile);\n};\n\nvar PrintProgress = function (_a) {\n  var numLoadedPages = _a.numLoadedPages,\n      numPages = _a.numPages,\n      onCancel = _a.onCancel,\n      onStartPrinting = _a.onStartPrinting;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n  var progress = Math.floor(numLoadedPages * 100 / numPages);\n  React.useEffect(function () {\n    if (numLoadedPages === numPages) {\n      onStartPrinting();\n    }\n  }, [numLoadedPages]);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-inner\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-message\"\n  }, l10n.printProgress.preparingDocument), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-bar\"\n  }, React__default.createElement(ProgressBar, {\n    progress: progress\n  })), React__default.createElement(PrimaryButton, {\n    onClick: onCancel\n  }, l10n.printProgress.cancel)));\n};\n\nvar PrintStatus;\n\n(function (PrintStatus) {\n  PrintStatus[\"Inactive\"] = \"Inactive\";\n  PrintStatus[\"Preparing\"] = \"Preparing\";\n  PrintStatus[\"Cancelled\"] = \"Cancelled\";\n  PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\n\nvar PrintStatus$1 = PrintStatus;\n\nvar PageThumbnail = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n  var theme = React.useContext(ThemeContext);\n  var renderTask = React.useRef();\n\n  var _b = React.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var printUnit = 150 / 72;\n    canvas.height = Math.floor(pageHeight * printUnit);\n    canvas.width = Math.floor(pageWidth * printUnit);\n    var canvasContext = canvas.getContext('2d');\n    canvasContext.save();\n    canvasContext.fillStyle = 'rgb(255, 255, 255)';\n    canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n    canvasContext.restore();\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: 1\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      intent: 'print',\n      transform: [printUnit, 0, 0, printUnit, 0, 0],\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      'toBlob' in canvas ? canvas.toBlob(function (blob) {\n        setSrc(URL.createObjectURL(blob));\n      }) : setSrc(canvas.toDataURL());\n    }, function () {});\n  }, []);\n  return !src ? React__default.createElement(Spinner, null) : React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-page-thumbnail\",\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    }\n  }, React__default.createElement(\"img\", {\n    src: src,\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    },\n    onLoad: onLoad\n  }));\n};\n\nvar PageThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n\n  var _b = React.useState({\n    height: pageHeight,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  React.useEffect(function () {\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        height: viewport.height,\n        page: pdfPage,\n        viewportRotation: viewport.rotation,\n        width: viewport.width\n      });\n    });\n  }, []);\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  return !page ? React__default.createElement(Spinner, null) : React__default.createElement(PageThumbnail, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    onLoad: onLoad\n  });\n};\n\nvar PrintZone = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onLoad = _a.onLoad;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(0),\n      numLoadedPages = _b[0],\n      setNumLoadedPages = _b[1];\n\n  React.useEffect(function () {\n    if (printStatus === PrintStatus$1.Ready) {\n      document.body.classList.add(theme.prefixClass + \"-body-printing\");\n      window.print();\n    }\n\n    var handler = function () {\n      if (printStatus === PrintStatus$1.Ready) {\n        document.body.classList.remove(theme.prefixClass + \"-body-printing\");\n        onCancel();\n      }\n    };\n\n    document.addEventListener('mousemove', handler);\n    return function () {\n      return document.removeEventListener('mousemove', handler);\n    };\n  }, [printStatus]);\n  var numPages = doc.numPages;\n\n  var loadPage = function () {\n    var total = numLoadedPages + 1;\n    setNumLoadedPages(total);\n    onLoad(total);\n  };\n\n  return reactDom.createPortal(React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-zone\"\n  }, Array(numPages).fill(0).map(function (_, index) {\n    return React__default.createElement(PageThumbnailContainer, {\n      key: index,\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      onLoad: loadPage\n    });\n  })), React__default.createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n    }\n  })), document.body);\n};\n\nvar PrintContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onStartPrinting = _a.onStartPrinting;\n\n  var _b = React.useState(0),\n      numLoadedPagesForPrint = _b[0],\n      setNumLoadedPagesForPrint = _b[1];\n\n  var cancelPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    onCancel();\n  };\n\n  var startPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    onStartPrinting();\n  };\n\n  return React__default.createElement(React__default.Fragment, null, printStatus === PrintStatus$1.Preparing && React__default.createElement(PrintProgress, {\n    numLoadedPages: numLoadedPagesForPrint,\n    numPages: doc.numPages,\n    onCancel: cancelPrinting,\n    onStartPrinting: startPrinting\n  }), (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && React__default.createElement(PrintZone, {\n    doc: doc,\n    pageHeight: pageHeight,\n    pageWidth: pageWidth,\n    printStatus: printStatus,\n    rotation: rotation,\n    onCancel: cancelPrinting,\n    onLoad: setNumLoadedPagesForPrint\n  }));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar ExitFullScreenIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\\n                C9.515,9.962,9.963,9.514,10.515,9.514z\\n                M0.531,23.499l6.984-6.985\\n                M16.515,7.514L23.5,0.529\\n                M21.515,7.514h-5v-5\\n                M7.515,21.514v-5 h-5\\n                M0.523,0.521l6.992,6.993\\n                M16.515,16.514l6.985,6.985\\n                M16.515,21.514v-5h5\\n                M2.515,7.514h5v-5\"\n  }));\n};\n\nvar ExitFullScreen = function (_a) {\n  var onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-exit-fullscreen\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-exit-fullscreen-inner\"\n  }, React__default.createElement(Button, {\n    onClick: onClick\n  }, React__default.createElement(ExitFullScreenIcon, null))));\n};\n\nvar AttachmentList = function (_a) {\n  var files = _a.files;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var renderItem = function (file) {\n    var onClick = function () {\n      return downloadFile(file.fileName, file.data);\n    };\n\n    return React__default.createElement(\"li\", {\n      className: theme.prefixClass + \"-attachment-item\",\n      key: \"attachment-\" + file.fileName,\n      title: \"\" + l10n.attachment.clickToDownload,\n      onClick: onClick\n    }, file.fileName);\n  };\n\n  return files.length === 0 ? React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-attachment-list-empty\"\n  }, l10n.attachment.noAttachment) : React__default.createElement(\"ul\", {\n    className: theme.prefixClass + \"-attachment-list\"\n  }, files.map(renderItem));\n};\n\nvar AttachmentLoader = function (_a) {\n  var doc = _a.doc;\n\n  var _b = React.useState({\n    files: [],\n    isLoaded: false\n  }),\n      attachments = _b[0],\n      setAttachments = _b[1];\n\n  React.useEffect(function () {\n    doc.getAttachments().then(function (response) {\n      var files = response ? Object.keys(response).map(function (file) {\n        return {\n          data: response[file].content,\n          fileName: response[file].filename\n        };\n      }) : [];\n      setAttachments({\n        files: files,\n        isLoaded: true\n      });\n    });\n  }, []);\n  return !attachments.isLoaded ? React__default.createElement(Spinner, null) : React__default.createElement(AttachmentList, {\n    files: attachments.files\n  });\n};\n\nvar BookmarkItem = function (_a) {\n  var bookmark = _a.bookmark,\n      depth = _a.depth,\n      doc = _a.doc,\n      onClick = _a.onClick,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n  var toggleRef = React.createRef();\n  var subItemRef = React.createRef();\n  var subItemsDisplayed = React.useRef(true);\n  var hasSubItems = bookmark.items && bookmark.items.length > 0;\n\n  var toggleSubItems = function () {\n    subItemsDisplayed.current = !subItemsDisplayed.current;\n    var subItemsEle = subItemRef.current;\n    var toggleEle = toggleRef.current;\n\n    if (!subItemsEle || !toggleEle) {\n      return;\n    }\n\n    subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n    toggleEle.classList.toggle(theme.prefixClass + \"-bookmark-toggle-expanded\");\n  };\n\n  var clickBookmak = function () {\n    if (hasSubItems && bookmark.dest) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  var clickItem = function () {\n    if (!hasSubItems && bookmark.dest) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-item\",\n    style: {\n      paddingLeft: depth * 20 + 4 + \"px\"\n    },\n    onClick: clickItem\n  }, hasSubItems && React__default.createElement(\"span\", {\n    ref: toggleRef,\n    className: theme.prefixClass + \"-bookmark-toggle\",\n    onClick: toggleSubItems\n  }, \"\\u25BA\"), bookmark.url ? React__default.createElement(\"a\", {\n    className: theme.prefixClass + \"-bookmark-title\",\n    href: bookmark.url,\n    rel: 'noopener noreferrer nofollow',\n    target: bookmark.newWindow ? '_blank' : ''\n  }, bookmark.title) : React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-title\",\n    onClick: clickBookmak\n  }, bookmark.title)), hasSubItems && React__default.createElement(\"div\", {\n    ref: subItemRef\n  }, React__default.createElement(BookmarkList, {\n    bookmarks: bookmark.items,\n    depth: depth + 1,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  })));\n};\n\nvar BookmarkList = function (_a) {\n  var bookmarks = _a.bookmarks,\n      _b = _a.depth,\n      depth = _b === void 0 ? 0 : _b,\n      doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n\n  var jumpToDest = function (dest) {\n    getDestination(doc, dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n    });\n  };\n\n  return React__default.createElement(\"ul\", {\n    className: theme.prefixClass + \"-bookmark-list\"\n  }, bookmarks.map(function (bookmark, index) {\n    return React__default.createElement(\"li\", {\n      key: index\n    }, React__default.createElement(BookmarkItem, {\n      bookmark: bookmark,\n      depth: depth,\n      doc: doc,\n      onClick: jumpToDest,\n      onJumpToDest: onJumpToDest\n    }));\n  }));\n};\n\nvar BookmarkLoader = function (_a) {\n  var doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    isLoaded: false,\n    items: []\n  }),\n      bookmarks = _b[0],\n      setBookmarks = _b[1];\n\n  React.useEffect(function () {\n    doc.getOutline().then(function (outline) {\n      setBookmarks({\n        isLoaded: true,\n        items: outline || []\n      });\n    });\n  }, []);\n  return !bookmarks.isLoaded ? React__default.createElement(Spinner, null) : bookmarks.items.length === 0 ? React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-empty\"\n  }, l10n.bookmark.noBookmark) : React__default.createElement(BookmarkList, {\n    bookmarks: bookmarks.items,\n    depth: 0,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  });\n};\n\nvar BookmarkIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\\n                M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\\n                c0.552,0,1,0.448,1,1L11.5,10.5z\\n                M14.5,6.499h6\\n                M14.5,10.499h6\\n                M3.5,14.499h17\\n                M3.5,18.499h16.497\"\n  }));\n};\n\nvar FileIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\\n                c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\\n                L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9\"\n  }));\n};\n\nvar WrappedScrollingIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\\n                M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\"\n  }));\n};\n\nvar ThumbnailItem = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      thumbnailHeight = _a.thumbnailHeight,\n      thumbnailWidth = _a.thumbnailWidth;\n  var renderTask = React.useRef();\n\n  var _b = React.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var canvasContext = canvas.getContext('2d', {\n      alpha: false\n    });\n    var w = thumbnailWidth;\n    var h = w / (pageWidth / pageHeight);\n    var scale = w / pageWidth;\n    canvas.height = h;\n    canvas.width = w;\n    canvas.style.height = h + \"px\";\n    canvas.style.width = w + \"px\";\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      return setSrc(canvas.toDataURL());\n    }, function () {});\n  }, [rotation]);\n  return !src ? React__default.createElement(Spinner, null) : React__default.createElement(\"img\", {\n    src: src,\n    height: thumbnailHeight + \"px\",\n    width: thumbnailWidth + \"px\"\n  });\n};\n\nvar THUMBNAIL_WIDTH = 100;\n\nvar ThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    height: pageHeight,\n    isCalculated: false,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var isCalculated = pageSize.isCalculated,\n      page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var scale = width / height;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? THUMBNAIL_WIDTH : THUMBNAIL_WIDTH / scale;\n  var h = isVertical ? THUMBNAIL_WIDTH / scale : THUMBNAIL_WIDTH;\n\n  var onVisibilityChanged = function (params) {\n    if (params.isVisible && !isCalculated) {\n      doc.getPage(pageIndex + 1).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        setPageSize({\n          height: viewport.height,\n          isCalculated: true,\n          page: pdfPage,\n          viewportRotation: viewport.rotation,\n          width: viewport.width\n        });\n      });\n    }\n  };\n\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  return React__default.createElement(Observer, {\n    onVisibilityChanged: onVisibilityChanged\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-thumbnail-container\",\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React__default.createElement(Spinner, null) : React__default.createElement(ThumbnailItem, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    thumbnailHeight: h,\n    thumbnailWidth: w\n  })));\n};\n\nvar ThumbnailList = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onJumpToPage = _a.onJumpToPage;\n  var theme = React.useContext(ThemeContext);\n  var numPages = doc.numPages;\n  return React__default.createElement(React__default.Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n    var _a;\n\n    var onClick = function () {\n      return onJumpToPage(index);\n    };\n\n    return React__default.createElement(\"div\", {\n      key: \"thumbnail-\" + index\n    }, React__default.createElement(\"div\", {\n      className: classNames((_a = {}, _a[theme.prefixClass + \"-thumbnail\"] = true, _a[theme.prefixClass + \"-thumbnail-selected\"] = currentPage === index, _a)),\n      onClick: onClick\n    }, React__default.createElement(ThumbnailContainer, {\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation\n    })));\n  }));\n};\n\nvar Tab;\n\n(function (Tab) {\n  Tab[\"Attachment\"] = \"Attachment\";\n  Tab[\"Bookmark\"] = \"Bookmark\";\n  Tab[\"Thumbnail\"] = \"Thumbnail\";\n})(Tab || (Tab = {}));\n\nvar TOOLTIP_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar Sidebar = function (_a) {\n  var _b;\n\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      height = _a.height,\n      rotation = _a.rotation,\n      width = _a.width,\n      onJumpToDest = _a.onJumpToDest,\n      onJumpToPage = _a.onJumpToPage;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _c = React.useState(Tab.Thumbnail),\n      tab = _c[0],\n      setTab = _c[1];\n\n  var clickThumbnailTab = function () {\n    return setTab(Tab.Thumbnail);\n  };\n\n  var clickBookmarkTab = function () {\n    return setTab(Tab.Bookmark);\n  };\n\n  var clickAttachmentTab = function () {\n    return setTab(Tab.Attachment);\n  };\n\n  var renderAttachmentTip = function () {\n    return l10n.sidebar.attachment;\n  };\n\n  var renderBookmarkTip = function () {\n    return l10n.sidebar.bookmark;\n  };\n\n  var renderThumbnailTip = function () {\n    return l10n.sidebar.thumbnail;\n  };\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tabs\"\n  }, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React__default.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React__default.createElement(Button, {\n      onClick: clickThumbnailTab,\n      isSelected: tab === Tab.Thumbnail\n    }, React__default.createElement(WrappedScrollingIcon, null)),\n    content: renderThumbnailTip,\n    offset: TOOLTIP_OFFSET\n  })), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React__default.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React__default.createElement(Button, {\n      onClick: clickBookmarkTab,\n      isSelected: tab === Tab.Bookmark\n    }, React__default.createElement(BookmarkIcon, null)),\n    content: renderBookmarkTip,\n    offset: TOOLTIP_OFFSET\n  })), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React__default.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React__default.createElement(Button, {\n      onClick: clickAttachmentTab,\n      isSelected: tab === Tab.Attachment\n    }, React__default.createElement(FileIcon, null)),\n    content: renderAttachmentTip,\n    offset: TOOLTIP_OFFSET\n  }))), React__default.createElement(\"div\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-sidebar-content\"] = true, _b[theme.prefixClass + \"-sidebar-thumbnails\"] = tab === Tab.Thumbnail, _b))\n  }, tab === Tab.Thumbnail && React__default.createElement(ThumbnailList, {\n    currentPage: currentPage,\n    doc: doc,\n    pageHeight: height,\n    pageWidth: width,\n    rotation: rotation,\n    onJumpToPage: onJumpToPage\n  }), tab === Tab.Bookmark && React__default.createElement(BookmarkLoader, {\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  }), tab === Tab.Attachment && React__default.createElement(AttachmentLoader, {\n    doc: doc\n  })));\n};\n\nvar DownArrowIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\\n                c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\\n                C1.96,3.016,2.138,2.966,2.32,2.966z\"\n  }));\n};\n\nvar DownloadIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M17.5,11.5c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,14.5v6\\n                M17.5,20.5\\n                l-2.25-2.25\\n                M17.5,20.5l2.25-2.25\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21c0-0.552,0.448-1,1-1h13.293\\n                c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\"\n  }));\n};\n\nvar FullScreenIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M15.5,8.499l8-8\\n                M0.5,23.499l8-8\\n                M5.5,23.499h-5v-5\\n                M23.5,5.499v-5h-5\\n                M15.5,15.499l8,8\\n                M0.5,0.499l8,8\\n                M0.5,5.499v-5h5\\n                M18.5,23.499h5v-5\"\n  }));\n};\n\nvar HandToolIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\\n                c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\\n                c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\\n                c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6\"\n  }));\n};\n\nvar HorizontalScrollingIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\"\n  }));\n};\n\nvar InfoIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\\n                M14.5,17.005H13\\n                c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\\n                M11.745,6.504L11.745,6.504\\n                M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\\n                S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5\"\n  }));\n};\n\nvar LeftSidebarIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M1.5,0.497h20c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-20c-0.552,0-1-0.448-1-1v-20\\n                C0.5,0.945,0.948,0.497,1.5,0.497z\\n                M7.5,0.497v22\"\n  }));\n};\n\nvar NextIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n                L23.541,5.627\"\n  }));\n};\n\nvar PreviousIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n                L0.535,18.373\"\n  }));\n};\n\nvar PrintIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\"\n  }));\n};\n\nvar RotateBackwardIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\\n                M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\\n                M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\\n                M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\\n                M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\\n                M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\\n                M13.5,1.75L10,4.25l3.5,2.5\"\n  }));\n};\n\nvar RotateForwardIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\\n                M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\\n                M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\\n                M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\\n                M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\\n                M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\\n                M10.5,1.75l3.5,2.5l-3.5,2.5\"\n  }));\n};\n\nvar TextSelectionIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\\n                L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\\n                c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\\n                l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z\"\n  }));\n};\n\nvar UpArrowIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\\n                c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\\n                C22.143,20.984,21.965,21.034,21.783,21.034z\"\n  }));\n};\n\nvar VerticalScrollingIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\\n                M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\\n                M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z\"\n  }));\n};\n\nvar ZoomInIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\\n                M10.5,5.499v10\"\n  }));\n};\n\nvar ZoomOutIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\"\n  }));\n};\n\nvar OpenFileIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M4.5,8.5H14\\n                M4.5,11.5h6\\n                M4.5,5.5h7\\n                M4.5,14.5h4\\n                M4.5,17.5h4\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21\\n                c0-0.552,0.448-1,1-1h13.293c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\\n                M17.5,11.5\\n                c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,20.5v-6\\n                M17.5,14.5l-2.25,2.25\\n                M17.5,14.5l2.25,2.25\"\n  }));\n};\n\nvar TOOLTIP_OFFSET$1 = {\n  left: 0,\n  top: 8\n};\n\nvar OpenFileButton = function (_a) {\n  var onOpenFiles = _a.onOpenFiles;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var openFiles = function (e) {\n    var files = e.target.files;\n\n    if (files) {\n      onOpenFiles(files);\n    }\n  };\n\n  var renderContent = function () {\n    return l10n.toolbar.openFile;\n  };\n\n  return React__default.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-open-file\"\n    }, React__default.createElement(\"input\", {\n      className: theme.prefixClass + \"-open-file-input\",\n      multiple: false,\n      type: 'file',\n      title: '',\n      onChange: openFiles\n    }), React__default.createElement(OpenFileIcon, null)),\n    content: renderContent,\n    offset: TOOLTIP_OFFSET$1\n  });\n};\n\nvar fileSize = function (bytes) {\n  var sufixes = ['B', 'kB', 'MB', 'GB', 'TB'];\n  var i = Math.floor(Math.log(bytes) / Math.log(1024));\n  return (bytes / Math.pow(1024, i)).toFixed(2) + \" \" + sufixes[i];\n};\n\nvar PropertiesLoader = function (_a) {\n  var doc = _a.doc,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(),\n      data = _b[0],\n      setData = _b[1];\n\n  React.useEffect(function () {\n    doc.getMetadata().then(function (meta) {\n      return Promise.resolve(meta);\n    }).then(function (meta) {\n      return doc.getDownloadInfo().then(function (d) {\n        return Promise.resolve({\n          fileName: meta.contentDispositionFilename || '',\n          info: meta.info,\n          length: d.length\n        });\n      });\n    }).then(function (response) {\n      setData(response);\n    });\n  }, []);\n  return data ? render(data) : React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-loader\"\n  }, React__default.createElement(Spinner, null));\n};\n\nvar PropertyItem = function (_a) {\n  var label = _a.label,\n      value = _a.value;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"dl\", {\n    className: theme.prefixClass + \"-property-item\"\n  }, React__default.createElement(\"dt\", {\n    className: theme.prefixClass + \"-property-item-label\"\n  }, label, \":\"), React__default.createElement(\"dd\", {\n    className: theme.prefixClass + \"-property-item-value\"\n  }, value || '-'));\n};\n\nvar PropertiesModal = function (_a) {\n  var doc = _a.doc,\n      fileName$1 = _a.fileName,\n      onToggle = _a.onToggle;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var formatDate = function (input) {\n    var date = convertDate(input);\n    return date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n  };\n\n  var renderData = function (data) {\n    return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.fileName,\n      value: data.fileName || fileName(fileName$1)\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.fileSize,\n      value: fileSize(data.length)\n    })), React__default.createElement(Separator, null), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.title,\n      value: data.info.Title\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.author,\n      value: data.info.Author\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.subject,\n      value: data.info.Subject\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.keywords,\n      value: data.info.Keywords\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.creator,\n      value: data.info.Creator\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.creationDate,\n      value: formatDate(data.info.CreationDate)\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.modificationDate,\n      value: formatDate(data.info.ModDate)\n    })), React__default.createElement(Separator, null), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pdfProducer,\n      value: data.info.Producer\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pdfVersion,\n      value: data.info.PDFFormatVersion\n    }), React__default.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pageCount,\n      value: \"\" + doc.numPages\n    })));\n  };\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-modal\"\n  }, React__default.createElement(PropertiesLoader, {\n    doc: doc,\n    render: renderData\n  }), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-modal-footer\"\n  }, React__default.createElement(PrimaryButton, {\n    onClick: onToggle\n  }, l10n.property.close)));\n};\n\nvar SearchIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n                M23.5,23.5\\n                l-5.929-5.929\"\n  }));\n};\n\nvar EMPTY_KEYWORD_REGEXP = new RegExp(' ');\nvar PORTAL_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar SearchPopover = function (_a) {\n  var doc = _a.doc,\n      onJumpToMatch = _a.onJumpToMatch,\n      onSearchFor = _a.onSearchFor;\n  var theme = React.useContext(ThemeContext);\n  var numPages = doc.numPages;\n  var indexArr = Array(numPages).fill(0).map(function (_, i) {\n    return i;\n  });\n  var l10n = React.useContext(LocalizationContext);\n\n  var _b = React.useState(''),\n      keyword = _b[0],\n      setKeyword = _b[1];\n\n  var _c = React.useState([]),\n      found = _c[0],\n      setFound = _c[1];\n\n  var _d = React.useState(0),\n      currentMatch = _d[0],\n      setCurrentMatch = _d[1];\n\n  var _e = React.useState(false),\n      matchCase = _e[0],\n      setMatchCase = _e[1];\n\n  var _f = React.useState(false),\n      wholeWords = _f[0],\n      setWholeWords = _f[1];\n\n  var textContents = React.useRef([]);\n\n  var changeKeyword = function (e) {\n    setKeyword(e.target.value);\n  };\n\n  var getTextContents = function () {\n    var promises = indexArr.map(function (pageIndex) {\n      return doc.getPage(pageIndex + 1).then(function (page) {\n        return page.getTextContent();\n      }).then(function (content) {\n        var pageContent = content.items.map(function (item) {\n          return item.str || '';\n        }).join('');\n        return Promise.resolve({\n          pageContent: pageContent,\n          pageIndex: pageIndex\n        });\n      });\n    });\n    return Promise.all(promises).then(function (data) {\n      data.sort(function (a, b) {\n        return a.pageIndex - b.pageIndex;\n      });\n      return Promise.resolve(data.map(function (item) {\n        return item.pageContent;\n      }));\n    });\n  };\n\n  var buildKeywordRegex = function (keywordParam, matchCaseParam, wholeWordsParam) {\n    var source = wholeWordsParam ? \" \" + keywordParam + \" \" : keywordParam;\n    var flags = matchCaseParam ? 'g' : 'gi';\n    return new RegExp(source, flags);\n  };\n\n  var search = function (keywordParam, matchCaseParam, wholeWordsParam) {\n    var regexp = buildKeywordRegex(keywordParam, matchCaseParam, wholeWordsParam);\n    onSearchFor(regexp);\n    setCurrentMatch(0);\n    setFound([]);\n    var promise = textContents.current.length === 0 ? getTextContents().then(function (response) {\n      textContents.current = response;\n      return Promise.resolve(response);\n    }) : Promise.resolve(textContents.current);\n    promise.then(function (response) {\n      var arr = [];\n      response.forEach(function (item, pageIndex) {\n        var numMatches = (item.match(regexp) || []).length;\n\n        for (var matchIndex = 0; matchIndex < numMatches; matchIndex++) {\n          arr.push({\n            matchIndex: matchIndex,\n            pageIndex: pageIndex\n          });\n        }\n      });\n      setFound(arr);\n\n      if (arr.length > 0) {\n        setCurrentMatch(1);\n        onJumpToMatch(arr[0]);\n      }\n    });\n  };\n\n  var keydownSearch = function (e) {\n    if (e.keyCode !== 13 || !keyword) {\n      return;\n    }\n\n    search(keyword, matchCase, wholeWords);\n  };\n\n  var jumpToPreviousMatch = function () {\n    var prev = currentMatch - 1;\n    var updated = prev > 0 ? prev : found.length;\n    setCurrentMatch(updated);\n    onJumpToMatch(found[updated - 1]);\n  };\n\n  var jumpToNextMatch = function () {\n    var next = currentMatch + 1;\n    var updated = next <= found.length ? next : 1;\n    setCurrentMatch(updated);\n    onJumpToMatch(found[updated - 1]);\n  };\n\n  var changeMatchCase = function (e) {\n    var isChecked = e.target.checked;\n    setMatchCase(isChecked);\n\n    if (keyword) {\n      search(keyword, isChecked, wholeWords);\n    }\n  };\n\n  var changeWholeWords = function (e) {\n    var isChecked = e.target.checked;\n    setWholeWords(isChecked);\n\n    if (keyword) {\n      search(keyword, matchCase, isChecked);\n    }\n  };\n\n  var clearKeyword = function () {\n    onSearchFor(EMPTY_KEYWORD_REGEXP);\n    setKeyword('');\n    setCurrentMatch(0);\n    setFound([]);\n    setMatchCase(false);\n    setWholeWords(false);\n  };\n\n  var renderSearch = function () {\n    return l10n.toolbar.search;\n  };\n\n  var renderTarget = function (toggle, opened) {\n    return React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: toggle,\n        isSelected: opened\n      }, React__default.createElement(SearchIcon, null)),\n      content: renderSearch,\n      offset: PORTAL_OFFSET\n    });\n  };\n\n  var renderPreviousMatch = function () {\n    return l10n.search.previousMatch;\n  };\n\n  var renderNextMatch = function () {\n    return l10n.search.nextMatch;\n  };\n\n  var renderContent = function (toggle) {\n    var close = function () {\n      toggle();\n      clearKeyword();\n    };\n\n    return React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover\"\n    }, React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-input-counter\"\n    }, React__default.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-input\",\n      placeholder: \"\" + l10n.search.enterToSearch,\n      type: \"text\",\n      value: keyword,\n      onChange: changeKeyword,\n      onKeyDown: keydownSearch\n    }), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-counter\"\n    }, currentMatch, \"/\", found.length)), React__default.createElement(\"label\", {\n      className: theme.prefixClass + \"-search-popover-label\"\n    }, React__default.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-label-checkbox\",\n      checked: matchCase,\n      type: \"checkbox\",\n      onChange: changeMatchCase\n    }), \" \", l10n.search.matchCase), React__default.createElement(\"label\", {\n      className: theme.prefixClass + \"-search-popover-label\"\n    }, React__default.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-label-checkbox\",\n      checked: wholeWords,\n      type: \"checkbox\",\n      onChange: changeWholeWords\n    }), \" \", l10n.search.wholeWords), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer\"\n    }, React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-item\"\n    }, React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: jumpToPreviousMatch\n      }, React__default.createElement(PreviousIcon, null)),\n      content: renderPreviousMatch,\n      offset: PORTAL_OFFSET\n    })), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-item\"\n    }, React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: jumpToNextMatch\n      }, React__default.createElement(NextIcon, null)),\n      content: renderNextMatch,\n      offset: PORTAL_OFFSET\n    })), React__default.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-button\"\n    }, React__default.createElement(PrimaryButton, {\n      onClick: close\n    }, l10n.search.close))));\n  };\n\n  return React__default.createElement(Popover, {\n    position: Position$1.BottomLeft,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET,\n    closeOnClickOutside: false,\n    closeOnEscape: true\n  });\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar increase = function (currentLevel) {\n  var found = LEVELS.find(function (item) {\n    return item > currentLevel;\n  });\n  return found || currentLevel;\n};\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var theme = React.useContext(ThemeContext);\n  return React__default.createElement(\"ul\", {\n    className: theme.prefixClass + \"-menu\"\n  }, children);\n};\n\nvar LEVELS$1 = [0.5, 0.75, 1, 1.25, 1.5, 2, 3, 4];\nvar PORTAL_OFFSET$1 = {\n  left: 0,\n  top: 8\n};\n\nvar ZoomPopover = function (_a) {\n  var scale = _a.scale,\n      onZoom = _a.onZoom;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var getSpcialLevelLabel = function (level) {\n    switch (level) {\n      case SpecialZoomLevel$1.ActualSize:\n        return l10n.zoom.actualSize;\n\n      case SpecialZoomLevel$1.PageFit:\n        return l10n.zoom.pageFit;\n\n      case SpecialZoomLevel$1.PageWidth:\n        return l10n.zoom.pageWidth;\n    }\n  };\n\n  var renderTarget = function (toggle) {\n    var click = function () {\n      toggle();\n    };\n\n    return React__default.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target\",\n      onClick: click\n    }, React__default.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target-scale\"\n    }, Math.round(scale * 100), \"%\"), React__default.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target-arrow\"\n    }));\n  };\n\n  var renderContent = function (toggle) {\n    return React__default.createElement(Menu, null, Object.keys(SpecialZoomLevel$1).map(function (k) {\n      var level = k;\n\n      var clickMenuItem = function () {\n        toggle();\n        onZoom(level);\n      };\n\n      return React__default.createElement(MenuItem, {\n        key: level,\n        onClick: clickMenuItem\n      }, getSpcialLevelLabel(level));\n    }), React__default.createElement(MenuDivider, null), LEVELS$1.map(function (level) {\n      var clickMenuItem = function () {\n        toggle();\n        onZoom(level);\n      };\n\n      return React__default.createElement(MenuItem, {\n        key: level,\n        onClick: clickMenuItem\n      }, Math.round(level * 100) + \"%\");\n    }));\n  };\n\n  return React__default.createElement(Popover, {\n    position: Position$1.BottomCenter,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET$1,\n    closeOnClickOutside: true,\n    closeOnEscape: true\n  });\n};\n\nvar MoreIcon = function () {\n  return React__default.createElement(Icon, {\n    size: 16\n  }, React__default.createElement(\"path\", {\n    d: \"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\\n                M12,9.5\\n                c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\\n                M12,18.5c1.381,0,2.5,1.119,2.5,2.5\\n                s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z\"\n  }));\n};\n\nvar PORTAL_OFFSET$2 = {\n  left: 0,\n  top: 8\n};\n\nvar MoreActionsPopover = function (_a) {\n  var doc = _a.doc,\n      fileName = _a.fileName,\n      scrollMode = _a.scrollMode,\n      selectionMode = _a.selectionMode,\n      onChangeScrollMode = _a.onChangeScrollMode,\n      onChangeSelectionMode = _a.onChangeSelectionMode,\n      onJumpToFirstPage = _a.onJumpToFirstPage,\n      onJumpToLastPage = _a.onJumpToLastPage,\n      onRotate = _a.onRotate;\n  var l10n = React.useContext(LocalizationContext);\n\n  var renderMoreActions = function () {\n    return l10n.toolbar.moreActions;\n  };\n\n  var renderTarget = function (toggle, opened) {\n    return React__default.createElement(Tooltip, {\n      position: Position$1.BottomRight,\n      target: React__default.createElement(Button, {\n        onClick: toggle,\n        isSelected: opened\n      }, React__default.createElement(MoreIcon, null)),\n      content: renderMoreActions,\n      offset: PORTAL_OFFSET$2\n    });\n  };\n\n  var renderPropertyMenu = function (toggle) {\n    return React__default.createElement(MenuItem, {\n      icon: React__default.createElement(InfoIcon, null),\n      onClick: toggle\n    }, l10n.toolbar.documentProperties);\n  };\n\n  var renderPropertiesModal = function (toggle) {\n    return React__default.createElement(PropertiesModal, {\n      doc: doc,\n      fileName: fileName,\n      onToggle: toggle\n    });\n  };\n\n  var renderContent = function (toggle) {\n    var jumpToFirstPage = function () {\n      toggle();\n      onJumpToFirstPage();\n    };\n\n    var jumpToLastPage = function () {\n      toggle();\n      onJumpToLastPage();\n    };\n\n    var rotateForward = function () {\n      toggle();\n      onRotate(90);\n    };\n\n    var rotateBackward = function () {\n      toggle();\n      onRotate(-90);\n    };\n\n    var activateTextSelectionMode = function () {\n      toggle();\n      onChangeSelectionMode(SelectionMode$1.Text);\n    };\n\n    var activateHandMode = function () {\n      toggle();\n      onChangeSelectionMode(SelectionMode$1.Hand);\n    };\n\n    var activateScrollMode = function (mode) {\n      toggle();\n      onChangeScrollMode(mode);\n    };\n\n    var setVerticalScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Vertical);\n    };\n\n    var setHorizontalScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Horizontal);\n    };\n\n    var setWrappedScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Wrapped);\n    };\n\n    return React__default.createElement(Menu, null, React__default.createElement(MenuItem, {\n      icon: React__default.createElement(UpArrowIcon, null),\n      onClick: jumpToFirstPage\n    }, l10n.toolbar.goToFirstPage), React__default.createElement(MenuItem, {\n      icon: React__default.createElement(DownArrowIcon, null),\n      onClick: jumpToLastPage\n    }, l10n.toolbar.goToLastPage), React__default.createElement(MenuDivider, null), React__default.createElement(MenuItem, {\n      icon: React__default.createElement(RotateForwardIcon, null),\n      onClick: rotateForward\n    }, l10n.toolbar.rotateForward), React__default.createElement(MenuItem, {\n      icon: React__default.createElement(RotateBackwardIcon, null),\n      onClick: rotateBackward\n    }, l10n.toolbar.rotateBackward), React__default.createElement(MenuDivider, null), React__default.createElement(MenuItem, {\n      checked: selectionMode === SelectionMode$1.Text,\n      icon: React__default.createElement(TextSelectionIcon, null),\n      onClick: activateTextSelectionMode\n    }, l10n.toolbar.textSelectionTool), React__default.createElement(MenuItem, {\n      checked: selectionMode === SelectionMode$1.Hand,\n      icon: React__default.createElement(HandToolIcon, null),\n      onClick: activateHandMode\n    }, l10n.toolbar.handTool), React__default.createElement(MenuDivider, null), React__default.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Vertical,\n      icon: React__default.createElement(VerticalScrollingIcon, null),\n      onClick: setVerticalScrollMode\n    }, l10n.toolbar.verticalScrolling), React__default.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Horizontal,\n      icon: React__default.createElement(HorizontalScrollingIcon, null),\n      onClick: setHorizontalScrollMode\n    }, l10n.toolbar.horizontalScrolling), React__default.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Wrapped,\n      icon: React__default.createElement(WrappedScrollingIcon, null),\n      onClick: setWrappedScrollMode\n    }, l10n.toolbar.wrappedScrolling), React__default.createElement(MenuDivider, null), React__default.createElement(Modal, {\n      target: renderPropertyMenu,\n      content: renderPropertiesModal,\n      closeOnClickOutside: true,\n      closeOnEscape: true\n    }));\n  };\n\n  return React__default.createElement(Popover, {\n    position: Position$1.BottomRight,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET$2,\n    closeOnClickOutside: true,\n    closeOnEscape: true\n  });\n};\n\nvar TOOLTIP_OFFSET$2 = {\n  left: 0,\n  top: 8\n};\n\nvar Toolbar = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      fileName = _a.fileName,\n      scale = _a.scale,\n      scrollMode = _a.scrollMode,\n      selectionMode = _a.selectionMode,\n      onChangeScrollMode = _a.onChangeScrollMode,\n      onChangeSelectionMode = _a.onChangeSelectionMode,\n      onDownload = _a.onDownload,\n      onFullScreen = _a.onFullScreen,\n      onJumpTo = _a.onJumpTo,\n      onJumpToMatch = _a.onJumpToMatch,\n      onOpenFiles = _a.onOpenFiles,\n      onPrint = _a.onPrint,\n      onRotate = _a.onRotate,\n      onSearchFor = _a.onSearchFor,\n      onToggleSidebar = _a.onToggleSidebar,\n      onZoom = _a.onZoom,\n      renderToolbar = _a.renderToolbar;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(false),\n      pageTextboxFocused = _b[0],\n      setPageTextboxFocused = _b[1];\n\n  var _c = React.useState(currentPage),\n      editingPage = _c[0],\n      setEditingPage = _c[1];\n\n  var _d = React.useState(false),\n      isSidebarOpened = _d[0],\n      setSidebarOpened = _d[1];\n\n  var numPages = doc.numPages;\n\n  var zoomOut = function () {\n    var newLevel = decrease(scale);\n    onZoom(newLevel);\n  };\n\n  var zoomIn = function () {\n    var newLevel = increase(scale);\n    onZoom(newLevel);\n  };\n\n  var gotoNextPage = function () {\n    var nextPage = currentPage + 1;\n\n    if (nextPage < numPages) {\n      setEditingPage(nextPage);\n      onJumpTo(nextPage);\n    }\n  };\n\n  var gotoPreviousPage = function () {\n    var previousPage = currentPage - 1;\n\n    if (previousPage >= 0) {\n      setEditingPage(previousPage);\n      onJumpTo(previousPage);\n    }\n  };\n\n  var changePage = function (e) {\n    var newPage = parseInt(e.target.value, 10);\n\n    if (newPage > 0 && newPage <= numPages) {\n      setEditingPage(newPage - 1);\n    }\n  };\n\n  var focusPageTextbox = function () {\n    setPageTextboxFocused(true);\n    setEditingPage(currentPage);\n  };\n\n  var blurPageTextbox = function () {\n    setPageTextboxFocused(false);\n  };\n\n  var keydownPage = function (e) {\n    switch (e.keyCode) {\n      case 38:\n        gotoPreviousPage();\n        break;\n\n      case 40:\n        gotoNextPage();\n        break;\n\n      case 13:\n        onJumpTo(editingPage);\n        break;\n    }\n  };\n\n  var jumpToFirstPage = function () {\n    return onJumpTo(0);\n  };\n\n  var jumpToLastPage = function () {\n    return onJumpTo(numPages - 1);\n  };\n\n  var toggleSidebar = function () {\n    setSidebarOpened(!isSidebarOpened);\n    onToggleSidebar();\n  };\n\n  var rotateForward = function () {\n    return onRotate(90);\n  };\n\n  var rotateBackward = function () {\n    return onRotate(-90);\n  };\n\n  var activateTextSelectionMode = function () {\n    return onChangeSelectionMode(SelectionMode$1.Text);\n  };\n\n  var activateHandMode = function () {\n    return onChangeSelectionMode(SelectionMode$1.Hand);\n  };\n\n  var setVerticalScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Vertical);\n  };\n\n  var setHorizontalScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Horizontal);\n  };\n\n  var setWrappedScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Wrapped);\n  };\n\n  var renderToggle = function () {\n    return l10n.toolbar.toggleSidebar;\n  };\n\n  var renderPreviousPage = function () {\n    return l10n.toolbar.previousPage;\n  };\n\n  var renderNextPage = function () {\n    return l10n.toolbar.nextPage;\n  };\n\n  var renderZoomOut = function () {\n    return l10n.toolbar.zoomOut;\n  };\n\n  var renderZoomIn = function () {\n    return l10n.toolbar.zoomIn;\n  };\n\n  var renderFullScreen = function () {\n    return l10n.toolbar.fullScreen;\n  };\n\n  var renderDownload = function () {\n    return l10n.toolbar.download;\n  };\n\n  var renderPrint = function () {\n    return l10n.toolbar.print;\n  };\n\n  var renderGoToFirstPage = function () {\n    return l10n.toolbar.goToFirstPage;\n  };\n\n  var renderGoToLastPage = function () {\n    return l10n.toolbar.goToLastPage;\n  };\n\n  var renderRotateClockwise = function () {\n    return l10n.toolbar.rotateForward;\n  };\n\n  var renderRotateCounterclockwise = function () {\n    return l10n.toolbar.rotateBackward;\n  };\n\n  var renderTextSelection = function () {\n    return l10n.toolbar.textSelectionTool;\n  };\n\n  var renderHandTool = function () {\n    return l10n.toolbar.handTool;\n  };\n\n  var renderVerticalScrolling = function () {\n    return l10n.toolbar.verticalScrolling;\n  };\n\n  var renderHorizontalScrolling = function () {\n    return l10n.toolbar.horizontalScrolling;\n  };\n\n  var renderDocumentProperties = function () {\n    return l10n.toolbar.documentProperties;\n  };\n\n  var renderWrappedScrolling = function () {\n    return l10n.toolbar.wrappedScrolling;\n  };\n\n  var renderPropertyButton = function (toggle) {\n    return React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: toggle\n      }, React__default.createElement(InfoIcon, null)),\n      content: renderDocumentProperties,\n      offset: TOOLTIP_OFFSET$2\n    });\n  };\n\n  var renderPropertiesModal = function (toggle) {\n    return React__default.createElement(PropertiesModal, {\n      doc: doc,\n      fileName: fileName,\n      onToggle: toggle\n    });\n  };\n\n  return renderToolbar({\n    currentPage: currentPage,\n    currentPageInput: React__default.createElement(\"input\", {\n      className: theme.prefixClass + \"-toolbar-current-page-input\",\n      type: \"text\",\n      value: pageTextboxFocused ? editingPage + 1 : currentPage + 1,\n      onChange: changePage,\n      onFocus: focusPageTextbox,\n      onBlur: blurPageTextbox,\n      onKeyDown: keydownPage\n    }),\n    documentPropertiesButton: React__default.createElement(Modal, {\n      target: renderPropertyButton,\n      content: renderPropertiesModal,\n      closeOnClickOutside: true,\n      closeOnEscape: true\n    }),\n    downloadButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: onDownload\n      }, React__default.createElement(DownloadIcon, null)),\n      content: renderDownload,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    fullScreenButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: onFullScreen\n      }, React__default.createElement(FullScreenIcon, null)),\n      content: renderFullScreen,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    goToFirstPageButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: jumpToFirstPage\n      }, React__default.createElement(UpArrowIcon, null)),\n      content: renderGoToFirstPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    goToLastPageButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: jumpToLastPage\n      }, React__default.createElement(DownArrowIcon, null)),\n      content: renderGoToLastPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    handToolButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: activateHandMode,\n        isSelected: selectionMode === SelectionMode$1.Hand\n      }, React__default.createElement(HandToolIcon, null)),\n      content: renderHandTool,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    horizontalScrollingButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: setHorizontalScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Horizontal\n      }, React__default.createElement(HorizontalScrollingIcon, null)),\n      content: renderHorizontalScrolling,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    moreActionsPopover: React__default.createElement(MoreActionsPopover, {\n      doc: doc,\n      fileName: fileName,\n      scrollMode: scrollMode,\n      selectionMode: selectionMode,\n      onChangeScrollMode: onChangeScrollMode,\n      onChangeSelectionMode: onChangeSelectionMode,\n      onJumpToFirstPage: jumpToFirstPage,\n      onJumpToLastPage: jumpToLastPage,\n      onRotate: onRotate\n    }),\n    nextPageButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: gotoNextPage\n      }, React__default.createElement(NextIcon, null)),\n      content: renderNextPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    numPages: numPages,\n    openFileButton: React__default.createElement(OpenFileButton, {\n      onOpenFiles: onOpenFiles\n    }),\n    previousPageButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: gotoPreviousPage\n      }, React__default.createElement(PreviousIcon, null)),\n      content: renderPreviousPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    printButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: onPrint\n      }, React__default.createElement(PrintIcon, null)),\n      content: renderPrint,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    rotateClockwiseButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: rotateForward\n      }, React__default.createElement(RotateForwardIcon, null)),\n      content: renderRotateClockwise,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    rotateCounterclockwiseButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: rotateBackward\n      }, React__default.createElement(RotateBackwardIcon, null)),\n      content: renderRotateCounterclockwise,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    searchPopover: React__default.createElement(SearchPopover, {\n      doc: doc,\n      onJumpToMatch: onJumpToMatch,\n      onSearchFor: onSearchFor\n    }),\n    textSelectionButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: activateTextSelectionMode,\n        isSelected: selectionMode === SelectionMode$1.Text\n      }, React__default.createElement(TextSelectionIcon, null)),\n      content: renderTextSelection,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    toggleSidebarButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomLeft,\n      target: React__default.createElement(Button, {\n        onClick: toggleSidebar,\n        isSelected: isSidebarOpened\n      }, React__default.createElement(LeftSidebarIcon, null)),\n      content: renderToggle,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    verticalScrollingButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: setVerticalScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Vertical\n      }, React__default.createElement(VerticalScrollingIcon, null)),\n      content: renderVerticalScrolling,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomInButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: zoomIn\n      }, React__default.createElement(ZoomInIcon, null)),\n      content: renderZoomIn,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomOutButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: zoomOut\n      }, React__default.createElement(ZoomOutIcon, null)),\n      content: renderZoomOut,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomPopover: React__default.createElement(ZoomPopover, {\n      scale: scale,\n      onZoom: onZoom\n    }),\n    wrappedScrollingButton: React__default.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React__default.createElement(Button, {\n        onClick: setWrappedScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Wrapped\n      }, React__default.createElement(WrappedScrollingIcon, null)),\n      content: renderWrappedScrolling,\n      offset: TOOLTIP_OFFSET$2\n    })\n  });\n};\n\nvar EMPTY_KEYWORD_REGEXP$1 = new RegExp(' ');\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar Inner = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      file = _a.file,\n      initialPage = _a.initialPage,\n      keyword = _a.keyword,\n      layout = _a.layout,\n      pageSize = _a.pageSize,\n      render = _a.render,\n      renderPage = _a.renderPage,\n      selectionMode = _a.selectionMode,\n      onCanvasLayerRender = _a.onCanvasLayerRender,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onTextLayerRender = _a.onTextLayerRender,\n      onZoom = _a.onZoom;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.useRef(null);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState(pageSize.scale),\n      scale = _b[0],\n      setScale = _b[1];\n\n  var _c = React.useState(0),\n      currentPage = _c[0],\n      setCurrentPage = _c[1];\n\n  var _d = React.useState(0),\n      rotation = _d[0],\n      setRotation = _d[1];\n\n  var _e = React.useState(keyword ? typeof keyword === 'string' ? new RegExp(keyword) : keyword : EMPTY_KEYWORD_REGEXP$1),\n      keywordRegexp = _e[0],\n      setKeywordRegexp = _e[1];\n\n  var _f = React.useState({\n    matchIndex: -1,\n    pageIndex: -1\n  }),\n      match = _f[0],\n      setMatch = _f[1];\n\n  var _g = React.useState(ScrollMode$1.Vertical),\n      scrollMode = _g[0],\n      setScrollMode = _g[1];\n\n  var _h = React.useState(selectionMode),\n      currentMode = _h[0],\n      setCurrentMode = _h[1];\n\n  var toggleDragScroll = useDragScroll(pagesRef).toggleDragScroll;\n\n  var _j = useFullScreen(pagesRef),\n      isFullScreen = _j.isFullScreen,\n      openFullScreen = _j.openFullScreen,\n      closeFullScreen = _j.closeFullScreen;\n\n  var toggleSidebar = useToggle();\n  var numPages = doc.numPages;\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n  var arr = Array(numPages).fill(null);\n  var pageVisibility = arr.map(function () {\n    return 0;\n  });\n  var pageRefs = arr.map(function () {\n    return React.useRef();\n  });\n\n  var openFiles = function (files) {\n    if (files.length === 0) {\n      return;\n    }\n\n    var selectedFile = files[0];\n\n    if (getFileExt(selectedFile.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(selectedFile);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(selectedFile.name, data);\n    });\n  };\n\n  var isDragging = useDrop(containerRef, function (files) {\n    return openFiles(files);\n  }).isDragging;\n\n  var _k = React.useState(PrintStatus$1.Inactive),\n      printStatus = _k[0],\n      setPrintStatus = _k[1];\n\n  var jumpToPage = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return;\n    }\n\n    setCurrentPage(pageIndex);\n    var pagesContainer = pagesRef.current;\n    var targetPage = pageRefs[pageIndex].current;\n\n    if (pagesContainer && targetPage) {\n      pagesContainer.scrollTop = targetPage.offsetTop;\n    }\n  };\n\n  React.useEffect(function () {\n    onDocumentLoad({\n      doc: doc\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, []);\n  React.useEffect(function () {\n    onPageChange({\n      currentPage: currentPage,\n      doc: doc\n    });\n  }, [currentPage]);\n\n  var changeSelectionMode = function (mode) {\n    toggleDragScroll(mode === SelectionMode$1.Hand);\n    setCurrentMode(mode);\n  };\n\n  var download = function () {\n    downloadFile(file.name, file.data);\n  };\n\n  var zoom = function (newScale) {\n    var pagesEle = pagesRef.current;\n\n    if (!pagesEle) {\n      return;\n    }\n\n    var scaled = 1;\n\n    switch (newScale) {\n      case SpecialZoomLevel$1.ActualSize:\n        scaled = 1;\n        break;\n\n      case SpecialZoomLevel$1.PageFit:\n        scaled = Math.min((pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.offsetHeight - 2 * PAGE_PADDING) / pageHeight);\n        break;\n\n      case SpecialZoomLevel$1.PageWidth:\n        scaled = (pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth;\n        break;\n\n      default:\n        scaled = newScale;\n        break;\n    }\n\n    setScale(scaled);\n    onZoom({\n      doc: doc,\n      scale: scaled\n    });\n  };\n\n  React.useEffect(function () {\n    if (selectionMode === SelectionMode$1.Hand) {\n      toggleDragScroll(true);\n    }\n\n    if (defaultScale) {\n      zoom(defaultScale);\n    }\n  }, []);\n\n  var pageVisibilityChanged = function (pageIndex, ratio) {\n    pageVisibility[pageIndex] = ratio;\n    var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n      return item > array[maxIndex] ? index : maxIndex;\n    }, 0);\n    setCurrentPage(maxRatioPage);\n  };\n\n  var rotate = function (degree) {\n    var updateRotation = rotation === 360 || rotation === -360 ? degree : rotation + degree;\n    setRotation(updateRotation);\n  };\n\n  var changeScrollMode = function (mode) {\n    var pagesContainer = pagesRef.current;\n\n    if (!pagesContainer) {\n      return;\n    }\n\n    switch (mode) {\n      case ScrollMode$1.Vertical:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n        break;\n\n      case ScrollMode$1.Horizontal:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-horizontal\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n        break;\n\n      case ScrollMode$1.Wrapped:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-wrapped\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n        break;\n    }\n\n    setScrollMode(mode);\n  };\n\n  var jumpToMatch = function (target) {\n    jumpToPage(target.pageIndex);\n    setMatch(target);\n  };\n\n  var jumpToDest = function (pageIndex, bottomOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n\n    if (!pagesContainer) {\n      return;\n    }\n\n    var newPageIndex = pageIndex + 1;\n    doc.getPage(newPageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = bottomOffset || 0;\n\n      switch (scaleTo) {\n        case SpecialZoomLevel$1.PageFit:\n          top = 0;\n          zoom(SpecialZoomLevel$1.PageFit);\n          break;\n\n        default:\n          top = (viewport.height - bottom) * scale;\n          break;\n      }\n\n      var targetPageEle = pageRefs[pageIndex].current;\n\n      if (targetPageEle) {\n        pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n      }\n    });\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var print = function () {\n    return setPrintStatus(PrintStatus$1.Preparing);\n  };\n\n  var cancelPrinting = function () {\n    return setPrintStatus(PrintStatus$1.Inactive);\n  };\n\n  var startPrinting = function () {\n    return setPrintStatus(PrintStatus$1.Ready);\n  };\n\n  return render({\n    viewer: layout(toggleSidebar.opened, {\n      attrs: {\n        ref: containerRef,\n        style: {\n          position: 'relative'\n        }\n      },\n      children: React__default.createElement(React__default.Fragment, null, React__default.createElement(PrintContainer, {\n        doc: doc,\n        pageHeight: pageHeight,\n        pageWidth: pageWidth,\n        printStatus: printStatus,\n        rotation: rotation,\n        onCancel: cancelPrinting,\n        onStartPrinting: startPrinting\n      }), isDragging && React__default.createElement(DropArea, null))\n    }, {\n      attrs: {\n        ref: pagesRef,\n        style: {\n          position: 'relative'\n        }\n      },\n      children: React__default.createElement(React__default.Fragment, null, isFullScreen && React__default.createElement(ExitFullScreen, {\n        onClick: closeFullScreen\n      }), Array(numPages).fill(0).map(function (_, index) {\n        return React__default.createElement(\"div\", {\n          className: theme.prefixClass + \"-inner-page\",\n          key: \"pagelayer-\" + index,\n          ref: function (ref) {\n            pageRefs[index].current = ref;\n          }\n        }, React__default.createElement(PageLayer, {\n          doc: doc,\n          keywordRegexp: keywordRegexp,\n          height: pageHeight,\n          match: match,\n          pageIndex: index,\n          renderPage: renderPage,\n          rotation: rotation,\n          scale: scale,\n          width: pageWidth,\n          onCanvasLayerRender: onCanvasLayerRender,\n          onExecuteNamedAction: executeNamedAction,\n          onJumpToDest: jumpToDest,\n          onPageVisibilityChanged: pageVisibilityChanged,\n          onTextLayerRender: onTextLayerRender\n        }));\n      }))\n    }, function (renderToolbar) {\n      return React__default.createElement(Toolbar, {\n        currentPage: currentPage,\n        doc: doc,\n        fileName: file.name,\n        scale: scale,\n        scrollMode: scrollMode,\n        selectionMode: currentMode,\n        onChangeScrollMode: changeScrollMode,\n        onChangeSelectionMode: changeSelectionMode,\n        onDownload: download,\n        onFullScreen: openFullScreen,\n        onJumpTo: jumpToPage,\n        onJumpToMatch: jumpToMatch,\n        onOpenFiles: openFiles,\n        onPrint: print,\n        onRotate: rotate,\n        onSearchFor: setKeywordRegexp,\n        onToggleSidebar: toggleSidebar.toggle,\n        onZoom: zoom,\n        renderToolbar: renderToolbar\n      });\n    }, {\n      attrs: {},\n      children: React__default.createElement(Sidebar, {\n        currentPage: currentPage,\n        doc: doc,\n        height: pageHeight,\n        rotation: rotation,\n        width: pageWidth,\n        onJumpToDest: jumpToDest,\n        onJumpToPage: jumpToPage\n      })\n    }),\n    doc: doc,\n    download: download,\n    changeScrollMode: changeScrollMode,\n    changeSelectionMode: changeSelectionMode,\n    jumpToPage: jumpToPage,\n    print: print,\n    rotate: rotate,\n    zoom: zoom\n  });\n};\n\nvar PageSizeCalculator = function (_a) {\n  var doc = _a.doc,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React.useEffect(function () {\n    doc.getPage(1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var scaled = pagesEle.offsetWidth / w;\n      var scale = decrease(Math.max(1, scaled));\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-page-size-calculator\",\n    ref: pagesRef\n  }, React__default.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React__default.createElement(\"div\", null, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.askingPassword.requirePasswordToOpen, \":\"), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React__default.createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React__default.createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar WrongPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React__default.createElement(\"div\", null, React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.wrongPassword.tryAgain, \":\"), React__default.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React__default.createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React__default.createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.wrongPassword.submit))));\n};\n\nvar WrongPasswordState = function (_super) {\n  __extends(WrongPasswordState, _super);\n\n  function WrongPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return WrongPasswordState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      render = _a.render,\n      renderError = _a.renderError;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var params = Object.assign({}, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var loadingTask = PdfJs.getDocument(params);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJs.PasswordResponses.NEED_PASSWORD:\n          setStatus(new AskForPasswordState(verifyPassword));\n          break;\n\n        case PdfJs.PasswordResponses.INCORRECT_PASSWORD:\n          setStatus(new WrongPasswordState(verifyPassword));\n          break;\n      }\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return setStatus(new CompletedState(doc));\n    }, function (err) {\n      return setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n    };\n  }, [file]);\n\n  switch (true) {\n    case status instanceof AskForPasswordState:\n      return React__default.createElement(AskingPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof WrongPasswordState:\n      return React__default.createElement(WrongPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof CompletedState:\n      return render(status.doc);\n\n    case status instanceof FailureState:\n      return renderError ? renderError(status.error) : React__default.createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-error\"\n      }, React__default.createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-error-text\"\n      }, status.error.message));\n\n    case status instanceof LoadingState:\n    default:\n      return React__default.createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-loading\"\n      }, React__default.createElement(Spinner, null));\n  }\n};\n\nvar askingPassword = {\n  requirePasswordToOpen: \"This document requires a password to open\",\n  submit: \"Submit\"\n};\nvar attachment = {\n  clickToDownload: \"Click to download\",\n  noAttachment: \"There is no attachment\"\n};\nvar bookmark = {\n  noBookmark: \"There is no bookmark\"\n};\nvar main = {\n  dragDropFile: \"Drag and drop a PDF document here\"\n};\nvar printProgress = {\n  cancel: \"Cancel\",\n  preparingDocument: \"Preparing document ...\"\n};\nvar property = {\n  author: \"Author\",\n  close: \"Close\",\n  creationDate: \"Creation date\",\n  creator: \"Creator\",\n  fileName: \"File name\",\n  fileSize: \"File size\",\n  keywords: \"Keywords\",\n  modificationDate: \"Modification date\",\n  pageCount: \"Page count\",\n  pdfProducer: \"PDF producer\",\n  pdfVersion: \"PDF Version\",\n  subject: \"Subject\",\n  title: \"Title\"\n};\nvar search = {\n  close: \"Close\",\n  enterToSearch: \"Enter to search\",\n  matchCase: \"Match case\",\n  nextMatch: \"Next match\",\n  previousMatch: \"Previous match\",\n  wholeWords: \"Whole words\"\n};\nvar sidebar = {\n  attachment: \"Attachment\",\n  bookmark: \"Bookmark\",\n  thumbnail: \"Thumbnail\"\n};\nvar toolbar = {\n  documentProperties: \"Document properties\",\n  download: \"Download\",\n  fullScreen: \"Full screen\",\n  goToFirstPage: \"Go to first page\",\n  goToLastPage: \"Go to last page\",\n  handTool: \"Hand tool\",\n  horizontalScrolling: \"Horizontal scrolling\",\n  moreActions: \"More actions\",\n  nextPage: \"Next page\",\n  openFile: \"Open file\",\n  previousPage: \"Previous page\",\n  print: \"Print\",\n  rotateBackward: \"Rotate counterclockwise\",\n  rotateForward: \"Rotate clockwise\",\n  search: \"Search\",\n  textSelectionTool: \"Text selection tool\",\n  toggleSidebar: \"Toggle sidebar\",\n  verticalScrolling: \"Vertical scrolling\",\n  zoomIn: \"Zoom in\",\n  zoomOut: \"Zoom out\",\n  wrappedScrolling: \"Wrapped scrolling\"\n};\nvar wrongPassword = {\n  submit: \"Submit\",\n  tryAgain: \"The password is wrong. Please try again\"\n};\nvar zoom = {\n  actualSize: \"Actual size\",\n  pageFit: \"Page fit\",\n  pageWidth: \"Page width\"\n};\nvar enUs = {\n  askingPassword: askingPassword,\n  attachment: attachment,\n  bookmark: bookmark,\n  main: main,\n  printProgress: printProgress,\n  property: property,\n  search: search,\n  sidebar: sidebar,\n  toolbar: toolbar,\n  wrongPassword: wrongPassword,\n  zoom: zoom\n};\n\nvar LocalizationProvider = function (_a) {\n  var children = _a.children,\n      localization = _a.localization;\n  var defaultL10n = enUs;\n  var l10n = localization || defaultL10n;\n  return React__default.createElement(LocalizationContext.Provider, {\n    value: l10n\n  }, children);\n};\n\nvar ThemeProvider = function (_a) {\n  var children = _a.children,\n      prefixClass = _a.prefixClass;\n  return React__default.createElement(ThemeContext.Provider, {\n    value: {\n      prefixClass: prefixClass || 'viewer'\n    }\n  }, children);\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      initialPage = _a.initialPage,\n      keyword = _a.keyword,\n      layout = _a.layout,\n      localization = _a.localization,\n      prefixClass = _a.prefixClass,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      _b = _a.selectionMode,\n      selectionMode = _b === void 0 ? SelectionMode$1.Text : _b,\n      _c = _a.onCanvasLayerRender,\n      onCanvasLayerRender = _c === void 0 ? function () {} : _c,\n      _d = _a.onDocumentLoad,\n      onDocumentLoad = _d === void 0 ? function () {} : _d,\n      _e = _a.onPageChange,\n      onPageChange = _e === void 0 ? function () {} : _e,\n      _f = _a.onTextLayerRender,\n      onTextLayerRender = _f === void 0 ? function () {} : _f,\n      _g = _a.onZoom,\n      onZoom = _g === void 0 ? function () {} : _g;\n\n  var _h = React.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : ''\n  }),\n      file = _h[0],\n      setFile = _h[1];\n\n  var layoutOption = function (isSidebarOpened, container, main, toolbar, sidebar) {\n    return defaultLayout(isSidebarOpened, container, main, toolbar(defaultToolbar), sidebar);\n  };\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName\n    });\n  };\n\n  var renderDoc = function (renderViewer) {\n    return function (doc) {\n      var renderInner = function (ps) {\n        var pageSize = ps;\n        return React__default.createElement(Inner, {\n          defaultScale: defaultScale,\n          doc: doc,\n          file: file,\n          initialPage: initialPage,\n          keyword: keyword,\n          layout: layout || layoutOption,\n          pageSize: pageSize,\n          render: renderViewer,\n          renderPage: renderPage,\n          selectionMode: selectionMode,\n          onCanvasLayerRender: onCanvasLayerRender,\n          onDocumentLoad: onDocumentLoad,\n          onOpenFile: openFile,\n          onPageChange: onPageChange,\n          onTextLayerRender: onTextLayerRender,\n          onZoom: onZoom\n        });\n      };\n\n      return React__default.createElement(PageSizeCalculator, {\n        doc: doc,\n        render: renderInner\n      });\n    };\n  };\n\n  React.useEffect(function () {\n    setFile({\n      data: fileUrl,\n      name: typeof fileUrl === 'string' ? fileUrl : ''\n    });\n  }, [fileUrl]);\n\n  var defaultRenderer = render || function (props) {\n    return props.viewer;\n  };\n\n  return React__default.createElement(ThemeProvider, {\n    prefixClass: prefixClass\n  }, React__default.createElement(LocalizationProvider, {\n    localization: localization\n  }, React__default.createElement(DocumentLoader, {\n    characterMap: characterMap,\n    file: file.data,\n    render: renderDoc(defaultRenderer),\n    renderError: renderError\n  })));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJs.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__default.createElement(React__default.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.ScrollMode = ScrollMode$1;\nexports.SelectionMode = SelectionMode$1;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Worker = Worker;\nexports.default = Viewer;\nexports.defaultLayout = defaultLayout;\nexports.defaultToolbar = defaultToolbar;","map":{"version":3,"sources":["/mnt/d/thinkpad_desktop_files/portfolio_web/react-portfolio-site/node_modules/@phuocng/react-pdf-viewer/cjs/react-pdf-viewer.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","React","require","React__default","PdfJs","reactDom","ThemeContext","createContext","prefixClass","classNames","classes","result","keys","forEach","clazz","push","join","Button","_a","_b","children","_c","isSelected","onClick","theme","useContext","createElement","className","MenuDivider","Icon","size","width","height","viewBox","CheckIcon","d","MenuItem","checked","icon","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","cx","cy","r","strokeDasharray","Math","PI","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","defaultLayout","isSidebarOpened","container","main","toolbar","sidebar","attrs","defaultToolbar","toolbarSlot","toggleSidebarButton","searchPopover","previousPageButton","currentPageInput","numPages","nextPageButton","zoomOutButton","zoomPopover","zoomInButton","fullScreenButton","openFileButton","downloadButton","printButton","moreActionsPopover","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","e","target","current","contains","useEffect","document","addEventListener","removeEventListener","useKeyUp","targetKeyCode","handler","keyUpHandler","keyCode","useLockScroll","originalStyle","window","getComputedStyle","body","overflow","ModalBody","closeOnEscape","onToggle","contentRef","createRef","ref","ModalOverlay","ToggleStatus","useToggle","useState","opened","setOpened","toggle","status","Close","Open","Toggle","isOpened","Portal","content","Fragment","Modal","renderContent","Position","Position$1","calculatePosition","position","offset","targetRect","getBoundingClientRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","useLayoutEffect","targetEle","contentEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","PopoverOverlay","Popover","renderTarget","TooltipBody","Tooltip","show","hide","onMouseEnter","onMouseLeave","ScrollMode","ScrollMode$1","SelectionMode","SelectionMode$1","SpecialZoomLevel","SpecialZoomLevel$1","useDragScroll","enabled","setEnabled","pos","useRef","x","y","onMouseMoveHandler","ele","scrollTop","clientY","scrollLeft","clientX","onMouseUpHandler","classList","add","remove","onMouseDownHandler","preventDefault","stopPropagation","toggleDragScroll","useDrop","onDrop","dragCount","isDragging","setDragging","onDropHandler","dataTransfer","files","onDragOverHandler","onDragEnterHandler","onDragLeaveHandler","Api","defaultVendor","ExitFullScreen","FullScreenChange","FullScreenElement","FullScreenEnabled","RequestFullScreen","webkitVendor","msVendor","isBrowser","vendor","addFullScreenChangeListener","removeFullScreenChangeListener","exitFullScreen","element","Promise","resolve","getFullScreenElement","requestFullScreen","useFullScreen","isFullScreen","setIsFullScreen","closeOtherFullScreen","openFullScreen","then","closeFullScreen","onFullScreenChange","AnnotationLoader","page","renderAnnotations","loading","setLoading","annotations","setAnnotations","getAnnotations","intent","AnnotationType","AnnotationType$1","AnnotationBorderStyleType","AnnotationBorderStyleType$1","dateRegex","RegExp","parse","min","max","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","annotationType","Popup","title","contents","split","map","item","index","key","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","viewport","rect","normalizeRect","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","transform","transformOrigin","Caret","props","id","Circle","preserveAspectRatio","version","fill","rx","ry","stroke","strokeWidth","fileName","url","str","pop","downloadFile","data","blobUrl","URL","createObjectURL","Blob","type","link","display","href","setAttribute","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","Highlight","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","parse$1","pageIndex","destArray","bottomOffset","scale","name","scaleTo","PageFit","getDestination","doc","dest","res","getPageIndex","Link","onExecuteNamedAction","onJumpToDest","action","rel","newWindow","Polygon","vertices","Polyline","ignoredParents","parentType","indexOf","parentId","parent","querySelector","parseFloat","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","childAnnotation","toLowerCase","AnnotationLayer","rotation","getViewport","clonedViewPort","clone","dontFlip","filter","find","Observer","threshold","onVisibilityChanged","containerRef","io","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","observe","unobserve","WithScale","callback","CanvasLayer","onCanvasLayerRender","canvasRef","renderTask","devicePixelRatio","renderCanvas","task","cancel","canvasEle","canvasContext","getContext","alpha","render","promise","SvgLayer","empty","containerEle","innerHTML","renderSvg","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","calculateOffset","offsetTop","offsetLeft","parentElement","removeNode","parentNode","replaceNode","replacementNode","node","insertBefore","unwrap","range","createRange","selectNodeContents","extractContents","normalize","wrap","startOffset","endOffset","Range","setStart","setEnd","wrapper","surroundContents","TextLayer","keywordRegexp","match","onJumpToMatch","onTextLayerRender","isRendered","spans","querySelectorAll","numSpans","span","highlight","text","textContent","source","trim","search","firstChild","unhighlightAll","highlightNodes","total","scrollToMatch","matchIndex","top_1","renderText","getTextContent","renderTextLayer","childNodes","PageLayer","renderPage","onPageVisibilityChanged","isCalculated","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","intersectionThreshold","_","scaledWidth","scaledHeight","isVertical","abs","w","h","visibilityChanged","params","getPage","pdfPage","jumpToMatch","indexOfPage","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","rotationNumber","svgLayer","LocalizationContext","DropArea","l10n","dragDropFile","PrintProgress","numLoadedPages","onCancel","onStartPrinting","floor","printProgress","preparingDocument","PrintStatus","PrintStatus$1","PageThumbnail","onLoad","src","setSrc","canvas","printUnit","save","fillStyle","fillRect","restore","toBlob","blob","toDataURL","PageThumbnailContainer","PrintZone","printStatus","setNumLoadedPages","Ready","print","loadPage","createPortal","dangerouslySetInnerHTML","__html","PrintContainer","numLoadedPagesForPrint","setNumLoadedPagesForPrint","cancelPrinting","startPrinting","Preparing","getFileExt","ExitFullScreenIcon","AttachmentList","renderItem","attachment","clickToDownload","noAttachment","AttachmentLoader","isLoaded","attachments","setAttachments","getAttachments","response","BookmarkItem","bookmark","depth","toggleRef","subItemRef","subItemsDisplayed","hasSubItems","items","toggleSubItems","subItemsEle","toggleEle","clickBookmak","clickItem","paddingLeft","BookmarkList","bookmarks","jumpToDest","BookmarkLoader","setBookmarks","getOutline","outline","noBookmark","BookmarkIcon","FileIcon","WrappedScrollingIcon","ThumbnailItem","thumbnailHeight","thumbnailWidth","THUMBNAIL_WIDTH","ThumbnailContainer","ThumbnailList","currentPage","onJumpToPage","Tab","TOOLTIP_OFFSET","Sidebar","Thumbnail","tab","setTab","clickThumbnailTab","clickBookmarkTab","Bookmark","clickAttachmentTab","Attachment","renderAttachmentTip","renderBookmarkTip","renderThumbnailTip","thumbnail","DownArrowIcon","DownloadIcon","FullScreenIcon","HandToolIcon","HorizontalScrollingIcon","InfoIcon","LeftSidebarIcon","NextIcon","PreviousIcon","PrintIcon","RotateBackwardIcon","RotateForwardIcon","TextSelectionIcon","UpArrowIcon","VerticalScrollingIcon","ZoomInIcon","ZoomOutIcon","OpenFileIcon","TOOLTIP_OFFSET$1","OpenFileButton","onOpenFiles","openFiles","openFile","multiple","onChange","fileSize","bytes","sufixes","log","pow","toFixed","PropertiesLoader","setData","getMetadata","meta","getDownloadInfo","contentDispositionFilename","info","PropertyItem","label","PropertiesModal","fileName$1","formatDate","renderData","property","Title","author","Author","subject","Subject","keywords","Keywords","creator","Creator","creationDate","CreationDate","ModDate","pdfProducer","Producer","pdfVersion","PDFFormatVersion","pageCount","close","SearchIcon","EMPTY_KEYWORD_REGEXP","PORTAL_OFFSET","SearchPopover","onSearchFor","indexArr","keyword","setKeyword","found","setFound","_d","currentMatch","setCurrentMatch","_e","matchCase","setMatchCase","_f","wholeWords","setWholeWords","textContents","changeKeyword","getTextContents","promises","pageContent","all","sort","a","buildKeywordRegex","keywordParam","matchCaseParam","wholeWordsParam","flags","regexp","arr","numMatches","keydownSearch","jumpToPreviousMatch","prev","updated","jumpToNextMatch","next","changeMatchCase","isChecked","changeWholeWords","clearKeyword","renderSearch","renderPreviousMatch","previousMatch","renderNextMatch","nextMatch","placeholder","enterToSearch","onKeyDown","LEVELS","increase","currentLevel","decrease","findIndex","Menu","LEVELS$1","PORTAL_OFFSET$1","ZoomPopover","onZoom","getSpcialLevelLabel","level","ActualSize","zoom","actualSize","pageFit","PageWidth","round","k","clickMenuItem","MoreIcon","PORTAL_OFFSET$2","MoreActionsPopover","scrollMode","selectionMode","onChangeScrollMode","onChangeSelectionMode","onJumpToFirstPage","onJumpToLastPage","onRotate","renderMoreActions","moreActions","renderPropertyMenu","documentProperties","renderPropertiesModal","jumpToFirstPage","jumpToLastPage","rotateForward","rotateBackward","activateTextSelectionMode","activateHandMode","Hand","activateScrollMode","mode","setVerticalScrollMode","Vertical","setHorizontalScrollMode","Horizontal","setWrappedScrollMode","Wrapped","goToFirstPage","goToLastPage","textSelectionTool","handTool","verticalScrolling","horizontalScrolling","wrappedScrolling","TOOLTIP_OFFSET$2","Toolbar","onDownload","onFullScreen","onJumpTo","onPrint","onToggleSidebar","renderToolbar","pageTextboxFocused","setPageTextboxFocused","editingPage","setEditingPage","setSidebarOpened","zoomOut","newLevel","zoomIn","gotoNextPage","nextPage","gotoPreviousPage","previousPage","changePage","newPage","focusPageTextbox","blurPageTextbox","keydownPage","toggleSidebar","renderToggle","renderPreviousPage","renderNextPage","renderZoomOut","renderZoomIn","renderFullScreen","fullScreen","renderDownload","download","renderPrint","renderGoToFirstPage","renderGoToLastPage","renderRotateClockwise","renderRotateCounterclockwise","renderTextSelection","renderHandTool","renderVerticalScrolling","renderHorizontalScrolling","renderDocumentProperties","renderWrappedScrolling","renderPropertyButton","onFocus","onBlur","documentPropertiesButton","goToFirstPageButton","goToLastPageButton","handToolButton","horizontalScrollingButton","rotateClockwiseButton","rotateCounterclockwiseButton","textSelectionButton","verticalScrollingButton","wrappedScrollingButton","EMPTY_KEYWORD_REGEXP$1","SCROLL_BAR_WIDTH","PAGE_PADDING","Inner","defaultScale","initialPage","layout","onDocumentLoad","onOpenFile","onPageChange","pagesRef","setScale","setCurrentPage","setRotation","setKeywordRegexp","setMatch","_g","setScrollMode","_h","currentMode","setCurrentMode","_j","pageVisibility","pageRefs","selectedFile","reader","FileReader","readAsArrayBuffer","onload","Uint8Array","_k","Inactive","setPrintStatus","jumpToPage","pagesContainer","targetPage","changeSelectionMode","newScale","pagesEle","scaled","offsetWidth","offsetHeight","pageVisibilityChanged","maxRatioPage","reduce","maxIndex","array","rotate","degree","updateRotation","changeScrollMode","newPageIndex","bottom","targetPageEle","executeNamedAction","viewer","PageSizeCalculator","LoadingStatus","AskForPasswordState","_super","verifyPasswordFn","_this","AskingPassword","password","setPassword","changePassword","submit","askingPassword","requirePasswordToOpen","CompletedState","FailureState","error","LoadingState","percentages","WrongPassword","wrongPassword","tryAgain","WrongPasswordState","DocumentLoader","characterMap","renderError","setStatus","cMapUrl","cMapPacked","isCompressed","loadingTask","getDocument","onPassword","verifyPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","err","message","destroy","enUs","LocalizationProvider","localization","defaultL10n","Provider","ThemeProvider","Viewer","fileUrl","setFile","layoutOption","renderDoc","renderViewer","renderInner","ps","defaultRenderer","Worker","workerUrl","GlobalWorkerOptions","workerSrc","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PdfJs = require('pdfjs-dist');\nvar reactDom = require('react-dom');\n\nvar ThemeContext = React__default.createContext({\n    prefixClass: 'viewer',\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var _b;\n    var children = _a.children, _c = _a.isSelected, isSelected = _c === void 0 ? false : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"button\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-button\"] = true,\n            _b[theme.prefixClass + \"-button-selected\"] = isSelected,\n            _b)), onClick: onClick }, children));\n};\n\nvar MenuDivider = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"li\", { className: theme.prefixClass + \"-menu-divider\" }));\n};\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.size, size = _b === void 0 ? 24 : _b;\n    var theme = React.useContext(ThemeContext);\n    var width = (size || 24) + \"px\";\n    return (React__default.createElement(\"svg\", { className: theme.prefixClass + \"-icon\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" })));\n};\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"li\", { className: theme.prefixClass + \"-menu-item\", onClick: onClick },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-icon\" }, icon),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-label\" }, children),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-check\" }, checked && React__default.createElement(CheckIcon, null))));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"button\", { className: theme.prefixClass + \"-primary-button\", onClick: onClick }, children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-progress-bar\" },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-progress-bar-inner\", style: { width: progress + \"%\" } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-separator\" }));\n};\n\nvar Spinner = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"svg\", { className: theme.prefixClass + \"-spinner\", width: \"64px\", height: \"64px\", viewBox: \"0 0 32 32\" },\n        React__default.createElement(\"circle\", { className: theme.prefixClass + \"-spinner-circle\", cx: \"16\", cy: \"16\", r: \"12\", strokeDasharray: Math.PI * 2 * 9 })));\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultLayout = function (isSidebarOpened, container, main, toolbar, sidebar) {\n    var _a;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", __assign({}, container.attrs, { className: classNames((_a = {},\n            _a[theme.prefixClass + \"-layout-container\"] = true,\n            _a[theme.prefixClass + \"-layout-with-sidebar\"] = isSidebarOpened,\n            _a)), style: container.attrs.style }),\n        container.children,\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-layout-toolbar\" }, toolbar),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-layout-sidebar\" }, sidebar.children),\n        React__default.createElement(\"div\", __assign({}, main.attrs, { className: theme.prefixClass + \"-layout-main\", style: main.attrs.style }), main.children)));\n};\n\nvar defaultToolbar = function (toolbarSlot) {\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar\" },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-left\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.toggleSidebarButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.searchPopover),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.previousPageButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" },\n                toolbarSlot.currentPageInput,\n                \" / \",\n                toolbarSlot.numPages),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.nextPageButton)),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-center\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomOutButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomPopover),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomInButton)),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-right\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.fullScreenButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.openFileButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.downloadButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.printButton),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.moreActionsPopover))));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (target && !target.contains(e.target)) {\n            onClickOutside();\n        }\n    };\n    React.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        document.addEventListener('click', clickHandler);\n        return function () {\n            document.removeEventListener('click', clickHandler);\n        };\n    }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n    var keyUpHandler = function (e) {\n        (e.keyCode === targetKeyCode) && handler();\n    };\n    React.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    useLockScroll();\n    useKeyUp(27, function () { return closeOnEscape && onToggle(); });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-modal-body\", ref: contentRef }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-modal-overlay\" }, children));\n};\n\nvar ToggleStatus;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\nvar useToggle = function () {\n    var _a = React.useState(false), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, target = _a.target;\n    var _b = useToggle(), opened = _b.opened, toggle = _b.toggle;\n    return (React__default.createElement(React__default.Fragment, null,\n        target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar Modal = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, target = _a.target;\n    var renderContent = function (toggle) { return (React__default.createElement(ModalOverlay, null,\n        React__default.createElement(ModalBody, { closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return (React__default.createElement(Portal, { target: target, content: renderContent }));\n};\n\nvar Position;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case Position$1.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case Position$1.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case Position$1.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    React.useLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = top - anchorRect.top + \"px\";\n        contentEle.style.left = left - anchorRect.left + \"px\";\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-arrow\"] = true,\n            _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft,\n            _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter,\n            _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight,\n            _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop,\n            _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter,\n            _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom,\n            _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft,\n            _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter,\n            _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight,\n            _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop,\n            _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter,\n            _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom,\n            _b[\"\" + customClassName] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    var anchorRef = React.createRef();\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-popover-body\", ref: contentRef },\n            React__default.createElement(Arrow, { customClassName: theme.prefixClass + \"-popover-body-arrow\", position: position }),\n            children)));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    useKeyUp(27, function () { return closeOnEscape && onClose(); });\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-popover-overlay\" }));\n};\n\nvar Popover = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__default.createRef();\n    var renderTarget = function (toggle, opened) { return (React__default.createElement(\"div\", { ref: targetRef }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n        React__default.createElement(PopoverBody, { closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle)))); };\n    return (React__default.createElement(Portal, { content: renderContent, target: renderTarget }));\n};\n\nvar TooltipBody = function (_a) {\n    var children = _a.children, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    var anchorRef = React.createRef();\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body\", ref: contentRef },\n            React__default.createElement(Arrow, { customClassName: theme.prefixClass + \"-tooltip-body-arrow\", position: position }),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__default.createRef();\n    var renderTarget = function (toggle) {\n        var show = function () { toggle(ToggleStatus.Open); };\n        var hide = function () { toggle(ToggleStatus.Close); };\n        return (React__default.createElement(\"div\", { ref: targetRef, onMouseEnter: show, onMouseLeave: hide }, target));\n    };\n    var renderContent = function () { return (React__default.createElement(TooltipBody, { offset: offset, position: position, targetRef: targetRef }, content())); };\n    return (React__default.createElement(Portal, { target: renderTarget, content: renderContent }));\n};\n\nvar ScrollMode;\n(function (ScrollMode) {\n    ScrollMode[\"Horizontal\"] = \"Horizontal\";\n    ScrollMode[\"Vertical\"] = \"Vertical\";\n    ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(ScrollMode || (ScrollMode = {}));\nvar ScrollMode$1 = ScrollMode;\n\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[SelectionMode[\"Hand\"] = 0] = \"Hand\";\n    SelectionMode[SelectionMode[\"Text\"] = 1] = \"Text\";\n})(SelectionMode || (SelectionMode = {}));\nvar SelectionMode$1 = SelectionMode;\n\nvar SpecialZoomLevel;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\nvar useDragScroll = function (ref) {\n    var theme = React.useContext(ThemeContext);\n    var _a = React.useState(false), enabled = _a[0], setEnabled = _a[1];\n    var pos = React.useRef({ top: 0, left: 0, x: 0, y: 0 });\n    var onMouseMoveHandler = function (e) {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.scrollTop = pos.current.top - (e.clientY - pos.current.y);\n        ele.scrollLeft = pos.current.left - (e.clientX - pos.current.x);\n    };\n    var onMouseUpHandler = function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.classList.add(theme.prefixClass + \"-grab\");\n        ele.classList.remove(theme.prefixClass + \"-grabbing\");\n        document.removeEventListener('mousemove', onMouseMoveHandler);\n        document.removeEventListener('mouseup', onMouseUpHandler);\n    };\n    var onMouseDownHandler = function (e) {\n        var ele = ref.current;\n        if (!enabled || !ele) {\n            return;\n        }\n        ele.classList.remove(theme.prefixClass + \"-grab\");\n        ele.classList.add(theme.prefixClass + \"-grabbing\");\n        e.preventDefault();\n        e.stopPropagation();\n        pos.current = {\n            left: ele.scrollLeft,\n            top: ele.scrollTop,\n            x: e.clientX,\n            y: e.clientY,\n        };\n        document.addEventListener('mousemove', onMouseMoveHandler);\n        document.addEventListener('mouseup', onMouseUpHandler);\n    };\n    React.useEffect(function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        enabled\n            ? ele.classList.add(theme.prefixClass + \"-grab\")\n            : ele.classList.remove(theme.prefixClass + \"-grab\");\n        ele.addEventListener('mousedown', onMouseDownHandler);\n        return function () {\n            ele.removeEventListener('mousedown', onMouseDownHandler);\n        };\n    }, [enabled]);\n    return {\n        toggleDragScroll: setEnabled,\n    };\n};\n\nvar useDrop = function (ref, onDrop) {\n    var dragCount = React.useRef(0);\n    var _a = React.useState(false), isDragging = _a[0], setDragging = _a[1];\n    var onDropHandler = function (e) {\n        e.preventDefault();\n        setDragging(false);\n        dragCount.current = 0;\n        if (e.dataTransfer) {\n            onDrop(e.dataTransfer.files);\n        }\n    };\n    var onDragOverHandler = function (e) {\n        e.preventDefault();\n    };\n    var onDragEnterHandler = function (e) {\n        e.preventDefault();\n        dragCount.current += 1;\n        if (dragCount.current <= 1) {\n            setDragging(true);\n        }\n    };\n    var onDragLeaveHandler = function (e) {\n        e.preventDefault();\n        dragCount.current -= 1;\n        if (dragCount.current <= 0) {\n            setDragging(false);\n        }\n    };\n    React.useEffect(function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.addEventListener('drop', onDropHandler);\n        ele.addEventListener('dragover', onDragOverHandler);\n        ele.addEventListener('dragenter', onDragEnterHandler);\n        ele.addEventListener('dragleave', onDragLeaveHandler);\n        return function () {\n            ele.removeEventListener('drop', onDropHandler);\n            ele.removeEventListener('dragover', onDragOverHandler);\n            ele.removeEventListener('dragenter', onDragEnterHandler);\n            ele.removeEventListener('dragleave', onDragLeaveHandler);\n        };\n    }, [ref.current]);\n    return { isDragging: isDragging };\n};\n\nvar Api;\n(function (Api) {\n    Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n    Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n    Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n    Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n    Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\nvar defaultVendor = {\n    ExitFullScreen: 'exitFullscreen',\n    FullScreenChange: 'fullscreenchange',\n    FullScreenElement: 'fullscreenElement',\n    FullScreenEnabled: 'fullscreenEnabled',\n    RequestFullScreen: 'requestFullscreen',\n};\nvar webkitVendor = {\n    ExitFullScreen: 'webkitExitFullscreen',\n    FullScreenChange: 'webkitfullscreenchange',\n    FullScreenElement: 'webkitFullscreenElement',\n    FullScreenEnabled: 'webkitFullscreenEnabled',\n    RequestFullScreen: 'webkitRequestFullscreen',\n};\nvar msVendor = {\n    ExitFullScreen: 'msExitFullscreen',\n    FullScreenChange: 'MSFullscreenChange',\n    FullScreenElement: 'msFullscreenElement',\n    FullScreenEnabled: 'msFullscreenEnabled',\n    RequestFullScreen: 'msRequestFullscreen',\n};\nvar isBrowser = (typeof window !== 'undefined');\nvar vendor = isBrowser ? ((Api.FullScreenEnabled in document && defaultVendor) ||\n    (webkitVendor.FullScreenEnabled in document && webkitVendor) ||\n    (msVendor.FullScreenEnabled in document && msVendor) ||\n    defaultVendor) : defaultVendor;\nvar addFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.addEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar removeFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.removeEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar exitFullScreen = function (element) {\n    return isBrowser\n        ? element[vendor.ExitFullScreen]()\n        : Promise.resolve({});\n};\nvar getFullScreenElement = function () {\n    return isBrowser ? document[vendor.FullScreenElement] : null;\n};\nvar requestFullScreen = function (element) {\n    if (isBrowser) {\n        element[vendor.RequestFullScreen]();\n    }\n};\n\nvar useFullScreen = function (ref) {\n    var _a = React.useState(false), isFullScreen = _a[0], setIsFullScreen = _a[1];\n    var closeOtherFullScreen = function () {\n        var ele = getFullScreenElement();\n        return (ele && ele !== ref.current)\n            ? exitFullScreen(ele)\n            : Promise.resolve();\n    };\n    var openFullScreen = function () {\n        closeOtherFullScreen().then(function () {\n            if (ref.current) {\n                requestFullScreen(ref.current);\n            }\n        });\n    };\n    var closeFullScreen = function () {\n        var ele = getFullScreenElement();\n        if (isFullScreen && ele && ele === ref.current) {\n            exitFullScreen(document);\n        }\n    };\n    var onFullScreenChange = function () {\n        var ele = getFullScreenElement();\n        setIsFullScreen(ele === ref.current);\n    };\n    React.useEffect(function () {\n        addFullScreenChangeListener(onFullScreenChange);\n        return function () {\n            removeFullScreenChangeListener(onFullScreenChange);\n        };\n    }, [ref.current]);\n    return {\n        closeFullScreen: closeFullScreen,\n        isFullScreen: isFullScreen,\n        openFullScreen: openFullScreen,\n    };\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var _b = React.useState(true), loading = _b[0], setLoading = _b[1];\n    var _c = React.useState([]), annotations = _c[0], setAnnotations = _c[1];\n    React.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            setLoading(false);\n            setAnnotations(result);\n        });\n    }, []);\n    return (loading\n        ? React__default.createElement(React__default.Fragment, null)\n        : renderAnnotations(annotations));\n};\n\nvar AnnotationType;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\nvar AnnotationType$1 = AnnotationType;\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    '\\'?' +\n    '(\\\\d{2})?' +\n    '\\'?');\nvar parse = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return (parsed >= min && parsed <= max) ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse(matches[2], 1, 12, 1) - 1;\n    var day = parse(matches[3], 1, 31, 1);\n    var hour = parse(matches[4], 0, 23, 0);\n    var minute = parse(matches[5], 0, 59, 0);\n    var second = parse(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse(matches[8], 0, 23, 0);\n    var offsetMinute = parse(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var theme = React.useContext(ThemeContext);\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n    }\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper\", style: {\n            top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%',\n        } },\n        (annotation.title) && (React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-header\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-title\" }, annotation.title),\n            React__default.createElement(\"span\", { className: theme.prefixClass + \"-annotation-popup-wrapper-date\" }, dateStr))),\n        annotation.contents && (React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-content\" }, annotation.contents.split('\\n').map(function (item, index) { return React__default.createElement(React.Fragment, { key: index },\n            item,\n            React__default.createElement(\"br\", null)); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(), opened = _a.opened, toggle = _a.toggle;\n    var _b = React.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType$1.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType$1.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType$1.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType$1.Beveled:\n            case AnnotationBorderStyleType$1.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = borderWidth + \"px\";\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\")\n            : (styles.borderWidth = '0');\n    }\n    return (React__default.createElement(React__default.Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: height + \"px\",\n                        left: bound[0] + \"px\",\n                        top: bound[1] + \"px\",\n                        transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n                        transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n                        width: width + \"px\",\n                    }, styles),\n                },\n                children: (React__default.createElement(React__default.Fragment, null, hasPopup && opened && (React__default.createElement(PopupWrapper, { annotation: annotation })))),\n            }\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default.createElement(\"circle\", { cy: height / 2, fill: 'none', rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: 'transparent', strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar fileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = (typeof data === 'string')\n        ? ''\n        : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', fileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" }, annotation.inkLists.map(function (inkList, index) { return (React__default.createElement(\"polyline\", { key: index, fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default.createElement(\"line\", { stroke: 'transparent', strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar parse$1 = function (pageIndex, destArray) {\n    var bottomOffset;\n    var scale;\n    switch (destArray[1].name) {\n        case 'XYZ':\n            bottomOffset = destArray[3];\n            scale = destArray[4];\n            return {\n                bottomOffset: bottomOffset,\n                pageIndex: pageIndex - 1,\n                scaleTo: scale,\n            };\n        case 'Fit':\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: SpecialZoomLevel$1.PageFit,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: 1,\n            };\n    }\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n                var target = parse$1(pageIndex, destArray);\n                res(target);\n            });\n        });\n    });\n};\n\nvar Link = function (_a) {\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n                onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n    var attrs = annotation.url\n        ? {\n            href: annotation.url,\n            rel: 'noopener noreferrer nofollow',\n            target: annotation.newWindow ? '_blank' : '',\n            title: annotation.url,\n        }\n        : {\n            href: '',\n            onClick: link,\n        };\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-link\", \"data-annotation-id\": annotation.id }),\n        React__default.createElement(\"a\", __assign({}, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default.createElement(\"polygon\", { fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: annotation.vertices.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default.createElement(\"polyline\", { fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: annotation.vertices.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var isRenderable = !!(annotation.title || annotation.contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    React.useLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n        var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = left + \"px\";\n        container.style.top = top + \"px\";\n        container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n    }, []);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-popup\", \"data-annotation-id\": annotation.id }),\n        React__default.createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default.createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default.createElement(\"rect\", { height: height - borderWidth, fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z' }),\n        React__default.createElement(\"path\", { d: 'M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25' }),\n        React__default.createElement(\"path\", { d: 'M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75' }),\n        React__default.createElement(\"path\", { d: 'M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25' })));\n};\n\nvar HelpIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z' }),\n        React__default.createElement(\"path\", { d: 'M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z' }),\n        React__default.createElement(\"path\", { d: 'M21.423 5.406L17.415 9.414' }),\n        React__default.createElement(\"path\", { d: 'M14.587 6.585L18.607 2.565' }),\n        React__default.createElement(\"path\", { d: 'M5.405 21.424L9.413 17.416' }),\n        React__default.createElement(\"path\", { d: 'M6.585 14.588L2.577 18.596' }),\n        React__default.createElement(\"path\", { d: 'M18.602 21.419L14.595 17.412' }),\n        React__default.createElement(\"path\", { d: 'M17.419 14.58L21.428 18.589' }),\n        React__default.createElement(\"path\", { d: 'M2.582 5.399L6.588 9.406' }),\n        React__default.createElement(\"path\", { d: 'M9.421 6.581L5.412 2.572' })));\n};\n\nvar KeyIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z' }),\n        React__default.createElement(\"path\", { d: 'M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z' })));\n};\n\nvar NoteIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z' }),\n        React__default.createElement(\"path\", { d: 'M6 4.5L6 0.5' }),\n        React__default.createElement(\"path\", { d: 'M18 4.5L18 0.5' }),\n        React__default.createElement(\"path\", { d: 'M10 4.5L10 0.5' }),\n        React__default.createElement(\"path\", { d: 'M14 4.5L14 0.5' })));\n};\n\nvar ParagraphIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M17.5 0.498L17.5 23.498' }),\n        React__default.createElement(\"path\", { d: 'M10.5 0.498L10.5 23.498' }),\n        React__default.createElement(\"path\", { d: 'M23.5.5H6.5a6,6,0,0,0,0,12h4' })));\n};\n\nvar TriangleIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: 'M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z' })));\n};\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-text-icon\" },\n                name === 'check' && React__default.createElement(CheckIcon, null),\n                name === 'comment' && React__default.createElement(CommentIcon, null),\n                name === 'help' && React__default.createElement(HelpIcon, null),\n                name === 'insert' && React__default.createElement(TriangleIcon, null),\n                name === 'key' && React__default.createElement(KeyIcon, null),\n                name === 'note' && React__default.createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__default.createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && (React__default.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport })))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default.createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var renderAnnotations = function (annotations) {\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        var clonedViewPort = viewport.clone({ dontFlip: true });\n        return (React__default.createElement(React__default.Fragment, null, annotations\n            .filter(function (annotation) { return !annotation.parentId; })\n            .map(function (annotation) {\n            var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n            switch (annotation.annotationType) {\n                case AnnotationType$1.Caret:\n                    return (React__default.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Circle:\n                    return (React__default.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.FileAttachment:\n                    return (React__default.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.FreeText:\n                    return (React__default.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Highlight:\n                    return (React__default.createElement(Highlight, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Ink:\n                    return (React__default.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Line:\n                    return (React__default.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Link:\n                    return (React__default.createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n                case AnnotationType$1.Polygon:\n                    return (React__default.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Polyline:\n                    return (React__default.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Popup:\n                    return (React__default.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Square:\n                    return (React__default.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Squiggly:\n                    return (React__default.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Stamp:\n                    return (React__default.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.StrikeOut:\n                    return (React__default.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Text:\n                    return (React__default.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n                case AnnotationType$1.Underline:\n                    return (React__default.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n                default:\n                    return React__default.createElement(React.Fragment, { key: annotation.id });\n            }\n        })));\n    };\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-annotation-layer\" },\n        React__default.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations })));\n};\n\nvar Observer = function (_a) {\n    var children = _a.children, threshold = _a.threshold, onVisibilityChanged = _a.onVisibilityChanged;\n    var containerRef = React.useRef(null);\n    React.useEffect(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n    return (React__default.createElement(\"div\", { ref: containerRef }, children));\n};\n\nvar WithScale = function (_a) {\n    var callback = _a.callback, children = _a.children, rotation = _a.rotation, scale = _a.scale;\n    React.useLayoutEffect(function () {\n        callback();\n    }, [rotation, scale]);\n    return (React__default.createElement(React__default.Fragment, null, children));\n};\n\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, rotation = _a.rotation, scale = _a.scale, width = _a.width, onCanvasLayerRender = _a.onCanvasLayerRender;\n    var theme = React.useContext(ThemeContext);\n    var canvasRef = React.createRef();\n    var renderTask = React.useRef();\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var renderCanvas = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        canvasEle.height = height * devicePixelRatio;\n        canvasEle.width = width * devicePixelRatio;\n        var canvasContext = canvasEle.getContext('2d', { alpha: false });\n        var viewport = page.getViewport({ rotation: rotation, scale: scale * devicePixelRatio });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            onCanvasLayerRender({\n                ele: canvasEle,\n                pageIndex: pageIndex,\n                rotation: rotation,\n                scale: scale,\n            });\n        }, function () { });\n    };\n    return (React__default.createElement(WithScale, { callback: renderCanvas, rotation: rotation, scale: scale },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-canvas-layer\", style: {\n                height: height + \"px\",\n                width: width + \"px\",\n            } },\n            React__default.createElement(\"canvas\", { ref: canvasRef, style: {\n                    transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n                    transformOrigin: \"top left\",\n                } }))));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    var renderSvg = function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJs.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = height + \"px\";\n                svg.style.width = width + \"px\";\n                containerEle.appendChild(svg);\n            });\n        });\n    };\n    return (React__default.createElement(WithScale, { callback: renderSvg, rotation: rotation, scale: scale },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-svg-layer\", ref: containerRef })));\n};\n\nvar calculateOffset = function (children, parent) {\n    var top = children.offsetTop;\n    var left = children.offsetLeft;\n    var p = children.parentElement;\n    while (p && p !== parent) {\n        top += p.offsetTop;\n        left += p.offsetLeft;\n        p = p.parentElement;\n    }\n    return {\n        left: left,\n        top: top,\n    };\n};\n\nvar removeNode = function (ele) {\n    var parent = ele.parentNode;\n    if (parent) {\n        parent.removeChild(ele);\n    }\n};\nvar replaceNode = function (replacementNode, node) {\n    removeNode(replacementNode);\n    var parent = node.parentNode;\n    if (parent) {\n        parent.insertBefore(replacementNode, node);\n    }\n    removeNode(node);\n};\nvar unwrap = function (ele) {\n    var parent = ele.parentNode;\n    if (!parent) {\n        return;\n    }\n    var range = document.createRange();\n    range.selectNodeContents(ele);\n    replaceNode(range.extractContents(), ele);\n    parent.normalize();\n};\n\nvar wrap = function (ele, startOffset, endOffset) {\n    var range = new Range();\n    range.setStart(ele, startOffset);\n    range.setEnd(ele, endOffset);\n    var wrapper = document.createElement('span');\n    range.surroundContents(wrapper);\n    return wrapper;\n};\n\nvar TextLayer = function (_a) {\n    var keywordRegexp = _a.keywordRegexp, match = _a.match, page = _a.page, pageIndex = _a.pageIndex, rotation = _a.rotation, scale = _a.scale, onJumpToMatch = _a.onJumpToMatch, onTextLayerRender = _a.onTextLayerRender;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var renderTask = React.useRef();\n    var isRendered = React.useRef(false);\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n        var numSpans = spans.length;\n        for (var i = 0; i < numSpans; i++) {\n            var span = spans[i];\n            containerEle.removeChild(span);\n        }\n    };\n    var highlight = function (span) {\n        var text = span.textContent;\n        if (!keywordRegexp.source.trim() || !text) {\n            return;\n        }\n        var startOffset = text.search(keywordRegexp);\n        var firstChild = span.firstChild;\n        if (startOffset === -1 || !firstChild) {\n            return;\n        }\n        var endOffset = startOffset + keywordRegexp.source.length;\n        var wrapper = wrap(firstChild, startOffset, endOffset);\n        wrapper.classList.add(theme.prefixClass + \"-text-highlight\");\n    };\n    var unhighlightAll = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var highlightNodes = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n        var total = highlightNodes.length;\n        for (var i = 0; i < total; i++) {\n            unwrap(highlightNodes[i]);\n        }\n    };\n    var scrollToMatch = function () {\n        var containerEle = containerRef.current;\n        if (match.pageIndex !== pageIndex || !containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n        if (match.matchIndex < spans.length) {\n            var span = spans[match.matchIndex];\n            var _a = calculateOffset(span, containerEle), top_1 = _a.top, left = _a.left;\n            onJumpToMatch(pageIndex, top_1 / scale, left / scale);\n        }\n    };\n    var renderText = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        isRendered.current = false;\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJs.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n            });\n            renderTask.current.promise.then(function () {\n                isRendered.current = true;\n                var spans = containerEle.childNodes;\n                var numSpans = spans.length;\n                if (keywordRegexp) {\n                    unhighlightAll();\n                }\n                for (var i = 0; i < numSpans; i++) {\n                    var span = spans[i];\n                    span.classList.add(theme.prefixClass + \"-text\");\n                    if (keywordRegexp) {\n                        highlight(span);\n                    }\n                }\n                scrollToMatch();\n                onTextLayerRender({\n                    ele: containerEle,\n                });\n            }, function () { });\n        });\n    };\n    React.useEffect(function () {\n        var containerEle = containerRef.current;\n        if (!keywordRegexp || !isRendered.current || !containerEle) {\n            return;\n        }\n        unhighlightAll();\n        if (keywordRegexp.source.trim()) {\n            var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n            var numSpans = spans.length;\n            for (var i = 0; i < numSpans; i++) {\n                highlight(spans[i]);\n            }\n        }\n    }, [keywordRegexp, isRendered.current]);\n    React.useEffect(function () {\n        if (isRendered.current) {\n            scrollToMatch();\n        }\n    }, [match]);\n    return (React__default.createElement(WithScale, { callback: renderText, rotation: rotation, scale: scale },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-text-layer\", ref: containerRef })));\n};\n\nvar PageLayer = function (_a) {\n    var doc = _a.doc, height = _a.height, keywordRegexp = _a.keywordRegexp, match = _a.match, pageIndex = _a.pageIndex, renderPage = _a.renderPage, rotation = _a.rotation, scale = _a.scale, width = _a.width, onCanvasLayerRender = _a.onCanvasLayerRender, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onPageVisibilityChanged = _a.onPageVisibilityChanged, onTextLayerRender = _a.onTextLayerRender;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        isCalculated: false,\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n        viewportRotation: 0,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var isCalculated = pageSize.isCalculated, page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var intersectionThreshold = Array(10).fill(null).map(function (_, i) { return i / 10; });\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var visibilityChanged = function (params) {\n        var ratio = params.isVisible ? params.ratio : 0;\n        onPageVisibilityChanged(pageIndex, ratio);\n        if (params.isVisible && !isCalculated) {\n            doc.getPage(pageIndex + 1).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                setPageSize({\n                    isCalculated: true,\n                    page: pdfPage,\n                    pageHeight: viewport.height,\n                    pageWidth: viewport.width,\n                    viewportRotation: viewport.rotation,\n                });\n            });\n        }\n    };\n    var jumpToMatch = function (indexOfPage, top, left) {\n        onJumpToDest(indexOfPage, pageHeight - top, scale);\n    };\n    var defaultPageRenderer = function (props) { return (React__default.createElement(React__default.Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    return (React__default.createElement(Observer, { onVisibilityChanged: visibilityChanged, threshold: intersectionThreshold },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-page-layer\", style: {\n                height: h + \"px\",\n                width: w + \"px\",\n            } }, !page\n            ? React__default.createElement(Spinner, null)\n            : renderPageLayer({\n                annotationLayer: {\n                    attrs: {},\n                    children: (React__default.createElement(AnnotationLayer, { doc: doc, page: page, rotation: rotationNumber, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }))\n                },\n                canvasLayer: {\n                    attrs: {},\n                    children: (React__default.createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, rotation: rotationNumber, scale: scale, width: w, onCanvasLayerRender: onCanvasLayerRender })),\n                },\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotation,\n                scale: scale,\n                svgLayer: {\n                    attrs: {},\n                    children: (React__default.createElement(SvgLayer, { height: h, page: page, rotation: rotationNumber, scale: scale, width: w })),\n                },\n                textLayer: {\n                    attrs: {},\n                    children: (React__default.createElement(TextLayer, { keywordRegexp: keywordRegexp, match: match, page: page, pageIndex: pageIndex, rotation: rotationNumber, scale: scale, onJumpToMatch: jumpToMatch, onTextLayerRender: onTextLayerRender }))\n                },\n                width: w,\n            }))));\n};\n\nvar LocalizationContext = React__default.createContext({});\n\nvar DropArea = function () {\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-drop-area\" }, l10n.main.dragDropFile));\n};\n\nvar PrintProgress = function (_a) {\n    var numLoadedPages = _a.numLoadedPages, numPages = _a.numPages, onCancel = _a.onCancel, onStartPrinting = _a.onStartPrinting;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var progress = Math.floor(numLoadedPages * 100 / numPages);\n    React.useEffect(function () {\n        if (numLoadedPages === numPages) {\n            onStartPrinting();\n        }\n    }, [numLoadedPages]);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-progress\" },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-inner\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-message\" }, l10n.printProgress.preparingDocument),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-bar\" },\n                React__default.createElement(ProgressBar, { progress: progress })),\n            React__default.createElement(PrimaryButton, { onClick: onCancel }, l10n.printProgress.cancel))));\n};\n\nvar PrintStatus;\n(function (PrintStatus) {\n    PrintStatus[\"Inactive\"] = \"Inactive\";\n    PrintStatus[\"Preparing\"] = \"Preparing\";\n    PrintStatus[\"Cancelled\"] = \"Cancelled\";\n    PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\nvar PrintStatus$1 = PrintStatus;\n\nvar PageThumbnail = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var theme = React.useContext(ThemeContext);\n    var renderTask = React.useRef();\n    var _b = React.useState(''), src = _b[0], setSrc = _b[1];\n    React.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var printUnit = 150 / 72;\n        canvas.height = Math.floor(pageHeight * printUnit);\n        canvas.width = Math.floor(pageWidth * printUnit);\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.save();\n        canvasContext.fillStyle = 'rgb(255, 255, 255)';\n        canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n        canvasContext.restore();\n        var viewport = page.getViewport({ rotation: rotation, scale: 1 });\n        renderTask.current = page.render({\n            canvasContext: canvasContext,\n            intent: 'print',\n            transform: [printUnit, 0, 0, printUnit, 0, 0],\n            viewport: viewport,\n        });\n        renderTask.current.promise.then(function () {\n            ('toBlob' in canvas)\n                ? canvas.toBlob(function (blob) {\n                    setSrc(URL.createObjectURL(blob));\n                })\n                : setSrc(canvas.toDataURL());\n        }, function () { });\n    }, []);\n    return (!src\n        ? React__default.createElement(Spinner, null)\n        : (React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-page-thumbnail\", style: {\n                height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                width: Math.floor(pageWidth * 96 / 72) + \"px\",\n            } },\n            React__default.createElement(\"img\", { src: src, style: {\n                    height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                    width: Math.floor(pageWidth * 96 / 72) + \"px\",\n                }, onLoad: onLoad }))));\n};\n\nvar PageThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var _b = React.useState({\n        height: pageHeight,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    React.useEffect(function () {\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                height: viewport.height,\n                page: pdfPage,\n                viewportRotation: viewport.rotation,\n                width: viewport.width,\n            });\n        });\n    }, []);\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    return (!page\n        ? React__default.createElement(Spinner, null)\n        : (React__default.createElement(PageThumbnail, { page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotationNumber, onLoad: onLoad })));\n};\n\nvar PrintZone = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onLoad = _a.onLoad;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(0), numLoadedPages = _b[0], setNumLoadedPages = _b[1];\n    React.useEffect(function () {\n        if (printStatus === PrintStatus$1.Ready) {\n            document.body.classList.add(theme.prefixClass + \"-body-printing\");\n            window.print();\n        }\n        var handler = function () {\n            if (printStatus === PrintStatus$1.Ready) {\n                document.body.classList.remove(theme.prefixClass + \"-body-printing\");\n                onCancel();\n            }\n        };\n        document.addEventListener('mousemove', handler);\n        return function () { return document.removeEventListener('mousemove', handler); };\n    }, [printStatus]);\n    var numPages = doc.numPages;\n    var loadPage = function () {\n        var total = numLoadedPages + 1;\n        setNumLoadedPages(total);\n        onLoad(total);\n    };\n    return (reactDom.createPortal((React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-print-zone\" }, Array(numPages).fill(0).map(function (_, index) {\n            return (React__default.createElement(PageThumbnailContainer, { key: index, doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation, onLoad: loadPage }));\n        })),\n        React__default.createElement(\"style\", { dangerouslySetInnerHTML: {\n                __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n            } }))), document.body));\n};\n\nvar PrintContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onStartPrinting = _a.onStartPrinting;\n    var _b = React.useState(0), numLoadedPagesForPrint = _b[0], setNumLoadedPagesForPrint = _b[1];\n    var cancelPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        onCancel();\n    };\n    var startPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        onStartPrinting();\n    };\n    return (React__default.createElement(React__default.Fragment, null,\n        printStatus === PrintStatus$1.Preparing && (React__default.createElement(PrintProgress, { numLoadedPages: numLoadedPagesForPrint, numPages: doc.numPages, onCancel: cancelPrinting, onStartPrinting: startPrinting })),\n        (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && (React__default.createElement(PrintZone, { doc: doc, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onLoad: setNumLoadedPagesForPrint }))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar ExitFullScreenIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\\n                C9.515,9.962,9.963,9.514,10.515,9.514z\\n                M0.531,23.499l6.984-6.985\\n                M16.515,7.514L23.5,0.529\\n                M21.515,7.514h-5v-5\\n                M7.515,21.514v-5 h-5\\n                M0.523,0.521l6.992,6.993\\n                M16.515,16.514l6.985,6.985\\n                M16.515,21.514v-5h5\\n                M2.515,7.514h5v-5\" })));\n};\n\nvar ExitFullScreen = function (_a) {\n    var onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-exit-fullscreen\" },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-exit-fullscreen-inner\" },\n            React__default.createElement(Button, { onClick: onClick },\n                React__default.createElement(ExitFullScreenIcon, null)))));\n};\n\nvar AttachmentList = function (_a) {\n    var files = _a.files;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var renderItem = function (file) {\n        var onClick = function () { return downloadFile(file.fileName, file.data); };\n        return (React__default.createElement(\"li\", { className: theme.prefixClass + \"-attachment-item\", key: \"attachment-\" + file.fileName, title: \"\" + l10n.attachment.clickToDownload, onClick: onClick }, file.fileName));\n    };\n    return (files.length === 0\n        ? React__default.createElement(\"div\", { className: theme.prefixClass + \"-attachment-list-empty\" }, l10n.attachment.noAttachment)\n        : (React__default.createElement(\"ul\", { className: theme.prefixClass + \"-attachment-list\" }, files.map(renderItem))));\n};\n\nvar AttachmentLoader = function (_a) {\n    var doc = _a.doc;\n    var _b = React.useState({\n        files: [],\n        isLoaded: false,\n    }), attachments = _b[0], setAttachments = _b[1];\n    React.useEffect(function () {\n        doc.getAttachments().then(function (response) {\n            var files = response\n                ? Object.keys(response).map(function (file) {\n                    return {\n                        data: response[file].content,\n                        fileName: response[file].filename,\n                    };\n                })\n                : [];\n            setAttachments({\n                files: files,\n                isLoaded: true,\n            });\n        });\n    }, []);\n    return (!attachments.isLoaded\n        ? React__default.createElement(Spinner, null)\n        : React__default.createElement(AttachmentList, { files: attachments.files }));\n};\n\nvar BookmarkItem = function (_a) {\n    var bookmark = _a.bookmark, depth = _a.depth, doc = _a.doc, onClick = _a.onClick, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var toggleRef = React.createRef();\n    var subItemRef = React.createRef();\n    var subItemsDisplayed = React.useRef(true);\n    var hasSubItems = bookmark.items && bookmark.items.length > 0;\n    var toggleSubItems = function () {\n        subItemsDisplayed.current = !subItemsDisplayed.current;\n        var subItemsEle = subItemRef.current;\n        var toggleEle = toggleRef.current;\n        if (!subItemsEle || !toggleEle) {\n            return;\n        }\n        subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n        toggleEle.classList.toggle(theme.prefixClass + \"-bookmark-toggle-expanded\");\n    };\n    var clickBookmak = function () {\n        if (hasSubItems && bookmark.dest) {\n            onClick(bookmark.dest);\n        }\n    };\n    var clickItem = function () {\n        if (!hasSubItems && bookmark.dest) {\n            onClick(bookmark.dest);\n        }\n    };\n    return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-item\", style: {\n                paddingLeft: depth * 20 + 4 + \"px\",\n            }, onClick: clickItem },\n            hasSubItems && (React__default.createElement(\"span\", { ref: toggleRef, className: theme.prefixClass + \"-bookmark-toggle\", onClick: toggleSubItems }, \"\\u25BA\")),\n            bookmark.url\n                ? (React__default.createElement(\"a\", { className: theme.prefixClass + \"-bookmark-title\", href: bookmark.url, rel: 'noopener noreferrer nofollow', target: bookmark.newWindow ? '_blank' : '' }, bookmark.title))\n                : (React__default.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-title\", onClick: clickBookmak }, bookmark.title))),\n        hasSubItems && (React__default.createElement(\"div\", { ref: subItemRef },\n            React__default.createElement(BookmarkList, { bookmarks: bookmark.items, depth: depth + 1, doc: doc, onJumpToDest: onJumpToDest })))));\n};\n\nvar BookmarkList = function (_a) {\n    var bookmarks = _a.bookmarks, _b = _a.depth, depth = _b === void 0 ? 0 : _b, doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var jumpToDest = function (dest) {\n        getDestination(doc, dest).then(function (target) {\n            var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n            onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n        });\n    };\n    return (React__default.createElement(\"ul\", { className: theme.prefixClass + \"-bookmark-list\" }, bookmarks.map(function (bookmark, index) {\n        return (React__default.createElement(\"li\", { key: index },\n            React__default.createElement(BookmarkItem, { bookmark: bookmark, depth: depth, doc: doc, onClick: jumpToDest, onJumpToDest: onJumpToDest })));\n    })));\n};\n\nvar BookmarkLoader = function (_a) {\n    var doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        isLoaded: false,\n        items: [],\n    }), bookmarks = _b[0], setBookmarks = _b[1];\n    React.useEffect(function () {\n        doc.getOutline().then(function (outline) {\n            setBookmarks({\n                isLoaded: true,\n                items: outline || [],\n            });\n        });\n    }, []);\n    return (!bookmarks.isLoaded\n        ? React__default.createElement(Spinner, null)\n        : (bookmarks.items.length === 0\n            ? React__default.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-empty\" }, l10n.bookmark.noBookmark)\n            : (React__default.createElement(BookmarkList, { bookmarks: bookmarks.items, depth: 0, doc: doc, onJumpToDest: onJumpToDest }))));\n};\n\nvar BookmarkIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\\n                M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\\n                c0.552,0,1,0.448,1,1L11.5,10.5z\\n                M14.5,6.499h6\\n                M14.5,10.499h6\\n                M3.5,14.499h17\\n                M3.5,18.499h16.497\" })));\n};\n\nvar FileIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\\n                c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\\n                L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9\" })));\n};\n\nvar WrappedScrollingIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\\n                M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\" })));\n};\n\nvar ThumbnailItem = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, thumbnailHeight = _a.thumbnailHeight, thumbnailWidth = _a.thumbnailWidth;\n    var renderTask = React.useRef();\n    var _b = React.useState(''), src = _b[0], setSrc = _b[1];\n    React.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var canvasContext = canvas.getContext('2d', { alpha: false });\n        var w = thumbnailWidth;\n        var h = w / (pageWidth / pageHeight);\n        var scale = w / pageWidth;\n        canvas.height = h;\n        canvas.width = w;\n        canvas.style.height = h + \"px\";\n        canvas.style.width = w + \"px\";\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () { return setSrc(canvas.toDataURL()); }, function () { });\n    }, [rotation]);\n    return (!src\n        ? React__default.createElement(Spinner, null)\n        : React__default.createElement(\"img\", { src: src, height: thumbnailHeight + \"px\", width: thumbnailWidth + \"px\" }));\n};\n\nvar THUMBNAIL_WIDTH = 100;\nvar ThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        height: pageHeight,\n        isCalculated: false,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var isCalculated = pageSize.isCalculated, page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var scale = width / height;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? THUMBNAIL_WIDTH : (THUMBNAIL_WIDTH / scale);\n    var h = isVertical ? (THUMBNAIL_WIDTH / scale) : THUMBNAIL_WIDTH;\n    var onVisibilityChanged = function (params) {\n        if (params.isVisible && !isCalculated) {\n            doc.getPage(pageIndex + 1).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                setPageSize({\n                    height: viewport.height,\n                    isCalculated: true,\n                    page: pdfPage,\n                    viewportRotation: viewport.rotation,\n                    width: viewport.width,\n                });\n            });\n        }\n    };\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    return (React__default.createElement(Observer, { onVisibilityChanged: onVisibilityChanged },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-thumbnail-container\", style: {\n                height: h + \"px\",\n                width: w + \"px\",\n            } }, !page\n            ? React__default.createElement(Spinner, null)\n            : (React__default.createElement(ThumbnailItem, { page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotationNumber, thumbnailHeight: h, thumbnailWidth: w })))));\n};\n\nvar ThumbnailList = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onJumpToPage = _a.onJumpToPage;\n    var theme = React.useContext(ThemeContext);\n    var numPages = doc.numPages;\n    return (React__default.createElement(React__default.Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n        var _a;\n        var onClick = function () { return onJumpToPage(index); };\n        return (React__default.createElement(\"div\", { key: \"thumbnail-\" + index },\n            React__default.createElement(\"div\", { className: classNames((_a = {},\n                    _a[theme.prefixClass + \"-thumbnail\"] = true,\n                    _a[theme.prefixClass + \"-thumbnail-selected\"] = currentPage === index,\n                    _a)), onClick: onClick },\n                React__default.createElement(ThumbnailContainer, { doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation }))));\n    })));\n};\n\nvar Tab;\n(function (Tab) {\n    Tab[\"Attachment\"] = \"Attachment\";\n    Tab[\"Bookmark\"] = \"Bookmark\";\n    Tab[\"Thumbnail\"] = \"Thumbnail\";\n})(Tab || (Tab = {}));\nvar TOOLTIP_OFFSET = { left: 0, top: 8 };\nvar Sidebar = function (_a) {\n    var _b;\n    var currentPage = _a.currentPage, doc = _a.doc, height = _a.height, rotation = _a.rotation, width = _a.width, onJumpToDest = _a.onJumpToDest, onJumpToPage = _a.onJumpToPage;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _c = React.useState(Tab.Thumbnail), tab = _c[0], setTab = _c[1];\n    var clickThumbnailTab = function () { return setTab(Tab.Thumbnail); };\n    var clickBookmarkTab = function () { return setTab(Tab.Bookmark); };\n    var clickAttachmentTab = function () { return setTab(Tab.Attachment); };\n    var renderAttachmentTip = function () { return l10n.sidebar.attachment; };\n    var renderBookmarkTip = function () { return l10n.sidebar.bookmark; };\n    var renderThumbnailTip = function () { return l10n.sidebar.thumbnail; };\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-sidebar\" },\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tabs\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React__default.createElement(Button, { onClick: clickThumbnailTab, isSelected: tab === Tab.Thumbnail },\n                        React__default.createElement(WrappedScrollingIcon, null))), content: renderThumbnailTip, offset: TOOLTIP_OFFSET })),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React__default.createElement(Button, { onClick: clickBookmarkTab, isSelected: tab === Tab.Bookmark },\n                        React__default.createElement(BookmarkIcon, null))), content: renderBookmarkTip, offset: TOOLTIP_OFFSET })),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React__default.createElement(Button, { onClick: clickAttachmentTab, isSelected: tab === Tab.Attachment },\n                        React__default.createElement(FileIcon, null))), content: renderAttachmentTip, offset: TOOLTIP_OFFSET }))),\n        React__default.createElement(\"div\", { className: classNames((_b = {},\n                _b[theme.prefixClass + \"-sidebar-content\"] = true,\n                _b[theme.prefixClass + \"-sidebar-thumbnails\"] = tab === Tab.Thumbnail,\n                _b)) },\n            tab === Tab.Thumbnail && (React__default.createElement(ThumbnailList, { currentPage: currentPage, doc: doc, pageHeight: height, pageWidth: width, rotation: rotation, onJumpToPage: onJumpToPage })),\n            tab === Tab.Bookmark && React__default.createElement(BookmarkLoader, { doc: doc, onJumpToDest: onJumpToDest }),\n            tab === Tab.Attachment && React__default.createElement(AttachmentLoader, { doc: doc }))));\n};\n\nvar DownArrowIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\\n                c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\\n                C1.96,3.016,2.138,2.966,2.32,2.966z\" })));\n};\n\nvar DownloadIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M17.5,11.5c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,14.5v6\\n                M17.5,20.5\\n                l-2.25-2.25\\n                M17.5,20.5l2.25-2.25\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21c0-0.552,0.448-1,1-1h13.293\\n                c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\" })));\n};\n\nvar FullScreenIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M15.5,8.499l8-8\\n                M0.5,23.499l8-8\\n                M5.5,23.499h-5v-5\\n                M23.5,5.499v-5h-5\\n                M15.5,15.499l8,8\\n                M0.5,0.499l8,8\\n                M0.5,5.499v-5h5\\n                M18.5,23.499h5v-5\" })));\n};\n\nvar HandToolIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\\n                c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\\n                c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\\n                c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6\" })));\n};\n\nvar HorizontalScrollingIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\" })));\n};\n\nvar InfoIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\\n                M14.5,17.005H13\\n                c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\\n                M11.745,6.504L11.745,6.504\\n                M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\\n                S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5\" })));\n};\n\nvar LeftSidebarIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M1.5,0.497h20c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-20c-0.552,0-1-0.448-1-1v-20\\n                C0.5,0.945,0.948,0.497,1.5,0.497z\\n                M7.5,0.497v22\" })));\n};\n\nvar NextIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n                L23.541,5.627\" })));\n};\n\nvar PreviousIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n                L0.535,18.373\" })));\n};\n\nvar PrintIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\" })));\n};\n\nvar RotateBackwardIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\\n                M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\\n                M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\\n                M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\\n                M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\\n                M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\\n                M13.5,1.75L10,4.25l3.5,2.5\" })));\n};\n\nvar RotateForwardIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\\n                M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\\n                M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\\n                M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\\n                M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\\n                M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\\n                M10.5,1.75l3.5,2.5l-3.5,2.5\" })));\n};\n\nvar TextSelectionIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\\n                L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\\n                c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\\n                l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z\" })));\n};\n\nvar UpArrowIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\\n                c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\\n                C22.143,20.984,21.965,21.034,21.783,21.034z\" })));\n};\n\nvar VerticalScrollingIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\\n                M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\\n                M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z\" })));\n};\n\nvar ZoomInIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\\n                M10.5,5.499v10\" })));\n};\n\nvar ZoomOutIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\" })));\n};\n\nvar OpenFileIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M4.5,8.5H14\\n                M4.5,11.5h6\\n                M4.5,5.5h7\\n                M4.5,14.5h4\\n                M4.5,17.5h4\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21\\n                c0-0.552,0.448-1,1-1h13.293c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\\n                M17.5,11.5\\n                c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,20.5v-6\\n                M17.5,14.5l-2.25,2.25\\n                M17.5,14.5l2.25,2.25\" })));\n};\n\nvar TOOLTIP_OFFSET$1 = { left: 0, top: 8 };\nvar OpenFileButton = function (_a) {\n    var onOpenFiles = _a.onOpenFiles;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var openFiles = function (e) {\n        var files = e.target.files;\n        if (files) {\n            onOpenFiles(files);\n        }\n    };\n    var renderContent = function () { return l10n.toolbar.openFile; };\n    return (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React__default.createElement(\"div\", { className: theme.prefixClass + \"-open-file\" },\n            React__default.createElement(\"input\", { className: theme.prefixClass + \"-open-file-input\", multiple: false, type: 'file', title: '', onChange: openFiles }),\n            React__default.createElement(OpenFileIcon, null))), content: renderContent, offset: TOOLTIP_OFFSET$1 }));\n};\n\nvar fileSize = function (bytes) {\n    var sufixes = ['B', 'kB', 'MB', 'GB', 'TB'];\n    var i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return (bytes / Math.pow(1024, i)).toFixed(2) + \" \" + sufixes[i];\n};\n\nvar PropertiesLoader = function (_a) {\n    var doc = _a.doc, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(), data = _b[0], setData = _b[1];\n    React.useEffect(function () {\n        doc.getMetadata().then(function (meta) {\n            return Promise.resolve(meta);\n        }).then(function (meta) {\n            return doc.getDownloadInfo().then(function (d) {\n                return Promise.resolve({\n                    fileName: meta.contentDispositionFilename || '',\n                    info: meta.info,\n                    length: d.length,\n                });\n            });\n        }).then(function (response) {\n            setData(response);\n        });\n    }, []);\n    return (data ? render(data) : React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-loader\" },\n        React__default.createElement(Spinner, null)));\n};\n\nvar PropertyItem = function (_a) {\n    var label = _a.label, value = _a.value;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"dl\", { className: theme.prefixClass + \"-property-item\" },\n        React__default.createElement(\"dt\", { className: theme.prefixClass + \"-property-item-label\" },\n            label,\n            \":\"),\n        React__default.createElement(\"dd\", { className: theme.prefixClass + \"-property-item-value\" }, value || '-')));\n};\n\nvar PropertiesModal = function (_a) {\n    var doc = _a.doc, fileName$1 = _a.fileName, onToggle = _a.onToggle;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var formatDate = function (input) {\n        var date = convertDate(input);\n        return date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n    };\n    var renderData = function (data) { return (React__default.createElement(React__default.Fragment, null,\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.fileName, value: data.fileName || fileName(fileName$1) }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.fileSize, value: fileSize(data.length) })),\n        React__default.createElement(Separator, null),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.title, value: data.info.Title }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.author, value: data.info.Author }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.subject, value: data.info.Subject }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.keywords, value: data.info.Keywords }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.creator, value: data.info.Creator }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.creationDate, value: formatDate(data.info.CreationDate) }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.modificationDate, value: formatDate(data.info.ModDate) })),\n        React__default.createElement(Separator, null),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.pdfProducer, value: data.info.Producer }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.pdfVersion, value: data.info.PDFFormatVersion }),\n            React__default.createElement(PropertyItem, { label: \"\" + l10n.property.pageCount, value: \"\" + doc.numPages })))); };\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal\" },\n        React__default.createElement(PropertiesLoader, { doc: doc, render: renderData }),\n        React__default.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-footer\" },\n            React__default.createElement(PrimaryButton, { onClick: onToggle }, l10n.property.close))));\n};\n\nvar SearchIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n                M23.5,23.5\\n                l-5.929-5.929\" })));\n};\n\nvar EMPTY_KEYWORD_REGEXP = new RegExp(' ');\nvar PORTAL_OFFSET = { left: 0, top: 8 };\nvar SearchPopover = function (_a) {\n    var doc = _a.doc, onJumpToMatch = _a.onJumpToMatch, onSearchFor = _a.onSearchFor;\n    var theme = React.useContext(ThemeContext);\n    var numPages = doc.numPages;\n    var indexArr = Array(numPages).fill(0).map(function (_, i) { return i; });\n    var l10n = React.useContext(LocalizationContext);\n    var _b = React.useState(''), keyword = _b[0], setKeyword = _b[1];\n    var _c = React.useState([]), found = _c[0], setFound = _c[1];\n    var _d = React.useState(0), currentMatch = _d[0], setCurrentMatch = _d[1];\n    var _e = React.useState(false), matchCase = _e[0], setMatchCase = _e[1];\n    var _f = React.useState(false), wholeWords = _f[0], setWholeWords = _f[1];\n    var textContents = React.useRef([]);\n    var changeKeyword = function (e) {\n        setKeyword(e.target.value);\n    };\n    var getTextContents = function () {\n        var promises = indexArr.map(function (pageIndex) {\n            return doc.getPage(pageIndex + 1).then(function (page) {\n                return page.getTextContent();\n            }).then(function (content) {\n                var pageContent = content.items.map(function (item) { return item.str || ''; }).join('');\n                return Promise.resolve({\n                    pageContent: pageContent,\n                    pageIndex: pageIndex,\n                });\n            });\n        });\n        return Promise.all(promises).then(function (data) {\n            data.sort(function (a, b) { return a.pageIndex - b.pageIndex; });\n            return Promise.resolve(data.map(function (item) { return item.pageContent; }));\n        });\n    };\n    var buildKeywordRegex = function (keywordParam, matchCaseParam, wholeWordsParam) {\n        var source = wholeWordsParam ? \" \" + keywordParam + \" \" : keywordParam;\n        var flags = matchCaseParam ? 'g' : 'gi';\n        return new RegExp(source, flags);\n    };\n    var search = function (keywordParam, matchCaseParam, wholeWordsParam) {\n        var regexp = buildKeywordRegex(keywordParam, matchCaseParam, wholeWordsParam);\n        onSearchFor(regexp);\n        setCurrentMatch(0);\n        setFound([]);\n        var promise = (textContents.current.length === 0)\n            ? getTextContents().then(function (response) {\n                textContents.current = response;\n                return Promise.resolve(response);\n            })\n            : Promise.resolve(textContents.current);\n        promise.then(function (response) {\n            var arr = [];\n            response.forEach(function (item, pageIndex) {\n                var numMatches = (item.match(regexp) || []).length;\n                for (var matchIndex = 0; matchIndex < numMatches; matchIndex++) {\n                    arr.push({\n                        matchIndex: matchIndex,\n                        pageIndex: pageIndex,\n                    });\n                }\n            });\n            setFound(arr);\n            if (arr.length > 0) {\n                setCurrentMatch(1);\n                onJumpToMatch(arr[0]);\n            }\n        });\n    };\n    var keydownSearch = function (e) {\n        if (e.keyCode !== 13 || !keyword) {\n            return;\n        }\n        search(keyword, matchCase, wholeWords);\n    };\n    var jumpToPreviousMatch = function () {\n        var prev = currentMatch - 1;\n        var updated = prev > 0 ? prev : found.length;\n        setCurrentMatch(updated);\n        onJumpToMatch(found[updated - 1]);\n    };\n    var jumpToNextMatch = function () {\n        var next = currentMatch + 1;\n        var updated = next <= found.length ? next : 1;\n        setCurrentMatch(updated);\n        onJumpToMatch(found[updated - 1]);\n    };\n    var changeMatchCase = function (e) {\n        var isChecked = e.target.checked;\n        setMatchCase(isChecked);\n        if (keyword) {\n            search(keyword, isChecked, wholeWords);\n        }\n    };\n    var changeWholeWords = function (e) {\n        var isChecked = e.target.checked;\n        setWholeWords(isChecked);\n        if (keyword) {\n            search(keyword, matchCase, isChecked);\n        }\n    };\n    var clearKeyword = function () {\n        onSearchFor(EMPTY_KEYWORD_REGEXP);\n        setKeyword('');\n        setCurrentMatch(0);\n        setFound([]);\n        setMatchCase(false);\n        setWholeWords(false);\n    };\n    var renderSearch = function () { return l10n.toolbar.search; };\n    var renderTarget = function (toggle, opened) { return (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: toggle, isSelected: opened },\n            React__default.createElement(SearchIcon, null)), content: renderSearch, offset: PORTAL_OFFSET })); };\n    var renderPreviousMatch = function () { return l10n.search.previousMatch; };\n    var renderNextMatch = function () { return l10n.search.nextMatch; };\n    var renderContent = function (toggle) {\n        var close = function () {\n            toggle();\n            clearKeyword();\n        };\n        return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover\" },\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-input-counter\" },\n                React__default.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-input\", placeholder: \"\" + l10n.search.enterToSearch, type: \"text\", value: keyword, onChange: changeKeyword, onKeyDown: keydownSearch }),\n                React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-counter\" },\n                    currentMatch,\n                    \"/\",\n                    found.length)),\n            React__default.createElement(\"label\", { className: theme.prefixClass + \"-search-popover-label\" },\n                React__default.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-label-checkbox\", checked: matchCase, type: \"checkbox\", onChange: changeMatchCase }),\n                \" \",\n                l10n.search.matchCase),\n            React__default.createElement(\"label\", { className: theme.prefixClass + \"-search-popover-label\" },\n                React__default.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-label-checkbox\", checked: wholeWords, type: \"checkbox\", onChange: changeWholeWords }),\n                \" \",\n                l10n.search.wholeWords),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer\" },\n                React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-item\" },\n                    React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: jumpToPreviousMatch },\n                            React__default.createElement(PreviousIcon, null)), content: renderPreviousMatch, offset: PORTAL_OFFSET })),\n                React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-item\" },\n                    React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: jumpToNextMatch },\n                            React__default.createElement(NextIcon, null)), content: renderNextMatch, offset: PORTAL_OFFSET })),\n                React__default.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-button\" },\n                    React__default.createElement(PrimaryButton, { onClick: close }, l10n.search.close)))));\n    };\n    return (React__default.createElement(Popover, { position: Position$1.BottomLeft, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET, closeOnClickOutside: false, closeOnEscape: true }));\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9,\n    1, 1.1, 1.3, 1.5, 1.7, 1.9,\n    2.1, 2.4, 2.7,\n    3.0, 3.3, 3.7,\n    4.1, 4.6,\n    5.1, 5.7,\n    6.3,\n    7.0, 7.7,\n    8.5,\n    9.4,\n    10,\n];\nvar increase = function (currentLevel) {\n    var found = LEVELS.find(function (item) { return item > currentLevel; });\n    return found || currentLevel;\n};\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var theme = React.useContext(ThemeContext);\n    return (React__default.createElement(\"ul\", { className: theme.prefixClass + \"-menu\" }, children));\n};\n\nvar LEVELS$1 = [0.5, 0.75, 1, 1.25, 1.5, 2, 3, 4];\nvar PORTAL_OFFSET$1 = { left: 0, top: 8 };\nvar ZoomPopover = function (_a) {\n    var scale = _a.scale, onZoom = _a.onZoom;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var getSpcialLevelLabel = function (level) {\n        switch (level) {\n            case SpecialZoomLevel$1.ActualSize: return l10n.zoom.actualSize;\n            case SpecialZoomLevel$1.PageFit: return l10n.zoom.pageFit;\n            case SpecialZoomLevel$1.PageWidth: return l10n.zoom.pageWidth;\n        }\n    };\n    var renderTarget = function (toggle) {\n        var click = function () { toggle(); };\n        return (React__default.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target\", onClick: click },\n            React__default.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target-scale\" },\n                Math.round(scale * 100),\n                \"%\"),\n            React__default.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target-arrow\" })));\n    };\n    var renderContent = function (toggle) { return (React__default.createElement(Menu, null,\n        Object.keys(SpecialZoomLevel$1).map(function (k) {\n            var level = k;\n            var clickMenuItem = function () { toggle(); onZoom(level); };\n            return (React__default.createElement(MenuItem, { key: level, onClick: clickMenuItem }, getSpcialLevelLabel(level)));\n        }),\n        React__default.createElement(MenuDivider, null),\n        LEVELS$1.map(function (level) {\n            var clickMenuItem = function () { toggle(); onZoom(level); };\n            return (React__default.createElement(MenuItem, { key: level, onClick: clickMenuItem }, Math.round(level * 100) + \"%\"));\n        }))); };\n    return (React__default.createElement(Popover, { position: Position$1.BottomCenter, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET$1, closeOnClickOutside: true, closeOnEscape: true }));\n};\n\nvar MoreIcon = function () {\n    return (React__default.createElement(Icon, { size: 16 },\n        React__default.createElement(\"path\", { d: \"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\\n                M12,9.5\\n                c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\\n                M12,18.5c1.381,0,2.5,1.119,2.5,2.5\\n                s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z\" })));\n};\n\nvar PORTAL_OFFSET$2 = { left: 0, top: 8 };\nvar MoreActionsPopover = function (_a) {\n    var doc = _a.doc, fileName = _a.fileName, scrollMode = _a.scrollMode, selectionMode = _a.selectionMode, onChangeScrollMode = _a.onChangeScrollMode, onChangeSelectionMode = _a.onChangeSelectionMode, onJumpToFirstPage = _a.onJumpToFirstPage, onJumpToLastPage = _a.onJumpToLastPage, onRotate = _a.onRotate;\n    var l10n = React.useContext(LocalizationContext);\n    var renderMoreActions = function () { return l10n.toolbar.moreActions; };\n    var renderTarget = function (toggle, opened) { return (React__default.createElement(Tooltip, { position: Position$1.BottomRight, target: React__default.createElement(Button, { onClick: toggle, isSelected: opened },\n            React__default.createElement(MoreIcon, null)), content: renderMoreActions, offset: PORTAL_OFFSET$2 })); };\n    var renderPropertyMenu = function (toggle) { return (React__default.createElement(MenuItem, { icon: React__default.createElement(InfoIcon, null), onClick: toggle }, l10n.toolbar.documentProperties)); };\n    var renderPropertiesModal = function (toggle) { return (React__default.createElement(PropertiesModal, { doc: doc, fileName: fileName, onToggle: toggle })); };\n    var renderContent = function (toggle) {\n        var jumpToFirstPage = function () {\n            toggle();\n            onJumpToFirstPage();\n        };\n        var jumpToLastPage = function () {\n            toggle();\n            onJumpToLastPage();\n        };\n        var rotateForward = function () {\n            toggle();\n            onRotate(90);\n        };\n        var rotateBackward = function () {\n            toggle();\n            onRotate(-90);\n        };\n        var activateTextSelectionMode = function () {\n            toggle();\n            onChangeSelectionMode(SelectionMode$1.Text);\n        };\n        var activateHandMode = function () {\n            toggle();\n            onChangeSelectionMode(SelectionMode$1.Hand);\n        };\n        var activateScrollMode = function (mode) {\n            toggle();\n            onChangeScrollMode(mode);\n        };\n        var setVerticalScrollMode = function () { return activateScrollMode(ScrollMode$1.Vertical); };\n        var setHorizontalScrollMode = function () { return activateScrollMode(ScrollMode$1.Horizontal); };\n        var setWrappedScrollMode = function () { return activateScrollMode(ScrollMode$1.Wrapped); };\n        return (React__default.createElement(Menu, null,\n            React__default.createElement(MenuItem, { icon: React__default.createElement(UpArrowIcon, null), onClick: jumpToFirstPage }, l10n.toolbar.goToFirstPage),\n            React__default.createElement(MenuItem, { icon: React__default.createElement(DownArrowIcon, null), onClick: jumpToLastPage }, l10n.toolbar.goToLastPage),\n            React__default.createElement(MenuDivider, null),\n            React__default.createElement(MenuItem, { icon: React__default.createElement(RotateForwardIcon, null), onClick: rotateForward }, l10n.toolbar.rotateForward),\n            React__default.createElement(MenuItem, { icon: React__default.createElement(RotateBackwardIcon, null), onClick: rotateBackward }, l10n.toolbar.rotateBackward),\n            React__default.createElement(MenuDivider, null),\n            React__default.createElement(MenuItem, { checked: selectionMode === SelectionMode$1.Text, icon: React__default.createElement(TextSelectionIcon, null), onClick: activateTextSelectionMode }, l10n.toolbar.textSelectionTool),\n            React__default.createElement(MenuItem, { checked: selectionMode === SelectionMode$1.Hand, icon: React__default.createElement(HandToolIcon, null), onClick: activateHandMode }, l10n.toolbar.handTool),\n            React__default.createElement(MenuDivider, null),\n            React__default.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Vertical, icon: React__default.createElement(VerticalScrollingIcon, null), onClick: setVerticalScrollMode }, l10n.toolbar.verticalScrolling),\n            React__default.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Horizontal, icon: React__default.createElement(HorizontalScrollingIcon, null), onClick: setHorizontalScrollMode }, l10n.toolbar.horizontalScrolling),\n            React__default.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Wrapped, icon: React__default.createElement(WrappedScrollingIcon, null), onClick: setWrappedScrollMode }, l10n.toolbar.wrappedScrolling),\n            React__default.createElement(MenuDivider, null),\n            React__default.createElement(Modal, { target: renderPropertyMenu, content: renderPropertiesModal, closeOnClickOutside: true, closeOnEscape: true })));\n    };\n    return (React__default.createElement(Popover, { position: Position$1.BottomRight, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET$2, closeOnClickOutside: true, closeOnEscape: true }));\n};\n\nvar TOOLTIP_OFFSET$2 = { left: 0, top: 8 };\nvar Toolbar = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, fileName = _a.fileName, scale = _a.scale, scrollMode = _a.scrollMode, selectionMode = _a.selectionMode, onChangeScrollMode = _a.onChangeScrollMode, onChangeSelectionMode = _a.onChangeSelectionMode, onDownload = _a.onDownload, onFullScreen = _a.onFullScreen, onJumpTo = _a.onJumpTo, onJumpToMatch = _a.onJumpToMatch, onOpenFiles = _a.onOpenFiles, onPrint = _a.onPrint, onRotate = _a.onRotate, onSearchFor = _a.onSearchFor, onToggleSidebar = _a.onToggleSidebar, onZoom = _a.onZoom, renderToolbar = _a.renderToolbar;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(false), pageTextboxFocused = _b[0], setPageTextboxFocused = _b[1];\n    var _c = React.useState(currentPage), editingPage = _c[0], setEditingPage = _c[1];\n    var _d = React.useState(false), isSidebarOpened = _d[0], setSidebarOpened = _d[1];\n    var numPages = doc.numPages;\n    var zoomOut = function () {\n        var newLevel = decrease(scale);\n        onZoom(newLevel);\n    };\n    var zoomIn = function () {\n        var newLevel = increase(scale);\n        onZoom(newLevel);\n    };\n    var gotoNextPage = function () {\n        var nextPage = currentPage + 1;\n        if (nextPage < numPages) {\n            setEditingPage(nextPage);\n            onJumpTo(nextPage);\n        }\n    };\n    var gotoPreviousPage = function () {\n        var previousPage = currentPage - 1;\n        if (previousPage >= 0) {\n            setEditingPage(previousPage);\n            onJumpTo(previousPage);\n        }\n    };\n    var changePage = function (e) {\n        var newPage = parseInt(e.target.value, 10);\n        if (newPage > 0 && newPage <= numPages) {\n            setEditingPage(newPage - 1);\n        }\n    };\n    var focusPageTextbox = function () {\n        setPageTextboxFocused(true);\n        setEditingPage(currentPage);\n    };\n    var blurPageTextbox = function () {\n        setPageTextboxFocused(false);\n    };\n    var keydownPage = function (e) {\n        switch (e.keyCode) {\n            case 38:\n                gotoPreviousPage();\n                break;\n            case 40:\n                gotoNextPage();\n                break;\n            case 13:\n                onJumpTo(editingPage);\n                break;\n        }\n    };\n    var jumpToFirstPage = function () { return onJumpTo(0); };\n    var jumpToLastPage = function () { return onJumpTo(numPages - 1); };\n    var toggleSidebar = function () {\n        setSidebarOpened(!isSidebarOpened);\n        onToggleSidebar();\n    };\n    var rotateForward = function () { return onRotate(90); };\n    var rotateBackward = function () { return onRotate(-90); };\n    var activateTextSelectionMode = function () { return onChangeSelectionMode(SelectionMode$1.Text); };\n    var activateHandMode = function () { return onChangeSelectionMode(SelectionMode$1.Hand); };\n    var setVerticalScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Vertical); };\n    var setHorizontalScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Horizontal); };\n    var setWrappedScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Wrapped); };\n    var renderToggle = function () { return l10n.toolbar.toggleSidebar; };\n    var renderPreviousPage = function () { return l10n.toolbar.previousPage; };\n    var renderNextPage = function () { return l10n.toolbar.nextPage; };\n    var renderZoomOut = function () { return l10n.toolbar.zoomOut; };\n    var renderZoomIn = function () { return l10n.toolbar.zoomIn; };\n    var renderFullScreen = function () { return l10n.toolbar.fullScreen; };\n    var renderDownload = function () { return l10n.toolbar.download; };\n    var renderPrint = function () { return l10n.toolbar.print; };\n    var renderGoToFirstPage = function () { return l10n.toolbar.goToFirstPage; };\n    var renderGoToLastPage = function () { return l10n.toolbar.goToLastPage; };\n    var renderRotateClockwise = function () { return l10n.toolbar.rotateForward; };\n    var renderRotateCounterclockwise = function () { return l10n.toolbar.rotateBackward; };\n    var renderTextSelection = function () { return l10n.toolbar.textSelectionTool; };\n    var renderHandTool = function () { return l10n.toolbar.handTool; };\n    var renderVerticalScrolling = function () { return l10n.toolbar.verticalScrolling; };\n    var renderHorizontalScrolling = function () { return l10n.toolbar.horizontalScrolling; };\n    var renderDocumentProperties = function () { return l10n.toolbar.documentProperties; };\n    var renderWrappedScrolling = function () { return l10n.toolbar.wrappedScrolling; };\n    var renderPropertyButton = function (toggle) { return (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: toggle },\n            React__default.createElement(InfoIcon, null)), content: renderDocumentProperties, offset: TOOLTIP_OFFSET$2 })); };\n    var renderPropertiesModal = function (toggle) { return (React__default.createElement(PropertiesModal, { doc: doc, fileName: fileName, onToggle: toggle })); };\n    return renderToolbar({\n        currentPage: currentPage,\n        currentPageInput: (React__default.createElement(\"input\", { className: theme.prefixClass + \"-toolbar-current-page-input\", type: \"text\", value: pageTextboxFocused ? (editingPage + 1) : (currentPage + 1), onChange: changePage, onFocus: focusPageTextbox, onBlur: blurPageTextbox, onKeyDown: keydownPage })),\n        documentPropertiesButton: (React__default.createElement(Modal, { target: renderPropertyButton, content: renderPropertiesModal, closeOnClickOutside: true, closeOnEscape: true })),\n        downloadButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: onDownload },\n                React__default.createElement(DownloadIcon, null)), content: renderDownload, offset: TOOLTIP_OFFSET$2 })),\n        fullScreenButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: onFullScreen },\n                React__default.createElement(FullScreenIcon, null)), content: renderFullScreen, offset: TOOLTIP_OFFSET$2 })),\n        goToFirstPageButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: jumpToFirstPage },\n                React__default.createElement(UpArrowIcon, null)), content: renderGoToFirstPage, offset: TOOLTIP_OFFSET$2 })),\n        goToLastPageButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: jumpToLastPage },\n                React__default.createElement(DownArrowIcon, null)), content: renderGoToLastPage, offset: TOOLTIP_OFFSET$2 })),\n        handToolButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: activateHandMode, isSelected: selectionMode === SelectionMode$1.Hand },\n                React__default.createElement(HandToolIcon, null)), content: renderHandTool, offset: TOOLTIP_OFFSET$2 })),\n        horizontalScrollingButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: setHorizontalScrollMode, isSelected: scrollMode === ScrollMode$1.Horizontal },\n                React__default.createElement(HorizontalScrollingIcon, null)), content: renderHorizontalScrolling, offset: TOOLTIP_OFFSET$2 })),\n        moreActionsPopover: (React__default.createElement(MoreActionsPopover, { doc: doc, fileName: fileName, scrollMode: scrollMode, selectionMode: selectionMode, onChangeScrollMode: onChangeScrollMode, onChangeSelectionMode: onChangeSelectionMode, onJumpToFirstPage: jumpToFirstPage, onJumpToLastPage: jumpToLastPage, onRotate: onRotate })),\n        nextPageButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: gotoNextPage },\n                React__default.createElement(NextIcon, null)), content: renderNextPage, offset: TOOLTIP_OFFSET$2 })),\n        numPages: numPages,\n        openFileButton: (React__default.createElement(OpenFileButton, { onOpenFiles: onOpenFiles })),\n        previousPageButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: gotoPreviousPage },\n                React__default.createElement(PreviousIcon, null)), content: renderPreviousPage, offset: TOOLTIP_OFFSET$2 })),\n        printButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: onPrint },\n                React__default.createElement(PrintIcon, null)), content: renderPrint, offset: TOOLTIP_OFFSET$2 })),\n        rotateClockwiseButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: rotateForward },\n                React__default.createElement(RotateForwardIcon, null)), content: renderRotateClockwise, offset: TOOLTIP_OFFSET$2 })),\n        rotateCounterclockwiseButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: rotateBackward },\n                React__default.createElement(RotateBackwardIcon, null)), content: renderRotateCounterclockwise, offset: TOOLTIP_OFFSET$2 })),\n        searchPopover: (React__default.createElement(SearchPopover, { doc: doc, onJumpToMatch: onJumpToMatch, onSearchFor: onSearchFor })),\n        textSelectionButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: activateTextSelectionMode, isSelected: selectionMode === SelectionMode$1.Text },\n                React__default.createElement(TextSelectionIcon, null)), content: renderTextSelection, offset: TOOLTIP_OFFSET$2 })),\n        toggleSidebarButton: (React__default.createElement(Tooltip, { position: Position$1.BottomLeft, target: (React__default.createElement(Button, { onClick: toggleSidebar, isSelected: isSidebarOpened },\n                React__default.createElement(LeftSidebarIcon, null))), content: renderToggle, offset: TOOLTIP_OFFSET$2 })),\n        verticalScrollingButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: setVerticalScrollMode, isSelected: scrollMode === ScrollMode$1.Vertical },\n                React__default.createElement(VerticalScrollingIcon, null)), content: renderVerticalScrolling, offset: TOOLTIP_OFFSET$2 })),\n        zoomInButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: zoomIn },\n                React__default.createElement(ZoomInIcon, null)), content: renderZoomIn, offset: TOOLTIP_OFFSET$2 })),\n        zoomOutButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: zoomOut },\n                React__default.createElement(ZoomOutIcon, null)), content: renderZoomOut, offset: TOOLTIP_OFFSET$2 })),\n        zoomPopover: (React__default.createElement(ZoomPopover, { scale: scale, onZoom: onZoom })),\n        wrappedScrollingButton: (React__default.createElement(Tooltip, { position: Position$1.BottomCenter, target: React__default.createElement(Button, { onClick: setWrappedScrollMode, isSelected: scrollMode === ScrollMode$1.Wrapped },\n                React__default.createElement(WrappedScrollingIcon, null)), content: renderWrappedScrolling, offset: TOOLTIP_OFFSET$2 })),\n    });\n};\n\nvar EMPTY_KEYWORD_REGEXP$1 = new RegExp(' ');\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar Inner = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, file = _a.file, initialPage = _a.initialPage, keyword = _a.keyword, layout = _a.layout, pageSize = _a.pageSize, render = _a.render, renderPage = _a.renderPage, selectionMode = _a.selectionMode, onCanvasLayerRender = _a.onCanvasLayerRender, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onTextLayerRender = _a.onTextLayerRender, onZoom = _a.onZoom;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.useRef(null);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState(pageSize.scale), scale = _b[0], setScale = _b[1];\n    var _c = React.useState(0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React.useState(0), rotation = _d[0], setRotation = _d[1];\n    var _e = React.useState(keyword\n        ? ((typeof keyword === 'string') ? new RegExp(keyword) : keyword)\n        : EMPTY_KEYWORD_REGEXP$1), keywordRegexp = _e[0], setKeywordRegexp = _e[1];\n    var _f = React.useState({\n        matchIndex: -1,\n        pageIndex: -1,\n    }), match = _f[0], setMatch = _f[1];\n    var _g = React.useState(ScrollMode$1.Vertical), scrollMode = _g[0], setScrollMode = _g[1];\n    var _h = React.useState(selectionMode), currentMode = _h[0], setCurrentMode = _h[1];\n    var toggleDragScroll = useDragScroll(pagesRef).toggleDragScroll;\n    var _j = useFullScreen(pagesRef), isFullScreen = _j.isFullScreen, openFullScreen = _j.openFullScreen, closeFullScreen = _j.closeFullScreen;\n    var toggleSidebar = useToggle();\n    var numPages = doc.numPages;\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var arr = Array(numPages).fill(null);\n    var pageVisibility = arr.map(function () { return 0; });\n    var pageRefs = arr.map(function () { return React.useRef(); });\n    var openFiles = function (files) {\n        if (files.length === 0) {\n            return;\n        }\n        var selectedFile = files[0];\n        if (getFileExt(selectedFile.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(selectedFile);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(selectedFile.name, data);\n        });\n    };\n    var isDragging = useDrop(containerRef, function (files) { return openFiles(files); }).isDragging;\n    var _k = React.useState(PrintStatus$1.Inactive), printStatus = _k[0], setPrintStatus = _k[1];\n    var jumpToPage = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return;\n        }\n        setCurrentPage(pageIndex);\n        var pagesContainer = pagesRef.current;\n        var targetPage = pageRefs[pageIndex].current;\n        if (pagesContainer && targetPage) {\n            pagesContainer.scrollTop = targetPage.offsetTop;\n        }\n    };\n    React.useEffect(function () {\n        onDocumentLoad({ doc: doc });\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, []);\n    React.useEffect(function () {\n        onPageChange({ currentPage: currentPage, doc: doc });\n    }, [currentPage]);\n    var changeSelectionMode = function (mode) {\n        toggleDragScroll(mode === SelectionMode$1.Hand);\n        setCurrentMode(mode);\n    };\n    var download = function () {\n        downloadFile(file.name, file.data);\n    };\n    var zoom = function (newScale) {\n        var pagesEle = pagesRef.current;\n        if (!pagesEle) {\n            return;\n        }\n        var scaled = 1;\n        switch (newScale) {\n            case SpecialZoomLevel$1.ActualSize:\n                scaled = 1;\n                break;\n            case SpecialZoomLevel$1.PageFit:\n                scaled = Math.min((pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.offsetHeight - 2 * PAGE_PADDING) / pageHeight);\n                break;\n            case SpecialZoomLevel$1.PageWidth:\n                scaled = (pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth;\n                break;\n            default:\n                scaled = newScale;\n                break;\n        }\n        setScale(scaled);\n        onZoom({ doc: doc, scale: scaled });\n    };\n    React.useEffect(function () {\n        if (selectionMode === SelectionMode$1.Hand) {\n            toggleDragScroll(true);\n        }\n        if (defaultScale) {\n            zoom(defaultScale);\n        }\n    }, []);\n    var pageVisibilityChanged = function (pageIndex, ratio) {\n        pageVisibility[pageIndex] = ratio;\n        var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n            return item > array[maxIndex] ? index : maxIndex;\n        }, 0);\n        setCurrentPage(maxRatioPage);\n    };\n    var rotate = function (degree) {\n        var updateRotation = (rotation === 360 || rotation === -360) ? degree : rotation + degree;\n        setRotation(updateRotation);\n    };\n    var changeScrollMode = function (mode) {\n        var pagesContainer = pagesRef.current;\n        if (!pagesContainer) {\n            return;\n        }\n        switch (mode) {\n            case ScrollMode$1.Vertical:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n                break;\n            case ScrollMode$1.Horizontal:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-horizontal\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n                break;\n            case ScrollMode$1.Wrapped:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-wrapped\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n                break;\n        }\n        setScrollMode(mode);\n    };\n    var jumpToMatch = function (target) {\n        jumpToPage(target.pageIndex);\n        setMatch(target);\n    };\n    var jumpToDest = function (pageIndex, bottomOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        if (!pagesContainer) {\n            return;\n        }\n        var newPageIndex = pageIndex + 1;\n        doc.getPage(newPageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = bottomOffset || 0;\n            switch (scaleTo) {\n                case SpecialZoomLevel$1.PageFit:\n                    top = 0;\n                    zoom(SpecialZoomLevel$1.PageFit);\n                    break;\n                default:\n                    top = (viewport.height - bottom) * scale;\n                    break;\n            }\n            var targetPageEle = pageRefs[pageIndex].current;\n            if (targetPageEle) {\n                pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n            }\n        });\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                (nextPage < numPages) && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                (previousPage >= 0) && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var print = function () { return setPrintStatus(PrintStatus$1.Preparing); };\n    var cancelPrinting = function () { return setPrintStatus(PrintStatus$1.Inactive); };\n    var startPrinting = function () { return setPrintStatus(PrintStatus$1.Ready); };\n    return render({\n        viewer: layout(toggleSidebar.opened, {\n            attrs: {\n                ref: containerRef,\n                style: {\n                    position: 'relative',\n                }\n            },\n            children: (React__default.createElement(React__default.Fragment, null,\n                React__default.createElement(PrintContainer, { doc: doc, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onStartPrinting: startPrinting }),\n                isDragging && React__default.createElement(DropArea, null)))\n        }, {\n            attrs: {\n                ref: pagesRef,\n                style: {\n                    position: 'relative',\n                }\n            },\n            children: (React__default.createElement(React__default.Fragment, null,\n                isFullScreen && React__default.createElement(ExitFullScreen, { onClick: closeFullScreen }),\n                Array(numPages).fill(0).map(function (_, index) {\n                    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-inner-page\", key: \"pagelayer-\" + index, ref: function (ref) {\n                            pageRefs[index].current = ref;\n                        } },\n                        React__default.createElement(PageLayer, { doc: doc, keywordRegexp: keywordRegexp, height: pageHeight, match: match, pageIndex: index, renderPage: renderPage, rotation: rotation, scale: scale, width: pageWidth, onCanvasLayerRender: onCanvasLayerRender, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDest, onPageVisibilityChanged: pageVisibilityChanged, onTextLayerRender: onTextLayerRender })));\n                }))),\n        }, function (renderToolbar) { return (React__default.createElement(Toolbar, { currentPage: currentPage, doc: doc, fileName: file.name, scale: scale, scrollMode: scrollMode, selectionMode: currentMode, onChangeScrollMode: changeScrollMode, onChangeSelectionMode: changeSelectionMode, onDownload: download, onFullScreen: openFullScreen, onJumpTo: jumpToPage, onJumpToMatch: jumpToMatch, onOpenFiles: openFiles, onPrint: print, onRotate: rotate, onSearchFor: setKeywordRegexp, onToggleSidebar: toggleSidebar.toggle, onZoom: zoom, renderToolbar: renderToolbar })); }, {\n            attrs: {},\n            children: (React__default.createElement(Sidebar, { currentPage: currentPage, doc: doc, height: pageHeight, rotation: rotation, width: pageWidth, onJumpToDest: jumpToDest, onJumpToPage: jumpToPage })),\n        }),\n        doc: doc,\n        download: download,\n        changeScrollMode: changeScrollMode,\n        changeSelectionMode: changeSelectionMode,\n        jumpToPage: jumpToPage,\n        print: print,\n        rotate: rotate,\n        zoom: zoom,\n    });\n};\n\nvar PageSizeCalculator = function (_a) {\n    var doc = _a.doc, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React.useEffect(function () {\n        doc.getPage(1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var scaled = pagesEle.offsetWidth / w;\n            var scale = decrease(Math.max(1, scaled));\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return (pageWidth === 0\n        ? (React__default.createElement(\"div\", { className: theme.prefixClass + \"-page-size-calculator\", ref: pagesRef },\n            React__default.createElement(Spinner, null)))\n        : render(pageSize));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React__default.createElement(\"div\", null,\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.askingPassword.requirePasswordToOpen,\n                \":\"),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React__default.createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React__default.createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar WrongPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React__default.createElement(\"div\", null,\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.wrongPassword.tryAgain,\n                \":\"),\n            React__default.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React__default.createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React__default.createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.wrongPassword.submit)))));\n};\n\nvar WrongPasswordState = (function (_super) {\n    __extends(WrongPasswordState, _super);\n    function WrongPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return WrongPasswordState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var characterMap = _a.characterMap, file = _a.file, render = _a.render, renderError = _a.renderError;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    React.useEffect(function () {\n        setStatus(new LoadingState(0));\n        var params = Object.assign({}, ('string' === typeof file) ? { url: file } : { data: file }, characterMap ? { cMapUrl: characterMap.url, cMapPacked: characterMap.isCompressed } : {});\n        var loadingTask = PdfJs.getDocument(params);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJs.PasswordResponses.NEED_PASSWORD:\n                    setStatus(new AskForPasswordState(verifyPassword));\n                    break;\n                case PdfJs.PasswordResponses.INCORRECT_PASSWORD:\n                    setStatus(new WrongPasswordState(verifyPassword));\n                    break;\n            }\n        };\n        loadingTask.promise.then(function (doc) { return setStatus(new CompletedState(doc)); }, function (err) { return setStatus(new FailureState({\n            message: err.message || 'Cannot load document',\n            name: err.name,\n        })); });\n        return function () {\n            loadingTask.destroy();\n        };\n    }, [file]);\n    switch (true) {\n        case (status instanceof AskForPasswordState):\n            return React__default.createElement(AskingPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof WrongPasswordState):\n            return React__default.createElement(WrongPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof CompletedState):\n            return render(status.doc);\n        case (status instanceof FailureState):\n            return renderError\n                ? renderError(status.error)\n                : (React__default.createElement(\"div\", { className: theme.prefixClass + \"-doc-error\" },\n                    React__default.createElement(\"div\", { className: theme.prefixClass + \"-doc-error-text\" }, status.error.message)));\n        case (status instanceof LoadingState):\n        default:\n            return (React__default.createElement(\"div\", { className: theme.prefixClass + \"-doc-loading\" },\n                React__default.createElement(Spinner, null)));\n    }\n};\n\nvar askingPassword = {\n\trequirePasswordToOpen: \"This document requires a password to open\",\n\tsubmit: \"Submit\"\n};\nvar attachment = {\n\tclickToDownload: \"Click to download\",\n\tnoAttachment: \"There is no attachment\"\n};\nvar bookmark = {\n\tnoBookmark: \"There is no bookmark\"\n};\nvar main = {\n\tdragDropFile: \"Drag and drop a PDF document here\"\n};\nvar printProgress = {\n\tcancel: \"Cancel\",\n\tpreparingDocument: \"Preparing document ...\"\n};\nvar property = {\n\tauthor: \"Author\",\n\tclose: \"Close\",\n\tcreationDate: \"Creation date\",\n\tcreator: \"Creator\",\n\tfileName: \"File name\",\n\tfileSize: \"File size\",\n\tkeywords: \"Keywords\",\n\tmodificationDate: \"Modification date\",\n\tpageCount: \"Page count\",\n\tpdfProducer: \"PDF producer\",\n\tpdfVersion: \"PDF Version\",\n\tsubject: \"Subject\",\n\ttitle: \"Title\"\n};\nvar search = {\n\tclose: \"Close\",\n\tenterToSearch: \"Enter to search\",\n\tmatchCase: \"Match case\",\n\tnextMatch: \"Next match\",\n\tpreviousMatch: \"Previous match\",\n\twholeWords: \"Whole words\"\n};\nvar sidebar = {\n\tattachment: \"Attachment\",\n\tbookmark: \"Bookmark\",\n\tthumbnail: \"Thumbnail\"\n};\nvar toolbar = {\n\tdocumentProperties: \"Document properties\",\n\tdownload: \"Download\",\n\tfullScreen: \"Full screen\",\n\tgoToFirstPage: \"Go to first page\",\n\tgoToLastPage: \"Go to last page\",\n\thandTool: \"Hand tool\",\n\thorizontalScrolling: \"Horizontal scrolling\",\n\tmoreActions: \"More actions\",\n\tnextPage: \"Next page\",\n\topenFile: \"Open file\",\n\tpreviousPage: \"Previous page\",\n\tprint: \"Print\",\n\trotateBackward: \"Rotate counterclockwise\",\n\trotateForward: \"Rotate clockwise\",\n\tsearch: \"Search\",\n\ttextSelectionTool: \"Text selection tool\",\n\ttoggleSidebar: \"Toggle sidebar\",\n\tverticalScrolling: \"Vertical scrolling\",\n\tzoomIn: \"Zoom in\",\n\tzoomOut: \"Zoom out\",\n\twrappedScrolling: \"Wrapped scrolling\"\n};\nvar wrongPassword = {\n\tsubmit: \"Submit\",\n\ttryAgain: \"The password is wrong. Please try again\"\n};\nvar zoom = {\n\tactualSize: \"Actual size\",\n\tpageFit: \"Page fit\",\n\tpageWidth: \"Page width\"\n};\nvar enUs = {\n\taskingPassword: askingPassword,\n\tattachment: attachment,\n\tbookmark: bookmark,\n\tmain: main,\n\tprintProgress: printProgress,\n\tproperty: property,\n\tsearch: search,\n\tsidebar: sidebar,\n\ttoolbar: toolbar,\n\twrongPassword: wrongPassword,\n\tzoom: zoom\n};\n\nvar LocalizationProvider = function (_a) {\n    var children = _a.children, localization = _a.localization;\n    var defaultL10n = enUs;\n    var l10n = localization || defaultL10n;\n    return (React__default.createElement(LocalizationContext.Provider, { value: l10n }, children));\n};\n\nvar ThemeProvider = function (_a) {\n    var children = _a.children, prefixClass = _a.prefixClass;\n    return (React__default.createElement(ThemeContext.Provider, { value: { prefixClass: prefixClass || 'viewer' } }, children));\n};\n\nvar Viewer = function (_a) {\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, initialPage = _a.initialPage, keyword = _a.keyword, layout = _a.layout, localization = _a.localization, prefixClass = _a.prefixClass, render = _a.render, renderError = _a.renderError, renderPage = _a.renderPage, _b = _a.selectionMode, selectionMode = _b === void 0 ? SelectionMode$1.Text : _b, _c = _a.onCanvasLayerRender, onCanvasLayerRender = _c === void 0 ? function () { } : _c, _d = _a.onDocumentLoad, onDocumentLoad = _d === void 0 ? function () { } : _d, _e = _a.onPageChange, onPageChange = _e === void 0 ? function () { } : _e, _f = _a.onTextLayerRender, onTextLayerRender = _f === void 0 ? function () { } : _f, _g = _a.onZoom, onZoom = _g === void 0 ? function () { } : _g;\n    var _h = React.useState({\n        data: fileUrl,\n        name: (typeof fileUrl === 'string') ? fileUrl : '',\n    }), file = _h[0], setFile = _h[1];\n    var layoutOption = function (isSidebarOpened, container, main, toolbar, sidebar) {\n        return defaultLayout(isSidebarOpened, container, main, toolbar(defaultToolbar), sidebar);\n    };\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n        });\n    };\n    var renderDoc = function (renderViewer) { return function (doc) {\n        var renderInner = function (ps) {\n            var pageSize = ps;\n            return (React__default.createElement(Inner, { defaultScale: defaultScale, doc: doc, file: file, initialPage: initialPage, keyword: keyword, layout: layout || layoutOption, pageSize: pageSize, render: renderViewer, renderPage: renderPage, selectionMode: selectionMode, onCanvasLayerRender: onCanvasLayerRender, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onTextLayerRender: onTextLayerRender, onZoom: onZoom }));\n        };\n        return (React__default.createElement(PageSizeCalculator, { doc: doc, render: renderInner }));\n    }; };\n    React.useEffect(function () {\n        setFile({\n            data: fileUrl,\n            name: (typeof fileUrl === 'string') ? fileUrl : '',\n        });\n    }, [fileUrl]);\n    var defaultRenderer = render || (function (props) { return props.viewer; });\n    return (React__default.createElement(ThemeProvider, { prefixClass: prefixClass },\n        React__default.createElement(LocalizationProvider, { localization: localization },\n            React__default.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, render: renderDoc(defaultRenderer), renderError: renderError }))));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJs.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__default.createElement(React__default.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.ScrollMode = ScrollMode$1;\nexports.SelectionMode = SelectionMode$1;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Worker = Worker;\nexports.default = Viewer;\nexports.defaultLayout = defaultLayout;\nexports.defaultToolbar = defaultToolbar;\n"]},"metadata":{},"sourceType":"script"}