var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import styled from '../../utils/styled';
import { setLabels, getPropLabel } from '../../utils/labels';
import { ItemControls } from './ItemControlsView.part';
import { PageControls } from './PageControls.part';
setLabels({
    itemsPerPageLabel: 'Items per page:',
});
function defaultItemsInfo(start, end, total) {
    return `${start} - ${end} of ${total}`;
}
function defaultPagesInfo(start, end) {
    return `${start} of ${end} pages`;
}
function getPages(itemsPerPage, total) {
    const l = Math.ceil(total / itemsPerPage);
    const pages = [];
    for (let i = 1; i <= l; i++) {
        pages.push(i.toString());
    }
    return pages;
}
const ControlsContainer = styled.div `
  display: flex;
  justify-content: space-between;
  margin-left: auto;
  align-items: center;
  height: 40px;
`;
export class PaginationBar extends React.Component {
    constructor() {
        super(...arguments);
        this.sizeChanged = (e) => {
            const { onSizeChanged, availableSizes } = this.props;
            if (Array.isArray(availableSizes) && typeof onSizeChanged === 'function') {
                onSizeChanged({
                    size: availableSizes[e.index],
                });
            }
        };
        this.changeToPrevious = () => {
            const { selectedPage } = this.props;
            this.changeTo(selectedPage - 1);
        };
        this.changeToNext = () => {
            const { selectedPage } = this.props;
            this.changeTo(selectedPage + 1);
        };
        this.changeToSelect = ({ index }) => {
            this.changeTo(index);
        };
    }
    changeTo(page) {
        const { onPageChanged } = this.props;
        if (page < 0) {
            page = 0;
        }
        if (typeof onPageChanged === 'function') {
            onPageChanged({
                page,
            });
        }
    }
    render() {
        const _a = this.props, { availableSizes, size, selectedPage, pagesInfo = defaultPagesInfo, itemsInfo = defaultItemsInfo, items, onSizeChanged, onPageChanged } = _a, props = __rest(_a, ["availableSizes", "size", "selectedPage", "pagesInfo", "itemsInfo", "items", "onSizeChanged", "onPageChanged"]);
        const pages = getPages(size, items);
        const currentItem = selectedPage * size;
        const nextItem = currentItem + size;
        return (React.createElement(ControlsContainer, null,
            Array.isArray(availableSizes) && availableSizes.length > 0 && (React.createElement(ItemControls, { label: getPropLabel(props, 'itemsPerPageLabel'), data: availableSizes.map(size => size.toString()), value: `${size}`, onChange: this.sizeChanged }, itemsInfo(currentItem, Math.min(nextItem, items), items))),
            React.createElement(PageControls, { current: selectedPage, total: pages.length, changeToPrevious: this.changeToPrevious, changeToNext: this.changeToNext, changeToSelect: this.changeToSelect, pages: pages }, pagesInfo(selectedPage + 1, Math.max(pages.length, 1)))));
    }
}
PaginationBar.inner = {
    get ControlsContainer() { return ControlsContainer; },
    get ItemControls() { return ItemControls; },
    get PageControls() { return PageControls; }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9QYWdpbmF0aW9uQmFyL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLE1BQU0sTUFBTSxvQkFBb0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBdUIsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRW5ELFNBQVMsQ0FBQztJQUNOLGlCQUFpQixFQUFFLGlCQUFpQjtDQUN2QyxDQUFDLENBQUM7QUFDSCxTQUFTLGdCQUFnQixDQUFDLEtBQWEsRUFBRSxHQUFXLEVBQUUsS0FBYTtJQUMvRCxPQUFPLEdBQUcsS0FBSyxNQUFNLEdBQUcsT0FBTyxLQUFLLEVBQUUsQ0FBQztBQUMzQyxDQUFDO0FBQ0QsU0FBUyxnQkFBZ0IsQ0FBQyxLQUFhLEVBQUUsR0FBVztJQUNoRCxPQUFPLEdBQUcsS0FBSyxPQUFPLEdBQUcsUUFBUSxDQUFDO0FBQ3RDLENBQUM7QUFDRCxTQUFTLFFBQVEsQ0FBQyxZQUFvQixFQUFFLEtBQWE7SUFDakQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLENBQUM7SUFDMUMsTUFBTSxLQUFLLEdBQWtCLEVBQUUsQ0FBQztJQUNoQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3pCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDNUI7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNqQixD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Z0IsRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLEVBQUUsS0FBSyxJQUNsTCxTQUFTLENBQUMsWUFBWSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDMUMsQ0FDRyxDQUFDLENBQUM7SUFDeEIsQ0FBQzs7QUFDTSxtQkFBSyxHQUFHO0lBQ1gsSUFBSSxpQkFBaUIsS0FBSyxPQUFPLGlCQUE2QyxDQUFDLENBQUMsQ0FBQztJQUNqRixJQUFJLFlBQVksS0FBSyxPQUFPLFlBQW1DLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLElBQUksWUFBWSxLQUFLLE9BQU8sWUFBbUMsQ0FBQyxDQUFDLENBQUM7Q0FDckUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnLi4vLi4vdXRpbHMvc3R5bGVkJztcbmltcG9ydCB7IHNldExhYmVscywgZ2V0UHJvcExhYmVsLCBQYWdpbmF0aW9uQmFyTGFiZWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvbGFiZWxzJztcbmltcG9ydCB7IEl0ZW1Db250cm9scyB9IGZyb20gJy4vSXRlbUNvbnRyb2xzVmlldy5wYXJ0JztcbmltcG9ydCB7IFBhZ2VDb250cm9scyB9IGZyb20gJy4vUGFnZUNvbnRyb2xzLnBhcnQnO1xuaW1wb3J0IHsgU2VsZWN0QnV0dG9uQ2hhbmdlRXZlbnQgfSBmcm9tICcuLi9TZWxlY3RCdXR0b24nO1xuc2V0TGFiZWxzKHtcbiAgICBpdGVtc1BlclBhZ2VMYWJlbDogJ0l0ZW1zIHBlciBwYWdlOicsXG59KTtcbmZ1bmN0aW9uIGRlZmF1bHRJdGVtc0luZm8oc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYCR7c3RhcnR9IC0gJHtlbmR9IG9mICR7dG90YWx9YDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRQYWdlc0luZm8oc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYCR7c3RhcnR9IG9mICR7ZW5kfSBwYWdlc2A7XG59XG5mdW5jdGlvbiBnZXRQYWdlcyhpdGVtc1BlclBhZ2U6IG51bWJlciwgdG90YWw6IG51bWJlcikge1xuICAgIGNvbnN0IGwgPSBNYXRoLmNlaWwodG90YWwgLyBpdGVtc1BlclBhZ2UpO1xuICAgIGNvbnN0IHBhZ2VzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbDsgaSsrKSB7XG4gICAgICAgIHBhZ2VzLnB1c2goaS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhZ2VzO1xufVxuY29uc3QgQ29udHJvbHNDb250YWluZXIgPSBzdHlsZWQuZGl2IGBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgaGVpZ2h0OiA0MHB4O1xuYDtcbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGlvbkJhclNpemVDaGFuZ2VkRXZlbnQge1xuICAgIHNpemU6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGlvbkJhclBhZ2VDaGFuZ2VkRXZlbnQge1xuICAgIHBhZ2U6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGlvbkJhclByb3BzIGV4dGVuZHMgUGFnaW5hdGlvbkJhckxhYmVscyB7XG4gICAgLyoqXG4gICAgICogVGhlIGF2YWlsYWJsZSBtYXhpbXVtIG51bWJlcnMgb2YgZW50cmllcyBwZXIgcGFnZSB0byBjaG9vc2UgZnJvbSwgaWYgYW55LlxuICAgICAqL1xuICAgIGF2YWlsYWJsZVNpemVzPzogQXJyYXk8bnVtYmVyPjtcbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBwYWdlLlxuICAgICAqL1xuICAgIHNlbGVjdGVkUGFnZTogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBlbnRyaWVzIHBlciBwYWdlLlxuICAgICAqL1xuICAgIHNpemU6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIGVudHJpZXMuXG4gICAgICovXG4gICAgaXRlbXM6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBQYWdlcyBpbmZvIGxhYmVsIGdlbmVyYXRvci5cbiAgICAgKiBAZGVmYXVsdCAne3N0YXJ0fSBvZiB7ZW5kfSBwYWdlcydcbiAgICAgKi9cbiAgICBwYWdlc0luZm8/KHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogUmVhY3QuUmVhY3RDaGlsZDtcbiAgICAvKipcbiAgICAgKiBJdGVtcyBpbmZvIGxhYmVsIGdlbmVyYXRvci5cbiAgICAgKiBAZGVmYXVsdCAne3N0YXJ0fSAtIHtlbmR9IG9mIHt0b3RhbH0nXG4gICAgICovXG4gICAgaXRlbXNJbmZvPyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgdG90YWw6IG51bWJlcik6IFJlYWN0LlJlYWN0Q2hpbGQ7XG4gICAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgc2l6ZSBwZXIgcGFnZSBoYXMgYmVlbiBjaGFuZ2VkLlxuICAgICAqL1xuICAgIG9uU2l6ZUNoYW5nZWQ/KGU6IFBhZ2luYXRpb25CYXJTaXplQ2hhbmdlZEV2ZW50KTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBzZWxlY3RlZCBwYWdlIGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICovXG4gICAgb25QYWdlQ2hhbmdlZD8oZTogUGFnaW5hdGlvbkJhclBhZ2VDaGFuZ2VkRXZlbnQpOiB2b2lkO1xufVxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25CYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UGFnaW5hdGlvbkJhclByb3BzPiB7XG4gICAgcHJpdmF0ZSBzaXplQ2hhbmdlZCA9IChlOiBTZWxlY3RCdXR0b25DaGFuZ2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uU2l6ZUNoYW5nZWQsIGF2YWlsYWJsZVNpemVzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdmFpbGFibGVTaXplcykgJiYgdHlwZW9mIG9uU2l6ZUNoYW5nZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uU2l6ZUNoYW5nZWQoe1xuICAgICAgICAgICAgICAgIHNpemU6IGF2YWlsYWJsZVNpemVzW2UuaW5kZXhdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByaXZhdGUgY2hhbmdlVG9QcmV2aW91cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RlZFBhZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuY2hhbmdlVG8oc2VsZWN0ZWRQYWdlIC0gMSk7XG4gICAgfTtcbiAgICBwcml2YXRlIGNoYW5nZVRvTmV4dCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RlZFBhZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuY2hhbmdlVG8oc2VsZWN0ZWRQYWdlICsgMSk7XG4gICAgfTtcbiAgICBwcml2YXRlIGNoYW5nZVRvU2VsZWN0ID0gKHsgaW5kZXggfTogU2VsZWN0QnV0dG9uQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jaGFuZ2VUbyhpbmRleCk7XG4gICAgfTtcbiAgICBwcml2YXRlIGNoYW5nZVRvKHBhZ2U6IG51bWJlcikge1xuICAgICAgICBjb25zdCB7IG9uUGFnZUNoYW5nZWQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChwYWdlIDwgMCkge1xuICAgICAgICAgICAgcGFnZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvblBhZ2VDaGFuZ2VkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblBhZ2VDaGFuZ2VkKHtcbiAgICAgICAgICAgICAgICBwYWdlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGF2YWlsYWJsZVNpemVzLCBzaXplLCBzZWxlY3RlZFBhZ2UsIHBhZ2VzSW5mbyA9IGRlZmF1bHRQYWdlc0luZm8sIGl0ZW1zSW5mbyA9IGRlZmF1bHRJdGVtc0luZm8sIGl0ZW1zLCBvblNpemVDaGFuZ2VkLCBvblBhZ2VDaGFuZ2VkLCAuLi5wcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgcGFnZXMgPSBnZXRQYWdlcyhzaXplLCBpdGVtcyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gc2VsZWN0ZWRQYWdlICogc2l6ZTtcbiAgICAgICAgY29uc3QgbmV4dEl0ZW0gPSBjdXJyZW50SXRlbSArIHNpemU7XG4gICAgICAgIHJldHVybiAoPENvbnRyb2xzQ29udGFpbmVyPlxuICAgICAgICB7QXJyYXkuaXNBcnJheShhdmFpbGFibGVTaXplcykgJiYgYXZhaWxhYmxlU2l6ZXMubGVuZ3RoID4gMCAmJiAoPEl0ZW1Db250cm9scyBsYWJlbD17Z2V0UHJvcExhYmVsKHByb3BzLCAnaXRlbXNQZXJQYWdlTGFiZWwnKX0gZGF0YT17YXZhaWxhYmxlU2l6ZXMubWFwKHNpemUgPT4gc2l6ZS50b1N0cmluZygpKX0gdmFsdWU9e2Ake3NpemV9YH0gb25DaGFuZ2U9e3RoaXMuc2l6ZUNoYW5nZWR9PlxuICAgICAgICAgICAge2l0ZW1zSW5mbyhjdXJyZW50SXRlbSwgTWF0aC5taW4obmV4dEl0ZW0sIGl0ZW1zKSwgaXRlbXMpfVxuICAgICAgICAgIDwvSXRlbUNvbnRyb2xzPil9XG4gICAgICAgIDxQYWdlQ29udHJvbHMgY3VycmVudD17c2VsZWN0ZWRQYWdlfSB0b3RhbD17cGFnZXMubGVuZ3RofSBjaGFuZ2VUb1ByZXZpb3VzPXt0aGlzLmNoYW5nZVRvUHJldmlvdXN9IGNoYW5nZVRvTmV4dD17dGhpcy5jaGFuZ2VUb05leHR9IGNoYW5nZVRvU2VsZWN0PXt0aGlzLmNoYW5nZVRvU2VsZWN0fSBwYWdlcz17cGFnZXN9PlxuICAgICAgICAgIHtwYWdlc0luZm8oc2VsZWN0ZWRQYWdlICsgMSwgTWF0aC5tYXgocGFnZXMubGVuZ3RoLCAxKSl9XG4gICAgICAgIDwvUGFnZUNvbnRyb2xzPlxuICAgICAgPC9Db250cm9sc0NvbnRhaW5lcj4pO1xuICAgIH1cbiAgICBzdGF0aWMgaW5uZXIgPSB7XG4gICAgICAgIGdldCBDb250cm9sc0NvbnRhaW5lcigpIHsgcmV0dXJuIENvbnRyb2xzQ29udGFpbmVyIGFzIHR5cGVvZiBDb250cm9sc0NvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IEl0ZW1Db250cm9scygpIHsgcmV0dXJuIEl0ZW1Db250cm9scyBhcyB0eXBlb2YgSXRlbUNvbnRyb2xzOyB9LFxuICAgICAgICBnZXQgUGFnZUNvbnRyb2xzKCkgeyByZXR1cm4gUGFnZUNvbnRyb2xzIGFzIHR5cGVvZiBQYWdlQ29udHJvbHM7IH1cbiAgICB9O1xufVxuIl19