var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import styled, { keyframes } from '../../utils/styled';
import { distance } from '../../distance';
import { remCalc } from '../../utils/remCalc';
import { Notification } from '../Notification';
const animationDuration = 200; // ms
const offsetDistance = 32;
function sideMultiplier(position) {
    switch (position) {
        case 'bottom-left':
        case 'top-left':
            return -1;
        case 'top-right':
        case 'bottom-right':
            return 1;
        default:
            return 0;
    }
}
const InAnimation = (startOffset) => keyframes `
  from {
    opacity: 0;
    transform: translate(${startOffset}px);
  }
  to {
    opacity: 1;
    transform: translate(0px);
  }
`;
const OutAnimation = (endOffset) => keyframes `
  from {
    opacity: 1;
    transform: translate(0px);
  }
  to {
    opacity: 0;
    transform: translate(${endOffset}px);
  }
`;
const StyledNotification = styled(Notification) `
  opacity: 0;
  animation: ${props => props.closing
    ? OutAnimation(sideMultiplier(props.position) * offsetDistance)
    : InAnimation(sideMultiplier(props.position) * offsetDistance)}
    ${animationDuration / 1000}s ease-in-out forwards;
`;
export class ToastNotification extends React.Component {
    constructor(props) {
        super(props);
        this.onCloseHandler = () => {
            this.close();
            return false;
        };
        this.close = () => {
            const { onClose } = this.props;
            this.setState({ closing: true }, () => {
                this.closeId = setTimeout(() => {
                    if (typeof onClose === 'function') {
                        onClose();
                    }
                }, animationDuration);
            });
        };
        this.state = {
            closing: false,
        };
    }
    UNSAFE_componentWillMount() {
        const { autoClose } = this.props;
        if (autoClose) {
            this.autoCloseId = setTimeout(this.close, autoClose);
        }
    }
    componentWillUnmount() {
        if (this.closeId) {
            clearTimeout(this.closeId);
        }
        if (this.autoCloseId) {
            clearTimeout(this.autoCloseId);
        }
    }
    render() {
        const { closing } = this.state;
        const _a = this.props, { autoClose: _0, events: _1, id: _2, onClose: _4, position } = _a, other = __rest(_a, ["autoClose", "events", "id", "onClose", "position"]);
        const toastTheme = {
            notificationPadding: `${distance.small} ${distance.small} ${distance.medium}`,
            notificationBorderWidth: `0 0 0 5px`,
            notificationTextFontSize: remCalc('12px'),
            notificationTextLineHeight: `14px`,
            notificationIconMarginRight: distance.small,
        };
        return (React.createElement(StyledNotification, Object.assign({ position: position, closing: closing, theme: toastTheme, onClose: this.onCloseHandler }, other)));
    }
}
ToastNotification.inner = {
    get StyledNotification() { return StyledNotification; }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9hc3ROb3RpZmljYXRpb24ucGFydC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL05vdGlmaWNhdGlvbnMvVG9hc3ROb3RpZmljYXRpb24ucGFydC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDL0IsT0FBTyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxZQUFZLEVBQXFCLE1BQU0saUJBQWlCLENBQUM7QUFNbEUsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLO0FBQ3BDLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUMxQixTQUFTLGNBQWMsQ0FBQyxRQUFnQztJQUNwRCxRQUFRLFFBQVEsRUFBRTtRQUNkLEtBQUssYUFBYSxDQUFDO1FBQ25CLEtBQUssVUFBVTtZQUNYLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDZCxLQUFLLFdBQVcsQ0FBQztRQUNqQixLQUFLLGNBQWM7WUFDZixPQUFPLENBQUMsQ0FBQztRQUNiO1lBQ0ksT0FBTyxDQUFDLENBQUM7S0FDaEI7QUFDTCxDQUFDO0FBQ0QsTUFBTSxXQUFXLEdBQUcsQ0FBQyxXQUFtQixFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUM7OzsyQkFHNUIsV0FBVzs7Ozs7O0NBTXJDLENBQUM7QUFDRixNQUFNLFlBQVksR0FBRyxDQUFDLFNBQWlCLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQzs7Ozs7OzsyQkFPM0IsU0FBUzs7Q0FFbkMsQ0FBQztBQUtGLE1BQU0sa0JBQWtCLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUEwQjs7ZUFF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cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyBrZXlmcmFtZXMgfSBmcm9tICcuLi8uLi91dGlscy9zdHlsZWQnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyByZW1DYWxjIH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVtQ2FsYyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb24sIE5vdGlmaWNhdGlvblByb3BzIH0gZnJvbSAnLi4vTm90aWZpY2F0aW9uJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvbk9wdGlvbiwgTm90aWZpY2F0aW9uc1Bvc2l0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgdHlwZSBUb2FzdE5vdGlmaWNhdGlvblByb3BzID0gTm90aWZpY2F0aW9uT3B0aW9uICYgTm90aWZpY2F0aW9uUHJvcHM7XG5leHBvcnQgaW50ZXJmYWNlIFRvYXN0Tm90aWZpY2F0aW9uU3RhdGUge1xuICAgIGNsb3Npbmc6IGJvb2xlYW47XG59XG5jb25zdCBhbmltYXRpb25EdXJhdGlvbiA9IDIwMDsgLy8gbXNcbmNvbnN0IG9mZnNldERpc3RhbmNlID0gMzI7XG5mdW5jdGlvbiBzaWRlTXVsdGlwbGllcihwb3NpdGlvbj86IE5vdGlmaWNhdGlvbnNQb3NpdGlvbikge1xuICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgY2FzZSAnYm90dG9tLWxlZnQnOlxuICAgICAgICBjYXNlICd0b3AtbGVmdCc6XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGNhc2UgJ3RvcC1yaWdodCc6XG4gICAgICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbmNvbnN0IEluQW5pbWF0aW9uID0gKHN0YXJ0T2Zmc2V0OiBudW1iZXIpID0+IGtleWZyYW1lcyBgXG4gIGZyb20ge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHtzdGFydE9mZnNldH1weCk7XG4gIH1cbiAgdG8ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMHB4KTtcbiAgfVxuYDtcbmNvbnN0IE91dEFuaW1hdGlvbiA9IChlbmRPZmZzZXQ6IG51bWJlcikgPT4ga2V5ZnJhbWVzIGBcbiAgZnJvbSB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwcHgpO1xuICB9XG4gIHRvIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7ZW5kT2Zmc2V0fXB4KTtcbiAgfVxuYDtcbmludGVyZmFjZSBTdHlsZWROb3RpZmljYXRpb25Qcm9wcyB7XG4gICAgY2xvc2luZzogYm9vbGVhbjtcbiAgICBwb3NpdGlvbj86IE5vdGlmaWNhdGlvbnNQb3NpdGlvbjtcbn1cbmNvbnN0IFN0eWxlZE5vdGlmaWNhdGlvbiA9IHN0eWxlZChOb3RpZmljYXRpb24pPFN0eWxlZE5vdGlmaWNhdGlvblByb3BzPiBgXG4gIG9wYWNpdHk6IDA7XG4gIGFuaW1hdGlvbjogJHtwcm9wcyA9PiBwcm9wcy5jbG9zaW5nXG4gICAgPyBPdXRBbmltYXRpb24oc2lkZU11bHRpcGxpZXIocHJvcHMucG9zaXRpb24pICogb2Zmc2V0RGlzdGFuY2UpXG4gICAgOiBJbkFuaW1hdGlvbihzaWRlTXVsdGlwbGllcihwcm9wcy5wb3NpdGlvbikgKiBvZmZzZXREaXN0YW5jZSl9XG4gICAgJHthbmltYXRpb25EdXJhdGlvbiAvIDEwMDB9cyBlYXNlLWluLW91dCBmb3J3YXJkcztcbmA7XG5leHBvcnQgY2xhc3MgVG9hc3ROb3RpZmljYXRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8VG9hc3ROb3RpZmljYXRpb25Qcm9wcywgVG9hc3ROb3RpZmljYXRpb25TdGF0ZT4ge1xuICAgIHByaXZhdGUgYXV0b0Nsb3NlSWQ6IGFueTtcbiAgICBwcml2YXRlIGNsb3NlSWQ6IGFueTtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogVG9hc3ROb3RpZmljYXRpb25Qcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjbG9zaW5nOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgY29uc3QgeyBhdXRvQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChhdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b0Nsb3NlSWQgPSBzZXRUaW1lb3V0KHRoaXMuY2xvc2UsIGF1dG9DbG9zZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlSWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZUlkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5hdXRvQ2xvc2VJZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBvbkNsb3NlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBwcml2YXRlIGNsb3NlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjbG9zaW5nOiB0cnVlIH0sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgYW5pbWF0aW9uRHVyYXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjbG9zaW5nIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCB7IGF1dG9DbG9zZTogXzAsIGV2ZW50czogXzEsIGlkOiBfMiwgb25DbG9zZTogXzQsIHBvc2l0aW9uLCAuLi5vdGhlciB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgdG9hc3RUaGVtZSA9IHtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblBhZGRpbmc6IGAke2Rpc3RhbmNlLnNtYWxsfSAke2Rpc3RhbmNlLnNtYWxsfSAke2Rpc3RhbmNlLm1lZGl1bX1gLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uQm9yZGVyV2lkdGg6IGAwIDAgMCA1cHhgLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uVGV4dEZvbnRTaXplOiByZW1DYWxjKCcxMnB4JyksXG4gICAgICAgICAgICBub3RpZmljYXRpb25UZXh0TGluZUhlaWdodDogYDE0cHhgLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uSWNvbk1hcmdpblJpZ2h0OiBkaXN0YW5jZS5zbWFsbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICg8U3R5bGVkTm90aWZpY2F0aW9uIHBvc2l0aW9uPXtwb3NpdGlvbn0gY2xvc2luZz17Y2xvc2luZ30gdGhlbWU9e3RvYXN0VGhlbWV9IG9uQ2xvc2U9e3RoaXMub25DbG9zZUhhbmRsZXJ9IHsuLi5vdGhlcn0vPik7XG4gICAgfVxuICAgIHN0YXRpYyBpbm5lciA9IHtcbiAgICAgICAgZ2V0IFN0eWxlZE5vdGlmaWNhdGlvbigpIHsgcmV0dXJuIFN0eWxlZE5vdGlmaWNhdGlvbiBhcyB0eXBlb2YgU3R5bGVkTm90aWZpY2F0aW9uOyB9XG4gICAgfTtcbn1cbiJdfQ==