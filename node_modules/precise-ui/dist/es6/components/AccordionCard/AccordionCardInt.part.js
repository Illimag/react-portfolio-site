var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import styled, { themed, css } from '../../utils/styled';
import { distance } from '../../distance';
import { setLabels, getPropLabel } from '../../utils/labels';
import { getFontStyle } from '../../textStyles';
setLabels({
    openLabel: 'Open Details',
    closeLabel: 'Close Details',
});
const animationDuration = '0.3s';
const animationFunction = 'cubic-bezier(0, 0, 0.25, 1)';
const StyledContainer = styled('div')(themed(({ open, theme: { accordionCard: { borderColor, openedBorderColor }, text1, }, }) => `
    ${getFontStyle({ size: 'medium' })}
    
    position: relative;
    color: ${text1};
    border: 1px solid ${open ? openedBorderColor : borderColor};
  `));
const StyledHeaderContainer = styled('div')(themed(({ open, theme: { accordionCard: { headerPadding, openedHeaderBorderColor, openedHeaderBackground, headerBackground }, }, }) => `
      padding: ${headerPadding};
      background: ${open ? openedHeaderBackground : headerBackground};
      border-bottom: ${open ? `1px solid ${openedHeaderBorderColor}` : 'none'};
    `));
export const StyledActionContainer = styled.div(themed(({ open, theme: { ui0, ui1 } }) => css `
      text-align: center;
      padding: ${distance.small} ${distance.medium};
      cursor: pointer;
      background: ${open ? ui1 : ui0};
      border: ${open ? `1px solid ${ui0}` : 'none'};
      margin: -1px -1px -1px -1px;
      color: ${open ? ui0 : ui1};
    `));
const StyledDetailsContainerAnimator = styled('div') `
  transition: all ${animationDuration} ${animationFunction};
  max-height: ${({ open }) => (open ? '10000px' : '0')};
  opacity: ${({ open }) => (open ? '1' : '0')};
  overflow: hidden;
`;
export class AccordionCard extends React.Component {
    constructor(props) {
        super(props);
        this.handleClick = () => {
            const { onActionClick } = this.props;
            const { opened, controlled } = this.state;
            !controlled && this.setState({ opened: !opened });
            if (typeof onActionClick === 'function') {
                onActionClick({ opened: controlled ? opened : !opened });
            }
        };
        this.renderDefaultAction = (_) => {
            const { theme } = this.props;
            const { opened } = this.state;
            return (React.createElement(StyledActionContainer, { theme: theme, onClick: this.handleClick, open: opened }, getPropLabel(this.props, opened ? 'closeLabel' : 'openLabel')));
        };
        this.state = {
            opened: props.opened !== undefined ? props.opened : false,
            controlled: props.opened !== undefined,
        };
    }
    static getDerivedStateFromProps(props, state) {
        return state.controlled ? { opened: props.opened } : {};
    }
    renderActions() {
        const { renderAction = this.renderDefaultAction } = this.props;
        const { opened } = this.state;
        return renderAction({ opened });
    }
    render() {
        const _a = this.props, { onActionClick: _0, theme, children, header } = _a, props = __rest(_a, ["onActionClick", "theme", "children", "header"]);
        const { opened } = this.state;
        return (React.createElement(StyledContainer, Object.assign({}, props, { theme: theme, open: opened }),
            React.createElement(StyledHeaderContainer, { theme: theme, open: opened }, header),
            React.createElement(StyledDetailsContainerAnimator, { theme: theme, open: opened }, children),
            this.renderActions()));
    }
}
AccordionCard.inner = {
    get StyledActionContainer() { return StyledActionContainer; },
    get StyledContainer() { return StyledContainer; },
    get StyledHeaderContainer() { return StyledHeaderContainer; },
    get StyledDetailsContainerAnimator() { return StyledDetailsContainerAnimator; }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjb3JkaW9uQ2FyZEludC5wYXJ0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQWNjb3JkaW9uQ2FyZC9BY2NvcmRpb25DYXJkSW50LnBhcnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sTUFBTSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUxQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBdUIsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDaEQsU0FBUyxDQUFDO0lBQ04sU0FBUyxFQUFFLGNBQWM7SUFDekIsVUFBVSxFQUFFLGVBQWU7Q0FDOUIsQ0FBQyxDQUFDO0FBQ0gsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUM7QUFDakMsTUFBTSxpQkFBaUIsR0FBRyw2QkFBNkIsQ0FBQztBQUt4RCxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQWMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsYUFBYSxFQUFFLEVBQUUsV0FBVyxFQUFFLGlCQUFpQixFQUFFLEVBQUUsS0FBSyxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUM7TUFDekksWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDOzs7YUFHekIsS0FBSzt3QkFDTSxJQUFJLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxXQUFXO0dBQzNELENBQUMsQ0FBQyxDQUFDO0FBQ04sTUFBTSxxQkFBcUIsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQWMsTUFB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QUFDLENBQUM7SUFDdEIsQ0FBQzs7QUFDTSxtQkFBSyxHQUFHO0lBQ1gsSUFBSSxxQkFBcUIsS0FBSyxPQUFPLHFCQUFxRCxDQUFDLENBQUMsQ0FBQztJQUM3RixJQUFJLGVBQWUsS0FBSyxPQUFPLGVBQXlDLENBQUMsQ0FBQyxDQUFDO0lBQzNFLElBQUkscUJBQXFCLEtBQUssT0FBTyxxQkFBcUQsQ0FBQyxDQUFDLENBQUM7SUFDN0YsSUFBSSw4QkFBOEIsS0FBSyxPQUFPLDhCQUF1RSxDQUFDLENBQUMsQ0FBQztDQUMzSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyB0aGVtZWQsIGNzcyB9IGZyb20gJy4uLy4uL3V0aWxzL3N0eWxlZCc7XG5pbXBvcnQgeyBkaXN0YW5jZSB9IGZyb20gJy4uLy4uL2Rpc3RhbmNlJztcbmltcG9ydCB7IFN0YW5kYXJkUHJvcHMgfSBmcm9tICcuLi8uLi9jb21tb24nO1xuaW1wb3J0IHsgc2V0TGFiZWxzLCBnZXRQcm9wTGFiZWwsIEFjY29yZGlvbkNhcmRMYWJlbHMgfSBmcm9tICcuLi8uLi91dGlscy9sYWJlbHMnO1xuaW1wb3J0IHsgZ2V0Rm9udFN0eWxlIH0gZnJvbSAnLi4vLi4vdGV4dFN0eWxlcyc7XG5zZXRMYWJlbHMoe1xuICAgIG9wZW5MYWJlbDogJ09wZW4gRGV0YWlscycsXG4gICAgY2xvc2VMYWJlbDogJ0Nsb3NlIERldGFpbHMnLFxufSk7XG5jb25zdCBhbmltYXRpb25EdXJhdGlvbiA9ICcwLjNzJztcbmNvbnN0IGFuaW1hdGlvbkZ1bmN0aW9uID0gJ2N1YmljLWJlemllcigwLCAwLCAwLjI1LCAxKSc7XG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2ZVByb3BzIHtcbiAgICBvcGVuOiBib29sZWFuO1xuICAgIG9uQ2xpY2s/KGU6IFJlYWN0Lk1vdXNlRXZlbnQpOiB2b2lkO1xufVxuY29uc3QgU3R5bGVkQ29udGFpbmVyID0gc3R5bGVkKCdkaXYnKTxBY3RpdmVQcm9wcz4odGhlbWVkKCh7IG9wZW4sIHRoZW1lOiB7IGFjY29yZGlvbkNhcmQ6IHsgYm9yZGVyQ29sb3IsIG9wZW5lZEJvcmRlckNvbG9yIH0sIHRleHQxLCB9LCB9KSA9PiBgXG4gICAgJHtnZXRGb250U3R5bGUoeyBzaXplOiAnbWVkaXVtJyB9KX1cbiAgICBcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgY29sb3I6ICR7dGV4dDF9O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICR7b3BlbiA/IG9wZW5lZEJvcmRlckNvbG9yIDogYm9yZGVyQ29sb3J9O1xuICBgKSk7XG5jb25zdCBTdHlsZWRIZWFkZXJDb250YWluZXIgPSBzdHlsZWQoJ2RpdicpPEFjdGl2ZVByb3BzPih0aGVtZWQoKHsgb3BlbiwgdGhlbWU6IHsgYWNjb3JkaW9uQ2FyZDogeyBoZWFkZXJQYWRkaW5nLCBvcGVuZWRIZWFkZXJCb3JkZXJDb2xvciwgb3BlbmVkSGVhZGVyQmFja2dyb3VuZCwgaGVhZGVyQmFja2dyb3VuZCB9LCB9LCB9KSA9PiBgXG4gICAgICBwYWRkaW5nOiAke2hlYWRlclBhZGRpbmd9O1xuICAgICAgYmFja2dyb3VuZDogJHtvcGVuID8gb3BlbmVkSGVhZGVyQmFja2dyb3VuZCA6IGhlYWRlckJhY2tncm91bmR9O1xuICAgICAgYm9yZGVyLWJvdHRvbTogJHtvcGVuID8gYDFweCBzb2xpZCAke29wZW5lZEhlYWRlckJvcmRlckNvbG9yfWAgOiAnbm9uZSd9O1xuICAgIGApKTtcbmV4cG9ydCBjb25zdCBTdHlsZWRBY3Rpb25Db250YWluZXIgPSBzdHlsZWQuZGl2PEFjdGl2ZVByb3BzPih0aGVtZWQoKHsgb3BlbiwgdGhlbWU6IHsgdWkwLCB1aTEgfSB9KSA9PiBjc3MgYFxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgcGFkZGluZzogJHtkaXN0YW5jZS5zbWFsbH0gJHtkaXN0YW5jZS5tZWRpdW19O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgYmFja2dyb3VuZDogJHtvcGVuID8gdWkxIDogdWkwfTtcbiAgICAgIGJvcmRlcjogJHtvcGVuID8gYDFweCBzb2xpZCAke3VpMH1gIDogJ25vbmUnfTtcbiAgICAgIG1hcmdpbjogLTFweCAtMXB4IC0xcHggLTFweDtcbiAgICAgIGNvbG9yOiAke29wZW4gPyB1aTAgOiB1aTF9O1xuICAgIGApKTtcbmNvbnN0IFN0eWxlZERldGFpbHNDb250YWluZXJBbmltYXRvciA9IHN0eWxlZCgnZGl2Jyk8QWN0aXZlUHJvcHM+IGBcbiAgdHJhbnNpdGlvbjogYWxsICR7YW5pbWF0aW9uRHVyYXRpb259ICR7YW5pbWF0aW9uRnVuY3Rpb259O1xuICBtYXgtaGVpZ2h0OiAkeyh7IG9wZW4gfSkgPT4gKG9wZW4gPyAnMTAwMDBweCcgOiAnMCcpfTtcbiAgb3BhY2l0eTogJHsoeyBvcGVuIH0pID0+IChvcGVuID8gJzEnIDogJzAnKX07XG4gIG92ZXJmbG93OiBoaWRkZW47XG5gO1xuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJBY3Rpb25FdmVudCB7XG4gICAgb3BlbmVkOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DbGlja0V2ZW50IHtcbiAgICBvcGVuZWQ6IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIEFjY29yZGlvbkNhcmRQcm9wcyBleHRlbmRzIFN0YW5kYXJkUHJvcHMsIEFjY29yZGlvbkNhcmRMYWJlbHMge1xuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIGNhcmQgaGVhZGVyLlxuICAgICAqL1xuICAgIGhlYWRlcjogUmVhY3QuUmVhY3ROb2RlO1xuICAgIC8qKlxuICAgICAqIERpc3BsYXllZCBjb250ZW50IHdoZW4gY2FyZCBpcyBvcGVuZWQuXG4gICAgICovXG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGRldGFpbHMgYXJlIG9wZW4gZm9yIHRoZSBjYXJkLlxuICAgICAqL1xuICAgIG9wZW5lZD86IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogQ3VzdG9tIHJlbmRlciBmb3IgY2FyZCBhY3Rpb24gYnV0dG9uLlxuICAgICAqL1xuICAgIHJlbmRlckFjdGlvbj8oZTogUmVuZGVyQWN0aW9uRXZlbnQpOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiBhY3Rpb24gYnV0dG9uIGNsaWNrZWQuXG4gICAgICovXG4gICAgb25BY3Rpb25DbGljaz8oZTogQWN0aW9uQ2xpY2tFdmVudCk6IHZvaWQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIEFjY29yZGlvbkNhcmRTdGF0ZSB7XG4gICAgb3BlbmVkOiBib29sZWFuO1xuICAgIGNvbnRyb2xsZWQ6IGJvb2xlYW47XG59XG5leHBvcnQgY2xhc3MgQWNjb3JkaW9uQ2FyZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxBY2NvcmRpb25DYXJkUHJvcHMsIEFjY29yZGlvbkNhcmRTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBBY2NvcmRpb25DYXJkUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgb3BlbmVkOiBwcm9wcy5vcGVuZWQgIT09IHVuZGVmaW5lZCA/IHByb3BzLm9wZW5lZCA6IGZhbHNlLFxuICAgICAgICAgICAgY29udHJvbGxlZDogcHJvcHMub3BlbmVkICE9PSB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHM6IEFjY29yZGlvbkNhcmRQcm9wcywgc3RhdGU6IEFjY29yZGlvbkNhcmRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGUuY29udHJvbGxlZCA/IHsgb3BlbmVkOiBwcm9wcy5vcGVuZWQgfSA6IHt9O1xuICAgIH1cbiAgICBwcml2YXRlIGhhbmRsZUNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uQWN0aW9uQ2xpY2sgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgb3BlbmVkLCBjb250cm9sbGVkIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICAhY29udHJvbGxlZCAmJiB0aGlzLnNldFN0YXRlKHsgb3BlbmVkOiAhb3BlbmVkIH0pO1xuICAgICAgICBpZiAodHlwZW9mIG9uQWN0aW9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uQWN0aW9uQ2xpY2soeyBvcGVuZWQ6IGNvbnRyb2xsZWQgPyBvcGVuZWQgOiAhb3BlbmVkIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwcml2YXRlIHJlbmRlckRlZmF1bHRBY3Rpb24gPSAoXzogUmVuZGVyQWN0aW9uRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBvcGVuZWQgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHJldHVybiAoPFN0eWxlZEFjdGlvbkNvbnRhaW5lciB0aGVtZT17dGhlbWV9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IG9wZW49e29wZW5lZH0+XG4gICAgICAgIHtnZXRQcm9wTGFiZWwodGhpcy5wcm9wcywgb3BlbmVkID8gJ2Nsb3NlTGFiZWwnIDogJ29wZW5MYWJlbCcpfVxuICAgICAgPC9TdHlsZWRBY3Rpb25Db250YWluZXI+KTtcbiAgICB9O1xuICAgIHByaXZhdGUgcmVuZGVyQWN0aW9ucygpIHtcbiAgICAgICAgY29uc3QgeyByZW5kZXJBY3Rpb24gPSB0aGlzLnJlbmRlckRlZmF1bHRBY3Rpb24gfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgb3BlbmVkIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICByZXR1cm4gcmVuZGVyQWN0aW9uKHsgb3BlbmVkIH0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgb25BY3Rpb25DbGljazogXzAsIHRoZW1lLCBjaGlsZHJlbiwgaGVhZGVyLCAuLi5wcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBvcGVuZWQgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHJldHVybiAoPFN0eWxlZENvbnRhaW5lciB7Li4ucHJvcHN9IHRoZW1lPXt0aGVtZX0gb3Blbj17b3BlbmVkfT5cbiAgICAgICAgPFN0eWxlZEhlYWRlckNvbnRhaW5lciB0aGVtZT17dGhlbWV9IG9wZW49e29wZW5lZH0+XG4gICAgICAgICAge2hlYWRlcn1cbiAgICAgICAgPC9TdHlsZWRIZWFkZXJDb250YWluZXI+XG4gICAgICAgIDxTdHlsZWREZXRhaWxzQ29udGFpbmVyQW5pbWF0b3IgdGhlbWU9e3RoZW1lfSBvcGVuPXtvcGVuZWR9PlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9TdHlsZWREZXRhaWxzQ29udGFpbmVyQW5pbWF0b3I+XG4gICAgICAgIHt0aGlzLnJlbmRlckFjdGlvbnMoKX1cbiAgICAgIDwvU3R5bGVkQ29udGFpbmVyPik7XG4gICAgfVxuICAgIHN0YXRpYyBpbm5lciA9IHtcbiAgICAgICAgZ2V0IFN0eWxlZEFjdGlvbkNvbnRhaW5lcigpIHsgcmV0dXJuIFN0eWxlZEFjdGlvbkNvbnRhaW5lciBhcyB0eXBlb2YgU3R5bGVkQWN0aW9uQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgU3R5bGVkQ29udGFpbmVyKCkgeyByZXR1cm4gU3R5bGVkQ29udGFpbmVyIGFzIHR5cGVvZiBTdHlsZWRDb250YWluZXI7IH0sXG4gICAgICAgIGdldCBTdHlsZWRIZWFkZXJDb250YWluZXIoKSB7IHJldHVybiBTdHlsZWRIZWFkZXJDb250YWluZXIgYXMgdHlwZW9mIFN0eWxlZEhlYWRlckNvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IFN0eWxlZERldGFpbHNDb250YWluZXJBbmltYXRvcigpIHsgcmV0dXJuIFN0eWxlZERldGFpbHNDb250YWluZXJBbmltYXRvciBhcyB0eXBlb2YgU3R5bGVkRGV0YWlsc0NvbnRhaW5lckFuaW1hdG9yOyB9XG4gICAgfTtcbn1cbiJdfQ==