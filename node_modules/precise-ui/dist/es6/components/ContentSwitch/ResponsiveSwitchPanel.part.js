var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import { withResponsive } from '../../hoc/withResponsive';
import { Container, Content, Header, Headers, OverflowItems } from './ContentSwitch.part';
import { OverflowMenu } from '../OverflowMenu';
import { Icon } from '../Icon';
const defaultOrientation = 'horizontal';
const overflowButtonWidth = 50;
const ContentSwitchInt = Object.assign(((_a) => {
    var { orientation = defaultOrientation, children, theme, headers, activeIndex, onSelect } = _a, rest = __rest(_a, ["orientation", "children", "theme", "headers", "activeIndex", "onSelect"]);
    const [overflowItems, setOverflowItems] = React.useState([]);
    const containerRef = React.createRef();
    const headerRef = React.createRef();
    React.useLayoutEffect(() => {
        if (headerRef.current && containerRef.current && orientation === 'horizontal') {
            const { offsetWidth: containerWidth } = containerRef.current;
            const headerNodesWidth = Array.from(headerRef.current.childNodes).map((node) => node.offsetWidth);
            const headersUlWidth = headerNodesWidth.reduce((acc, cur) => (acc += cur), 0);
            if (headersUlWidth > containerWidth) {
                const overflowItems = [];
                let visibleItemsWidth = overflowButtonWidth;
                headerNodesWidth.forEach((nodeWidth, index) => {
                    visibleItemsWidth += nodeWidth;
                    if (visibleItemsWidth > containerWidth) {
                        overflowItems.push(headers[index]);
                    }
                });
                setOverflowItems(overflowItems);
            }
        }
        return () => setOverflowItems([]);
    }, [headerRef.current, containerRef.current, orientation]);
    return (React.createElement(Container, Object.assign({ theme: theme }, rest, { ref: containerRef }),
        React.createElement(Headers, { theme: theme, orientation: orientation, ref: headerRef },
            headers.slice(0, headers.length - overflowItems.length).map((element, index) => (React.createElement(Header, { theme: theme, key: `head-${index}`, active: index === activeIndex, onClick: () => onSelect(index), orientation: orientation }, element))),
            overflowItems.length > 0 && (React.createElement(OverflowMenu, { key: "overflowButton", items: overflowItems.map((element, index, { length }) => (React.createElement(OverflowItems, { onClick: () => onSelect(headers.length - length + index) }, element))), button: React.createElement(Header, null,
                    React.createElement(Icon, { name: "MoreVert" })) }))),
        React.createElement(Content, { theme: theme }, children)));
}), { inner: {
        get Container() { return Container; },
        get Headers() { return Headers; },
        get Header() { return Header; },
        get OverflowMenu() { return OverflowMenu; },
        get Content() { return Content; }
    } });
export const ResponsiveSwitchPanel = withResponsive(ContentSwitchInt);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzcG9uc2l2ZVN3aXRjaFBhbmVsLnBhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Db250ZW50U3dpdGNoL1Jlc3BvbnNpdmVTd2l0Y2hQYW5lbC5wYXJ0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDMUQsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUUxRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUMvQixNQUFNLGtCQUFrQixHQUE2QixZQUFZLENBQUM7QUFDbEUsTUFBTSxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDL0IsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFFLENBQUMsQ0FBQyxFQUE4RixFQUFFLEVBQUU7UUFBbEcsRUFBRSxXQUFXLEdBQUcsa0JBQWtCLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsT0FBVyxFQUFULDZGQUFPO0lBQ2xJLE1BQU0sQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFpQixFQUFFLENBQUMsQ0FBQztJQUM3RSxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFrQixDQUFDO0lBQ3ZELE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQW9CLENBQUM7SUFDdEQsS0FBSyxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUU7UUFDdkIsSUFBSSxTQUFTLENBQUMsT0FBTyxJQUFJ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UUFDekMsSUFBSSxTQUFTLEtBQUssT0FBTyxTQUE2QixDQUFDLENBQUMsQ0FBQztRQUN6RCxJQUFJLE9BQU8sS0FBSyxPQUFPLE9BQXlCLENBQUMsQ0FBQyxDQUFDO1FBQ25ELElBQUksTUFBTSxLQUFLLE9BQU8sTUFBdUIsQ0FBQyxDQUFDLENBQUM7UUFDaEQsSUFBSSxZQUFZLEtBQUssT0FBTyxZQUFtQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxJQUFJLE9BQU8sS0FBSyxPQUFPLE9BQXlCLENBQUMsQ0FBQyxDQUFDO0tBQ3RELEVBQUUsQ0FBQyxDQUFDO0FBTVQsTUFBTSxDQUFDLE1BQU0scUJBQXFCLEdBQWlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgd2l0aFJlc3BvbnNpdmUgfSBmcm9tICcuLi8uLi9ob2Mvd2l0aFJlc3BvbnNpdmUnO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBDb250ZW50LCBIZWFkZXIsIEhlYWRlcnMsIE92ZXJmbG93SXRlbXMgfSBmcm9tICcuL0NvbnRlbnRTd2l0Y2gucGFydCc7XG5pbXBvcnQgeyBDb250ZW50U3dpdGNoT3JpZW50YXRpb24sIENvbnRlbnRTd2l0Y2hQcm9wc0ludCB9IGZyb20gJy4vQ29udGVudFN3aXRjaFR5cGVzLnBhcnQnO1xuaW1wb3J0IHsgT3ZlcmZsb3dNZW51IH0gZnJvbSAnLi4vT3ZlcmZsb3dNZW51JztcbmltcG9ydCB7IEljb24gfSBmcm9tICcuLi9JY29uJztcbmNvbnN0IGRlZmF1bHRPcmllbnRhdGlvbjogQ29udGVudFN3aXRjaE9yaWVudGF0aW9uID0gJ2hvcml6b250YWwnO1xuY29uc3Qgb3ZlcmZsb3dCdXR0b25XaWR0aCA9IDUwO1xuY29uc3QgQ29udGVudFN3aXRjaEludCA9IE9iamVjdC5hc3NpZ24oKCgoeyBvcmllbnRhdGlvbiA9IGRlZmF1bHRPcmllbnRhdGlvbiwgY2hpbGRyZW4sIHRoZW1lLCBoZWFkZXJzLCBhY3RpdmVJbmRleCwgb25TZWxlY3QsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IFtvdmVyZmxvd0l0ZW1zLCBzZXRPdmVyZmxvd0l0ZW1zXSA9IFJlYWN0LnVzZVN0YXRlPHR5cGVvZiBoZWFkZXJzPihbXSk7XG4gICAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpO1xuICAgIGNvbnN0IGhlYWRlclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MVUxpc3RFbGVtZW50PigpO1xuICAgIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChoZWFkZXJSZWYuY3VycmVudCAmJiBjb250YWluZXJSZWYuY3VycmVudCAmJiBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9mZnNldFdpZHRoOiBjb250YWluZXJXaWR0aCB9ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJOb2Rlc1dpZHRoID0gQXJyYXkuZnJvbShoZWFkZXJSZWYuY3VycmVudC5jaGlsZE5vZGVzKS5tYXAoKG5vZGU6IEhUTUxMSUVsZW1lbnQpID0+IG5vZGUub2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyc1VsV2lkdGggPSBoZWFkZXJOb2Rlc1dpZHRoLnJlZHVjZSgoYWNjLCBjdXIpID0+IChhY2MgKz0gY3VyKSwgMCk7XG4gICAgICAgICAgICBpZiAoaGVhZGVyc1VsV2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93SXRlbXM6IHR5cGVvZiBoZWFkZXJzID0gW107XG4gICAgICAgICAgICAgICAgbGV0IHZpc2libGVJdGVtc1dpZHRoID0gb3ZlcmZsb3dCdXR0b25XaWR0aDtcbiAgICAgICAgICAgICAgICBoZWFkZXJOb2Rlc1dpZHRoLmZvckVhY2goKG5vZGVXaWR0aCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUl0ZW1zV2lkdGggKz0gbm9kZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaWJsZUl0ZW1zV2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dJdGVtcy5wdXNoKGhlYWRlcnNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldE92ZXJmbG93SXRlbXMob3ZlcmZsb3dJdGVtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHNldE92ZXJmbG93SXRlbXMoW10pO1xuICAgIH0sIFtoZWFkZXJSZWYuY3VycmVudCwgY29udGFpbmVyUmVmLmN1cnJlbnQsIG9yaWVudGF0aW9uXSk7XG4gICAgcmV0dXJuICg8Q29udGFpbmVyIHRoZW1lPXt0aGVtZX0gey4uLnJlc3R9IHJlZj17Y29udGFpbmVyUmVmfT5cbiAgICAgIDxIZWFkZXJzIHRoZW1lPXt0aGVtZX0gb3JpZW50YXRpb249e29yaWVudGF0aW9ufSByZWY9e2hlYWRlclJlZn0+XG4gICAgICAgIHtoZWFkZXJzLnNsaWNlKDAsIGhlYWRlcnMubGVuZ3RoIC0gb3ZlcmZsb3dJdGVtcy5sZW5ndGgpLm1hcCgoZWxlbWVudCwgaW5kZXgpID0+ICg8SGVhZGVyIHRoZW1lPXt0aGVtZX0ga2V5PXtgaGVhZC0ke2luZGV4fWB9IGFjdGl2ZT17aW5kZXggPT09IGFjdGl2ZUluZGV4fSBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdChpbmRleCl9IG9yaWVudGF0aW9uPXtvcmllbnRhdGlvbn0+XG4gICAgICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAgICA8L0hlYWRlcj4pKX1cbiAgICAgICAge292ZXJmbG93SXRlbXMubGVuZ3RoID4gMCAmJiAoPE92ZXJmbG93TWVudSBrZXk9XCJvdmVyZmxvd0J1dHRvblwiIGl0ZW1zPXtvdmVyZmxvd0l0ZW1zLm1hcCgoZWxlbWVudCwgaW5kZXgsIHsgbGVuZ3RoIH0pID0+ICg8T3ZlcmZsb3dJdGVtcyBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdChoZWFkZXJzLmxlbmd0aCAtIGxlbmd0aCArIGluZGV4KX0+e2VsZW1lbnR9PC9PdmVyZmxvd0l0ZW1zPikpfSBidXR0b249ezxIZWFkZXI+XG4gICAgICAgICAgICAgICAgPEljb24gbmFtZT1cIk1vcmVWZXJ0XCIvPlxuICAgICAgICAgICAgICA8L0hlYWRlcj59Lz4pfVxuICAgICAgPC9IZWFkZXJzPlxuICAgICAgPENvbnRlbnQgdGhlbWU9e3RoZW1lfT57Y2hpbGRyZW59PC9Db250ZW50PlxuICAgIDwvQ29udGFpbmVyPik7XG59KSBhcyBSZWFjdC5GQzxDb250ZW50U3dpdGNoUHJvcHNJbnQ+KSwgeyBpbm5lcjoge1xuICAgICAgICBnZXQgQ29udGFpbmVyKCkgeyByZXR1cm4gQ29udGFpbmVyIGFzIHR5cGVvZiBDb250YWluZXI7IH0sXG4gICAgICAgIGdldCBIZWFkZXJzKCkgeyByZXR1cm4gSGVhZGVycyBhcyB0eXBlb2YgSGVhZGVyczsgfSxcbiAgICAgICAgZ2V0IEhlYWRlcigpIHsgcmV0dXJuIEhlYWRlciBhcyB0eXBlb2YgSGVhZGVyOyB9LFxuICAgICAgICBnZXQgT3ZlcmZsb3dNZW51KCkgeyByZXR1cm4gT3ZlcmZsb3dNZW51IGFzIHR5cGVvZiBPdmVyZmxvd01lbnU7IH0sXG4gICAgICAgIGdldCBDb250ZW50KCkgeyByZXR1cm4gQ29udGVudCBhcyB0eXBlb2YgQ29udGVudDsgfVxuICAgIH0gfSk7XG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNpdmVDb250ZW50U3dpdGNoUHJvcHMgZXh0ZW5kcyBSZWFjdC5GQzxDb250ZW50U3dpdGNoUHJvcHNJbnQ+IHtcbiAgICAocHJvcHM6IENvbnRlbnRTd2l0Y2hQcm9wc0ludCAmIHtcbiAgICAgICAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgfSwgY29udGV4dD86IGFueSk6IEpTWC5FbGVtZW50O1xufVxuZXhwb3J0IGNvbnN0IFJlc3BvbnNpdmVTd2l0Y2hQYW5lbDogUmVzcG9uc2l2ZUNvbnRlbnRTd2l0Y2hQcm9wcyA9IHdpdGhSZXNwb25zaXZlKENvbnRlbnRTd2l0Y2hJbnQpIGFzIGFueTtcbiJdfQ==