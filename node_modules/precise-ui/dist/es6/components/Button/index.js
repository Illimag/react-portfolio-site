var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import styled, { themed, css } from '../../utils/styled';
import { Anchor } from '../Anchor';
import { Icon } from '../Icon';
import { distance } from '../../distance';
import { displayUpTo } from '../../utils/';
import { getFontSize } from '../../textStyles';
function getThemeSettings(theme, buttonStyle) {
    switch (buttonStyle) {
        default:
        case 'primary':
            return theme.buttonPrimary;
        case 'secondary':
            return theme.buttonSecondary;
    }
}
function getButtonFontStyle(themeSettings, size = 'medium') {
    switch (size) {
        default:
        case 'medium':
            return `
        line-height: ${themeSettings.lineHeightMedium};
        ${getFontSize('medium')};
      `;
        case 'small':
            return `
        line-height: ${themeSettings.lineHeightSmall};
        ${getFontSize('small')};
      `;
    }
}
function getIconSize(size) {
    switch (size) {
        default:
        case 'medium':
            return '22px';
        case 'small':
            return '16px';
    }
}
function getButtonPadding(size) {
    switch (size) {
        default:
        case 'medium':
            return `9px ${distance.medium} 7px`;
        case 'small':
            return `5px ${distance.small} 3px`;
    }
}
const PseudoButtonStyle = (colorTheme) => css `
  &:hover {
    background-color: ${colorTheme.hoverBackground};
    border: ${colorTheme.hoverBorder};
    color: ${colorTheme.hoverText};
  }
  &:focus {
    background-color: ${colorTheme.focusBackground};
    border: ${colorTheme.focusBorder};
    color: ${colorTheme.focusText};
  }
`;
const AnchorInt = Object.assign(((_a) => {
    var { buttonStyle } = _a, props = __rest(_a, ["buttonStyle"]);
    return React.createElement(Anchor, Object.assign({}, props));
}), { inner: {
        get Anchor() { return Anchor; }
    } });
const StyledButton = styled(AnchorInt)(themed(props => {
    const themeSettings = getThemeSettings(props.theme, props.buttonStyle);
    return css `
      box-sizing: border-box;
      outline: none;
      border-radius: 0;
      margin: ${distance.small};
      &:first-of-type {
        margin-left: 0;
      }
      &:last-of-type {
        margin-right: 0;
      }
      border: ${props.disabled ? `${themeSettings.disabledBorder}` : `${themeSettings.border}`};
      background-color: ${props.disabled ? themeSettings.disabledBackground : themeSettings.background};
      color: ${props.disabled ? themeSettings.disabledText : themeSettings.text};
      font-family: ${props.theme.fontFamily};
      ${getButtonFontStyle(themeSettings, props.size)};
      padding: ${getButtonPadding(props.size)};
      display: ${props.block ? 'block' : 'inline-block'};
      cursor: ${props.disabled ? 'not-allowed' : 'pointer'};
      ${!props.disabled ? PseudoButtonStyle(themeSettings) : ''};
      ${!props.disableMobileFullWidth &&
        displayUpTo('medium') `
        width: 100%;
        margin: ${distance.small} 0;
      `};
    `;
}));
const DefaultWrapper = styled.div ``;
const WithIconWrapper = styled('div') `
  ${props => props.theme.buttonIconPosition === 'left'
    ? `padding-left: ${distance.xlarge}`
    : `padding-right: ${distance.xlarge}`};
  position: relative;
`;
const StyledIcon = styled(Icon) `
  ${props => (props.theme.buttonIconPosition === 'left' ? 'left: 0' : 'right: 0')};
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
`;
/**
 * The button component renders a simple button optionally with an icon.
 */
export const Button = Object.assign(((_a) => {
    var { children, icon, size, theme } = _a, rest = __rest(_a, ["children", "icon", "size", "theme"]);
    const Wrapper = icon ? WithIconWrapper : DefaultWrapper;
    return (React.createElement(StyledButton, Object.assign({ tagName: "button", theme: theme, size: size }, rest),
        React.createElement(Wrapper, { theme: theme },
            children,
            icon && React.createElement(StyledIcon, { name: icon, theme: theme, size: getIconSize(size) }))));
}), { inner: {
        get StyledButton() { return StyledButton; },
        get StyledIcon() { return StyledIcon; }
    } });
Button.displayName = 'Button';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9CdXR0b24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sTUFBTSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXpELE9BQU8sRUFBRSxNQUFNLEVBQWUsTUFBTSxXQUFXLENBQUM7QUFDaEQsT0FBTyxFQUFZLElBQUksRUFBYSxNQUFNLFNBQVMsQ0FBQztBQUNwRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUF5RC9DLFNBQVMsZ0JBQWdCLENBQUMsS0FBdUIsRUFBRSxXQUF5QjtJQUN4RSxRQUFRLFdBQVcsRUFBRTtRQUNqQixRQUFRO1FBQ1IsS0FBSyxTQUFTO1lBQ1YsT0FBTyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQy9CLEtBQUssV0FBVztZQUNaLE9BQU8sS0FBSyxDQUFDLGVBQWUsQ0FBQztLQUNwQztBQUNMLENBQUM7QUFDRCxTQUFTLGtCQUFrQixDQUFDLGFBQWtDLEVBQUUsT0FBbUIsUUFBUTtJQUN2RixRQUFRLElBQUksRUFBRTtRQUNWLFFBQVE7UUFDUixLQUFLLFFBQVE7WUFDVCxPQUFPO3VCQUNJLGFBQWEsQ0FBQyxnQkFBZ0I7VUFDM0MsV0FBVyxDQUFDLFFBQVEsQ0FBQztPQUN4QixDQUFDO1FBQ0EsS0FBSyxPQUFPO1lBQ1IsT0FBTzt1QkFDSSxhQUFhLENBQUMsZUFBZTtVQUMxQyxXQUFXLENBQUMsT0FBTyxDQUFDO09BQ3ZCLENBQUM7S0FDSDtBQUNMLENBQUM7QUFDRCxTQUFTLFdBQVcsQ0FB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QUErQixDQUFDLENBQUMsQ0FBQztLQUMvRCxFQUFFLENBQUMsQ0FBQztBQUNULE1BQU0sQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyB0aGVtZWQsIGNzcyB9IGZyb20gJy4uLy4uL3V0aWxzL3N0eWxlZCc7XG5pbXBvcnQgeyBTdGFuZGFyZFByb3BzLCBCdXR0b25UaGVtZVNldHRpbmdzLCBQcmVjaXNlRnVsbFRoZW1lIH0gZnJvbSAnLi4vLi4vY29tbW9uJztcbmltcG9ydCB7IEFuY2hvciwgQW5jaG9yUHJvcHMgfSBmcm9tICcuLi9BbmNob3InO1xuaW1wb3J0IHsgSWNvbk5hbWUsIEljb24sIEljb25Qcm9wcyB9IGZyb20gJy4uL0ljb24nO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBkaXNwbGF5VXBUbyB9IGZyb20gJy4uLy4uL3V0aWxzLyc7XG5pbXBvcnQgeyBnZXRGb250U2l6ZSB9IGZyb20gJy4uLy4uL3RleHRTdHlsZXMnO1xuLyoqXG4gKiBCdXR0b24gc3R5bGUgbmFtZS5cbiAqL1xuZXhwb3J0IHR5cGUgQnV0dG9uU3R5bGUgPSAncHJpbWFyeScgfCAnc2Vjb25kYXJ5Jztcbi8qKlxuICogQnV0dG9uIHR5cGUuXG4gKi9cbmV4cG9ydCB0eXBlIEJ1dHRvblR5cGUgPSAnc3VibWl0JyB8ICdyZXNldCcgfCAnYnV0dG9uJztcbi8qKlxuICogQnV0dG9uIHNpemUuXG4gKi9cbmV4cG9ydCB0eXBlIEJ1dHRvblNpemUgPSAnc21hbGwnIHwgJ21lZGl1bSc7XG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvblByb3BzIGV4dGVuZHMgQW5jaG9yUHJvcHMge1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBhcyBhY3RpdmUuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBhY3RpdmU/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBhcyBhIGJsb2NrLlxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgYmxvY2s/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBzdHlsZSB0eXBlLiBCeSBkZWZhdWx0IHByaW1hcnkuXG4gICAgICogQGRlZmF1bHQgcHJpbWFyeVxuICAgICAqL1xuICAgIGJ1dHRvblN0eWxlPzogQnV0dG9uU3R5bGU7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYnV0dG9uIHR5cGUuIEJ5IGRlZmF1bHQgXCJzdWJtaXRcIi5cbiAgICAgKiBAc2VlIFtXM0NdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwNTI1L3RoZS1idXR0b24tZWxlbWVudC5odG1sI2F0dHItYnV0dG9uLXR5cGUpXG4gICAgICovXG4gICAgdHlwZT86IEJ1dHRvblR5cGU7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYnV0dG9uIHNpemUuIEJ5IGRlZmF1bHQgbWVkaXVtLlxuICAgICAqIEBkZWZhdWx0IG1lZGl1bVxuICAgICAqL1xuICAgIHNpemU/OiBCdXR0b25TaXplO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBpY29uIHRvIGRpc3BsYXkuIEJ5IGRlZmF1bHQgbm8gaWNvbiBpcyBkaXNwbGF5LlxuICAgICAqL1xuICAgIGljb24/OiBJY29uTmFtZTtcbiAgICAvKipcbiAgICAgKiBEaXNhYmxlcyBjaGFuZ2luZyB0aGUgd2lkdGggb2YgdGhlIGJ1dHRvbiB0byAxMDAlIGZvciBtb2JpbGUgc2NyZWVucyAobmFycm93ZXIgdGhhbiA5ODBweClcbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGRpc2FibGVNb2JpbGVGdWxsV2lkdGg/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdHlsZWRCdXR0b25Qcm9wcyBleHRlbmRzIEFuY2hvclByb3BzIHtcbiAgICBibG9jaz86IGJvb2xlYW47XG4gICAgYnV0dG9uU3R5bGU/OiBCdXR0b25TdHlsZTtcbiAgICBzaXplPzogQnV0dG9uU2l6ZTtcbiAgICBkaXNhYmxlTW9iaWxlRnVsbFdpZHRoPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSWNvbldyYXBwZXJQcm9wcyBleHRlbmRzIFN0YW5kYXJkUHJvcHMge1xufVxuZnVuY3Rpb24gZ2V0VGhlbWVTZXR0aW5ncyh0aGVtZTogUHJlY2lzZUZ1bGxUaGVtZSwgYnV0dG9uU3R5bGU/OiBCdXR0b25TdHlsZSkge1xuICAgIHN3aXRjaCAoYnV0dG9uU3R5bGUpIHtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgY2FzZSAncHJpbWFyeSc6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUuYnV0dG9uUHJpbWFyeTtcbiAgICAgICAgY2FzZSAnc2Vjb25kYXJ5JzpcbiAgICAgICAgICAgIHJldHVybiB0aGVtZS5idXR0b25TZWNvbmRhcnk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QnV0dG9uRm9udFN0eWxlKHRoZW1lU2V0dGluZ3M6IEJ1dHRvblRoZW1lU2V0dGluZ3MsIHNpemU6IEJ1dHRvblNpemUgPSAnbWVkaXVtJykge1xuICAgIHN3aXRjaCAoc2l6ZSkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgbGluZS1oZWlnaHQ6ICR7dGhlbWVTZXR0aW5ncy5saW5lSGVpZ2h0TWVkaXVtfTtcbiAgICAgICAgJHtnZXRGb250U2l6ZSgnbWVkaXVtJyl9O1xuICAgICAgYDtcbiAgICAgICAgY2FzZSAnc21hbGwnOlxuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgbGluZS1oZWlnaHQ6ICR7dGhlbWVTZXR0aW5ncy5saW5lSGVpZ2h0U21hbGx9O1xuICAgICAgICAke2dldEZvbnRTaXplKCdzbWFsbCcpfTtcbiAgICAgIGA7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0SWNvblNpemUoc2l6ZT86IEJ1dHRvblNpemUpIHtcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgICAgIHJldHVybiAnMjJweCc7XG4gICAgICAgIGNhc2UgJ3NtYWxsJzpcbiAgICAgICAgICAgIHJldHVybiAnMTZweCc7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QnV0dG9uUGFkZGluZyhzaXplPzogQnV0dG9uU2l6ZSkge1xuICAgIHN3aXRjaCAoc2l6ZSkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgcmV0dXJuIGA5cHggJHtkaXN0YW5jZS5tZWRpdW19IDdweGA7XG4gICAgICAgIGNhc2UgJ3NtYWxsJzpcbiAgICAgICAgICAgIHJldHVybiBgNXB4ICR7ZGlzdGFuY2Uuc21hbGx9IDNweGA7XG4gICAgfVxufVxuY29uc3QgUHNldWRvQnV0dG9uU3R5bGUgPSAoY29sb3JUaGVtZTogQnV0dG9uVGhlbWVTZXR0aW5ncykgPT4gY3NzIGBcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvclRoZW1lLmhvdmVyQmFja2dyb3VuZH07XG4gICAgYm9yZGVyOiAke2NvbG9yVGhlbWUuaG92ZXJCb3JkZXJ9O1xuICAgIGNvbG9yOiAke2NvbG9yVGhlbWUuaG92ZXJUZXh0fTtcbiAgfVxuICAmOmZvY3VzIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9yVGhlbWUuZm9jdXNCYWNrZ3JvdW5kfTtcbiAgICBib3JkZXI6ICR7Y29sb3JUaGVtZS5mb2N1c0JvcmRlcn07XG4gICAgY29sb3I6ICR7Y29sb3JUaGVtZS5mb2N1c1RleHR9O1xuICB9XG5gO1xuY29uc3QgQW5jaG9ySW50ID0gT2JqZWN0LmFzc2lnbigoKCh7IGJ1dHRvblN0eWxlLCAuLi5wcm9wcyB9KSA9PiA8QW5jaG9yIHsuLi5wcm9wc30vPikgYXMgUmVhY3QuU0ZDPFN0eWxlZEJ1dHRvblByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IEFuY2hvcigpIHsgcmV0dXJuIEFuY2hvciBhcyB0eXBlb2YgQW5jaG9yOyB9XG4gICAgfSB9KTtcbmNvbnN0IFN0eWxlZEJ1dHRvbiA9IHN0eWxlZChBbmNob3JJbnQpPFN0eWxlZEJ1dHRvblByb3BzPih0aGVtZWQocHJvcHMgPT4ge1xuICAgIGNvbnN0IHRoZW1lU2V0dGluZ3MgPSBnZXRUaGVtZVNldHRpbmdzKHByb3BzLnRoZW1lLCBwcm9wcy5idXR0b25TdHlsZSk7XG4gICAgcmV0dXJuIGNzcyBgXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICBtYXJnaW46ICR7ZGlzdGFuY2Uuc21hbGx9O1xuICAgICAgJjpmaXJzdC1vZi10eXBlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICB9XG4gICAgICAmOmxhc3Qtb2YtdHlwZSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgIH1cbiAgICAgIGJvcmRlcjogJHtwcm9wcy5kaXNhYmxlZCA/IGAke3RoZW1lU2V0dGluZ3MuZGlzYWJsZWRCb3JkZXJ9YCA6IGAke3RoZW1lU2V0dGluZ3MuYm9yZGVyfWB9O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcy5kaXNhYmxlZCA/IHRoZW1lU2V0dGluZ3MuZGlzYWJsZWRCYWNrZ3JvdW5kIDogdGhlbWVTZXR0aW5ncy5iYWNrZ3JvdW5kfTtcbiAgICAgIGNvbG9yOiAke3Byb3BzLmRpc2FibGVkID8gdGhlbWVTZXR0aW5ncy5kaXNhYmxlZFRleHQgOiB0aGVtZVNldHRpbmdzLnRleHR9O1xuICAgICAgZm9udC1mYW1pbHk6ICR7cHJvcHMudGhlbWUuZm9udEZhbWlseX07XG4gICAgICAke2dldEJ1dHRvbkZvbnRTdHlsZSh0aGVtZVNldHRpbmdzLCBwcm9wcy5zaXplKX07XG4gICAgICBwYWRkaW5nOiAke2dldEJ1dHRvblBhZGRpbmcocHJvcHMuc2l6ZSl9O1xuICAgICAgZGlzcGxheTogJHtwcm9wcy5ibG9jayA/ICdibG9jaycgOiAnaW5saW5lLWJsb2NrJ307XG4gICAgICBjdXJzb3I6ICR7cHJvcHMuZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTtcbiAgICAgICR7IXByb3BzLmRpc2FibGVkID8gUHNldWRvQnV0dG9uU3R5bGUodGhlbWVTZXR0aW5ncykgOiAnJ307XG4gICAgICAkeyFwcm9wcy5kaXNhYmxlTW9iaWxlRnVsbFdpZHRoICYmXG4gICAgICAgIGRpc3BsYXlVcFRvKCdtZWRpdW0nKSBgXG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW46ICR7ZGlzdGFuY2Uuc21hbGx9IDA7XG4gICAgICBgfTtcbiAgICBgO1xufSkpO1xuY29uc3QgRGVmYXVsdFdyYXBwZXIgPSBzdHlsZWQuZGl2IGBgO1xuY29uc3QgV2l0aEljb25XcmFwcGVyID0gc3R5bGVkKCdkaXYnKTxJY29uV3JhcHBlclByb3BzPiBgXG4gICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuYnV0dG9uSWNvblBvc2l0aW9uID09PSAnbGVmdCdcbiAgICA/IGBwYWRkaW5nLWxlZnQ6ICR7ZGlzdGFuY2UueGxhcmdlfWBcbiAgICA6IGBwYWRkaW5nLXJpZ2h0OiAke2Rpc3RhbmNlLnhsYXJnZX1gfTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuYDtcbmNvbnN0IFN0eWxlZEljb24gPSBzdHlsZWQoSWNvbik8SWNvbldyYXBwZXJQcm9wcyAmIEljb25Qcm9wcz4gYFxuICAke3Byb3BzID0+IChwcm9wcy50aGVtZS5idXR0b25JY29uUG9zaXRpb24gPT09ICdsZWZ0JyA/ICdsZWZ0OiAwJyA6ICdyaWdodDogMCcpfTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuYDtcbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgcmVuZGVycyBhIHNpbXBsZSBidXR0b24gb3B0aW9uYWxseSB3aXRoIGFuIGljb24uXG4gKi9cbmV4cG9ydCBjb25zdCBCdXR0b24gPSBPYmplY3QuYXNzaWduKCgoKHsgY2hpbGRyZW4sIGljb24sIHNpemUsIHRoZW1lLCAuLi5yZXN0IH0pID0+IHtcbiAgICBjb25zdCBXcmFwcGVyID0gaWNvbiA/IFdpdGhJY29uV3JhcHBlciA6IERlZmF1bHRXcmFwcGVyO1xuICAgIHJldHVybiAoPFN0eWxlZEJ1dHRvbiB0YWdOYW1lPVwiYnV0dG9uXCIgdGhlbWU9e3RoZW1lfSBzaXplPXtzaXplfSB7Li4ucmVzdH0+XG4gICAgICA8V3JhcHBlciB0aGVtZT17dGhlbWV9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIHtpY29uICYmIDxTdHlsZWRJY29uIG5hbWU9e2ljb259IHRoZW1lPXt0aGVtZX0gc2l6ZT17Z2V0SWNvblNpemUoc2l6ZSl9Lz59XG4gICAgICA8L1dyYXBwZXI+XG4gICAgPC9TdHlsZWRCdXR0b24+KTtcbn0pIGFzIFJlYWN0LkZDPEJ1dHRvblByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IFN0eWxlZEJ1dHRvbigpIHsgcmV0dXJuIFN0eWxlZEJ1dHRvbiBhcyB0eXBlb2YgU3R5bGVkQnV0dG9uOyB9LFxuICAgICAgICBnZXQgU3R5bGVkSWNvbigpIHsgcmV0dXJuIFN0eWxlZEljb24gYXMgdHlwZW9mIFN0eWxlZEljb247IH1cbiAgICB9IH0pO1xuQnV0dG9uLmRpc3BsYXlOYW1lID0gJ0J1dHRvbic7XG4iXX0=