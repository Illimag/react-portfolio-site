import * as React from 'react';
import { getWidthBreakpointsQuery, getScreenSizeBreakpoints, getMediaQueries } from '../../utils/displayTo';
import { light, breakpoints } from '../../themes';
export class Responsive extends React.Component {
    constructor(props) {
        super(props);
        this.mediaQueriesToListen = {};
        this.updateMatches = () => {
            this.setState({
                matchesTo: this.currentlyMatches(),
            });
        };
        const { theme = light, screenSize, screenSizeCondition = 'equal', render } = this.props;
        const themedBreakpoints = Object.assign({}, breakpoints, theme.breakpoints);
        if (screenSize) {
            const screenSizeBreakpoints = this.getBreakpoints(themedBreakpoints, screenSize, screenSizeCondition);
            if (screenSizeBreakpoints) {
                this.mediaQueriesToListen[screenSize] = window.matchMedia(getWidthBreakpointsQuery(screenSizeBreakpoints));
            }
        }
        else {
            const allMediaQueries = getMediaQueries(themedBreakpoints);
            for (const screenSize in allMediaQueries) {
                this.mediaQueriesToListen[screenSize] = window.matchMedia(allMediaQueries[screenSize]);
            }
        }
        if (typeof render !== 'function' && !Object.keys(this.mediaQueriesToListen).length) {
            console.error('`render` callback method or valid `screenSize` and `screenSizeCondition` should be defined');
        }
        this.state = {
            matchesTo: undefined,
        };
    }
    getBreakpoints(breakpoints, screenSize, screenSizeCondition) {
        const screenSizeBreakpoints = getScreenSizeBreakpoints(screenSize, breakpoints);
        if (!screenSizeBreakpoints) {
            console.error(`Invalid screen size ${screenSize}`);
            return;
        }
        switch (screenSizeCondition) {
            case 'equal':
                return Object.assign({}, screenSizeBreakpoints);
            case 'from':
                return Object.assign({}, screenSizeBreakpoints, { max: undefined });
            case 'upTo':
                return Object.assign({}, screenSizeBreakpoints, { min: undefined });
            default:
                console.error(`Invalid screen size condition ${screenSizeCondition}`);
                return;
        }
    }
    currentlyMatches() {
        const mediaQueries = this.mediaQueriesToListen;
        for (const screenSize of Object.keys(mediaQueries)) {
            if (mediaQueries[screenSize].matches) {
                return screenSize;
            }
        }
        return undefined;
    }
    componentDidMount() {
        for (const screenSizeListenTo in this.mediaQueriesToListen) {
            this.mediaQueriesToListen[screenSizeListenTo].addListener(this.updateMatches);
        }
        this.updateMatches();
    }
    componentWillUnmount() {
        for (const sceenSize of Object.keys(this.mediaQueriesToListen)) {
            this.mediaQueriesToListen[sceenSize].removeListener(this.updateMatches);
        }
    }
    render() {
        const { children, render } = this.props;
        const { matchesTo } = this.state;
        if (render) {
            return render(matchesTo);
        }
        else {
            return children && matchesTo ? React.createElement(React.Fragment, null, children) : false;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9SZXNwb25zaXZlL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsd0JBQXdCLEVBQUUsd0JBQXdCLEVBQUUsZUFBZSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFNUcsT0FBTyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxjQUFjLENBQUM7QUE4QmxELE1BQU0sT0FBTyxVQUFXLFNBQVEsS0FBSyxDQUFDLFNBQTJDO0lBSTdFLFlBQVksS0FBc0I7UUFDOUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBSlQseUJBQW9CLEdBRXhCLEVBQUUsQ0FBQztRQW1EQyxrQkFBYSxHQUFHLEdBQUcsRUFBRTtZQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUNWLFNBQVMsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7YUFDckMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDO1FBcERFLE1BQU0sRUFBRSxLQUFLLEdBQUcsS0FBSyxFQUFFLFVBQVUsRUFBRSxtQkFBbUIsR0FBRyxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN4RixNQUFNLGlCQUFpQixxQkFBUSxXQUFXLEVBQUssS0FBSyxDQUFDLFdBQVcsQ0FBRSxDQUFDO1FBQ25FLElBQUksVUFBVSxFQUFFO1lBQ1osTUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQixFQUFFLFVBQVUsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ3RHLElBQUkscUJBQXFCLEVBQUU7Z0JBQ3ZCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLHdCQUF3QixDQUFDLHFCQUFxQixDQUFD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WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXRXaWR0aEJyZWFrcG9pbnRzUXVlcnksIGdldFNjcmVlblNpemVCcmVha3BvaW50cywgZ2V0TWVkaWFRdWVyaWVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGlzcGxheVRvJztcbmltcG9ydCB7IFByZWNpc2VUaGVtZSwgU2NyZWVuU2l6ZSwgQnJlYWtwb2ludHMgfSBmcm9tICcuLi8uLi9jb21tb24nO1xuaW1wb3J0IHsgbGlnaHQsIGJyZWFrcG9pbnRzIH0gZnJvbSAnLi4vLi4vdGhlbWVzJztcbmV4cG9ydCB0eXBlIFNjcmVlblNpemVDb25kaXRpb24gPSAnZXF1YWwnIHwgJ2Zyb20nIHwgJ3VwVG8nO1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zaXZlUHJvcHMge1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjcmVlbiBzaXplIGZvciB3aGljaCB0byBzaG93IHRoZSBjaGlsZHJlbi5cbiAgICAgKiBWYWxpZCB2YWx1ZXMgYXJlOiAnc21hbGwnIHwgJ21lZGl1bScgfCAnbGFyZ2UnIHwgJ3hMYXJnZScgfCAnbWF4J1xuICAgICAqL1xuICAgIHNjcmVlblNpemU/OiBTY3JlZW5TaXplO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjcmVlbiBzaXplIGNoZWNrIGNvbmRpdGlvbi5cbiAgICAgKiBWYWxpZCB2YWx1ZXMgYXJlOiAnZXF1YWwnIHwgJ2Zyb20nIHwgJ3VwVG8nXG4gICAgICogQGRlZmF1bHQgJ2VxdWFsJ1xuICAgICAqL1xuICAgIHNjcmVlblNpemVDb25kaXRpb24/OiBTY3JlZW5TaXplQ29uZGl0aW9uO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJlbmRlciBjYWxsYmFjay4gV2hlbiBzY3JlZW4gc2l6ZSBjaGFuZ2VzIGl0J3MgY2FsbGVkIHdpdGggYSBuZXcgb25lLlxuICAgICAqL1xuICAgIHJlbmRlcj8oc2NyZWVuU2l6ZT86IFNjcmVlblNpemUpOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIHF1ZXJ5IG1hdGNoZXMuXG4gICAgICovXG4gICAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgLyoqXG4gICAgICogVGhlIHRoZW1lIHRvIHN1cHBseSBmb3Igc2V0dGluZyB0aGUgY3VzdG9tIGJyZWFrcG9pbnRzLCBpZiBhbnkuXG4gICAgICovXG4gICAgdGhlbWU/OiBQcmVjaXNlVGhlbWU7XG59XG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNpdmVTdGF0ZSB7XG4gICAgbWF0Y2hlc1RvPzogU2NyZWVuU2l6ZTtcbn1cbmV4cG9ydCBjbGFzcyBSZXNwb25zaXZlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFJlc3BvbnNpdmVQcm9wcywgUmVzcG9uc2l2ZVN0YXRlPiB7XG4gICAgcHJpdmF0ZSBtZWRpYVF1ZXJpZXNUb0xpc3Rlbjoge1xuICAgICAgICBbc2l6ZTogc3RyaW5nXTogTWVkaWFRdWVyeUxpc3Q7XG4gICAgfSA9IHt9O1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBSZXNwb25zaXZlUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICBjb25zdCB7IHRoZW1lID0gbGlnaHQsIHNjcmVlblNpemUsIHNjcmVlblNpemVDb25kaXRpb24gPSAnZXF1YWwnLCByZW5kZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHRoZW1lZEJyZWFrcG9pbnRzID0geyAuLi5icmVha3BvaW50cywgLi4udGhlbWUuYnJlYWtwb2ludHMgfTtcbiAgICAgICAgaWYgKHNjcmVlblNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlblNpemVCcmVha3BvaW50cyA9IHRoaXMuZ2V0QnJlYWtwb2ludHModGhlbWVkQnJlYWtwb2ludHMsIHNjcmVlblNpemUsIHNjcmVlblNpemVDb25kaXRpb24pO1xuICAgICAgICAgICAgaWYgKHNjcmVlblNpemVCcmVha3BvaW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyaWVzVG9MaXN0ZW5bc2NyZWVuU2l6ZV0gPSB3aW5kb3cubWF0Y2hNZWRpYShnZXRXaWR0aEJyZWFrcG9pbnRzUXVlcnkoc2NyZWVuU2l6ZUJyZWFrcG9pbnRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhbGxNZWRpYVF1ZXJpZXMgPSBnZXRNZWRpYVF1ZXJpZXModGhlbWVkQnJlYWtwb2ludHMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzY3JlZW5TaXplIGluIGFsbE1lZGlhUXVlcmllcykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyaWVzVG9MaXN0ZW5bc2NyZWVuU2l6ZV0gPSB3aW5kb3cubWF0Y2hNZWRpYShhbGxNZWRpYVF1ZXJpZXNbc2NyZWVuU2l6ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVuZGVyICE9PSAnZnVuY3Rpb24nICYmICFPYmplY3Qua2V5cyh0aGlzLm1lZGlhUXVlcmllc1RvTGlzdGVuKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ByZW5kZXJgIGNhbGxiYWNrIG1ldGhvZCBvciB2YWxpZCBgc2NyZWVuU2l6ZWAgYW5kIGBzY3JlZW5TaXplQ29uZGl0aW9uYCBzaG91bGQgYmUgZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBtYXRjaGVzVG86IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJpdmF0ZSBnZXRCcmVha3BvaW50cyhicmVha3BvaW50czogQnJlYWtwb2ludHMsIHNjcmVlblNpemU6IFNjcmVlblNpemUsIHNjcmVlblNpemVDb25kaXRpb246IFNjcmVlblNpemVDb25kaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuU2l6ZUJyZWFrcG9pbnRzID0gZ2V0U2NyZWVuU2l6ZUJyZWFrcG9pbnRzKHNjcmVlblNpemUsIGJyZWFrcG9pbnRzKTtcbiAgICAgICAgaWYgKCFzY3JlZW5TaXplQnJlYWtwb2ludHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgc2NyZWVuIHNpemUgJHtzY3JlZW5TaXplfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoc2NyZWVuU2l6ZUNvbmRpdGlvbikge1xuICAgICAgICAgICAgY2FzZSAnZXF1YWwnOlxuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnNjcmVlblNpemVCcmVha3BvaW50cyB9O1xuICAgICAgICAgICAgY2FzZSAnZnJvbSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uc2NyZWVuU2l6ZUJyZWFrcG9pbnRzLCBtYXg6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgY2FzZSAndXBUbyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uc2NyZWVuU2l6ZUJyZWFrcG9pbnRzLCBtaW46IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBJbnZhbGlkIHNjcmVlbiBzaXplIGNvbmRpdGlvbiAke3NjcmVlblNpemVDb25kaXRpb259YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgY3VycmVudGx5TWF0Y2hlcygpIHtcbiAgICAgICAgY29uc3QgbWVkaWFRdWVyaWVzID0gdGhpcy5tZWRpYVF1ZXJpZXNUb0xpc3RlbjtcbiAgICAgICAgZm9yIChjb25zdCBzY3JlZW5TaXplIG9mIE9iamVjdC5rZXlzKG1lZGlhUXVlcmllcykpIHtcbiAgICAgICAgICAgIGlmIChtZWRpYVF1ZXJpZXNbc2NyZWVuU2l6ZV0ubWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY3JlZW5TaXplIGFzIFNjcmVlblNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcHJpdmF0ZSB1cGRhdGVNYXRjaGVzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG1hdGNoZXNUbzogdGhpcy5jdXJyZW50bHlNYXRjaGVzKCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2NyZWVuU2l6ZUxpc3RlblRvIGluIHRoaXMubWVkaWFRdWVyaWVzVG9MaXN0ZW4pIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyaWVzVG9MaXN0ZW5bc2NyZWVuU2l6ZUxpc3RlblRvXS5hZGRMaXN0ZW5lcih0aGlzLnVwZGF0ZU1hdGNoZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTWF0Y2hlcygpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBzY2VlblNpemUgb2YgT2JqZWN0LmtleXModGhpcy5tZWRpYVF1ZXJpZXNUb0xpc3RlbikpIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyaWVzVG9MaXN0ZW5bc2NlZW5TaXplXS5yZW1vdmVMaXN0ZW5lcih0aGlzLnVwZGF0ZU1hdGNoZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjaGlsZHJlbiwgcmVuZGVyIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG1hdGNoZXNUbyB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgaWYgKHJlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcihtYXRjaGVzVG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuICYmIG1hdGNoZXNUbyA/IDw+e2NoaWxkcmVufTwvPiA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19