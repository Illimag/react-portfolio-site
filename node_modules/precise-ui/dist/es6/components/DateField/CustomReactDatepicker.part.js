var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import ReactDatePicker from 'react-datepicker';
import enGB from 'date-fns/esm/locale/en-GB';
import { PaddedContainer } from '../PaddedContainer';
import { Icon } from '../Icon';
import styled, { themed } from '../../utils/styled';
import { distance, distancePx } from '../../distance';
import { getFontStyle, getFontWeight } from '../../textStyles';
import { IncreaseDecrease } from '../IncreaseDecrease';
import { greenNeon } from '../../colors';
const defaultWeekDays = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
const defaultMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
function patchLocale(locale, inputWeekDays = defaultWeekDays, months = defaultMonths) {
    // in react-datepicker week starts from Sunday, not from Monday
    const weekDays = [...inputWeekDays.slice(-1), ...inputWeekDays.slice(0, -1)];
    return Object.assign({}, locale, { localize: Object.assign({ ordinalNumber() { },
            era() { },
            quarter() { },
            dayPeriod() { } }, locale.localize, { month: (month) => months[month], day: (day) => weekDays[day] }), match: Object.assign({ ordinalNumber() { },
            era() { },
            quarter() { },
            dayPeriod() { } }, locale.match, { month: (month) => months.indexOf(month), day: (day) => weekDays.indexOf(day) }) });
}
const Arrow = styled.button `
  ${getFontStyle({ size: 'medium' })}

  background-color: transparent;
  padding: 0;
  border: none;

  align-self: start;
  cursor: pointer;
  > i {
    vertical-align: middle;
  }
`;
const Row = styled.div `
  margin-bottom: ${distance.medium};
  display: flex;
  justify-content: space-between;
  align-items: center;

  &:last-child {
    margin-bottom: 0;
  }
`;
const HeaderDateContainer = styled.div `
  ${getFontWeight('medium')}
`;
const StyledIncreaseDecrease = styled(IncreaseDecrease) `
  margin-left: ${distance.xsmall};
`;
const itemSize = '40px';
const ReactDatePickerContainer = styled.div(themed(({ theme: { ui0, ui1, ui3, ui4 } }) => `
    .react-datepicker {
      background-color: ${ui1};
      border: 1px solid ${ui4};
      display: inline-block;
      position: relative;
    }

    .react-datepicker--time-only {
      .react-datepicker__time-container {
        border-left: 0;
      }

      .react-datepicker__time {
        border-radius: 0.3rem;
      }

      .react-datepicker__time-box {
        border-radius: 0.3rem;
      }
    }

    .react-datepicker__triangle {
      display: none;
    }

    .react-datepicker-popper {
      z-index: 9999;
    }

    .react-datepicker__header {
      text-align: center;
      position: relative;

      &--time {
        padding-top: 20px;
        padding-bottom: 10px;
        padding-left: 5px;
        padding-right: 5px;
      }
    }

    .react-datepicker__current-month,
    .react-datepicker-time__header,
    .react-datepicker-year-header {
      margin-top: 0;
      ${getFontWeight('bold')}
    }

    .react-datepicker-year-header {
      line-height: ${itemSize};
    }

    .react-datepicker-time__header {
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    }

    .react-datepicker__month-container {
      float: left;
      padding: 0 ${distance.medium};
    }

    .react-datepicker__time-container {
      float: right;
      border-left: 1px solid ${ui4};
      width: 90px;

      .react-datepicker__time {
        position: relative;
        background: ${ui1};

        .react-datepicker__time-box {
          width: 100%;
          overflow-x: hidden;
          margin: 0;
          text-align: center;
          ul.react-datepicker__time-list {
            list-style: none;
            margin: 0;
            height: calc(195px + (#{${itemSize}} / 2));
            overflow-y: scroll;
            padding-right: 0px;
            padding-left: 0px;
            width: 100%;
            box-sizing: content-box;

            li.react-datepicker__time-list-item {
              height: ${itemSize};
              line-height: ${itemSize};
              &:hover {
                cursor: pointer;
                background-color: ${ui4};
              }
              &--selected {
                background-color: ${ui0};
                color: white;
                font-weight: bold;
                &:hover {
                  background-color: ${ui0};
                }
              }
              &--disabled {
                color: ${ui4};
                background: repeating-linear-gradient(-45deg, ${ui3} 2px, ${ui1} 2px, ${ui1} 4px, ${ui3} 4px, ${ui3} 6px);
                background-size: 41px 41px;

                &:hover {
                  cursor: default;
                  background-color: transparent;
                }
              }
            }
          }
        }
      }
    }

    .react-datepicker__week-number {
      color: ${ui4};
      display: inline-block;
      width: ${itemSize};
      line-height: ${itemSize};
      text-align: center;
      margin: 0;
      &.react-datepicker__week-number--clickable {
        cursor: pointer;
        &:hover {
          background-color: ${ui4};
        }
      }
    }

    .react-datepicker__day-names,
    .react-datepicker__week {
      white-space: nowrap;
      margin-bottom: ${distancePx.large / 2}px;
    }

    .react-datepicker__day-name,
    .react-datepicker__day,
    .react-datepicker__time-name {
      display: inline-block;
      width: ${itemSize};
      line-height: ${itemSize};
      text-align: center;
      margin: 0;
    }

    .react-datepicker__day,
    .react-datepicker__month-text {
      cursor: pointer;
      text-align: center;

      &:hover {
        background-color: ${ui4};
      }

      &:focus {
        border: 1px solid ${ui0};
        outline: none;
      }

      &--today {
        color: ${ui0};
      }

      &--highlighted {
        border-radius: 0;
        background-color: ${greenNeon};

        &:hover {
          background-color: darken(${greenNeon}, 5%);
        }

        &-custom-1 {
          color: magenta;
        }

        &-custom-2 {
          color: green;
        }
      }

      &--selected {
        background-color: ${ui0};
        color: ${ui1};

        &:hover {
          background-color: darken(${ui0}, 5%);
        }
      }

      &--in-selecting-range,
      &--in-range {
        background-color: ${ui3};
      }

      &--range-start,
      &--range-end,
      &--selecting-range-start {
        color: ${ui1};
        background-color: ${ui0};
      }

      &--disabled {
        cursor: default;
        color: ${ui4};
        background: repeating-linear-gradient(-45deg, ${ui3} 2px, ${ui1} 2px, ${ui1} 4px, ${ui3} 4px, ${ui3} 6px);

        &:hover {
          background-color: transparent;
        }
      }
    }

    .react-datepicker__month-text {
      &.react-datepicker__month--selected {
        background-color: ${ui0};
        color: ${ui1};
      }
      &:hover {
        background-color: ${ui4};
      }
    }

    .react-datepicker__input-container {
      position: relative;
    }

    .react-datepicker__day-name {
      text-transform: uppercase;
      line-height: 1;
    }

    .react-datepicker__day--outside-month {
      color: ${ui4};
    }

    .react-datepicker__day--keyboard-selected {
      border: 1px solid ${ui0};
      box-sizing: border-box;
      width: ${itemSize};
      height: ${itemSize};
    }
  `));
const getHeaderRender = ({ months = defaultMonths, }) => ({ date, increaseMonth, decreaseMonth, changeYear }) => {
    const monthName = months[date.getMonth()];
    const year = date.getFullYear();
    return (React.createElement(PaddedContainer, { gutter: "medium" },
        React.createElement(Row, null,
            React.createElement(Arrow, { onClick: decreaseMonth, type: "button" },
                React.createElement(Icon, { name: "KeyboardArrowLeft", size: 2 })),
            React.createElement(HeaderDateContainer, null,
                monthName,
                " ",
                year,
                React.createElement(StyledIncreaseDecrease, { onIncrease: () => changeYear(year + 1), onDecrease: () => changeYear(year - 1) })),
            React.createElement(Arrow, { onClick: increaseMonth, type: "button" },
                React.createElement(Icon, { name: "KeyboardArrowRight", size: 2 })))));
};
export const CustomReactDatepicker = Object.assign(((_a) => {
    var { months, weekDays, showMonthYearPicker } = _a, props = __rest(_a, ["months", "weekDays", "showMonthYearPicker"]);
    return (React.createElement(ReactDatePickerContainer, null,
        React.createElement(ReactDatePicker, Object.assign({ locale: patchLocale(enGB, weekDays, months), renderCustomHeader: getHeaderRender({ months }), showMonthYearPicker: showMonthYearPicker }, props))));
}), { inner: {
        get ReactDatePickerContainer() { return ReactDatePickerContainer; },
        get ReactDatePicker() { return ReactDatePicker; }
    } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VzdG9tUmVhY3REYXRlcGlja2VyLnBhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EYXRlRmllbGQvQ3VzdG9tUmVhY3REYXRlcGlja2VyLnBhcnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sZUFBeUMsTUFBTSxrQkFBa0IsQ0FBQztBQUN6RSxPQUFPLElBQUksTUFBTSwyQkFBMkIsQ0FBQztBQUU3QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDckQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUMvQixPQUFPLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3pDLE1BQU0sZUFBZSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDMUUsTUFBTSxhQUFhLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzNHLFNBQVMsV0FBVyxDQUFDLE1BQWMsRUFBRSxhQUFh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QUFRO2dCQUMxQyxvQkFBQyxJQUFJLElBQUMsSUFBSSxFQUFDLG9CQUFvQixFQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FDcEMsQ0FDSixDQUNVLENBQUMsQ0FBQztBQUN4QixDQUFDLENBQUM7QUFLRixNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFFLENBQUMsQ0FBQyxFQUFtRCxFQUFFLEVBQUU7UUFBdkQsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLG1CQUFtQixPQUFZLEVBQVYsaUVBQVE7SUFBTyxPQUFBLENBQUMsb0JBQUMsd0JBQXdCO1FBQ3BJLG9CQUFDLGVBQWUsa0JBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFLGtCQUFrQixFQUFFLGVBQWUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsbUJBQW1CLEVBQUUsbUJBQW1CLElBQU0sS0FBSyxFQUFHLENBQzVJLENBQUMsQ0FBQTtDQUFBLENBQTBDLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDM0UsSUFBSSx3QkFBd0IsS0FBSyxPQUFPLHdCQUEyRCxDQUFDLENBQUMsQ0FBQztRQUN0RyxJQUFJLGVBQWUsS0FBSyxPQUFPLGVBQXlDLENBQUMsQ0FBQyxDQUFDO0tBQzlFLEVBQUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RGF0ZVBpY2tlciwgeyBSZWFjdERhdGVQaWNrZXJQcm9wcyB9IGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xuaW1wb3J0IGVuR0IgZnJvbSAnZGF0ZS1mbnMvZXNtL2xvY2FsZS9lbi1HQic7XG5pbXBvcnQgeyBMb2NhbGUgfSBmcm9tICdkYXRlLWZucyc7XG5pbXBvcnQgeyBQYWRkZWRDb250YWluZXIgfSBmcm9tICcuLi9QYWRkZWRDb250YWluZXInO1xuaW1wb3J0IHsgSWNvbiB9IGZyb20gJy4uL0ljb24nO1xuaW1wb3J0IHN0eWxlZCwgeyB0aGVtZWQgfSBmcm9tICcuLi8uLi91dGlscy9zdHlsZWQnO1xuaW1wb3J0IHsgZGlzdGFuY2UsIGRpc3RhbmNlUHggfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBnZXRGb250U3R5bGUsIGdldEZvbnRXZWlnaHQgfSBmcm9tICcuLi8uLi90ZXh0U3R5bGVzJztcbmltcG9ydCB7IEluY3JlYXNlRGVjcmVhc2UgfSBmcm9tICcuLi9JbmNyZWFzZURlY3JlYXNlJztcbmltcG9ydCB7IGdyZWVuTmVvbiB9IGZyb20gJy4uLy4uL2NvbG9ycyc7XG5jb25zdCBkZWZhdWx0V2Vla0RheXMgPSBbJ21vbicsICd0dWUnLCAnd2VkJywgJ3RodScsICdmcmknLCAnc2F0JywgJ3N1biddO1xuY29uc3QgZGVmYXVsdE1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXTtcbmZ1bmN0aW9uIHBhdGNoTG9jYWxlKGxvY2FsZTogTG9jYWxlLCBpbnB1dFdlZWtEYXlzID0gZGVmYXVsdFdlZWtEYXlzLCBtb250aHMgPSBkZWZhdWx0TW9udGhzKTogTG9jYWxlIHtcbiAgICAvLyBpbiByZWFjdC1kYXRlcGlja2VyIHdlZWsgc3RhcnRzIGZyb20gU3VuZGF5LCBub3QgZnJvbSBNb25kYXlcbiAgICBjb25zdCB3ZWVrRGF5cyA9IFsuLi5pbnB1dFdlZWtEYXlzLnNsaWNlKC0xKSwgLi4uaW5wdXRXZWVrRGF5cy5zbGljZSgwLCAtMSldO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmxvY2FsZSxcbiAgICAgICAgbG9jYWxpemU6IHtcbiAgICAgICAgICAgIG9yZGluYWxOdW1iZXIoKSB7IH0sXG4gICAgICAgICAgICBlcmEoKSB7IH0sXG4gICAgICAgICAgICBxdWFydGVyKCkgeyB9LFxuICAgICAgICAgICAgZGF5UGVyaW9kKCkgeyB9LFxuICAgICAgICAgICAgLi4ubG9jYWxlLmxvY2FsaXplLFxuICAgICAgICAgICAgbW9udGg6IChtb250aDogbnVtYmVyKSA9PiBtb250aHNbbW9udGhdLFxuICAgICAgICAgICAgZGF5OiAoZGF5OiBudW1iZXIpID0+IHdlZWtEYXlzW2RheV0sXG4gICAgICAgIH0sXG4gICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICBvcmRpbmFsTnVtYmVyKCkgeyB9LFxuICAgICAgICAgICAgZXJhKCkgeyB9LFxuICAgICAgICAgICAgcXVhcnRlcigpIHsgfSxcbiAgICAgICAgICAgIGRheVBlcmlvZCgpIHsgfSxcbiAgICAgICAgICAgIC4uLmxvY2FsZS5tYXRjaCxcbiAgICAgICAgICAgIG1vbnRoOiAobW9udGg6IHN0cmluZykgPT4gbW9udGhzLmluZGV4T2YobW9udGgpLFxuICAgICAgICAgICAgZGF5OiAoZGF5OiBzdHJpbmcpID0+IHdlZWtEYXlzLmluZGV4T2YoZGF5KSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuY29uc3QgQXJyb3cgPSBzdHlsZWQuYnV0dG9uIGBcbiAgJHtnZXRGb250U3R5bGUoeyBzaXplOiAnbWVkaXVtJyB9KX1cblxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgcGFkZGluZzogMDtcbiAgYm9yZGVyOiBub25lO1xuXG4gIGFsaWduLXNlbGY6IHN0YXJ0O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gID4gaSB7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgfVxuYDtcbmNvbnN0IFJvdyA9IHN0eWxlZC5kaXYgYFxuICBtYXJnaW4tYm90dG9tOiAke2Rpc3RhbmNlLm1lZGl1bX07XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAmOmxhc3QtY2hpbGQge1xuICAgIG1hcmdpbi1ib3R0b206IDA7XG4gIH1cbmA7XG5jb25zdCBIZWFkZXJEYXRlQ29udGFpbmVyID0gc3R5bGVkLmRpdiBgXG4gICR7Z2V0Rm9udFdlaWdodCgnbWVkaXVtJyl9XG5gO1xuY29uc3QgU3R5bGVkSW5jcmVhc2VEZWNyZWFzZSA9IHN0eWxlZChJbmNyZWFzZURlY3JlYXNlKSBgXG4gIG1hcmdpbi1sZWZ0OiAke2Rpc3RhbmNlLnhzbWFsbH07XG5gO1xuY29uc3QgaXRlbVNpemUgPSAnNDBweCc7XG5jb25zdCBSZWFjdERhdGVQaWNrZXJDb250YWluZXIgPSBzdHlsZWQuZGl2KHRoZW1lZCgoeyB0aGVtZTogeyB1aTAsIHVpMSwgdWkzLCB1aTQgfSB9KSA9PiBgXG4gICAgLnJlYWN0LWRhdGVwaWNrZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTF9O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt1aTR9O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyLS10aW1lLW9ubHkge1xuICAgICAgLnJlYWN0LWRhdGVwaWNrZXJfX3RpbWUtY29udGFpbmVyIHtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDA7XG4gICAgICB9XG5cbiAgICAgIC5yZWFjdC1kYXRlcGlja2VyX190aW1lIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtO1xuICAgICAgfVxuXG4gICAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZS1ib3gge1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNyZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX3RyaWFuZ2xlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXItcG9wcGVyIHtcbiAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2hlYWRlciB7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAgICYtLXRpbWUge1xuICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogNXB4O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2N1cnJlbnQtbW9udGgsXG4gICAgLnJlYWN0LWRhdGVwaWNrZXItdGltZV9faGVhZGVyLFxuICAgIC5yZWFjdC1kYXRlcGlja2VyLXllYXItaGVhZGVyIHtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAke2dldEZvbnRXZWlnaHQoJ2JvbGQnKX1cbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlci15ZWFyLWhlYWRlciB7XG4gICAgICBsaW5lLWhlaWdodDogJHtpdGVtU2l6ZX07XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXItdGltZV9faGVhZGVyIHtcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX21vbnRoLWNvbnRhaW5lciB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIHBhZGRpbmc6IDAgJHtkaXN0YW5jZS5tZWRpdW19O1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX190aW1lLWNvbnRhaW5lciB7XG4gICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7dWk0fTtcbiAgICAgIHdpZHRoOiA5MHB4O1xuXG4gICAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZSB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDogJHt1aTF9O1xuXG4gICAgICAgIC5yZWFjdC1kYXRlcGlja2VyX190aW1lLWJveCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgdWwucmVhY3QtZGF0ZXBpY2tlcl9fdGltZS1saXN0IHtcbiAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTk1cHggKyAoI3ske2l0ZW1TaXplfX0gLyAyKSk7XG4gICAgICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAwcHg7XG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDBweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgYm94LXNpemluZzogY29udGVudC1ib3g7XG5cbiAgICAgICAgICAgIGxpLnJlYWN0LWRhdGVwaWNrZXJfX3RpbWUtbGlzdC1pdGVtIHtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAke2l0ZW1TaXplfTtcbiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6ICR7aXRlbVNpemV9O1xuICAgICAgICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTR9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICYtLXNlbGVjdGVkIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpMH07XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgICAgICY6aG92ZXIge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAmLS1kaXNhYmxlZCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICR7dWk0fTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KC00NWRlZywgJHt1aTN9IDJweCwgJHt1aTF9IDJweCwgJHt1aTF9IDRweCwgJHt1aTN9IDRweCwgJHt1aTN9IDZweCk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0MXB4IDQxcHg7XG5cbiAgICAgICAgICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX193ZWVrLW51bWJlciB7XG4gICAgICBjb2xvcjogJHt1aTR9O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6ICR7aXRlbVNpemV9O1xuICAgICAgbGluZS1oZWlnaHQ6ICR7aXRlbVNpemV9O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgJi5yZWFjdC1kYXRlcGlja2VyX193ZWVrLW51bWJlci0tY2xpY2thYmxlIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpNH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fZGF5LW5hbWVzLFxuICAgIC5yZWFjdC1kYXRlcGlja2VyX193ZWVrIHtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBtYXJnaW4tYm90dG9tOiAke2Rpc3RhbmNlUHgubGFyZ2UgLyAyfXB4O1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19kYXktbmFtZSxcbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fZGF5LFxuICAgIC5yZWFjdC1kYXRlcGlja2VyX190aW1lLW5hbWUge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6ICR7aXRlbVNpemV9O1xuICAgICAgbGluZS1oZWlnaHQ6ICR7aXRlbVNpemV9O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19kYXksXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX21vbnRoLXRleHQge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTR9O1xuICAgICAgfVxuXG4gICAgICAmOmZvY3VzIHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt1aTB9O1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuXG4gICAgICAmLS10b2RheSB7XG4gICAgICAgIGNvbG9yOiAke3VpMH07XG4gICAgICB9XG5cbiAgICAgICYtLWhpZ2hsaWdodGVkIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtncmVlbk5lb259O1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtlbigke2dyZWVuTmVvbn0sIDUlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICYtY3VzdG9tLTEge1xuICAgICAgICAgIGNvbG9yOiBtYWdlbnRhO1xuICAgICAgICB9XG5cbiAgICAgICAgJi1jdXN0b20tMiB7XG4gICAgICAgICAgY29sb3I6IGdyZWVuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYtLXNlbGVjdGVkIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTB9O1xuICAgICAgICBjb2xvcjogJHt1aTF9O1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtlbigke3VpMH0sIDUlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLS1pbi1zZWxlY3RpbmctcmFuZ2UsXG4gICAgICAmLS1pbi1yYW5nZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWkzfTtcbiAgICAgIH1cblxuICAgICAgJi0tcmFuZ2Utc3RhcnQsXG4gICAgICAmLS1yYW5nZS1lbmQsXG4gICAgICAmLS1zZWxlY3RpbmctcmFuZ2Utc3RhcnQge1xuICAgICAgICBjb2xvcjogJHt1aTF9O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpMH07XG4gICAgICB9XG5cbiAgICAgICYtLWRpc2FibGVkIHtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgICBjb2xvcjogJHt1aTR9O1xuICAgICAgICBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KC00NWRlZywgJHt1aTN9IDJweCwgJHt1aTF9IDJweCwgJHt1aTF9IDRweCwgJHt1aTN9IDRweCwgJHt1aTN9IDZweCk7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fbW9udGgtdGV4dCB7XG4gICAgICAmLnJlYWN0LWRhdGVwaWNrZXJfX21vbnRoLS1zZWxlY3RlZCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWkwfTtcbiAgICAgICAgY29sb3I6ICR7dWkxfTtcbiAgICAgIH1cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpNH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2lucHV0LWNvbnRhaW5lciB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2RheS1uYW1lIHtcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICBsaW5lLWhlaWdodDogMTtcbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fZGF5LS1vdXRzaWRlLW1vbnRoIHtcbiAgICAgIGNvbG9yOiAke3VpNH07XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2RheS0ta2V5Ym9hcmQtc2VsZWN0ZWQge1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt1aTB9O1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIHdpZHRoOiAke2l0ZW1TaXplfTtcbiAgICAgIGhlaWdodDogJHtpdGVtU2l6ZX07XG4gICAgfVxuICBgKSk7XG5jb25zdCBnZXRIZWFkZXJSZW5kZXIgPSAoeyBtb250aHMgPSBkZWZhdWx0TW9udGhzLCB9OiB7XG4gICAgbW9udGhzOiBDdXN0b21SZWFjdERhdGVwaWNrZXJQcm9wc1snbW9udGhzJ107XG59KTogUmVhY3REYXRlUGlja2VyUHJvcHNbJ3JlbmRlckN1c3RvbUhlYWRlciddID0+ICh7IGRhdGUsIGluY3JlYXNlTW9udGgsIGRlY3JlYXNlTW9udGgsIGNoYW5nZVllYXIgfSkgPT4ge1xuICAgIGNvbnN0IG1vbnRoTmFtZSA9IG1vbnRoc1tkYXRlLmdldE1vbnRoKCldO1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgcmV0dXJuICg8UGFkZGVkQ29udGFpbmVyIGd1dHRlcj1cIm1lZGl1bVwiPlxuICAgICAgPFJvdz5cbiAgICAgICAgPEFycm93IG9uQ2xpY2s9e2RlY3JlYXNlTW9udGh9IHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICA8SWNvbiBuYW1lPVwiS2V5Ym9hcmRBcnJvd0xlZnRcIiBzaXplPXsyfS8+XG4gICAgICAgIDwvQXJyb3c+XG4gICAgICAgIDxIZWFkZXJEYXRlQ29udGFpbmVyPlxuICAgICAgICAgIHttb250aE5hbWV9IHt5ZWFyfVxuICAgICAgICAgIDxTdHlsZWRJbmNyZWFzZURlY3JlYXNlIG9uSW5jcmVhc2U9eygpID0+IGNoYW5nZVllYXIoeWVhciArIDEpfSBvbkRlY3JlYXNlPXsoKSA9PiBjaGFuZ2VZZWFyKHllYXIgLSAxKX0vPlxuICAgICAgICA8L0hlYWRlckRhdGVDb250YWluZXI+XG4gICAgICAgIDxBcnJvdyBvbkNsaWNrPXtpbmNyZWFzZU1vbnRofSB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgPEljb24gbmFtZT1cIktleWJvYXJkQXJyb3dSaWdodFwiIHNpemU9ezJ9Lz5cbiAgICAgICAgPC9BcnJvdz5cbiAgICAgIDwvUm93PlxuICAgIDwvUGFkZGVkQ29udGFpbmVyPik7XG59O1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21SZWFjdERhdGVwaWNrZXJQcm9wcyBleHRlbmRzIFJlYWN0RGF0ZVBpY2tlclByb3BzIHtcbiAgICBtb250aHM/OiBBcnJheTxzdHJpbmc+O1xuICAgIHdlZWtEYXlzPzogQXJyYXk8c3RyaW5nPjtcbn1cbmV4cG9ydCBjb25zdCBDdXN0b21SZWFjdERhdGVwaWNrZXIgPSBPYmplY3QuYXNzaWduKCgoKHsgbW9udGhzLCB3ZWVrRGF5cywgc2hvd01vbnRoWWVhclBpY2tlciwgLi4ucHJvcHMgfSkgPT4gKDxSZWFjdERhdGVQaWNrZXJDb250YWluZXI+XG4gICAgPFJlYWN0RGF0ZVBpY2tlciBsb2NhbGU9e3BhdGNoTG9jYWxlKGVuR0IsIHdlZWtEYXlzLCBtb250aHMpfSByZW5kZXJDdXN0b21IZWFkZXI9e2dldEhlYWRlclJlbmRlcih7IG1vbnRocyB9KX0gc2hvd01vbnRoWWVhclBpY2tlcj17c2hvd01vbnRoWWVhclBpY2tlcn0gey4uLnByb3BzfS8+XG4gIDwvUmVhY3REYXRlUGlja2VyQ29udGFpbmVyPikpIGFzIFJlYWN0LkZDPEN1c3RvbVJlYWN0RGF0ZXBpY2tlclByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IFJlYWN0RGF0ZVBpY2tlckNvbnRhaW5lcigpIHsgcmV0dXJuIFJlYWN0RGF0ZVBpY2tlckNvbnRhaW5lciBhcyB0eXBlb2YgUmVhY3REYXRlUGlja2VyQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgUmVhY3REYXRlUGlja2VyKCkgeyByZXR1cm4gUmVhY3REYXRlUGlja2VyIGFzIHR5cGVvZiBSZWFjdERhdGVQaWNrZXI7IH1cbiAgICB9IH0pO1xuIl19