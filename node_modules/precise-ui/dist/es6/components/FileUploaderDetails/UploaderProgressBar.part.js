var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import styled, { themed, css } from '../../utils/styled';
import { Icon } from '../Icon';
import { iconNames } from './helpers';
import { ActionIconContainer } from './ActionIconContainer.part';
import { ActionLink } from '../ActionLink';
import { ProgressBar } from '../ProgressBar';
import { StatusIcon } from './StatusIcon.part';
import { distance } from '../../distance';
import { getPropLabel } from '../../utils/labels';
const ProgressBarWrapper = styled.div(themed(({ theme }) => css `
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 2px 6px 0 rgba(75, 78, 82, 0.2);
      border: solid 1px ${theme.ui4};
      background-color: ${theme.text4};
    `));
const StyledProgressBar = styled(ProgressBar) `
  border-radius: 0;
  height: ${distance.xsmall};
`;
const BarInfo = styled.div `
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  min-height: 54px;
`;
const StatusBarGroup = styled.div `
  padding: ${distance.small};
`;
const StyledStatusBar = styled.div `
  padding: ${distance.small};
  display: flex;
  align-items: center;
`;
const ActionGroup = styled.div `
  padding: ${distance.medium};
  display: flex;
  align-items: center;
`;
const StatusLabel = styled.span `
  padding-left: ${distance.medium};
`;
function StatusBar(_a) {
    var { status, count, iconName, title } = _a, props = __rest(_a, ["status", "count", "iconName", "title"]);
    return (React.createElement(StyledStatusBar, null,
        React.createElement(StatusIcon, { name: iconName, type: status }),
        `${count} ${count > 1 ? getPropLabel(props, 'itemPluralLabel') : getPropLabel(props, 'itemSingularLabel')}`,
        React.createElement(StatusLabel, null, title)));
}
export const UploaderProgressBar = Object.assign(((_a) => {
    var { total, onClose, onShow, progressValue, inProgress, scanning, errors } = _a, props = __rest(_a, ["total", "onClose", "onShow", "progressValue", "inProgress", "scanning", "errors"]);
    const completed = progressValue >= 100;
    return (React.createElement(ProgressBarWrapper, null,
        React.createElement(BarInfo, null,
            React.createElement(StatusBarGroup, null, !completed || scanning ? (inProgress > 0 && (React.createElement(StatusBar, Object.assign({}, props, { count: total, iconName: iconNames.progress, title: completed && scanning
                    ? getPropLabel(props, 'uploadScanningLabel')
                    : getPropLabel(props, 'uploadProgressLabel'), status: completed && scanning ? 'scanning' : 'progress' })))) : (React.createElement(React.Fragment, null,
                inProgress > 0 && (React.createElement(StatusBar, Object.assign({}, props, { count: inProgress, iconName: iconNames.success, title: getPropLabel(props, 'uploadSuccessLabel'), status: "success" }))),
                errors > 0 && (React.createElement(StatusBar, Object.assign({}, props, { count: errors, iconName: iconNames.error, title: getPropLabel(props, 'uploadErrorLabel'), status: "error" })))))),
            React.createElement(ActionGroup, null,
                React.createElement(ActionLink, { onClick: onShow }, getPropLabel(props, 'viewDetailsLabel')),
                completed && !scanning && (React.createElement(ActionIconContainer, { onClick: onClose },
                    React.createElement(Icon, { name: "Close" }))))),
        !completed && React.createElement(StyledProgressBar, { value: progressValue, animate: true })));
}), { inner: {
        get ProgressBarWrapper() { return ProgressBarWrapper; },
        get BarInfo() { return BarInfo; },
        get StatusBarGroup() { return StatusBarGroup; },
        get StatusBar() { return StatusBar; },
        get ActionGroup() { return ActionGroup; },
        get ActionLink() { return ActionLink; },
        get ActionIconContainer() { return ActionIconContainer; },
        get Icon() { return Icon; },
        get StyledProgressBar() { return StyledProgressBar; }
    } });
UploaderProgressBar.displayName = 'UploaderProgressBar';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXBsb2FkZXJQcm9ncmVzc0Jhci5wYXJ0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvRmlsZVVwbG9hZGVyRGV0YWlscy9VcGxvYWRlclByb2dyZXNzQmFyLnBhcnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sTUFBTSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxJQUFJLEVBQVksTUFBTSxTQUFTLENBQUM7QUFFekMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzFDLE9BQU8sRUFBRSxZQUFZLEVBQTZDLE1BQU0sb0JBQW9CLENBQUM7QUFDN0YsTUFBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQzs7Ozs7MEJBS3RDLEtBQUssQ0FBQyxHQUFHOzBCQUNULEtBQUssQ0FBQyxLQUFLO0tBQ2hDLENBQUMsQ0FBQyxDQUFDO0FBQ1IsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7O1lBRWxDLFFBQVEsQ0FBQyxNQUFNO0NBQzFCLENBQUM7QUFDRixNQUFNLE9BQU8sR0FBRyxNQUFNLENB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QkFBa0IsQ0FBQyxDQUFjO2dCQUNsRixTQUFTLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxvQkFBQyxtQkFBbUIsSUFBQyxPQUFPLEVBQUUsT0FBTztvQkFDN0Qsb0JBQUMsSUFBSSxJQUFDLElBQUksRUFBQyxPQUFPLEdBQUUsQ0FDQSxDQUFDLENBQ2IsQ0FDTjtRQUNULENBQUMsU0FBUyxJQUFJLG9CQUFDLGlCQUFpQixJQUFDLEtBQUssRUFBRSxhQUFhLEVBQUUsT0FBTyxTQUFFLENBQzlDLENBQUMsQ0FBQztBQUMzQixDQUFDLENBQXlDLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDN0MsSUFBSSxrQkFBa0IsS0FBSyxPQUFPLGtCQUErQyxDQUFDLENBQUMsQ0FBQztRQUNwRixJQUFJLE9BQU8sS0FBSyxPQUFPLE9BQXlCLENBQUMsQ0FBQyxDQUFDO1FBQ25ELElBQUksY0FBYyxLQUFLLE9BQU8sY0FBdUMsQ0FBQyxDQUFDLENBQUM7UUFDeEUsSUFBSSxTQUFTLEtBQUssT0FBTyxTQUE2QixDQUFDLENBQUMsQ0FBQztRQUN6RCxJQUFJLFdBQVcsS0FBSyxPQUFPLFdBQWlDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksVUFBVSxLQUFLLE9BQU8sVUFBK0IsQ0FBQyxDQUFDLENBQUM7UUFDNUQsSUFBSSxtQkFBbUIsS0FBSyxPQUFPLG1CQUFpRCxDQUFDLENBQUMsQ0FBQztRQUN2RixJQUFJLElBQUksS0FBSyxPQUFPLElBQW1CLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQUksaUJBQWlCLEtBQUssT0FBTyxpQkFBNkMsQ0FBQyxDQUFDLENBQUM7S0FDcEYsRUFBRSxDQUFDLENBQUM7QUFDVCxtQkFBbUIsQ0FBQyxXQUFXLEdBQUcscUJBQXFCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkLCB7IHRoZW1lZCwgY3NzIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3R5bGVkJztcbmltcG9ydCB7IEljb24sIEljb25OYW1lIH0gZnJvbSAnLi4vSWNvbic7XG5pbXBvcnQgeyBQcm9ncmVzc1N0YXR1cyB9IGZyb20gJy4vRmlsZVVwbG9hZGVyRGV0YWlscy50eXBlcy5wYXJ0JztcbmltcG9ydCB7IGljb25OYW1lcyB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBBY3Rpb25JY29uQ29udGFpbmVyIH0gZnJvbSAnLi9BY3Rpb25JY29uQ29udGFpbmVyLnBhcnQnO1xuaW1wb3J0IHsgQWN0aW9uTGluayB9IGZyb20gJy4uL0FjdGlvbkxpbmsnO1xuaW1wb3J0IHsgUHJvZ3Jlc3NCYXIgfSBmcm9tICcuLi9Qcm9ncmVzc0Jhcic7XG5pbXBvcnQgeyBTdGF0dXNJY29uIH0gZnJvbSAnLi9TdGF0dXNJY29uLnBhcnQnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBnZXRQcm9wTGFiZWwsIFVwbG9hZGVyUHJvZ3Jlc3NCYXJMYWJlbHMsIENvbXBvbmVudExhYmVsIH0gZnJvbSAnLi4vLi4vdXRpbHMvbGFiZWxzJztcbmNvbnN0IFByb2dyZXNzQmFyV3JhcHBlciA9IHN0eWxlZC5kaXYodGhlbWVkKCh7IHRoZW1lIH0pID0+IGNzcyBgXG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDZweCAwIHJnYmEoNzUsIDc4LCA4MiwgMC4yKTtcbiAgICAgIGJvcmRlcjogc29saWQgMXB4ICR7dGhlbWUudWk0fTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUudGV4dDR9O1xuICAgIGApKTtcbmNvbnN0IFN0eWxlZFByb2dyZXNzQmFyID0gc3R5bGVkKFByb2dyZXNzQmFyKSBgXG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIGhlaWdodDogJHtkaXN0YW5jZS54c21hbGx9O1xuYDtcbmNvbnN0IEJhckluZm8gPSBzdHlsZWQuZGl2IGBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgbWluLWhlaWdodDogNTRweDtcbmA7XG5jb25zdCBTdGF0dXNCYXJHcm91cCA9IHN0eWxlZC5kaXYgYFxuICBwYWRkaW5nOiAke2Rpc3RhbmNlLnNtYWxsfTtcbmA7XG5jb25zdCBTdHlsZWRTdGF0dXNCYXIgPSBzdHlsZWQuZGl2IGBcbiAgcGFkZGluZzogJHtkaXN0YW5jZS5zbWFsbH07XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5gO1xuY29uc3QgQWN0aW9uR3JvdXAgPSBzdHlsZWQuZGl2IGBcbiAgcGFkZGluZzogJHtkaXN0YW5jZS5tZWRpdW19O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuYDtcbmV4cG9ydCBpbnRlcmZhY2UgU3RhdHVzQmFyUHJvcHMge1xuICAgIHN0YXR1czogUHJvZ3Jlc3NTdGF0dXM7XG4gICAgaWNvbk5hbWU6IEljb25OYW1lO1xuICAgIGNvdW50OiBudW1iZXI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBpdGVtUGx1cmFsTGFiZWw/OiBDb21wb25lbnRMYWJlbDtcbiAgICBpdGVtU2luZ3VsYXJMYWJlbD86IENvbXBvbmVudExhYmVsO1xufVxuY29uc3QgU3RhdHVzTGFiZWwgPSBzdHlsZWQuc3BhbiBgXG4gIHBhZGRpbmctbGVmdDogJHtkaXN0YW5jZS5tZWRpdW19O1xuYDtcbmZ1bmN0aW9uIFN0YXR1c0Jhcih7IHN0YXR1cywgY291bnQsIGljb25OYW1lLCB0aXRsZSwgLi4ucHJvcHMgfTogU3RhdHVzQmFyUHJvcHMpIHtcbiAgICByZXR1cm4gKDxTdHlsZWRTdGF0dXNCYXI+XG4gICAgICA8U3RhdHVzSWNvbiBuYW1lPXtpY29uTmFtZX0gdHlwZT17c3RhdHVzfS8+XG4gICAgICB7YCR7Y291bnR9ICR7Y291bnQgPiAxID8gZ2V0UHJvcExhYmVsKHByb3BzLCAnaXRlbVBsdXJhbExhYmVsJykgOiBnZXRQcm9wTGFiZWwocHJvcHMsICdpdGVtU2luZ3VsYXJMYWJlbCcpfWB9XG4gICAgICA8U3RhdHVzTGFiZWw+e3RpdGxlfTwvU3RhdHVzTGFiZWw+XG4gICAgPC9TdHlsZWRTdGF0dXNCYXI+KTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkZXJQcm9ncmVzc0JhclByb3BzIGV4dGVuZHMgVXBsb2FkZXJQcm9ncmVzc0JhckxhYmVscyB7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIHByb2dyZXNzIGZyb20gMCB0byAxMDAuXG4gICAgICovXG4gICAgcHJvZ3Jlc3NWYWx1ZTogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgc2Nhbm5pbmcgaXMgY3VycmVudGx5IGluIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHNjYW5uaW5nOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEV2ZW50IGVtaXR0ZWQgd2hlbiB0aGUgc3RhdHVzIHNob3VsZCBiZSBjbG9zZWQgZnVsbHkuXG4gICAgICovXG4gICAgb25DbG9zZSgpOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIEV2ZW50IGVtaXR0ZWQgd2hlbiBkZXRhaWxzIHNob3VsZCBiZSBzaG93bi5cbiAgICAgKi9cbiAgICBvblNob3coKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBUb3RhbCBudW1iZXIgb2YgZmlsZXMgdGhhdCBhcmUgYmVpbmcgdXBsb2FkZWQuXG4gICAgICovXG4gICAgdG90YWw6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgZmlsZXMgdGhhdCBhcmUgY3VycmVudGx5IGluIHByb2dyZXNzLlxuICAgICAqL1xuICAgIGluUHJvZ3Jlc3M6IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgZmlsZXMgdGhhdCBoYXZlIGZhaWxlZC5cbiAgICAgKi9cbiAgICBlcnJvcnM6IG51bWJlcjtcbn1cbmV4cG9ydCBjb25zdCBVcGxvYWRlclByb2dyZXNzQmFyID0gT2JqZWN0LmFzc2lnbigoKCh7IHRvdGFsLCBvbkNsb3NlLCBvblNob3csIHByb2dyZXNzVmFsdWUsIGluUHJvZ3Jlc3MsIHNjYW5uaW5nLCBlcnJvcnMsIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBjb21wbGV0ZWQgPSBwcm9ncmVzc1ZhbHVlID49IDEwMDtcbiAgICByZXR1cm4gKDxQcm9ncmVzc0JhcldyYXBwZXI+XG4gICAgICA8QmFySW5mbz5cbiAgICAgICAgPFN0YXR1c0Jhckdyb3VwPlxuICAgICAgICAgIHshY29tcGxldGVkIHx8IHNjYW5uaW5nID8gKGluUHJvZ3Jlc3MgPiAwICYmICg8U3RhdHVzQmFyIHsuLi5wcm9wc30gY291bnQ9e3RvdGFsfSBpY29uTmFtZT17aWNvbk5hbWVzLnByb2dyZXNzfSB0aXRsZT17Y29tcGxldGVkICYmIHNjYW5uaW5nXG4gICAgICAgID8gZ2V0UHJvcExhYmVsKHByb3BzLCAndXBsb2FkU2Nhbm5pbmdMYWJlbCcpXG4gICAgICAgIDogZ2V0UHJvcExhYmVsKHByb3BzLCAndXBsb2FkUHJvZ3Jlc3NMYWJlbCcpfSBzdGF0dXM9e2NvbXBsZXRlZCAmJiBzY2FubmluZyA/ICdzY2FubmluZycgOiAncHJvZ3Jlc3MnfS8+KSkgOiAoPD5cbiAgICAgICAgICAgICAge2luUHJvZ3Jlc3MgPiAwICYmICg8U3RhdHVzQmFyIHsuLi5wcm9wc30gY291bnQ9e2luUHJvZ3Jlc3N9IGljb25OYW1lPXtpY29uTmFtZXMuc3VjY2Vzc30gdGl0bGU9e2dldFByb3BMYWJlbChwcm9wcywgJ3VwbG9hZFN1Y2Nlc3NMYWJlbCcpfSBzdGF0dXM9XCJzdWNjZXNzXCIvPil9XG4gICAgICAgICAgICAgIHtlcnJvcnMgPiAwICYmICg8U3RhdHVzQmFyIHsuLi5wcm9wc30gY291bnQ9e2Vycm9yc30gaWNvbk5hbWU9e2ljb25OYW1lcy5lcnJvcn0gdGl0bGU9e2dldFByb3BMYWJlbChwcm9wcywgJ3VwbG9hZEVycm9yTGFiZWwnKX0gc3RhdHVzPVwiZXJyb3JcIi8+KX1cbiAgICAgICAgICAgIDwvPil9XG4gICAgICAgIDwvU3RhdHVzQmFyR3JvdXA+XG4gICAgICAgIDxBY3Rpb25Hcm91cD5cbiAgICAgICAgICA8QWN0aW9uTGluayBvbkNsaWNrPXtvblNob3d9PntnZXRQcm9wTGFiZWwocHJvcHMsICd2aWV3RGV0YWlsc0xhYmVsJyl9PC9BY3Rpb25MaW5rPlxuICAgICAgICAgIHtjb21wbGV0ZWQgJiYgIXNjYW5uaW5nICYmICg8QWN0aW9uSWNvbkNvbnRhaW5lciBvbkNsaWNrPXtvbkNsb3NlfT5cbiAgICAgICAgICAgICAgPEljb24gbmFtZT1cIkNsb3NlXCIvPlxuICAgICAgICAgICAgPC9BY3Rpb25JY29uQ29udGFpbmVyPil9XG4gICAgICAgIDwvQWN0aW9uR3JvdXA+XG4gICAgICA8L0JhckluZm8+XG4gICAgICB7IWNvbXBsZXRlZCAmJiA8U3R5bGVkUHJvZ3Jlc3NCYXIgdmFsdWU9e3Byb2dyZXNzVmFsdWV9IGFuaW1hdGUvPn1cbiAgICA8L1Byb2dyZXNzQmFyV3JhcHBlcj4pO1xufSkgYXMgUmVhY3QuU0ZDPFVwbG9hZGVyUHJvZ3Jlc3NCYXJQcm9wcz4pLCB7IGlubmVyOiB7XG4gICAgICAgIGdldCBQcm9ncmVzc0JhcldyYXBwZXIoKSB7IHJldHVybiBQcm9ncmVzc0JhcldyYXBwZXIgYXMgdHlwZW9mIFByb2dyZXNzQmFyV3JhcHBlcjsgfSxcbiAgICAgICAgZ2V0IEJhckluZm8oKSB7IHJldHVybiBCYXJJbmZvIGFzIHR5cGVvZiBCYXJJbmZvOyB9LFxuICAgICAgICBnZXQgU3RhdHVzQmFyR3JvdXAoKSB7IHJldHVybiBTdGF0dXNCYXJHcm91cCBhcyB0eXBlb2YgU3RhdHVzQmFyR3JvdXA7IH0sXG4gICAgICAgIGdldCBTdGF0dXNCYXIoKSB7IHJldHVybiBTdGF0dXNCYXIgYXMgdHlwZW9mIFN0YXR1c0JhcjsgfSxcbiAgICAgICAgZ2V0IEFjdGlvbkdyb3VwKCkgeyByZXR1cm4gQWN0aW9uR3JvdXAgYXMgdHlwZW9mIEFjdGlvbkdyb3VwOyB9LFxuICAgICAgICBnZXQgQWN0aW9uTGluaygpIHsgcmV0dXJuIEFjdGlvbkxpbmsgYXMgdHlwZW9mIEFjdGlvbkxpbms7IH0sXG4gICAgICAgIGdldCBBY3Rpb25JY29uQ29udGFpbmVyKCkgeyByZXR1cm4gQWN0aW9uSWNvbkNvbnRhaW5lciBhcyB0eXBlb2YgQWN0aW9uSWNvbkNvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IEljb24oKSB7IHJldHVybiBJY29uIGFzIHR5cGVvZiBJY29uOyB9LFxuICAgICAgICBnZXQgU3R5bGVkUHJvZ3Jlc3NCYXIoKSB7IHJldHVybiBTdHlsZWRQcm9ncmVzc0JhciBhcyB0eXBlb2YgU3R5bGVkUHJvZ3Jlc3NCYXI7IH1cbiAgICB9IH0pO1xuVXBsb2FkZXJQcm9ncmVzc0Jhci5kaXNwbGF5TmFtZSA9ICdVcGxvYWRlclByb2dyZXNzQmFyJztcbiJdfQ==