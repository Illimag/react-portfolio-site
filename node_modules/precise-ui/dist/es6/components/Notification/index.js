var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
import * as React from 'react';
import * as colors from '../../colors';
import styled, { themed, css } from '../../utils/styled';
import { distance } from '../../distance';
import { IconLink } from '../IconLink';
import { Icon } from '../Icon';
import { getFontStyle } from '../../textStyles';
function getNotificationColor(type = 'none', theme) {
    switch (type) {
        case 'success':
            return theme.notificationColorSuccess;
        case 'info':
            return theme.notificationColorInfo;
        case 'warning':
            return theme.notificationColorWarning;
        case 'error':
            return theme.notificationColorError;
        case 'none':
        default:
            return theme.notificationColorNone;
    }
}
function getNotificationIcon(type = 'none') {
    switch (type) {
        case 'success':
            return 'CheckCircle';
        case 'info':
            return 'Info';
        case 'warning':
            return 'Warning';
        case 'error':
            return 'Error';
        case 'none':
        default:
            return 'Notifications';
    }
}
const StyledNotification = styled.div(themed(({ closed, type, theme }) => `
  position: relative;
  display: ${closed ? 'none' : 'flex'};
  background: #fff;
  border-style: solid;
  border-color: ${getNotificationColor(type, theme)};
  margin-bottom: ${distance.small};
  padding: ${theme.notificationPadding};
  box-shadow: ${theme.notificationBoxShadow};
  border-width: ${theme.notificationBorderWidth};
`));
const StyledTitle = styled.div(themed(({ theme: { notificationTitleFontSize, notificationTitleLineHeight } }) => `
  font-family: inherit;
  font-size: ${notificationTitleFontSize};
  line-height: ${notificationTitleLineHeight};
  color: #404040;
  margin-right: ${distance.small};
`));
const ContentWrapper = styled.span `
  display: contents;
`;
const StyledContent = styled.div(themed(({ inline, theme: { notificationTextFontSize, notificationTextLineHeight } }) => `
  display: ${inline ? 'inline' : 'block'};
  font-family: inherit;
  font-size: ${notificationTextFontSize};
  line-height: ${notificationTextLineHeight};
  color: #404040;
  margin-right: ${distance.small};
`));
const ActionContainer = styled('div') `
  display: ${props => (props.inline ? 'inline' : 'block')};
`;
const CloseButton = styled(IconLink) `
  ${getFontStyle({ size: 'medium' })}

  position: absolute;
  right: ${distance.small};
  top: ${distance.small};
  background-color: ${colors.transparent};
  color: ${colors.black};
  padding: 0;
  border: none;
  outline: none;
`;
const LayoutVertical = css `
  display: flex;
  flex-direction: column;
`;
const LayoutInline = css `
  display: block;
`;
const ContentContainer = styled.div `
  ${props => (props.inline ? LayoutInline : LayoutVertical)};
  margin-right: ${distance.medium};
  width: 100%;
`;
const IconContainer = styled.div(themed(({ theme: { notificationIconMarginRight } }) => css `
      margin-right: ${notificationIconMarginRight};
    `));
const StyledIconInt = Object.assign(((_a) => {
    var { type: _0 } = _a, props = __rest(_a, ["type"]);
    return React.createElement(Icon, Object.assign({}, props));
}), { inner: {
        get Icon() { return Icon; }
    } });
const StyledIcon = styled(StyledIconInt) `
  color: ${themed(props => getNotificationColor(props.type, props.theme))};
`;
/**
 * The Notification component for rendering an inline notification message.
 */
export class Notification extends React.Component {
    constructor(props) {
        super(props);
        this.onCloseHandler = (e) => {
            const { onClose, closeable } = this.props;
            if (typeof onClose === 'function' && closeable) {
                const selfClose = onClose(e);
                if (selfClose === false) {
                    return;
                }
            }
            this.setState({ closed: true });
        };
        this.state = {
            closed: false,
        };
    }
    render() {
        const _a = this.props, { type = 'none', children, title, actionRenderer, theme, style, closeable } = _a, other = __rest(_a, ["type", "children", "title", "actionRenderer", "theme", "style", "closeable"]);
        const { closed } = this.state;
        const isInline = !title;
        return (React.createElement(StyledNotification, Object.assign({ theme: theme, closed: closed, type: type }, other),
            React.createElement(IconContainer, { theme: theme },
                React.createElement(StyledIcon, { type: type, name: getNotificationIcon(type), size: "22px", theme: theme })),
            React.createElement(ContentContainer, { inline: isInline },
                title && React.createElement(StyledTitle, { theme: theme }, title),
                React.createElement(StyledContent, { inline: isInline, theme: theme }, children),
                React.createElement(ActionContainer, { inline: isInline },
                    React.createElement(ContentWrapper, { onClick: this.onCloseHandler }, actionRenderer && actionRenderer()))),
            closeable && React.createElement(CloseButton, { onClick: this.onCloseHandler, icon: "Close" })));
    }
}
Notification.defaultProps = {
    closeable: true,
};
Notification.inner = {
    get StyledNotification() { return StyledNotification; },
    get IconContainer() { return IconContainer; },
    get StyledIcon() { return StyledIcon; },
    get ContentContainer() { return ContentContainer; },
    get StyledTitle() { return StyledTitle; },
    get StyledContent() { return StyledContent; },
    get ActionContainer() { return ActionContainer; },
    get ContentWrapper() { return ContentWrapper; },
    get CloseButton() { return CloseButton; }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Ob3RpZmljYXRpb24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sS0FBSyxNQUFNLE1BQU0sY0FBYyxDQUFDO0FBQ3ZDLE9BQU8sTUFBTSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXpELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUxQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxJQUFJLEVBQWEsTUFBTSxTQUFTLENBQUM7QUFDMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBaUNoRCxTQUFTLG9CQUFvQixDQUFDLE9BQXlCLE1BQU0sRUFBRSxLQUF1QjtJQUNsRixRQUFRLElBQUksRUFBRTtRQUNWLEtBQUssU0FBUztZQUNWLE9BQU8sS0FBSyxDQUFDLHdCQUF3QixDQUFDO1FBQzFDLEtBQUssTUFBTTtZQUNQLE9BQU8sS0FBSyxDQUFDLHFCQUFxQixDQUFDO1FBQ3ZDLEtBQUssU0FBUztZQUNWLE9BQU8sS0FBSyxDQUFDLHdCQUF3QixDQUFDO1FBQzFDLEtBQUssT0FBTztZQUNSLE9BQU8sS0FBSyxDQUFDLHNCQUFzQixDQUFDO1FBQ3hDLEtBQUssTUFBTSxDQUFDO1FBQ1o7WUFDSSxPQUFPLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQztLQUMxQztBQUNMLENBQUM7QUFDRCxTQUFTLG1CQUFtQixDQUFDLE9BQXlCLE1BQU07SUFDeEQsUUFBUSxJQUFJLEVBQUU7UUFDVixLQUFLLFNBQVM7WUFDVixPQUFPLGFBQWEsQ0FBQztRQUN6QixLQUFLLE1BQU07WUFDUCxPQUFPLE1BQU0sQ0FB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SSxhQUFhLEtBQUssT0FBTyxhQUFxQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxJQUFJLFVBQVUsS0FBSyxPQUFPLFVBQStCLENBQUMsQ0FBQyxDQUFDO0lBQzVELElBQUksZ0JBQWdCLEtBQUssT0FBTyxnQkFBMkMsQ0FBQyxDQUFDLENBQUM7SUFDOUUsSUFBSSxXQUFXLEtBQUssT0FBTyxXQUFpQyxDQUFDLENBQUMsQ0FBQztJQUMvRCxJQUFJLGFBQWEsS0FBSyxPQUFPLGFBQXFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLElBQUksZUFBZSxLQUFLLE9BQU8sZUFBeUMsQ0FBQyxDQUFDLENBQUM7SUFDM0UsSUFBSSxjQUFjLEtBQUssT0FBTyxjQUF1QyxDQUFDLENBQUMsQ0FBQztJQUN4RSxJQUFJLFdBQVcsS0FBSyxPQUFPLFdBQWlDLENBQUMsQ0FBQyxDQUFDO0NBQ2xFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBjb2xvcnMgZnJvbSAnLi4vLi4vY29sb3JzJztcbmltcG9ydCBzdHlsZWQsIHsgdGhlbWVkLCBjc3MgfSBmcm9tICcuLi8uLi91dGlscy9zdHlsZWQnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uVHlwZSB9IGZyb20gJy4uL05vdGlmaWNhdGlvbnMvdHlwZXMnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBTdGFuZGFyZFByb3BzLCBQcmVjaXNlRnVsbFRoZW1lIH0gZnJvbSAnLi4vLi4vY29tbW9uJztcbmltcG9ydCB7IEljb25MaW5rIH0gZnJvbSAnLi4vSWNvbkxpbmsnO1xuaW1wb3J0IHsgSWNvbiwgSWNvblByb3BzIH0gZnJvbSAnLi4vSWNvbic7XG5pbXBvcnQgeyBnZXRGb250U3R5bGUgfSBmcm9tICcuLi8uLi90ZXh0U3R5bGVzJztcbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uUHJvcHMgZXh0ZW5kcyBTdGFuZGFyZFByb3BzIHtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0eXBlIG9mIHRoZSBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgdHlwZT86IE5vdGlmaWNhdGlvblR5cGU7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGl0bGUgb2YgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlLlxuICAgICAqL1xuICAgIHRpdGxlPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsbHkgcHJvdmlkZXMgYSBjdXN0b20gd2F5IGZvciByZW5kZXJpbmcgYW4gYWN0aW9uIGNvbnRyb2wuXG4gICAgICogSWYgYGNsb3NlYWJsZWAgaXMgc2V0IHRvIGB0cnVlYCwgY2xpY2tpbmcgb24gdGhlIGFjdGlvbiBlbGVtZW50IHdpbGwgYWxzbyB0cmlnZ2VyIGFuIGBvbkNsb3NlYCBldmVudC5cbiAgICAgKi9cbiAgICBhY3Rpb25SZW5kZXJlcj8oKTogUmVhY3QuUmVhY3RDaGlsZDtcbiAgICAvKipcbiAgICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBjbG9zZSBhY3Rpb24gdHJpZ2dlcmVkLiBSZXR1cm4gYGZhbHNlYCBpZiBkb24ndFxuICAgICAqIHdhbnQgbm90aWZpY2F0aW9uIHRvIHNlbGYtY2xvc2UgYWZ0ZXIgZXZlbnQgd2FzIHBsYXllZC5cbiAgICAgKi9cbiAgICBvbkNsb3NlPyhlOiBSZWFjdC5Nb3VzZUV2ZW50KTogYm9vbGVhbiB8IHZvaWQ7XG4gICAgLyoqXG4gICAgICogU2V0cyBpZiB0aGUgbm90aWZpY2F0aW9uIGNhbiBiZSBjbG9zZWQgb3Igbm90LlxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBjbG9zZWFibGU/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb25TdGF0ZSB7XG4gICAgY2xvc2VkOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdHlsZWROb3RpZmljYXRpb25Qcm9wcyB7XG4gICAgY2xvc2VkOiBib29sZWFuO1xuICAgIHR5cGU6IE5vdGlmaWNhdGlvblR5cGU7XG59XG5mdW5jdGlvbiBnZXROb3RpZmljYXRpb25Db2xvcih0eXBlOiBOb3RpZmljYXRpb25UeXBlID0gJ25vbmUnLCB0aGVtZTogUHJlY2lzZUZ1bGxUaGVtZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgICAgIHJldHVybiB0aGVtZS5ub3RpZmljYXRpb25Db2xvclN1Y2Nlc3M7XG4gICAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICAgICAgcmV0dXJuIHRoZW1lLm5vdGlmaWNhdGlvbkNvbG9ySW5mbztcbiAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUubm90aWZpY2F0aW9uQ29sb3JXYXJuaW5nO1xuICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUubm90aWZpY2F0aW9uQ29sb3JFcnJvcjtcbiAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUubm90aWZpY2F0aW9uQ29sb3JOb25lO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbkljb24odHlwZTogTm90aWZpY2F0aW9uVHlwZSA9ICdub25lJykge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgICAgIHJldHVybiAnQ2hlY2tDaXJjbGUnO1xuICAgICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgICAgIHJldHVybiAnSW5mbyc7XG4gICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICAgICAgcmV0dXJuICdXYXJuaW5nJztcbiAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgcmV0dXJuICdFcnJvcic7XG4gICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdOb3RpZmljYXRpb25zJztcbiAgICB9XG59XG5pbnRlcmZhY2UgTGF5b3V0UHJvcHMge1xuICAgIGlubGluZTogYm9vbGVhbjtcbn1cbmNvbnN0IFN0eWxlZE5vdGlmaWNhdGlvbiA9IHN0eWxlZC5kaXY8U3R5bGVkTm90aWZpY2F0aW9uUHJvcHM+KHRoZW1lZCgoeyBjbG9zZWQsIHR5cGUsIHRoZW1lIH0pID0+IGBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiAke2Nsb3NlZCA/ICdub25lJyA6ICdmbGV4J307XG4gIGJhY2tncm91bmQ6ICNmZmY7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogJHtnZXROb3RpZmljYXRpb25Db2xvcih0eXBlLCB0aGVtZSl9O1xuICBtYXJnaW4tYm90dG9tOiAke2Rpc3RhbmNlLnNtYWxsfTtcbiAgcGFkZGluZzogJHt0aGVtZS5ub3RpZmljYXRpb25QYWRkaW5nfTtcbiAgYm94LXNoYWRvdzogJHt0aGVtZS5ub3RpZmljYXRpb25Cb3hTaGFkb3d9O1xuICBib3JkZXItd2lkdGg6ICR7dGhlbWUubm90aWZpY2F0aW9uQm9yZGVyV2lkdGh9O1xuYCkpO1xuY29uc3QgU3R5bGVkVGl0bGUgPSBzdHlsZWQuZGl2KHRoZW1lZCgoeyB0aGVtZTogeyBub3RpZmljYXRpb25UaXRsZUZvbnRTaXplLCBub3RpZmljYXRpb25UaXRsZUxpbmVIZWlnaHQgfSB9KSA9PiBgXG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICBmb250LXNpemU6ICR7bm90aWZpY2F0aW9uVGl0bGVGb250U2l6ZX07XG4gIGxpbmUtaGVpZ2h0OiAke25vdGlmaWNhdGlvblRpdGxlTGluZUhlaWdodH07XG4gIGNvbG9yOiAjNDA0MDQwO1xuICBtYXJnaW4tcmlnaHQ6ICR7ZGlzdGFuY2Uuc21hbGx9O1xuYCkpO1xuY29uc3QgQ29udGVudFdyYXBwZXIgPSBzdHlsZWQuc3BhbiBgXG4gIGRpc3BsYXk6IGNvbnRlbnRzO1xuYDtcbmNvbnN0IFN0eWxlZENvbnRlbnQgPSBzdHlsZWQuZGl2PExheW91dFByb3BzPih0aGVtZWQoKHsgaW5saW5lLCB0aGVtZTogeyBub3RpZmljYXRpb25UZXh0Rm9udFNpemUsIG5vdGlmaWNhdGlvblRleHRMaW5lSGVpZ2h0IH0gfSkgPT4gYFxuICBkaXNwbGF5OiAke2lubGluZSA/ICdpbmxpbmUnIDogJ2Jsb2NrJ307XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICBmb250LXNpemU6ICR7bm90aWZpY2F0aW9uVGV4dEZvbnRTaXplfTtcbiAgbGluZS1oZWlnaHQ6ICR7bm90aWZpY2F0aW9uVGV4dExpbmVIZWlnaHR9O1xuICBjb2xvcjogIzQwNDA0MDtcbiAgbWFyZ2luLXJpZ2h0OiAke2Rpc3RhbmNlLnNtYWxsfTtcbmApKTtcbmNvbnN0IEFjdGlvbkNvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jyk8TGF5b3V0UHJvcHM+IGBcbiAgZGlzcGxheTogJHtwcm9wcyA9PiAocHJvcHMuaW5saW5lID8gJ2lubGluZScgOiAnYmxvY2snKX07XG5gO1xuY29uc3QgQ2xvc2VCdXR0b24gPSBzdHlsZWQoSWNvbkxpbmspIGBcbiAgJHtnZXRGb250U3R5bGUoeyBzaXplOiAnbWVkaXVtJyB9KX1cblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAke2Rpc3RhbmNlLnNtYWxsfTtcbiAgdG9wOiAke2Rpc3RhbmNlLnNtYWxsfTtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcnMudHJhbnNwYXJlbnR9O1xuICBjb2xvcjogJHtjb2xvcnMuYmxhY2t9O1xuICBwYWRkaW5nOiAwO1xuICBib3JkZXI6IG5vbmU7XG4gIG91dGxpbmU6IG5vbmU7XG5gO1xuY29uc3QgTGF5b3V0VmVydGljYWwgPSBjc3MgYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuYDtcbmNvbnN0IExheW91dElubGluZSA9IGNzcyBgXG4gIGRpc3BsYXk6IGJsb2NrO1xuYDtcbmNvbnN0IENvbnRlbnRDb250YWluZXIgPSBzdHlsZWQuZGl2PExheW91dFByb3BzPiBgXG4gICR7cHJvcHMgPT4gKHByb3BzLmlubGluZSA/IExheW91dElubGluZSA6IExheW91dFZlcnRpY2FsKX07XG4gIG1hcmdpbi1yaWdodDogJHtkaXN0YW5jZS5tZWRpdW19O1xuICB3aWR0aDogMTAwJTtcbmA7XG5jb25zdCBJY29uQ29udGFpbmVyID0gc3R5bGVkLmRpdih0aGVtZWQoKHsgdGhlbWU6IHsgbm90aWZpY2F0aW9uSWNvbk1hcmdpblJpZ2h0IH0gfSkgPT4gY3NzIGBcbiAgICAgIG1hcmdpbi1yaWdodDogJHtub3RpZmljYXRpb25JY29uTWFyZ2luUmlnaHR9O1xuICAgIGApKTtcbmludGVyZmFjZSBTdHlsZWRJY29uUHJvcHMgZXh0ZW5kcyBJY29uUHJvcHMge1xuICAgIHR5cGU6IE5vdGlmaWNhdGlvblR5cGU7XG59XG5jb25zdCBTdHlsZWRJY29uSW50ID0gT2JqZWN0LmFzc2lnbigoKCh7IHR5cGU6IF8wLCAuLi5wcm9wcyB9KSA9PiA8SWNvbiB7Li4ucHJvcHN9Lz4pIGFzIFJlYWN0LlNGQzxTdHlsZWRJY29uUHJvcHM+KSwgeyBpbm5lcjoge1xuICAgICAgICBnZXQgSWNvbigpIHsgcmV0dXJuIEljb24gYXMgdHlwZW9mIEljb247IH1cbiAgICB9IH0pO1xuY29uc3QgU3R5bGVkSWNvbiA9IHN0eWxlZChTdHlsZWRJY29uSW50KTxTdHlsZWRJY29uUHJvcHM+IGBcbiAgY29sb3I6ICR7dGhlbWVkKHByb3BzID0+IGdldE5vdGlmaWNhdGlvbkNvbG9yKHByb3BzLnR5cGUsIHByb3BzLnRoZW1lKSl9O1xuYDtcbi8qKlxuICogVGhlIE5vdGlmaWNhdGlvbiBjb21wb25lbnQgZm9yIHJlbmRlcmluZyBhbiBpbmxpbmUgbm90aWZpY2F0aW9uIG1lc3NhZ2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Tm90aWZpY2F0aW9uUHJvcHMsIE5vdGlmaWNhdGlvblN0YXRlPiB7XG4gICAgY29uc3RydWN0b3IocHJvcHM6IE5vdGlmaWNhdGlvblByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNsb3NlZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNsb3NlYWJsZTogdHJ1ZSxcbiAgICB9O1xuICAgIHByaXZhdGUgb25DbG9zZUhhbmRsZXIgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uQ2xvc2UsIGNsb3NlYWJsZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNsb3NlID09PSAnZnVuY3Rpb24nICYmIGNsb3NlYWJsZSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZkNsb3NlID0gb25DbG9zZShlKTtcbiAgICAgICAgICAgIGlmIChzZWxmQ2xvc2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjbG9zZWQ6IHRydWUgfSk7XG4gICAgfTtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSA9ICdub25lJywgY2hpbGRyZW4sIHRpdGxlLCBhY3Rpb25SZW5kZXJlciwgdGhlbWUsIHN0eWxlLCBjbG9zZWFibGUsIC4uLm90aGVyIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IGNsb3NlZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgaXNJbmxpbmUgPSAhdGl0bGU7XG4gICAgICAgIHJldHVybiAoPFN0eWxlZE5vdGlmaWNhdGlvbiB0aGVtZT17dGhlbWV9IGNsb3NlZD17Y2xvc2VkfSB0eXBlPXt0eXBlfSB7Li4ub3RoZXJ9PlxuICAgICAgICA8SWNvbkNvbnRhaW5lciB0aGVtZT17dGhlbWV9PlxuICAgICAgICAgIDxTdHlsZWRJY29uIHR5cGU9e3R5cGV9IG5hbWU9e2dldE5vdGlmaWNhdGlvbkljb24odHlwZSl9IHNpemU9XCIyMnB4XCIgdGhlbWU9e3RoZW1lfS8+XG4gICAgICAgIDwvSWNvbkNvbnRhaW5lcj5cbiAgICAgICAgPENvbnRlbnRDb250YWluZXIgaW5saW5lPXtpc0lubGluZX0+XG4gICAgICAgICAge3RpdGxlICYmIDxTdHlsZWRUaXRsZSB0aGVtZT17dGhlbWV9Pnt0aXRsZX08L1N0eWxlZFRpdGxlPn1cbiAgICAgICAgICA8U3R5bGVkQ29udGVudCBpbmxpbmU9e2lzSW5saW5lfSB0aGVtZT17dGhlbWV9PlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvU3R5bGVkQ29udGVudD5cbiAgICAgICAgICA8QWN0aW9uQ29udGFpbmVyIGlubGluZT17aXNJbmxpbmV9PlxuICAgICAgICAgICAgPENvbnRlbnRXcmFwcGVyIG9uQ2xpY2s9e3RoaXMub25DbG9zZUhhbmRsZXJ9PnthY3Rpb25SZW5kZXJlciAmJiBhY3Rpb25SZW5kZXJlcigpfTwvQ29udGVudFdyYXBwZXI+XG4gICAgICAgICAgPC9BY3Rpb25Db250YWluZXI+XG4gICAgICAgIDwvQ29udGVudENvbnRhaW5lcj5cbiAgICAgICAge2Nsb3NlYWJsZSAmJiA8Q2xvc2VCdXR0b24gb25DbGljaz17dGhpcy5vbkNsb3NlSGFuZGxlcn0gaWNvbj1cIkNsb3NlXCIvPn1cbiAgICAgIDwvU3R5bGVkTm90aWZpY2F0aW9uPik7XG4gICAgfVxuICAgIHN0YXRpYyBpbm5lciA9IHtcbiAgICAgICAgZ2V0IFN0eWxlZE5vdGlmaWNhdGlvbigpIHsgcmV0dXJuIFN0eWxlZE5vdGlmaWNhdGlvbiBhcyB0eXBlb2YgU3R5bGVkTm90aWZpY2F0aW9uOyB9LFxuICAgICAgICBnZXQgSWNvbkNvbnRhaW5lcigpIHsgcmV0dXJuIEljb25Db250YWluZXIgYXMgdHlwZW9mIEljb25Db250YWluZXI7IH0sXG4gICAgICAgIGdldCBTdHlsZWRJY29uKCkgeyByZXR1cm4gU3R5bGVkSWNvbiBhcyB0eXBlb2YgU3R5bGVkSWNvbjsgfSxcbiAgICAgICAgZ2V0IENvbnRlbnRDb250YWluZXIoKSB7IHJldHVybiBDb250ZW50Q29udGFpbmVyIGFzIHR5cGVvZiBDb250ZW50Q29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgU3R5bGVkVGl0bGUoKSB7IHJldHVybiBTdHlsZWRUaXRsZSBhcyB0eXBlb2YgU3R5bGVkVGl0bGU7IH0sXG4gICAgICAgIGdldCBTdHlsZWRDb250ZW50KCkgeyByZXR1cm4gU3R5bGVkQ29udGVudCBhcyB0eXBlb2YgU3R5bGVkQ29udGVudDsgfSxcbiAgICAgICAgZ2V0IEFjdGlvbkNvbnRhaW5lcigpIHsgcmV0dXJuIEFjdGlvbkNvbnRhaW5lciBhcyB0eXBlb2YgQWN0aW9uQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgQ29udGVudFdyYXBwZXIoKSB7IHJldHVybiBDb250ZW50V3JhcHBlciBhcyB0eXBlb2YgQ29udGVudFdyYXBwZXI7IH0sXG4gICAgICAgIGdldCBDbG9zZUJ1dHRvbigpIHsgcmV0dXJuIENsb3NlQnV0dG9uIGFzIHR5cGVvZiBDbG9zZUJ1dHRvbjsgfVxuICAgIH07XG59XG4iXX0=