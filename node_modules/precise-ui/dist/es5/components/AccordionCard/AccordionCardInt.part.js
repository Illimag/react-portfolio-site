"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var styled_1 = require("../../utils/styled");
var distance_1 = require("../../distance");
var labels_1 = require("../../utils/labels");
var textStyles_1 = require("../../textStyles");
labels_1.setLabels({
    openLabel: 'Open Details',
    closeLabel: 'Close Details',
});
var animationDuration = '0.3s';
var animationFunction = 'cubic-bezier(0, 0, 0.25, 1)';
var StyledContainer = styled_1.default('div')(styled_1.themed(function (_a) {
    var open = _a.open, _b = _a.theme, _c = _b.accordionCard, borderColor = _c.borderColor, openedBorderColor = _c.openedBorderColor, text1 = _b.text1;
    return "\n    " + textStyles_1.getFontStyle({ size: 'medium' }) + "\n    \n    position: relative;\n    color: " + text1 + ";\n    border: 1px solid " + (open ? openedBorderColor : borderColor) + ";\n  ";
}));
var StyledHeaderContainer = styled_1.default('div')(styled_1.themed(function (_a) {
    var open = _a.open, _b = _a.theme.accordionCard, headerPadding = _b.headerPadding, openedHeaderBorderColor = _b.openedHeaderBorderColor, openedHeaderBackground = _b.openedHeaderBackground, headerBackground = _b.headerBackground;
    return "\n      padding: " + headerPadding + ";\n      background: " + (open ? openedHeaderBackground : headerBackground) + ";\n      border-bottom: " + (open ? "1px solid " + openedHeaderBorderColor : 'none') + ";\n    ";
}));
exports.StyledActionContainer = styled_1.default.div(styled_1.themed(function (_a) {
    var open = _a.open, _b = _a.theme, ui0 = _b.ui0, ui1 = _b.ui1;
    return styled_1.css(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n      text-align: center;\n      padding: ", " ", ";\n      cursor: pointer;\n      background: ", ";\n      border: ", ";\n      margin: -1px -1px -1px -1px;\n      color: ", ";\n    "], ["\n      text-align: center;\n      padding: ", " ", ";\n      cursor: pointer;\n      background: ", ";\n      border: ", ";\n      margin: -1px -1px -1px -1px;\n      color: ", ";\n    "])), distance_1.distance.small, distance_1.distance.medium, open ? ui1 : ui0, open ? "1px solid " + ui0 : 'none', open ? ui0 : ui1);
}));
var StyledDetailsContainerAnimator = styled_1.default('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  transition: all ", " ", ";\n  max-height: ", ";\n  opacity: ", ";\n  overflow: hidden;\n"], ["\n  transition: all ", " ", ";\n  max-height: ", ";\n  opacity: ", ";\n  overflow: hidden;\n"])), animationDuration, animationFunction, function (_a) {
    var open = _a.open;
    return (open ? '10000px' : '0');
}, function (_a) {
    var open = _a.open;
    return (open ? '1' : '0');
});
var AccordionCard = /** @class */ (function (_super) {
    __extends(AccordionCard, _super);
    function AccordionCard(props) {
        var _this = _super.call(this, props) || this;
        _this.handleClick = function () {
            var onActionClick = _this.props.onActionClick;
            var _a = _this.state, opened = _a.opened, controlled = _a.controlled;
            !controlled && _this.setState({ opened: !opened });
            if (typeof onActionClick === 'function') {
                onActionClick({ opened: controlled ? opened : !opened });
            }
        };
        _this.renderDefaultAction = function (_) {
            var theme = _this.props.theme;
            var opened = _this.state.opened;
            return (React.createElement(exports.StyledActionContainer, { theme: theme, onClick: _this.handleClick, open: opened }, labels_1.getPropLabel(_this.props, opened ? 'closeLabel' : 'openLabel')));
        };
        _this.state = {
            opened: props.opened !== undefined ? props.opened : false,
            controlled: props.opened !== undefined,
        };
        return _this;
    }
    AccordionCard.getDerivedStateFromProps = function (props, state) {
        return state.controlled ? { opened: props.opened } : {};
    };
    AccordionCard.prototype.renderActions = function () {
        var _a = this.props.renderAction, renderAction = _a === void 0 ? this.renderDefaultAction : _a;
        var opened = this.state.opened;
        return renderAction({ opened: opened });
    };
    AccordionCard.prototype.render = function () {
        var _a = this.props, _0 = _a.onActionClick, theme = _a.theme, children = _a.children, header = _a.header, props = __rest(_a, ["onActionClick", "theme", "children", "header"]);
        var opened = this.state.opened;
        return (React.createElement(StyledContainer, __assign({}, props, { theme: theme, open: opened }),
            React.createElement(StyledHeaderContainer, { theme: theme, open: opened }, header),
            React.createElement(StyledDetailsContainerAnimator, { theme: theme, open: opened }, children),
            this.renderActions()));
    };
    AccordionCard.inner = {
        get StyledActionContainer() { return exports.StyledActionContainer; },
        get StyledContainer() { return StyledContainer; },
        get StyledHeaderContainer() { return StyledHeaderContainer; },
        get StyledDetailsContainerAnimator() { return StyledDetailsContainerAnimator; }
    };
    return AccordionCard;
}(React.Component));
exports.AccordionCard = AccordionCard;
var templateObject_1, templateObject_2;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjb3JkaW9uQ2FyZEludC5wYXJ0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQWNjb3JkaW9uQ2FyZC9BY2NvcmRpb25DYXJkSW50LnBhcnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZCQUErQjtBQUMvQiw2Q0FBeUQ7QUFDekQsMkNBQTBDO0FBRTFDLDZDQUFrRjtBQUNsRiwrQ0FBZ0Q7QUFDaEQsa0JBQVMsQ0FBQztJQUNOLFNBQVMsRUFBRSxjQUFjO0lBQ3pCLFVBQVUsRUFBRSxlQUFlO0NBQzlCLENBQUMsQ0FBQztBQUNILElBQU0saUJBQWlCLEdBQUcsTUFBTSxDQUFDO0FBQ2pDLElBQU0saUJBQWlCLEdBQUcsNkJBQTZCLENBQUM7QUFLeEQsSUFBTSxlQUFlLEdBQUcsZ0JBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBYyxlQUFNLENBQUMsVUFBQyxFQUErRTtRQUE3RSxjQUFJLEVBQUUsYUFBb0UsRUFBM0QscUJBQWlELEVBQWhDLDRCQUFXLEVBQUUsd0NBQWlCLEVBQUksZ0JBQUs7SUFBVyxPQUFBLFdBQ3pJLHlCQUFZLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsb0RBR3pCLEtBQUssa0NBQ00sSUFBSSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsV0FBVyxXQUMzRDtBQU40SSxDQU01SSxDQUFDLENBQUMsQ0FBQztBQUNOLElBQU0scUJBQXFCLEdBQUcsZ0JBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBYyxlQUFNLENBQUMsVUFBQyxFQUEwSDtRQUF4SCxjQUFJLEVBQVcsMkJBQW1HLEVBQWxGLGdDQUFhLEVBQUUsb0RBQXVCLEVBQUUsa0RBQXNCLEVBQUUsc0NBQWdCO0lBQWEsT0FBQSxzQkFDL0ssYUFBYSw4QkFDVixJQUFJLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixD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a0RqRDtBQWxEWSxzQ0FBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHsgdGhlbWVkLCBjc3MgfSBmcm9tICcuLi8uLi91dGlscy9zdHlsZWQnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBTdGFuZGFyZFByb3BzIH0gZnJvbSAnLi4vLi4vY29tbW9uJztcbmltcG9ydCB7IHNldExhYmVscywgZ2V0UHJvcExhYmVsLCBBY2NvcmRpb25DYXJkTGFiZWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvbGFiZWxzJztcbmltcG9ydCB7IGdldEZvbnRTdHlsZSB9IGZyb20gJy4uLy4uL3RleHRTdHlsZXMnO1xuc2V0TGFiZWxzKHtcbiAgICBvcGVuTGFiZWw6ICdPcGVuIERldGFpbHMnLFxuICAgIGNsb3NlTGFiZWw6ICdDbG9zZSBEZXRhaWxzJyxcbn0pO1xuY29uc3QgYW5pbWF0aW9uRHVyYXRpb24gPSAnMC4zcyc7XG5jb25zdCBhbmltYXRpb25GdW5jdGlvbiA9ICdjdWJpYy1iZXppZXIoMCwgMCwgMC4yNSwgMSknO1xuZXhwb3J0IGludGVyZmFjZSBBY3RpdmVQcm9wcyB7XG4gICAgb3BlbjogYm9vbGVhbjtcbiAgICBvbkNsaWNrPyhlOiBSZWFjdC5Nb3VzZUV2ZW50KTogdm9pZDtcbn1cbmNvbnN0IFN0eWxlZENvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jyk8QWN0aXZlUHJvcHM+KHRoZW1lZCgoeyBvcGVuLCB0aGVtZTogeyBhY2NvcmRpb25DYXJkOiB7IGJvcmRlckNvbG9yLCBvcGVuZWRCb3JkZXJDb2xvciB9LCB0ZXh0MSwgfSwgfSkgPT4gYFxuICAgICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ21lZGl1bScgfSl9XG4gICAgXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGNvbG9yOiAke3RleHQxfTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAke29wZW4gPyBvcGVuZWRCb3JkZXJDb2xvciA6IGJvcmRlckNvbG9yfTtcbiAgYCkpO1xuY29uc3QgU3R5bGVkSGVhZGVyQ29udGFpbmVyID0gc3R5bGVkKCdkaXYnKTxBY3RpdmVQcm9wcz4odGhlbWVkKCh7IG9wZW4sIHRoZW1lOiB7IGFjY29yZGlvbkNhcmQ6IHsgaGVhZGVyUGFkZGluZywgb3BlbmVkSGVhZGVyQm9yZGVyQ29sb3IsIG9wZW5lZEhlYWRlckJhY2tncm91bmQsIGhlYWRlckJhY2tncm91bmQgfSwgfSwgfSkgPT4gYFxuICAgICAgcGFkZGluZzogJHtoZWFkZXJQYWRkaW5nfTtcbiAgICAgIGJhY2tncm91bmQ6ICR7b3BlbiA/IG9wZW5lZEhlYWRlckJhY2tncm91bmQgOiBoZWFkZXJCYWNrZ3JvdW5kfTtcbiAgICAgIGJvcmRlci1ib3R0b206ICR7b3BlbiA/IGAxcHggc29saWQgJHtvcGVuZWRIZWFkZXJCb3JkZXJDb2xvcn1gIDogJ25vbmUnfTtcbiAgICBgKSk7XG5leHBvcnQgY29uc3QgU3R5bGVkQWN0aW9uQ29udGFpbmVyID0gc3R5bGVkLmRpdjxBY3RpdmVQcm9wcz4odGhlbWVkKCh7IG9wZW4sIHRoZW1lOiB7IHVpMCwgdWkxIH0gfSkgPT4gY3NzIGBcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIHBhZGRpbmc6ICR7ZGlzdGFuY2Uuc21hbGx9ICR7ZGlzdGFuY2UubWVkaXVtfTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJhY2tncm91bmQ6ICR7b3BlbiA/IHVpMSA6IHVpMH07XG4gICAgICBib3JkZXI6ICR7b3BlbiA/IGAxcHggc29saWQgJHt1aTB9YCA6ICdub25lJ307XG4gICAgICBtYXJnaW46IC0xcHggLTFweCAtMXB4IC0xcHg7XG4gICAgICBjb2xvcjogJHtvcGVuID8gdWkwIDogdWkxfTtcbiAgICBgKSk7XG5jb25zdCBTdHlsZWREZXRhaWxzQ29udGFpbmVyQW5pbWF0b3IgPSBzdHlsZWQoJ2RpdicpPEFjdGl2ZVByb3BzPiBgXG4gIHRyYW5zaXRpb246IGFsbCAke2FuaW1hdGlvbkR1cmF0aW9ufSAke2FuaW1hdGlvbkZ1bmN0aW9ufTtcbiAgbWF4LWhlaWdodDogJHsoeyBvcGVuIH0pID0+IChvcGVuID8gJzEwMDAwcHgnIDogJzAnKX07XG4gIG9wYWNpdHk6ICR7KHsgb3BlbiB9KSA9PiAob3BlbiA/ICcxJyA6ICcwJyl9O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuYDtcbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyQWN0aW9uRXZlbnQge1xuICAgIG9wZW5lZDogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQ2xpY2tFdmVudCB7XG4gICAgb3BlbmVkOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBBY2NvcmRpb25DYXJkUHJvcHMgZXh0ZW5kcyBTdGFuZGFyZFByb3BzLCBBY2NvcmRpb25DYXJkTGFiZWxzIHtcbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBjYXJkIGhlYWRlci5cbiAgICAgKi9cbiAgICBoZWFkZXI6IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICAvKipcbiAgICAgKiBEaXNwbGF5ZWQgY29udGVudCB3aGVuIGNhcmQgaXMgb3BlbmVkLlxuICAgICAqL1xuICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBkZXRhaWxzIGFyZSBvcGVuIGZvciB0aGUgY2FyZC5cbiAgICAgKi9cbiAgICBvcGVuZWQ/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEN1c3RvbSByZW5kZXIgZm9yIGNhcmQgYWN0aW9uIGJ1dHRvbi5cbiAgICAgKi9cbiAgICByZW5kZXJBY3Rpb24/KGU6IFJlbmRlckFjdGlvbkV2ZW50KTogUmVhY3QuUmVhY3ROb2RlO1xuICAgIC8qKlxuICAgICAqIEV2ZW50IGZpcmVkIHdoZW4gYWN0aW9uIGJ1dHRvbiBjbGlja2VkLlxuICAgICAqL1xuICAgIG9uQWN0aW9uQ2xpY2s/KGU6IEFjdGlvbkNsaWNrRXZlbnQpOiB2b2lkO1xufVxuZXhwb3J0IGludGVyZmFjZSBBY2NvcmRpb25DYXJkU3RhdGUge1xuICAgIG9wZW5lZDogYm9vbGVhbjtcbiAgICBjb250cm9sbGVkOiBib29sZWFuO1xufVxuZXhwb3J0IGNsYXNzIEFjY29yZGlvbkNhcmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8QWNjb3JkaW9uQ2FyZFByb3BzLCBBY2NvcmRpb25DYXJkU3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogQWNjb3JkaW9uQ2FyZFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIG9wZW5lZDogcHJvcHMub3BlbmVkICE9PSB1bmRlZmluZWQgPyBwcm9wcy5vcGVuZWQgOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZWQ6IHByb3BzLm9wZW5lZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBBY2NvcmRpb25DYXJkUHJvcHMsIHN0YXRlOiBBY2NvcmRpb25DYXJkU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmNvbnRyb2xsZWQgPyB7IG9wZW5lZDogcHJvcHMub3BlbmVkIH0gOiB7fTtcbiAgICB9XG4gICAgcHJpdmF0ZSBoYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBvbkFjdGlvbkNsaWNrIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG9wZW5lZCwgY29udHJvbGxlZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgIWNvbnRyb2xsZWQgJiYgdGhpcy5zZXRTdGF0ZSh7IG9wZW5lZDogIW9wZW5lZCB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkFjdGlvbkNsaWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkFjdGlvbkNsaWNrKHsgb3BlbmVkOiBjb250cm9sbGVkID8gb3BlbmVkIDogIW9wZW5lZCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcHJpdmF0ZSByZW5kZXJEZWZhdWx0QWN0aW9uID0gKF86IFJlbmRlckFjdGlvbkV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgb3BlbmVkIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICByZXR1cm4gKDxTdHlsZWRBY3Rpb25Db250YWluZXIgdGhlbWU9e3RoZW1lfSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfSBvcGVuPXtvcGVuZWR9PlxuICAgICAgICB7Z2V0UHJvcExhYmVsKHRoaXMucHJvcHMsIG9wZW5lZCA/ICdjbG9zZUxhYmVsJyA6ICdvcGVuTGFiZWwnKX1cbiAgICAgIDwvU3R5bGVkQWN0aW9uQ29udGFpbmVyPik7XG4gICAgfTtcbiAgICBwcml2YXRlIHJlbmRlckFjdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHsgcmVuZGVyQWN0aW9uID0gdGhpcy5yZW5kZXJEZWZhdWx0QWN0aW9uIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG9wZW5lZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgcmV0dXJuIHJlbmRlckFjdGlvbih7IG9wZW5lZCB9KTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IG9uQWN0aW9uQ2xpY2s6IF8wLCB0aGVtZSwgY2hpbGRyZW4sIGhlYWRlciwgLi4ucHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgb3BlbmVkIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICByZXR1cm4gKDxTdHlsZWRDb250YWluZXIgey4uLnByb3BzfSB0aGVtZT17dGhlbWV9IG9wZW49e29wZW5lZH0+XG4gICAgICAgIDxTdHlsZWRIZWFkZXJDb250YWluZXIgdGhlbWU9e3RoZW1lfSBvcGVuPXtvcGVuZWR9PlxuICAgICAgICAgIHtoZWFkZXJ9XG4gICAgICAgIDwvU3R5bGVkSGVhZGVyQ29udGFpbmVyPlxuICAgICAgICA8U3R5bGVkRGV0YWlsc0NvbnRhaW5lckFuaW1hdG9yIHRoZW1lPXt0aGVtZX0gb3Blbj17b3BlbmVkfT5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvU3R5bGVkRGV0YWlsc0NvbnRhaW5lckFuaW1hdG9yPlxuICAgICAgICB7dGhpcy5yZW5kZXJBY3Rpb25zKCl9XG4gICAgICA8L1N0eWxlZENvbnRhaW5lcj4pO1xuICAgIH1cbiAgICBzdGF0aWMgaW5uZXIgPSB7XG4gICAgICAgIGdldCBTdHlsZWRBY3Rpb25Db250YWluZXIoKSB7IHJldHVybiBTdHlsZWRBY3Rpb25Db250YWluZXIgYXMgdHlwZW9mIFN0eWxlZEFjdGlvbkNvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IFN0eWxlZENvbnRhaW5lcigpIHsgcmV0dXJuIFN0eWxlZENvbnRhaW5lciBhcyB0eXBlb2YgU3R5bGVkQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgU3R5bGVkSGVhZGVyQ29udGFpbmVyKCkgeyByZXR1cm4gU3R5bGVkSGVhZGVyQ29udGFpbmVyIGFzIHR5cGVvZiBTdHlsZWRIZWFkZXJDb250YWluZXI7IH0sXG4gICAgICAgIGdldCBTdHlsZWREZXRhaWxzQ29udGFpbmVyQW5pbWF0b3IoKSB7IHJldHVybiBTdHlsZWREZXRhaWxzQ29udGFpbmVyQW5pbWF0b3IgYXMgdHlwZW9mIFN0eWxlZERldGFpbHNDb250YWluZXJBbmltYXRvcjsgfVxuICAgIH07XG59XG4iXX0=