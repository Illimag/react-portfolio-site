"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var styled_1 = require("../../utils/styled");
var Anchor_1 = require("../Anchor");
var Icon_1 = require("../Icon");
var distance_1 = require("../../distance");
var utils_1 = require("../../utils/");
var textStyles_1 = require("../../textStyles");
function getThemeSettings(theme, buttonStyle) {
    switch (buttonStyle) {
        default:
        case 'primary':
            return theme.buttonPrimary;
        case 'secondary':
            return theme.buttonSecondary;
    }
}
function getButtonFontStyle(themeSettings, size) {
    if (size === void 0) { size = 'medium'; }
    switch (size) {
        default:
        case 'medium':
            return "\n        line-height: " + themeSettings.lineHeightMedium + ";\n        " + textStyles_1.getFontSize('medium') + ";\n      ";
        case 'small':
            return "\n        line-height: " + themeSettings.lineHeightSmall + ";\n        " + textStyles_1.getFontSize('small') + ";\n      ";
    }
}
function getIconSize(size) {
    switch (size) {
        default:
        case 'medium':
            return '22px';
        case 'small':
            return '16px';
    }
}
function getButtonPadding(size) {
    switch (size) {
        default:
        case 'medium':
            return "9px " + distance_1.distance.medium + " 7px";
        case 'small':
            return "5px " + distance_1.distance.small + " 3px";
    }
}
var PseudoButtonStyle = function (colorTheme) { return styled_1.css(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  &:hover {\n    background-color: ", ";\n    border: ", ";\n    color: ", ";\n  }\n  &:focus {\n    background-color: ", ";\n    border: ", ";\n    color: ", ";\n  }\n"], ["\n  &:hover {\n    background-color: ", ";\n    border: ", ";\n    color: ", ";\n  }\n  &:focus {\n    background-color: ", ";\n    border: ", ";\n    color: ", ";\n  }\n"])), colorTheme.hoverBackground, colorTheme.hoverBorder, colorTheme.hoverText, colorTheme.focusBackground, colorTheme.focusBorder, colorTheme.focusText); };
var AnchorInt = Object.assign((function (_a) {
    var buttonStyle = _a.buttonStyle, props = __rest(_a, ["buttonStyle"]);
    return React.createElement(Anchor_1.Anchor, __assign({}, props));
}), { inner: {
        get Anchor() { return Anchor_1.Anchor; }
    } });
var StyledButton = styled_1.default(AnchorInt)(styled_1.themed(function (props) {
    var themeSettings = getThemeSettings(props.theme, props.buttonStyle);
    return styled_1.css(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n      box-sizing: border-box;\n      outline: none;\n      border-radius: 0;\n      margin: ", ";\n      &:first-of-type {\n        margin-left: 0;\n      }\n      &:last-of-type {\n        margin-right: 0;\n      }\n      border: ", ";\n      background-color: ", ";\n      color: ", ";\n      font-family: ", ";\n      ", ";\n      padding: ", ";\n      display: ", ";\n      cursor: ", ";\n      ", ";\n      ", ";\n    "], ["\n      box-sizing: border-box;\n      outline: none;\n      border-radius: 0;\n      margin: ", ";\n      &:first-of-type {\n        margin-left: 0;\n      }\n      &:last-of-type {\n        margin-right: 0;\n      }\n      border: ", ";\n      background-color: ", ";\n      color: ", ";\n      font-family: ", ";\n      ", ";\n      padding: ", ";\n      display: ", ";\n      cursor: ", ";\n      ", ";\n      ",
        ";\n    "])), distance_1.distance.small, props.disabled ? "" + themeSettings.disabledBorder : "" + themeSettings.border, props.disabled ? themeSettings.disabledBackground : themeSettings.background, props.disabled ? themeSettings.disabledText : themeSettings.text, props.theme.fontFamily, getButtonFontStyle(themeSettings, props.size), getButtonPadding(props.size), props.block ? 'block' : 'inline-block', props.disabled ? 'not-allowed' : 'pointer', !props.disabled ? PseudoButtonStyle(themeSettings) : '', !props.disableMobileFullWidth && utils_1.displayUpTo('medium')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n        width: 100%;\n        margin: ", " 0;\n      "], ["\n        width: 100%;\n        margin: ", " 0;\n      "])), distance_1.distance.small));
}));
var DefaultWrapper = styled_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([""], [""])));
var WithIconWrapper = styled_1.default('div')(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n  ", ";\n  position: relative;\n"], ["\n  ",
    ";\n  position: relative;\n"])), function (props) { return props.theme.buttonIconPosition === 'left'
    ? "padding-left: " + distance_1.distance.xlarge
    : "padding-right: " + distance_1.distance.xlarge; });
var StyledIcon = styled_1.default(Icon_1.Icon)(templateObject_6 || (templateObject_6 = __makeTemplateObject(["\n  ", ";\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n"], ["\n  ", ";\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n"])), function (props) { return (props.theme.buttonIconPosition === 'left' ? 'left: 0' : 'right: 0'); });
/**
 * The button component renders a simple button optionally with an icon.
 */
exports.Button = Object.assign((function (_a) {
    var children = _a.children, icon = _a.icon, size = _a.size, theme = _a.theme, rest = __rest(_a, ["children", "icon", "size", "theme"]);
    var Wrapper = icon ? WithIconWrapper : DefaultWrapper;
    return (React.createElement(StyledButton, __assign({ tagName: "button", theme: theme, size: size }, rest),
        React.createElement(Wrapper, { theme: theme },
            children,
            icon && React.createElement(StyledIcon, { name: icon, theme: theme, size: getIconSize(size) }))));
}), { inner: {
        get StyledButton() { return StyledButton; },
        get StyledIcon() { return StyledIcon; }
    } });
exports.Button.displayName = 'Button';
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9CdXR0b24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkJBQStCO0FBQy9CLDZDQUF5RDtBQUV6RCxvQ0FBZ0Q7QUFDaEQsZ0NBQW9EO0FBQ3BELDJDQUEwQztBQUMxQyxzQ0FBMkM7QUFDM0MsK0NBQStDO0FBeUQvQyxTQUFTLGdCQUFnQixDQUFDLEtBQXVCLEVBQUUsV0FBeUI7SUFDeEUsUUFBUSxXQUFXLEVBQUU7UUFDakIsUUFBUTtRQUNSLEtBQUssU0FBUztZQUNWLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQztRQUMvQixLQUFLLFdBQVc7WUFDWixPQUFPLEtBQUssQ0FBQyxlQUFlLENBQUM7S0FDcEM7QUFDTCxDQUFDO0FBQ0QsU0FBUyxrQkFBa0IsQ0FBQyxhQUFrQyxFQUFFLElBQTJCO0lBQTNCLHFCQUFBLEVBQUEsZUFBMkI7SUFDdkYsUUFBUSxJQUFJLEVBQUU7UUFDVixRQUFRO1FBQ1IsS0FBSyxRQUFRO1lBQ1QsT0FBTyw0QkFDSSxhQUFhLENBQUMsZ0JBQWdCLG1CQUMzQyx3QkFBVyxDQUFDLFFBQVEsQ0FBQyxjQUN4QixDQUFDO1FBQ0EsS0FBSyxPQUFPO1lBQ1IsT0FBTyw0QkFDSSxhQUFhLENBQUMsZUFBZSxtQkFDMUMsd0JBQVcsQ0FBQyxPQUFPLENBQUMsY0FDdkIsQ0FBQztLQUNIO0FBQ0wsQ0FBQztBQUNELFNBQVMsV0FBVyxDQUFDLElBQWlCO0lBQ2xDLFFBQVEsSUFBSSxFQUFFO1FBQ1YsUUFBUTtRQUNSLEtBQUssUUFBUTtZQUNULE9BQU8sTUFBTSxDQUFDO1FBQ2xCLEtBQUssT0FBTztZQUNSLE9BQU8sTUFBTSxDQUFDO0tBQ3JCO0FBQ0wsQ0FBQztBQUNELFNBQVMsZ0JBQWdCLENBQUMsSUFBaUI7SUFDdkMsUUFBUSxJQUFJLEVBQUU7UUFD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QU8sWUFBbUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsSUFBSSxVQUFVLEtBQUssT0FBTyxVQUErQixDQUFDLENBQUMsQ0FBQztLQUMvRCxFQUFFLENBQUMsQ0FBQztBQUNULGNBQU0sQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyB0aGVtZWQsIGNzcyB9IGZyb20gJy4uLy4uL3V0aWxzL3N0eWxlZCc7XG5pbXBvcnQgeyBTdGFuZGFyZFByb3BzLCBCdXR0b25UaGVtZVNldHRpbmdzLCBQcmVjaXNlRnVsbFRoZW1lIH0gZnJvbSAnLi4vLi4vY29tbW9uJztcbmltcG9ydCB7IEFuY2hvciwgQW5jaG9yUHJvcHMgfSBmcm9tICcuLi9BbmNob3InO1xuaW1wb3J0IHsgSWNvbk5hbWUsIEljb24sIEljb25Qcm9wcyB9IGZyb20gJy4uL0ljb24nO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBkaXNwbGF5VXBUbyB9IGZyb20gJy4uLy4uL3V0aWxzLyc7XG5pbXBvcnQgeyBnZXRGb250U2l6ZSB9IGZyb20gJy4uLy4uL3RleHRTdHlsZXMnO1xuLyoqXG4gKiBCdXR0b24gc3R5bGUgbmFtZS5cbiAqL1xuZXhwb3J0IHR5cGUgQnV0dG9uU3R5bGUgPSAncHJpbWFyeScgfCAnc2Vjb25kYXJ5Jztcbi8qKlxuICogQnV0dG9uIHR5cGUuXG4gKi9cbmV4cG9ydCB0eXBlIEJ1dHRvblR5cGUgPSAnc3VibWl0JyB8ICdyZXNldCcgfCAnYnV0dG9uJztcbi8qKlxuICogQnV0dG9uIHNpemUuXG4gKi9cbmV4cG9ydCB0eXBlIEJ1dHRvblNpemUgPSAnc21hbGwnIHwgJ21lZGl1bSc7XG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvblByb3BzIGV4dGVuZHMgQW5jaG9yUHJvcHMge1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBhcyBhY3RpdmUuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBhY3RpdmU/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBhcyBhIGJsb2NrLlxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgYmxvY2s/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJ1dHRvbiBzdHlsZSB0eXBlLiBCeSBkZWZhdWx0IHByaW1hcnkuXG4gICAgICogQGRlZmF1bHQgcHJpbWFyeVxuICAgICAqL1xuICAgIGJ1dHRvblN0eWxlPzogQnV0dG9uU3R5bGU7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYnV0dG9uIHR5cGUuIEJ5IGRlZmF1bHQgXCJzdWJtaXRcIi5cbiAgICAgKiBAc2VlIFtXM0NdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwNTI1L3RoZS1idXR0b24tZWxlbWVudC5odG1sI2F0dHItYnV0dG9uLXR5cGUpXG4gICAgICovXG4gICAgdHlwZT86IEJ1dHRvblR5cGU7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYnV0dG9uIHNpemUuIEJ5IGRlZmF1bHQgbWVkaXVtLlxuICAgICAqIEBkZWZhdWx0IG1lZGl1bVxuICAgICAqL1xuICAgIHNpemU/OiBCdXR0b25TaXplO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBpY29uIHRvIGRpc3BsYXkuIEJ5IGRlZmF1bHQgbm8gaWNvbiBpcyBkaXNwbGF5LlxuICAgICAqL1xuICAgIGljb24/OiBJY29uTmFtZTtcbiAgICAvKipcbiAgICAgKiBEaXNhYmxlcyBjaGFuZ2luZyB0aGUgd2lkdGggb2YgdGhlIGJ1dHRvbiB0byAxMDAlIGZvciBtb2JpbGUgc2NyZWVucyAobmFycm93ZXIgdGhhbiA5ODBweClcbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGRpc2FibGVNb2JpbGVGdWxsV2lkdGg/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdHlsZWRCdXR0b25Qcm9wcyBleHRlbmRzIEFuY2hvclByb3BzIHtcbiAgICBibG9jaz86IGJvb2xlYW47XG4gICAgYnV0dG9uU3R5bGU/OiBCdXR0b25TdHlsZTtcbiAgICBzaXplPzogQnV0dG9uU2l6ZTtcbiAgICBkaXNhYmxlTW9iaWxlRnVsbFdpZHRoPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSWNvbldyYXBwZXJQcm9wcyBleHRlbmRzIFN0YW5kYXJkUHJvcHMge1xufVxuZnVuY3Rpb24gZ2V0VGhlbWVTZXR0aW5ncyh0aGVtZTogUHJlY2lzZUZ1bGxUaGVtZSwgYnV0dG9uU3R5bGU/OiBCdXR0b25TdHlsZSkge1xuICAgIHN3aXRjaCAoYnV0dG9uU3R5bGUpIHtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgY2FzZSAncHJpbWFyeSc6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUuYnV0dG9uUHJpbWFyeTtcbiAgICAgICAgY2FzZSAnc2Vjb25kYXJ5JzpcbiAgICAgICAgICAgIHJldHVybiB0aGVtZS5idXR0b25TZWNvbmRhcnk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QnV0dG9uRm9udFN0eWxlKHRoZW1lU2V0dGluZ3M6IEJ1dHRvblRoZW1lU2V0dGluZ3MsIHNpemU6IEJ1dHRvblNpemUgPSAnbWVkaXVtJykge1xuICAgIHN3aXRjaCAoc2l6ZSkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgbGluZS1oZWlnaHQ6ICR7dGhlbWVTZXR0aW5ncy5saW5lSGVpZ2h0TWVkaXVtfTtcbiAgICAgICAgJHtnZXRGb250U2l6ZSgnbWVkaXVtJyl9O1xuICAgICAgYDtcbiAgICAgICAgY2FzZSAnc21hbGwnOlxuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgbGluZS1oZWlnaHQ6ICR7dGhlbWVTZXR0aW5ncy5saW5lSGVpZ2h0U21hbGx9O1xuICAgICAgICAke2dldEZvbnRTaXplKCdzbWFsbCcpfTtcbiAgICAgIGA7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0SWNvblNpemUoc2l6ZT86IEJ1dHRvblNpemUpIHtcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgICAgIHJldHVybiAnMjJweCc7XG4gICAgICAgIGNhc2UgJ3NtYWxsJzpcbiAgICAgICAgICAgIHJldHVybiAnMTZweCc7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QnV0dG9uUGFkZGluZyhzaXplPzogQnV0dG9uU2l6ZSkge1xuICAgIHN3aXRjaCAoc2l6ZSkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgcmV0dXJuIGA5cHggJHtkaXN0YW5jZS5tZWRpdW19IDdweGA7XG4gICAgICAgIGNhc2UgJ3NtYWxsJzpcbiAgICAgICAgICAgIHJldHVybiBgNXB4ICR7ZGlzdGFuY2Uuc21hbGx9IDNweGA7XG4gICAgfVxufVxuY29uc3QgUHNldWRvQnV0dG9uU3R5bGUgPSAoY29sb3JUaGVtZTogQnV0dG9uVGhlbWVTZXR0aW5ncykgPT4gY3NzIGBcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvclRoZW1lLmhvdmVyQmFja2dyb3VuZH07XG4gICAgYm9yZGVyOiAke2NvbG9yVGhlbWUuaG92ZXJCb3JkZXJ9O1xuICAgIGNvbG9yOiAke2NvbG9yVGhlbWUuaG92ZXJUZXh0fTtcbiAgfVxuICAmOmZvY3VzIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9yVGhlbWUuZm9jdXNCYWNrZ3JvdW5kfTtcbiAgICBib3JkZXI6ICR7Y29sb3JUaGVtZS5mb2N1c0JvcmRlcn07XG4gICAgY29sb3I6ICR7Y29sb3JUaGVtZS5mb2N1c1RleHR9O1xuICB9XG5gO1xuY29uc3QgQW5jaG9ySW50ID0gT2JqZWN0LmFzc2lnbigoKCh7IGJ1dHRvblN0eWxlLCAuLi5wcm9wcyB9KSA9PiA8QW5jaG9yIHsuLi5wcm9wc30vPikgYXMgUmVhY3QuU0ZDPFN0eWxlZEJ1dHRvblByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IEFuY2hvcigpIHsgcmV0dXJuIEFuY2hvciBhcyB0eXBlb2YgQW5jaG9yOyB9XG4gICAgfSB9KTtcbmNvbnN0IFN0eWxlZEJ1dHRvbiA9IHN0eWxlZChBbmNob3JJbnQpPFN0eWxlZEJ1dHRvblByb3BzPih0aGVtZWQocHJvcHMgPT4ge1xuICAgIGNvbnN0IHRoZW1lU2V0dGluZ3MgPSBnZXRUaGVtZVNldHRpbmdzKHByb3BzLnRoZW1lLCBwcm9wcy5idXR0b25TdHlsZSk7XG4gICAgcmV0dXJuIGNzcyBgXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICBtYXJnaW46ICR7ZGlzdGFuY2Uuc21hbGx9O1xuICAgICAgJjpmaXJzdC1vZi10eXBlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICB9XG4gICAgICAmOmxhc3Qtb2YtdHlwZSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgIH1cbiAgICAgIGJvcmRlcjogJHtwcm9wcy5kaXNhYmxlZCA/IGAke3RoZW1lU2V0dGluZ3MuZGlzYWJsZWRCb3JkZXJ9YCA6IGAke3RoZW1lU2V0dGluZ3MuYm9yZGVyfWB9O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcy5kaXNhYmxlZCA/IHRoZW1lU2V0dGluZ3MuZGlzYWJsZWRCYWNrZ3JvdW5kIDogdGhlbWVTZXR0aW5ncy5iYWNrZ3JvdW5kfTtcbiAgICAgIGNvbG9yOiAke3Byb3BzLmRpc2FibGVkID8gdGhlbWVTZXR0aW5ncy5kaXNhYmxlZFRleHQgOiB0aGVtZVNldHRpbmdzLnRleHR9O1xuICAgICAgZm9udC1mYW1pbHk6ICR7cHJvcHMudGhlbWUuZm9udEZhbWlseX07XG4gICAgICAke2dldEJ1dHRvbkZvbnRTdHlsZSh0aGVtZVNldHRpbmdzLCBwcm9wcy5zaXplKX07XG4gICAgICBwYWRkaW5nOiAke2dldEJ1dHRvblBhZGRpbmcocHJvcHMuc2l6ZSl9O1xuICAgICAgZGlzcGxheTogJHtwcm9wcy5ibG9jayA/ICdibG9jaycgOiAnaW5saW5lLWJsb2NrJ307XG4gICAgICBjdXJzb3I6ICR7cHJvcHMuZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTtcbiAgICAgICR7IXByb3BzLmRpc2FibGVkID8gUHNldWRvQnV0dG9uU3R5bGUodGhlbWVTZXR0aW5ncykgOiAnJ307XG4gICAgICAkeyFwcm9wcy5kaXNhYmxlTW9iaWxlRnVsbFdpZHRoICYmXG4gICAgICAgIGRpc3BsYXlVcFRvKCdtZWRpdW0nKSBgXG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW46ICR7ZGlzdGFuY2Uuc21hbGx9IDA7XG4gICAgICBgfTtcbiAgICBgO1xufSkpO1xuY29uc3QgRGVmYXVsdFdyYXBwZXIgPSBzdHlsZWQuZGl2IGBgO1xuY29uc3QgV2l0aEljb25XcmFwcGVyID0gc3R5bGVkKCdkaXYnKTxJY29uV3JhcHBlclByb3BzPiBgXG4gICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuYnV0dG9uSWNvblBvc2l0aW9uID09PSAnbGVmdCdcbiAgICA/IGBwYWRkaW5nLWxlZnQ6ICR7ZGlzdGFuY2UueGxhcmdlfWBcbiAgICA6IGBwYWRkaW5nLXJpZ2h0OiAke2Rpc3RhbmNlLnhsYXJnZX1gfTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuYDtcbmNvbnN0IFN0eWxlZEljb24gPSBzdHlsZWQoSWNvbik8SWNvbldyYXBwZXJQcm9wcyAmIEljb25Qcm9wcz4gYFxuICAke3Byb3BzID0+IChwcm9wcy50aGVtZS5idXR0b25JY29uUG9zaXRpb24gPT09ICdsZWZ0JyA/ICdsZWZ0OiAwJyA6ICdyaWdodDogMCcpfTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuYDtcbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgcmVuZGVycyBhIHNpbXBsZSBidXR0b24gb3B0aW9uYWxseSB3aXRoIGFuIGljb24uXG4gKi9cbmV4cG9ydCBjb25zdCBCdXR0b24gPSBPYmplY3QuYXNzaWduKCgoKHsgY2hpbGRyZW4sIGljb24sIHNpemUsIHRoZW1lLCAuLi5yZXN0IH0pID0+IHtcbiAgICBjb25zdCBXcmFwcGVyID0gaWNvbiA/IFdpdGhJY29uV3JhcHBlciA6IERlZmF1bHRXcmFwcGVyO1xuICAgIHJldHVybiAoPFN0eWxlZEJ1dHRvbiB0YWdOYW1lPVwiYnV0dG9uXCIgdGhlbWU9e3RoZW1lfSBzaXplPXtzaXplfSB7Li4ucmVzdH0+XG4gICAgICA8V3JhcHBlciB0aGVtZT17dGhlbWV9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIHtpY29uICYmIDxTdHlsZWRJY29uIG5hbWU9e2ljb259IHRoZW1lPXt0aGVtZX0gc2l6ZT17Z2V0SWNvblNpemUoc2l6ZSl9Lz59XG4gICAgICA8L1dyYXBwZXI+XG4gICAgPC9TdHlsZWRCdXR0b24+KTtcbn0pIGFzIFJlYWN0LkZDPEJ1dHRvblByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IFN0eWxlZEJ1dHRvbigpIHsgcmV0dXJuIFN0eWxlZEJ1dHRvbiBhcyB0eXBlb2YgU3R5bGVkQnV0dG9uOyB9LFxuICAgICAgICBnZXQgU3R5bGVkSWNvbigpIHsgcmV0dXJuIFN0eWxlZEljb24gYXMgdHlwZW9mIFN0eWxlZEljb247IH1cbiAgICB9IH0pO1xuQnV0dG9uLmRpc3BsYXlOYW1lID0gJ0J1dHRvbic7XG4iXX0=