"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var PromptBasic_part_1 = require("./PromptBasic.part");
var PromptModal_part_1 = require("./PromptModal.part");
exports.PromptModal = PromptModal_part_1.PromptModal;
var usePrompt_1 = require("./usePrompt");
exports.usePrompt = usePrompt_1.usePrompt;
/**
 * Component for prompting the user before navigating away
 * from a screen with a form.
 */
var Prompt = /** @class */ (function (_super) {
    __extends(Prompt, _super);
    function Prompt() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Prompt.prototype.componentDidMount = function () {
        var history = this.context.router && this.context.router.history;
        if (!(history && history.block)) {
            console.warn('React Router history object is not found. Component cannot be used');
        }
    };
    Prompt.prototype.render = function () {
        var _a = this.props, _b = _a.when, when = _b === void 0 ? true : _b, modalOptions = _a.modalOptions;
        var history = this.context.router && this.context.router.history;
        if (modalOptions) {
            return React.createElement(PromptModal_part_1.PromptModal, { modalOptions: modalOptions, history: history, when: when, message: this.props.message });
        }
        return React.createElement(PromptBasic_part_1.PromptBasic, { history: history, when: when, message: this.props.message });
    };
    Prompt.contextTypes = {
        // tslint:disable-next-line
        router: function () { return null; },
    };
    Prompt.inner = {
        get PromptModal() { return PromptModal_part_1.PromptModal; },
        get PromptBasic() { return PromptBasic_part_1.PromptBasic; }
    };
    return Prompt;
}(React.Component));
exports.Prompt = Prompt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Qcm9tcHQvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZCQUErQjtBQUMvQix1REFBaUQ7QUFDakQsdURBQWlEO0FBRzdCLHNCQUhYLDhCQUFXLENBR1c7QUFGL0IseUNBQXdDO0FBRS9CLG9CQUZBLHFCQUFTLENBRUE7QUFFbEI7OztHQUdHO0FBQ0g7SUFBNEIsMEJBQTRCO0lBQXhEOztJQXVCQSxDQUFDO0lBbEJHLGtDQUFpQixHQUFqQjtRQUNJLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztRQUNuRSxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsb0VBQW9FLENBQUMsQ0FBQztTQUN0RjtJQUNMLENBQUM7SUFDRCx1QkFBTSxHQUFOO1FBQ1UsSUFBQSxlQUEwQyxFQUF4QyxZQUFXLEVBQVgsZ0NBQVcsRUFBRSw4QkFBMkIsQ0FBQztRQUNqRCxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDbkUsSUFBSSxZQUFZLEVBQUU7WUFDZCxPQUFPLG9CQUFDLDhCQUFXLElBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLENBQUM7U0FDaEg7UUFDRCxPQUFPLG9CQUFDLDhCQUFXLElBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxDQUFDO0lBQ3JGLENBQUM7SUFqQk0sbUJBQVksR0FBRztRQUNsQiwyQkFBMkI7UUFDM0IsTUFBTSxFQUFFLGNBQU0sT0FBQSxJQUFJLEVBQUosQ0FBSTtLQUNyQixDQUFDO0lBZUssWUFBSyxHQUFHO1FBQ1gsSUFBSSxXQUFXLEtBQUssT0FBTyw4QkFBaUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsSUFBSSxXQUFXLEtBQUssT0FBTyw4QkFBaUMsQ0FBQyxDQUFDLENBQUM7S0FDbEUsQ0FBQztJQUNOLGFBQUM7Q0FBQSxBQXZCRCxDQUE0QixLQUFLLENBQUMsU0FBUyxHQXVCMUM7QUF2Qlksd0JBQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQcm9tcHRCYXNpYyB9IGZyb20gJy4vUHJvbXB0QmFzaWMucGFydCc7XG5pbXBvcnQgeyBQcm9tcHRNb2RhbCB9IGZyb20gJy4vUHJvbXB0TW9kYWwucGFydCc7XG5pbXBvcnQgeyB1c2VQcm9tcHQgfSBmcm9tICcuL3VzZVByb21wdCc7XG5pbXBvcnQgeyBQcm9tcHRQcm9wcyB9IGZyb20gJy4vUHJvbXB0LnR5cGVzJztcbmV4cG9ydCB7IHVzZVByb21wdCwgUHJvbXB0TW9kYWwgfTtcbmV4cG9ydCAqIGZyb20gJy4vUHJvbXB0LnR5cGVzJztcbi8qKlxuICogQ29tcG9uZW50IGZvciBwcm9tcHRpbmcgdGhlIHVzZXIgYmVmb3JlIG5hdmlnYXRpbmcgYXdheVxuICogZnJvbSBhIHNjcmVlbiB3aXRoIGEgZm9ybS5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb21wdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9tcHRQcm9wcz4ge1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZXMgPSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgICAgICByb3V0ZXI6ICgpID0+IG51bGwsXG4gICAgfTtcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IHRoaXMuY29udGV4dC5yb3V0ZXIgJiYgdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgICAgICBpZiAoIShoaXN0b3J5ICYmIGhpc3RvcnkuYmxvY2spKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlYWN0IFJvdXRlciBoaXN0b3J5IG9iamVjdCBpcyBub3QgZm91bmQuIENvbXBvbmVudCBjYW5ub3QgYmUgdXNlZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyB3aGVuID0gdHJ1ZSwgbW9kYWxPcHRpb25zIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5jb250ZXh0LnJvdXRlciAmJiB0aGlzLmNvbnRleHQucm91dGVyLmhpc3Rvcnk7XG4gICAgICAgIGlmIChtb2RhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiA8UHJvbXB0TW9kYWwgbW9kYWxPcHRpb25zPXttb2RhbE9wdGlvbnN9IGhpc3Rvcnk9e2hpc3Rvcnl9IHdoZW49e3doZW59IG1lc3NhZ2U9e3RoaXMucHJvcHMubWVzc2FnZX0vPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gPFByb21wdEJhc2ljIGhpc3Rvcnk9e2hpc3Rvcnl9IHdoZW49e3doZW59IG1lc3NhZ2U9e3RoaXMucHJvcHMubWVzc2FnZX0vPjtcbiAgICB9XG4gICAgc3RhdGljIGlubmVyID0ge1xuICAgICAgICBnZXQgUHJvbXB0TW9kYWwoKSB7IHJldHVybiBQcm9tcHRNb2RhbCBhcyB0eXBlb2YgUHJvbXB0TW9kYWw7IH0sXG4gICAgICAgIGdldCBQcm9tcHRCYXNpYygpIHsgcmV0dXJuIFByb21wdEJhc2ljIGFzIHR5cGVvZiBQcm9tcHRCYXNpYzsgfVxuICAgIH07XG59XG4iXX0=