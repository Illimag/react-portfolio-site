"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var styled_1 = require("../../utils/styled");
var distance_1 = require("../../distance");
var textStyles_1 = require("../../textStyles");
var spinningWidth = 50;
var ProgressContainer = styled_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  color: ", ";\n"], ["\n  color: ", ";\n"])), styled_1.themed(function (props) { return props.theme.text6; }));
var ProgressRail = styled_1.default('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  position: relative;\n  border: 0;\n  background: ", ";\n  height: ", ";\n"], ["\n  position: relative;\n  border: 0;\n  background: ", ";\n  height: ", ";\n"])), styled_1.themed(function (props) { return props.theme.ui4; }), function (_a) {
    var type = _a.type;
    return (type === 'secondary' ? distance_1.distance.xsmall : distance_1.distance.xxsmall);
});
var ProgressTitle = styled_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  ", "\n\n  margin: 0 0 ", ";\n  padding: 0;\n  display: block;\n"], ["\n  ", "\n\n  margin: 0 0 ", ";\n  padding: 0;\n  display: block;\n"])), textStyles_1.getFontStyle({ size: 'medium' }), distance_1.distance.medium);
var ProgressDescription = styled_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  ", "\n\n  margin: ", " 0 0;\n"], ["\n  ", "\n\n  margin: ", " 0 0;\n"])), textStyles_1.getFontStyle({ size: 'small' }), distance_1.distance.small);
var ProgressIndicator = styled_1.default.div(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n  border-radius: inherit;\n  border: 0;\n  background: ", ";\n  height: 100%;\n  width: 0;\n"], ["\n  border-radius: inherit;\n  border: 0;\n  background: ", ";\n  height: 100%;\n  width: 0;\n"])), styled_1.themed(function (props) { return props.theme.ui0; }));
var ProgressStop = styled_1.default('div')(templateObject_6 || (templateObject_6 = __makeTemplateObject(["\n  border-radius: ", ";\n  position: absolute;\n  width: ", ";\n  height: ", ";\n  background: ", ";\n  top: 50%;\n  transform: translateY(-50%);\n"], ["\n  border-radius: ", ";\n  position: absolute;\n  width: ", ";\n  height: ", ";\n  background: ", ";\n  top: 50%;\n  transform: translateY(-50%);\n"])), distance_1.distance.small, distance_1.distance.small, distance_1.distance.small, styled_1.themed(function (props) { return (props.active ? props.theme.ui7 : props.theme.text2); }));
var SpinningAnimation = styled_1.keyframes(templateObject_7 || (templateObject_7 = __makeTemplateObject(["\n  from {\n    left: -", "%;\n  }\n  to {\n    left: 100%;\n  }\n"], ["\n  from {\n    left: -", "%;\n  }\n  to {\n    left: 100%;\n  }\n"])), spinningWidth);
var MaskContainer = styled_1.default.div(templateObject_8 || (templateObject_8 = __makeTemplateObject(["\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n"], ["\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n"])));
var ProgressAnimation = styled_1.default.div(templateObject_9 || (templateObject_9 = __makeTemplateObject(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  left: -", "%;\n  animation: ", " 2s linear infinite;\n"], ["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  left: -", "%;\n  animation: ", " 2s linear infinite;\n"])), spinningWidth, SpinningAnimation);
function getPercent(current, minimum, maximum) {
    var value = ~~((100 * (current - minimum)) / (maximum - minimum));
    var percent = Math.min(Math.max(0, value), 100);
    return percent + "%";
}
function spinning(child) {
    return (React.createElement(MaskContainer, null,
        React.createElement(ProgressAnimation, null, child)));
}
/**
 * The progress bar component displays a progress indicator ranging from min to max.
 */
exports.ProgressBar = Object.assign((function (_a) {
    var _b = _a.minimum, minimum = _b === void 0 ? 0 : _b, _c = _a.maximum, maximum = _c === void 0 ? 100 : _c, propValue = _a.value, title = _a.title, description = _a.description, animate = _a.animate, _d = _a.stops, stops = _d === void 0 ? [] : _d, _e = _a.type, type = _e === void 0 ? 'primary' : _e, theme = _a.theme, rest = __rest(_a, ["minimum", "maximum", "value", "title", "description", "animate", "stops", "type", "theme"]);
    var value = (animate === 'spinning' ? spinningWidth : propValue) || 0;
    var width = getPercent(value, minimum, maximum);
    var transition = animate ? 'width 200ms' : 'none';
    var indicator = React.createElement(ProgressIndicator, { style: { width: width, transition: transition }, theme: theme });
    return (React.createElement(ProgressContainer, { theme: theme },
        !!title && React.createElement(ProgressTitle, { theme: theme }, title),
        React.createElement(ProgressRail, __assign({ type: type, theme: theme }, rest),
            animate === 'spinning' ? spinning(indicator) : indicator,
            stops.map(function (stop, index) { return (React.createElement(ProgressStop, { key: index + "-at-" + stop, style: { left: getPercent(stop, minimum, maximum) }, active: stop <= value, theme: theme })); })),
        !!description && React.createElement(ProgressDescription, { theme: theme }, description)));
}), { inner: {
        get ProgressIndicator() { return ProgressIndicator; },
        get ProgressContainer() { return ProgressContainer; },
        get ProgressTitle() { return ProgressTitle; },
        get ProgressRail() { return ProgressRail; },
        get ProgressStop() { return ProgressStop; },
        get ProgressDescription() { return ProgressDescription; }
    } });
exports.ProgressBar.displayName = 'ProgressBar';
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Qcm9ncmVzc0Jhci9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw2QkFBK0I7QUFDL0IsNkNBQStEO0FBRS9ELDJDQUEwQztBQUMxQywrQ0FBZ0Q7QUFzRGhELElBQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQztBQUN6QixJQUFNLGlCQUFpQixHQUFHLGdCQUFNLENBQUMsR0FBRyx1RkFBQyxhQUMxQixFQUFrQyxLQUM1QyxLQURVLGVBQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFqQixDQUFpQixDQUFDLENBQzVDLENBQUM7QUFDRixJQUFNLFlBQVksR0FBRyxnQkFBTSxDQUFDLEtBQUssQ0FBQyxrSkFBeUIsdURBRzNDLEVBQWdDLGVBQ3BDLEVBQXlFLEtBQ3BGLEtBRmUsZUFBTSxDQUFDLFVBQUEsS0FBSyxJQUFJLE9BQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQWYsQ0FBZSxDQUFDLEVBQ3BDLFVBQUMsRUFBUTtRQUFOLGNBQUk7SUFBTyxPQUFBLENBQUMsSUFBSSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsbUJBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLG1CQUFRLENBQUMsT0FBTyxDQUFDO0FBQTNELENBQTJELENBQ3BGLENBQUM7QUFDRixJQUFNLGFBQWEsR0FBRyxnQkFBTSxDQUFDLEdBQUcsd0lBQUMsTUFDN0IsRUFBZ0Msb0JBRXBCLEVBQWUsdUNBRzlCLEtBTEcseUJBQVksQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUVwQixtQkFBUSxDQUFDLE1BQU0sQ0FHOUIsQ0FBQztBQUNGLElBQU0sbUJBQW1CLEdBQUcsZ0JBQU0sQ0FBQyxHQUFHLHNHQUFDLE1BQ25DLEVBQStC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QUFDLENBQUMsQ0FBQztRQUNsRSxJQUFJLG1CQUFtQixLQUFLLE9BQU8sbUJBQWlELENBQUMsQ0FBQyxDQUFDO0tBQzFGLEVBQUUsQ0FBQyxDQUFDO0FBQ1QsbUJBQVcsQ0FBQyxXQUFXLEdBQUcsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyB0aGVtZWQsIGtleWZyYW1lcyB9IGZyb20gJy4uLy4uL3V0aWxzL3N0eWxlZCc7XG5pbXBvcnQgeyBTdGFuZGFyZFByb3BzIH0gZnJvbSAnLi4vLi4vY29tbW9uJztcbmltcG9ydCB7IGRpc3RhbmNlIH0gZnJvbSAnLi4vLi4vZGlzdGFuY2UnO1xuaW1wb3J0IHsgZ2V0Rm9udFN0eWxlIH0gZnJvbSAnLi4vLi4vdGV4dFN0eWxlcyc7XG4vKipcbiAqIFByb2dyZXNzQmFyIHR5cGUuXG4gKi9cbmV4cG9ydCB0eXBlIFByb2dyZXNzQmFyVHlwZSA9ICdwcmltYXJ5JyB8ICdzZWNvbmRhcnknO1xuZXhwb3J0IGludGVyZmFjZSBQcm9ncmVzc0JhclByb3BzIGV4dGVuZHMgU3RhbmRhcmRQcm9wcyB7XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGNoaWxkcmVuPzogdm9pZDtcbiAgICAvKipcbiAgICAgKiBTaG93cyBhbmltYXRpb25zIGJldHdlZW4gdmFsdWUgdXBkYXRlcy5cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGFuaW1hdGU/OiBib29sZWFuIHwgJ3NwaW5uaW5nJztcbiAgICAvKipcbiAgICAgKiBUaGUgbWluaW11bSB2YWx1ZSwgd2hpY2ggaXMgYnkgZGVmYXVsdCAwLlxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICBtaW5pbXVtPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIHZhbHVlLCB3aGljaCBpcyBieSBkZWZhdWx0IDEwMC5cbiAgICAgKiBAZGVmYXVsdCAxMDBcbiAgICAgKi9cbiAgICBtYXhpbXVtPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHZhbHVlLCB3aGljaCBpcyBieSBkZWZhdWx0IDAuXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHZhbHVlPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBvcHRpb25hbCB0aXRsZSB0byBiZSBkaXNwbGF5ZWQuXG4gICAgICovXG4gICAgdGl0bGU/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogVGhlIG9wdGlvbmFsIHN0b3BzIHRvIGJlIGRpc3BsYXllZC5cbiAgICAgKi9cbiAgICBzdG9wcz86IEFycmF5PG51bWJlcj47XG4gICAgLyoqXG4gICAgICogVGhlIG9wdGlvbmFsIGRlc2NyaXB0aW9uIHRvIGJlIGRpc3BsYXllZC5cbiAgICAgKi9cbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm9ncmVzcyBiYXIgdHlwZS4gQnkgZGVmYXVsdCBwcmltYXJ5LlxuICAgICAqIEBkZWZhdWx0IHByaW1hcnlcbiAgICAgKi9cbiAgICB0eXBlPzogUHJvZ3Jlc3NCYXJUeXBlO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdG9wUHJvcHMge1xuICAgIGFjdGl2ZTogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NDb250YWluZXJQcm9wcyB7XG4gICAgdHlwZTogUHJvZ3Jlc3NCYXJUeXBlO1xufVxuY29uc3Qgc3Bpbm5pbmdXaWR0aCA9IDUwO1xuY29uc3QgUHJvZ3Jlc3NDb250YWluZXIgPSBzdHlsZWQuZGl2IGBcbiAgY29sb3I6ICR7dGhlbWVkKHByb3BzID0+IHByb3BzLnRoZW1lLnRleHQ2KX07XG5gO1xuY29uc3QgUHJvZ3Jlc3NSYWlsID0gc3R5bGVkKCdkaXYnKTxQcm9ncmVzc0NvbnRhaW5lclByb3BzPiBgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kOiAke3RoZW1lZChwcm9wcyA9PiBwcm9wcy50aGVtZS51aTQpfTtcbiAgaGVpZ2h0OiAkeyh7IHR5cGUgfSkgPT4gKHR5cGUgPT09ICdzZWNvbmRhcnknID8gZGlzdGFuY2UueHNtYWxsIDogZGlzdGFuY2UueHhzbWFsbCl9O1xuYDtcbmNvbnN0IFByb2dyZXNzVGl0bGUgPSBzdHlsZWQuZGl2IGBcbiAgJHtnZXRGb250U3R5bGUoeyBzaXplOiAnbWVkaXVtJyB9KX1cblxuICBtYXJnaW46IDAgMCAke2Rpc3RhbmNlLm1lZGl1bX07XG4gIHBhZGRpbmc6IDA7XG4gIGRpc3BsYXk6IGJsb2NrO1xuYDtcbmNvbnN0IFByb2dyZXNzRGVzY3JpcHRpb24gPSBzdHlsZWQuZGl2IGBcbiAgJHtnZXRGb250U3R5bGUoeyBzaXplOiAnc21hbGwnIH0pfVxuXG4gIG1hcmdpbjogJHtkaXN0YW5jZS5zbWFsbH0gMCAwO1xuYDtcbmNvbnN0IFByb2dyZXNzSW5kaWNhdG9yID0gc3R5bGVkLmRpdiBgXG4gIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XG4gIGJvcmRlcjogMDtcbiAgYmFja2dyb3VuZDogJHt0aGVtZWQocHJvcHMgPT4gcHJvcHMudGhlbWUudWkwKX07XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDA7XG5gO1xuY29uc3QgUHJvZ3Jlc3NTdG9wID0gc3R5bGVkKCdkaXYnKTxTdG9wUHJvcHMgJiBSZWFjdC5IVE1MUHJvcHM8SFRNTElucHV0RWxlbWVudD4+IGBcbiAgYm9yZGVyLXJhZGl1czogJHtkaXN0YW5jZS5zbWFsbH07XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6ICR7ZGlzdGFuY2Uuc21hbGx9O1xuICBoZWlnaHQ6ICR7ZGlzdGFuY2Uuc21hbGx9O1xuICBiYWNrZ3JvdW5kOiAke3RoZW1lZChwcm9wcyA9PiAocHJvcHMuYWN0aXZlID8gcHJvcHMudGhlbWUudWk3IDogcHJvcHMudGhlbWUudGV4dDIpKX07XG4gIHRvcDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG5gO1xuY29uc3QgU3Bpbm5pbmdBbmltYXRpb24gPSBrZXlmcmFtZXMgYFxuICBmcm9tIHtcbiAgICBsZWZ0OiAtJHtzcGlubmluZ1dpZHRofSU7XG4gIH1cbiAgdG8ge1xuICAgIGxlZnQ6IDEwMCU7XG4gIH1cbmA7XG5jb25zdCBNYXNrQ29udGFpbmVyID0gc3R5bGVkLmRpdiBgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgaGVpZ2h0OiAxMDAlO1xuYDtcbmNvbnN0IFByb2dyZXNzQW5pbWF0aW9uID0gc3R5bGVkLmRpdiBgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgbGVmdDogLSR7c3Bpbm5pbmdXaWR0aH0lO1xuICBhbmltYXRpb246ICR7U3Bpbm5pbmdBbmltYXRpb259IDJzIGxpbmVhciBpbmZpbml0ZTtcbmA7XG5mdW5jdGlvbiBnZXRQZXJjZW50KGN1cnJlbnQ6IG51bWJlciwgbWluaW11bTogbnVtYmVyLCBtYXhpbXVtOiBudW1iZXIpIHtcbiAgICBjb25zdCB2YWx1ZSA9IH5+KCgxMDAgKiAoY3VycmVudCAtIG1pbmltdW0pKSAvIChtYXhpbXVtIC0gbWluaW11bSkpO1xuICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB2YWx1ZSksIDEwMCk7XG4gICAgcmV0dXJuIGAke3BlcmNlbnR9JWA7XG59XG5mdW5jdGlvbiBzcGlubmluZyhjaGlsZDogUmVhY3QuUmVhY3RDaGlsZCkge1xuICAgIHJldHVybiAoPE1hc2tDb250YWluZXI+XG4gICAgICA8UHJvZ3Jlc3NBbmltYXRpb24+e2NoaWxkfTwvUHJvZ3Jlc3NBbmltYXRpb24+XG4gICAgPC9NYXNrQ29udGFpbmVyPik7XG59XG4vKipcbiAqIFRoZSBwcm9ncmVzcyBiYXIgY29tcG9uZW50IGRpc3BsYXlzIGEgcHJvZ3Jlc3MgaW5kaWNhdG9yIHJhbmdpbmcgZnJvbSBtaW4gdG8gbWF4LlxuICovXG5leHBvcnQgY29uc3QgUHJvZ3Jlc3NCYXIgPSBPYmplY3QuYXNzaWduKCgoKHsgbWluaW11bSA9IDAsIG1heGltdW0gPSAxMDAsIHZhbHVlOiBwcm9wVmFsdWUsIHRpdGxlLCBkZXNjcmlwdGlvbiwgYW5pbWF0ZSwgc3RvcHMgPSBbXSwgdHlwZSA9ICdwcmltYXJ5JyBhcyAncHJpbWFyeScsIHRoZW1lLCAuLi5yZXN0IH0pID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IChhbmltYXRlID09PSAnc3Bpbm5pbmcnID8gc3Bpbm5pbmdXaWR0aCA6IHByb3BWYWx1ZSkgfHwgMDtcbiAgICBjb25zdCB3aWR0aCA9IGdldFBlcmNlbnQodmFsdWUsIG1pbmltdW0sIG1heGltdW0pO1xuICAgIGNvbnN0IHRyYW5zaXRpb24gPSBhbmltYXRlID8gJ3dpZHRoIDIwMG1zJyA6ICdub25lJztcbiAgICBjb25zdCBpbmRpY2F0b3IgPSA8UHJvZ3Jlc3NJbmRpY2F0b3Igc3R5bGU9e3sgd2lkdGgsIHRyYW5zaXRpb24gfX0gdGhlbWU9e3RoZW1lfS8+O1xuICAgIHJldHVybiAoPFByb2dyZXNzQ29udGFpbmVyIHRoZW1lPXt0aGVtZX0+XG4gICAgICB7ISF0aXRsZSAmJiA8UHJvZ3Jlc3NUaXRsZSB0aGVtZT17dGhlbWV9Pnt0aXRsZX08L1Byb2dyZXNzVGl0bGU+fVxuICAgICAgPFByb2dyZXNzUmFpbCB0eXBlPXt0eXBlfSB0aGVtZT17dGhlbWV9IHsuLi5yZXN0fT5cbiAgICAgICAge2FuaW1hdGUgPT09ICdzcGlubmluZycgPyBzcGlubmluZyhpbmRpY2F0b3IpIDogaW5kaWNhdG9yfVxuICAgICAgICB7c3RvcHMubWFwKChzdG9wLCBpbmRleCkgPT4gKDxQcm9ncmVzc1N0b3Aga2V5PXtgJHtpbmRleH0tYXQtJHtzdG9wfWB9IHN0eWxlPXt7IGxlZnQ6IGdldFBlcmNlbnQoc3RvcCwgbWluaW11bSwgbWF4aW11bSkgfX0gYWN0aXZlPXtzdG9wIDw9IHZhbHVlfSB0aGVtZT17dGhlbWV9Lz4pKX1cbiAgICAgIDwvUHJvZ3Jlc3NSYWlsPlxuICAgICAgeyEhZGVzY3JpcHRpb24gJiYgPFByb2dyZXNzRGVzY3JpcHRpb24gdGhlbWU9e3RoZW1lfT57ZGVzY3JpcHRpb259PC9Qcm9ncmVzc0Rlc2NyaXB0aW9uPn1cbiAgICA8L1Byb2dyZXNzQ29udGFpbmVyPik7XG59KSBhcyBSZWFjdC5TRkM8UHJvZ3Jlc3NCYXJQcm9wcz4pLCB7IGlubmVyOiB7XG4gICAgICAgIGdldCBQcm9ncmVzc0luZGljYXRvcigpIHsgcmV0dXJuIFByb2dyZXNzSW5kaWNhdG9yIGFzIHR5cGVvZiBQcm9ncmVzc0luZGljYXRvcjsgfSxcbiAgICAgICAgZ2V0IFByb2dyZXNzQ29udGFpbmVyKCkgeyByZXR1cm4gUHJvZ3Jlc3NDb250YWluZXIgYXMgdHlwZW9mIFByb2dyZXNzQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgUHJvZ3Jlc3NUaXRsZSgpIHsgcmV0dXJuIFByb2dyZXNzVGl0bGUgYXMgdHlwZW9mIFByb2dyZXNzVGl0bGU7IH0sXG4gICAgICAgIGdldCBQcm9ncmVzc1JhaWwoKSB7IHJldHVybiBQcm9ncmVzc1JhaWwgYXMgdHlwZW9mIFByb2dyZXNzUmFpbDsgfSxcbiAgICAgICAgZ2V0IFByb2dyZXNzU3RvcCgpIHsgcmV0dXJuIFByb2dyZXNzU3RvcCBhcyB0eXBlb2YgUHJvZ3Jlc3NTdG9wOyB9LFxuICAgICAgICBnZXQgUHJvZ3Jlc3NEZXNjcmlwdGlvbigpIHsgcmV0dXJuIFByb2dyZXNzRGVzY3JpcHRpb24gYXMgdHlwZW9mIFByb2dyZXNzRGVzY3JpcHRpb247IH1cbiAgICB9IH0pO1xuUHJvZ3Jlc3NCYXIuZGlzcGxheU5hbWUgPSAnUHJvZ3Jlc3NCYXInO1xuIl19