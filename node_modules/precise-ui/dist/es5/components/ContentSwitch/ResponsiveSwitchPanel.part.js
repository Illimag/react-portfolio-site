"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var withResponsive_1 = require("../../hoc/withResponsive");
var ContentSwitch_part_1 = require("./ContentSwitch.part");
var OverflowMenu_1 = require("../OverflowMenu");
var Icon_1 = require("../Icon");
var defaultOrientation = 'horizontal';
var overflowButtonWidth = 50;
var ContentSwitchInt = Object.assign((function (_a) {
    var _b = _a.orientation, orientation = _b === void 0 ? defaultOrientation : _b, children = _a.children, theme = _a.theme, headers = _a.headers, activeIndex = _a.activeIndex, onSelect = _a.onSelect, rest = __rest(_a, ["orientation", "children", "theme", "headers", "activeIndex", "onSelect"]);
    var _c = React.useState([]), overflowItems = _c[0], setOverflowItems = _c[1];
    var containerRef = React.createRef();
    var headerRef = React.createRef();
    React.useLayoutEffect(function () {
        if (headerRef.current && containerRef.current && orientation === 'horizontal') {
            var containerWidth_1 = containerRef.current.offsetWidth;
            var headerNodesWidth = Array.from(headerRef.current.childNodes).map(function (node) { return node.offsetWidth; });
            var headersUlWidth = headerNodesWidth.reduce(function (acc, cur) { return (acc += cur); }, 0);
            if (headersUlWidth > containerWidth_1) {
                var overflowItems_1 = [];
                var visibleItemsWidth_1 = overflowButtonWidth;
                headerNodesWidth.forEach(function (nodeWidth, index) {
                    visibleItemsWidth_1 += nodeWidth;
                    if (visibleItemsWidth_1 > containerWidth_1) {
                        overflowItems_1.push(headers[index]);
                    }
                });
                setOverflowItems(overflowItems_1);
            }
        }
        return function () { return setOverflowItems([]); };
    }, [headerRef.current, containerRef.current, orientation]);
    return (React.createElement(ContentSwitch_part_1.Container, __assign({ theme: theme }, rest, { ref: containerRef }),
        React.createElement(ContentSwitch_part_1.Headers, { theme: theme, orientation: orientation, ref: headerRef },
            headers.slice(0, headers.length - overflowItems.length).map(function (element, index) { return (React.createElement(ContentSwitch_part_1.Header, { theme: theme, key: "head-" + index, active: index === activeIndex, onClick: function () { return onSelect(index); }, orientation: orientation }, element)); }),
            overflowItems.length > 0 && (React.createElement(OverflowMenu_1.OverflowMenu, { key: "overflowButton", items: overflowItems.map(function (element, index, _a) {
                    var length = _a.length;
                    return (React.createElement(ContentSwitch_part_1.OverflowItems, { onClick: function () { return onSelect(headers.length - length + index); } }, element));
                }), button: React.createElement(ContentSwitch_part_1.Header, null,
                    React.createElement(Icon_1.Icon, { name: "MoreVert" })) }))),
        React.createElement(ContentSwitch_part_1.Content, { theme: theme }, children)));
}), { inner: {
        get Container() { return ContentSwitch_part_1.Container; },
        get Headers() { return ContentSwitch_part_1.Headers; },
        get Header() { return ContentSwitch_part_1.Header; },
        get OverflowMenu() { return OverflowMenu_1.OverflowMenu; },
        get Content() { return ContentSwitch_part_1.Content; }
    } });
exports.ResponsiveSwitchPanel = withResponsive_1.withResponsive(ContentSwitchInt);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzcG9uc2l2ZVN3aXRjaFBhbmVsLnBhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Db250ZW50U3dpdGNoL1Jlc3BvbnNpdmVTd2l0Y2hQYW5lbC5wYXJ0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkJBQStCO0FBQy9CLDJEQUEwRDtBQUMxRCwyREFBMEY7QUFFMUYsZ0RBQStDO0FBQy9DLGdDQUErQjtBQUMvQixJQUFNLGtCQUFrQixHQUE2QixZQUFZLENBQUM7QUFDbEUsSUFBTSxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDL0IsSUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFFLENBQUMsVUFBQyxFQUE4RjtJQUE1RixJQUFBLG1CQUFnQyxFQUFoQyxxREFBZ0MsRUFBRSxzQkFBUSxFQUFFLGdCQUFLLEVBQUUsb0JBQU8sRUFBRSw0QkFBVyxFQUFFLHNCQUFRLEVBQUUsNkZBQU87SUFDNUgsSUFBQSx1QkFBc0UsRUFBckUscUJBQWEsRUFBRSx3QkFBc0QsQ0FBQztJQUM3RSxJQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFrQixDQUFDO0lBQ3ZELElBQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQW9CLENBQUM7SUFDdEQsS0FBSyxDQUFDLGVBQWUsQ0FBQztRQUNsQixJQUFJLFNBQVMsQ0FBQyxPQUFPLElBQUksWUFBWSxDQUFDLE9BQU8sSUFBSSxXQUFXLEtBQUssWUFBWSxFQUFFO1lBQ25FLElBQUEsbURBQTJCLENBQTBCO1lBQzdELElBQU0sZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFDLElBQW1CLElBQUssT0FBQSxJQUFJLENBQUMsV0FBVyxFQUFoQixDQUFnQixDQUFDLENBQUM7WUFDakgs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LE9BQU8sNEJBQXlCLENBQUMsQ0FBQyxDQUFDO0tBQ3RELEVBQUUsQ0FBQyxDQUFDO0FBTUksUUFBQSxxQkFBcUIsR0FBaUMsK0JBQWMsQ0FBQyxnQkFBZ0IsQ0FBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgd2l0aFJlc3BvbnNpdmUgfSBmcm9tICcuLi8uLi9ob2Mvd2l0aFJlc3BvbnNpdmUnO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBDb250ZW50LCBIZWFkZXIsIEhlYWRlcnMsIE92ZXJmbG93SXRlbXMgfSBmcm9tICcuL0NvbnRlbnRTd2l0Y2gucGFydCc7XG5pbXBvcnQgeyBDb250ZW50U3dpdGNoT3JpZW50YXRpb24sIENvbnRlbnRTd2l0Y2hQcm9wc0ludCB9IGZyb20gJy4vQ29udGVudFN3aXRjaFR5cGVzLnBhcnQnO1xuaW1wb3J0IHsgT3ZlcmZsb3dNZW51IH0gZnJvbSAnLi4vT3ZlcmZsb3dNZW51JztcbmltcG9ydCB7IEljb24gfSBmcm9tICcuLi9JY29uJztcbmNvbnN0IGRlZmF1bHRPcmllbnRhdGlvbjogQ29udGVudFN3aXRjaE9yaWVudGF0aW9uID0gJ2hvcml6b250YWwnO1xuY29uc3Qgb3ZlcmZsb3dCdXR0b25XaWR0aCA9IDUwO1xuY29uc3QgQ29udGVudFN3aXRjaEludCA9IE9iamVjdC5hc3NpZ24oKCgoeyBvcmllbnRhdGlvbiA9IGRlZmF1bHRPcmllbnRhdGlvbiwgY2hpbGRyZW4sIHRoZW1lLCBoZWFkZXJzLCBhY3RpdmVJbmRleCwgb25TZWxlY3QsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IFtvdmVyZmxvd0l0ZW1zLCBzZXRPdmVyZmxvd0l0ZW1zXSA9IFJlYWN0LnVzZVN0YXRlPHR5cGVvZiBoZWFkZXJzPihbXSk7XG4gICAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpO1xuICAgIGNvbnN0IGhlYWRlclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MVUxpc3RFbGVtZW50PigpO1xuICAgIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChoZWFkZXJSZWYuY3VycmVudCAmJiBjb250YWluZXJSZWYuY3VycmVudCAmJiBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9mZnNldFdpZHRoOiBjb250YWluZXJXaWR0aCB9ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJOb2Rlc1dpZHRoID0gQXJyYXkuZnJvbShoZWFkZXJSZWYuY3VycmVudC5jaGlsZE5vZGVzKS5tYXAoKG5vZGU6IEhUTUxMSUVsZW1lbnQpID0+IG5vZGUub2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyc1VsV2lkdGggPSBoZWFkZXJOb2Rlc1dpZHRoLnJlZHVjZSgoYWNjLCBjdXIpID0+IChhY2MgKz0gY3VyKSwgMCk7XG4gICAgICAgICAgICBpZiAoaGVhZGVyc1VsV2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93SXRlbXM6IHR5cGVvZiBoZWFkZXJzID0gW107XG4gICAgICAgICAgICAgICAgbGV0IHZpc2libGVJdGVtc1dpZHRoID0gb3ZlcmZsb3dCdXR0b25XaWR0aDtcbiAgICAgICAgICAgICAgICBoZWFkZXJOb2Rlc1dpZHRoLmZvckVhY2goKG5vZGVXaWR0aCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUl0ZW1zV2lkdGggKz0gbm9kZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaWJsZUl0ZW1zV2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dJdGVtcy5wdXNoKGhlYWRlcnNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldE92ZXJmbG93SXRlbXMob3ZlcmZsb3dJdGVtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHNldE92ZXJmbG93SXRlbXMoW10pO1xuICAgIH0sIFtoZWFkZXJSZWYuY3VycmVudCwgY29udGFpbmVyUmVmLmN1cnJlbnQsIG9yaWVudGF0aW9uXSk7XG4gICAgcmV0dXJuICg8Q29udGFpbmVyIHRoZW1lPXt0aGVtZX0gey4uLnJlc3R9IHJlZj17Y29udGFpbmVyUmVmfT5cbiAgICAgIDxIZWFkZXJzIHRoZW1lPXt0aGVtZX0gb3JpZW50YXRpb249e29yaWVudGF0aW9ufSByZWY9e2hlYWRlclJlZn0+XG4gICAgICAgIHtoZWFkZXJzLnNsaWNlKDAsIGhlYWRlcnMubGVuZ3RoIC0gb3ZlcmZsb3dJdGVtcy5sZW5ndGgpLm1hcCgoZWxlbWVudCwgaW5kZXgpID0+ICg8SGVhZGVyIHRoZW1lPXt0aGVtZX0ga2V5PXtgaGVhZC0ke2luZGV4fWB9IGFjdGl2ZT17aW5kZXggPT09IGFjdGl2ZUluZGV4fSBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdChpbmRleCl9IG9yaWVudGF0aW9uPXtvcmllbnRhdGlvbn0+XG4gICAgICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAgICA8L0hlYWRlcj4pKX1cbiAgICAgICAge292ZXJmbG93SXRlbXMubGVuZ3RoID4gMCAmJiAoPE92ZXJmbG93TWVudSBrZXk9XCJvdmVyZmxvd0J1dHRvblwiIGl0ZW1zPXtvdmVyZmxvd0l0ZW1zLm1hcCgoZWxlbWVudCwgaW5kZXgsIHsgbGVuZ3RoIH0pID0+ICg8T3ZlcmZsb3dJdGVtcyBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdChoZWFkZXJzLmxlbmd0aCAtIGxlbmd0aCArIGluZGV4KX0+e2VsZW1lbnR9PC9PdmVyZmxvd0l0ZW1zPikpfSBidXR0b249ezxIZWFkZXI+XG4gICAgICAgICAgICAgICAgPEljb24gbmFtZT1cIk1vcmVWZXJ0XCIvPlxuICAgICAgICAgICAgICA8L0hlYWRlcj59Lz4pfVxuICAgICAgPC9IZWFkZXJzPlxuICAgICAgPENvbnRlbnQgdGhlbWU9e3RoZW1lfT57Y2hpbGRyZW59PC9Db250ZW50PlxuICAgIDwvQ29udGFpbmVyPik7XG59KSBhcyBSZWFjdC5GQzxDb250ZW50U3dpdGNoUHJvcHNJbnQ+KSwgeyBpbm5lcjoge1xuICAgICAgICBnZXQgQ29udGFpbmVyKCkgeyByZXR1cm4gQ29udGFpbmVyIGFzIHR5cGVvZiBDb250YWluZXI7IH0sXG4gICAgICAgIGdldCBIZWFkZXJzKCkgeyByZXR1cm4gSGVhZGVycyBhcyB0eXBlb2YgSGVhZGVyczsgfSxcbiAgICAgICAgZ2V0IEhlYWRlcigpIHsgcmV0dXJuIEhlYWRlciBhcyB0eXBlb2YgSGVhZGVyOyB9LFxuICAgICAgICBnZXQgT3ZlcmZsb3dNZW51KCkgeyByZXR1cm4gT3ZlcmZsb3dNZW51IGFzIHR5cGVvZiBPdmVyZmxvd01lbnU7IH0sXG4gICAgICAgIGdldCBDb250ZW50KCkgeyByZXR1cm4gQ29udGVudCBhcyB0eXBlb2YgQ29udGVudDsgfVxuICAgIH0gfSk7XG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNpdmVDb250ZW50U3dpdGNoUHJvcHMgZXh0ZW5kcyBSZWFjdC5GQzxDb250ZW50U3dpdGNoUHJvcHNJbnQ+IHtcbiAgICAocHJvcHM6IENvbnRlbnRTd2l0Y2hQcm9wc0ludCAmIHtcbiAgICAgICAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgfSwgY29udGV4dD86IGFueSk6IEpTWC5FbGVtZW50O1xufVxuZXhwb3J0IGNvbnN0IFJlc3BvbnNpdmVTd2l0Y2hQYW5lbDogUmVzcG9uc2l2ZUNvbnRlbnRTd2l0Y2hQcm9wcyA9IHdpdGhSZXNwb25zaXZlKENvbnRlbnRTd2l0Y2hJbnQpIGFzIGFueTtcbiJdfQ==