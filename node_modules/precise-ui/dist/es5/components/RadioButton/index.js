"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var styled_1 = require("../../utils/styled");
var Label_1 = require("../Label");
var InputError_1 = require("../InputError");
var contexts_1 = require("../../contexts");
var distance_1 = require("../../distance");
var PaddedContainer_1 = require("../PaddedContainer");
var RadioButtonContainer = styled_1.default('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  position: relative;\n  display: inline-block;\n  opacity: ", ";\n  cursor: ", ";\n\n  + div {\n    margin-left: ", ";\n  }\n"], ["\n  position: relative;\n  display: inline-block;\n  opacity: ", ";\n  cursor: ", ";\n\n  + div {\n    margin-left: ", ";\n  }\n"])), function (props) { return (props.disabled ? '0.5' : '1.0'); }, function (props) { return (props.disabled ? 'not-allowed' : 'pointer'); }, distance_1.distance.large);
var RadioButtonCircle = styled_1.default.div(function (_a) {
    var _b = _a.theme, ui0 = _b.ui0, ui5 = _b.ui5;
    return "\n  outline: 0;\n  display: inline-block;\n  vertical-align: middle;\n  position: relative;\n  overflow: hidden;\n  flex: 0 0 auto;\n  padding: 0.1875em;\n  border: 2px solid " + ui5 + ";\n  border-radius: 100%;\n\n  &:focus {\n    box-shadow: 0px 0px 0px 2px " + ui0 + ";\n  }\n\n  + label {\n    vertical-align: middle;\n  }\n";
});
var SelectMark = styled_1.default('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  width: 0.5em;\n  height: 0.5em;\n  border-radius: 50%;\n  outline: 0;\n  background: ", ";\n  transition: all 0.2s;\n  opacity: ", ";\n  transform: ", ";\n"], ["\n  width: 0.5em;\n  height: 0.5em;\n  border-radius: 50%;\n  outline: 0;\n  background: ", ";\n  transition: all 0.2s;\n  opacity: ", ";\n  transform: ", ";\n"])), styled_1.themed(function (_a) {
    var theme = _a.theme;
    return theme.ui5;
}), function (props) { return (props.selected ? '1' : '0'); }, function (props) { return (props.selected ? 'scale(1)' : 'scale(0)'); });
var FlexContainer = styled_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  display: flex;\n  align-items: ", ";\n"], ["\n  display: flex;\n  align-items: ", ";\n"])), function (_a) {
    var withError = _a.withError;
    return (withError ? 'start' : 'center');
});
/**
 * The RadioButton input.
 */
var RadioButton = /** @class */ (function (_super) {
    __extends(RadioButton, _super);
    function RadioButton() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RadioButton.prototype.render = function () {
        var _a = this.props, children = _a.children, props = __rest(_a, ["children"]);
        return (React.createElement(contexts_1.FormContext.Consumer, null, function (form) { return (React.createElement(contexts_1.RadioButtonGroupContext.Consumer, null, function (ctx) { return (React.createElement(RadioButtonInt, __assign({ group: ctx, form: form }, props), children)); })); }));
    };
    RadioButton.inner = {
        get RadioButtonInt() { return RadioButtonInt; }
    };
    return RadioButton;
}(React.PureComponent));
exports.RadioButton = RadioButton;
var RadioButtonInt = /** @class */ (function (_super) {
    __extends(RadioButtonInt, _super);
    function RadioButtonInt(props) {
        var _this = _super.call(this, props) || this;
        _this.setValue = function (value) {
            var onChange = _this.props.onChange;
            _this.setState({
                value: value,
            });
            if (typeof onChange === 'function') {
                onChange({
                    value: value,
                });
            }
        };
        _this.select = function () {
            var _a = _this.props, onChange = _a.onChange, disabled = _a.disabled, group = _a.group, form = _a.form, _b = _a.name, name = _b === void 0 ? '' : _b;
            var _c = _this.state, controlled = _c.controlled, value = _c.value;
            if (!disabled && !value) {
                if (!controlled) {
                    if (group) {
                        group.select(_this);
                    }
                    else if (form) {
                        form.change({
                            name: name,
                            value: value,
                        });
                    }
                    else {
                        _this.setState({
                            value: true,
                        });
                    }
                }
                if (typeof onChange === 'function') {
                    onChange({
                        value: true,
                    });
                }
            }
        };
        _this.onSelected = function (e) {
            _this.select();
            e.preventDefault();
        };
        _this.control = function (e) {
            switch (e.keyCode) {
                case 13 /* enter */:
                case 32 /* space */:
                    _this.select();
                    break;
                default:
                    return;
            }
            e.stopPropagation();
            e.preventDefault();
        };
        _this.name = props.name;
        _this.state = {
            controlled: props.value !== undefined,
            value: props.value || props.defaultValue || false,
            error: props.error,
        };
        return _this;
    }
    RadioButtonInt.prototype.UNSAFE_componentWillReceiveProps = function (_a) {
        var _b = _a.value, value = _b === void 0 ? false : _b, error = _a.error;
        if (this.state.controlled) {
            this.setState({ value: value });
        }
        this.setState({ error: error });
    };
    RadioButtonInt.prototype.componentDidMount = function () {
        var _a = this.props, group = _a.group, form = _a.form;
        var controlled = this.state.controlled;
        if (!controlled) {
            if (group) {
                group.subscribe(this);
            }
            else if (form) {
                form.subscribe(this);
            }
        }
    };
    RadioButtonInt.prototype.componentWillUnmount = function () {
        var _a = this.props, group = _a.group, form = _a.form;
        var controlled = this.state.controlled;
        if (!controlled) {
            if (group) {
                group.unsubscribe(this);
            }
            else if (form) {
                form.unsubscribe(this);
            }
        }
    };
    RadioButtonInt.prototype.render = function () {
        var _a = this.props, children = _a.children, disabled = _a.disabled, theme = _a.theme, _0 = _a.value, _1 = _a.defaultValue, _2 = _a.onChange, _3 = _a.group, _4 = _a.form, _5 = _a.name, props = __rest(_a, ["children", "disabled", "theme", "value", "defaultValue", "onChange", "group", "form", "name"]);
        var _b = this.state, value = _b.value, error = _b.error;
        var containerProps = __assign({}, props, { theme: theme, onClick: this.onSelected, disabled: disabled });
        var circleProps = {
            selected: value,
            disabled: !!disabled,
            onKeyDown: this.control,
            theme: theme,
            tabIndex: disabled ? undefined : 0,
        };
        var Error = error && (React.createElement(PaddedContainer_1.PaddedContainer, { top: "xsmall", bottom: "xsmall" },
            React.createElement(InputError_1.InputError, null, error)));
        return (React.createElement(RadioButtonContainer, __assign({}, containerProps),
            React.createElement(FlexContainer, { withError: !!error },
                React.createElement(RadioButtonCircle, __assign({}, circleProps),
                    React.createElement(SelectMark, __assign({}, circleProps))),
                children && (React.createElement(Label_1.Label, { attached: true, theme: theme },
                    children,
                    Error))),
            !children && Error));
    };
    RadioButtonInt.inner = {
        get PaddedContainer() { return PaddedContainer_1.PaddedContainer; },
        get InputError() { return InputError_1.InputError; },
        get RadioButtonContainer() { return RadioButtonContainer; },
        get FlexContainer() { return FlexContainer; },
        get RadioButtonCircle() { return RadioButtonCircle; },
        get SelectMark() { return SelectMark; },
        get Label() { return Label_1.Label; }
    };
    return RadioButtonInt;
}(React.PureComponent));
exports.RadioButtonInt = RadioButtonInt;
var templateObject_1, templateObject_2, templateObject_3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9SYWRpb0J1dHRvbi9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkJBQStCO0FBQy9CLDZDQUFvRDtBQUNwRCxrQ0FBaUM7QUFFakMsNENBQTJDO0FBQzNDLDJDQUFtRztBQUduRywyQ0FBMEM7QUFFMUMsc0RBQXFEO0FBcURyRCxJQUFNLG9CQUFvQixHQUFHLGdCQUFNLENBQUMsS0FBSyxDQUFDLHFNQUE0QixnRUFHekQsRUFBeUMsZUFDMUMsRUFBcUQsbUNBRzlDLEVBQWMsVUFFaEMsS0FOWSxVQUFBLEtBQUssSUFBSSxPQUFBLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBaEMsQ0FBZ0MsRUFDMUMsVUFBQSxLQUFLLElBQUksT0FBQSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQTVDLENBQTRDLEVBRzlDLG1CQUFRLENBQUMsS0FBSyxDQUVoQyxDQUFDO0FBQ0YsSUFBTSxpQkFBaUIsR0FBRyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFDLEVBQXVCO1FBQXJCLGFBQW1CLEVBQVYsWUFBRyxFQUFFLFlBQUc7SUFBUyxPQUFBLG9MQVE1QyxHQUFHLGtGQUlTLEdBQUcsOERBTXBDO0FBbEJpRSxDQWtCakUsQ0FBQyxDQUFDO0FBQ0gsSUFBTSxVQUFVLEdBQUcsZ0JBQU0sQ0FBQyxLQUFLLENBQUMsb09BQXlCLDJGQUt6QyxFQUFnQyx5Q0FFbkMsRUFBcUMsa0JBQ25DLEVBQW1ELEtBQ2pFLEtBSmUsZUFBTSxDQUFDLFVBQUMsRUFBUztRQUFQLGdCQUFLO0lBQU8sT0FBQSxLQUFLLENBQUMsR0FBRztB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ZSxJQUFDLEdBQUcsRUFBQyxRQUFRLEVBQUMsTUFBTSxFQUFDLFFBQVE7WUFDckUsb0JBQUMsdUJBQVUsUUFBRSxLQUFLLENBQWMsQ0FDaEIsQ0FBQyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxvQkFBQyxvQkFBb0IsZUFBSyxjQUFjO1lBQ2hELG9CQUFDLGFBQWEsSUFBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLEtBQUs7Z0JBQy9CLG9CQUFDLGlCQUFpQixlQUFLLFdBQVc7b0JBQ2hDLG9CQUFDLFVBQVUsZUFBSyxXQUFXLEVBQUcsQ0FDWjtnQkFDbkIsUUFBUSxJQUFJLENBQUMsb0JBQUMsYUFBSyxJQUFDLFFBQVEsUUFBQyxLQUFLLEVBQUUsS0FBSztvQkFDckMsUUFBUTtvQkFDUixLQUFLLENBQ0EsQ0FBQyxDQUNHO1lBQ2YsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUNFLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBQ00sb0JBQUssR0FBRztRQUNYLElBQUksZUFBZSxLQUFLLE9BQU8saUNBQXlDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksVUFBVSxLQUFLLE9BQU8sdUJBQStCLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQUksb0JBQW9CLEtBQUssT0FBTyxvQkFBbUQsQ0FBQyxDQUFDLENBQUM7UUFDMUYsSUFBSSxhQUFhLEtBQUssT0FBTyxhQUFxQyxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLGlCQUFpQixLQUFLLE9BQU8saUJBQTZDLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLElBQUksVUFBVSxLQUFLLE9BQU8sVUFBK0IsQ0FBQyxDQUFDLENBQUM7UUFDNUQsSUFBSSxLQUFLLEtBQUssT0FBTyxhQUFxQixDQUFDLENBQUMsQ0FBQztLQUNoRCxDQUFDO0lBQ04scUJBQUM7Q0FBQSxBQXhJRCxDQUFvQyxLQUFLLENBQUMsYUFBYSxHQXdJdEQ7QUF4SVksd0NBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkLCB7IHRoZW1lZCB9IGZyb20gJy4uLy4uL3V0aWxzL3N0eWxlZCc7XG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gJy4uL0xhYmVsJztcbmltcG9ydCB7IFN0YW5kYXJkUHJvcHMgfSBmcm9tICcuLi8uLi9jb21tb24nO1xuaW1wb3J0IHsgSW5wdXRFcnJvciB9IGZyb20gJy4uL0lucHV0RXJyb3InO1xuaW1wb3J0IHsgRm9ybUNvbnRleHQsIFJhZGlvQnV0dG9uR3JvdXBDb250ZXh0LCBSYWRpb0J1dHRvbkdyb3VwQ29udGV4dFR5cGUgfSBmcm9tICcuLi8uLi9jb250ZXh0cyc7XG5pbXBvcnQgeyBGb3JtQ29udGV4dFByb3BzIH0gZnJvbSAnLi4vLi4vaG9jJztcbmltcG9ydCB7IEtleUNvZGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBJbnB1dE5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL0lucHV0Tm90aWZpY2F0aW9uJztcbmltcG9ydCB7IFBhZGRlZENvbnRhaW5lciB9IGZyb20gJy4uL1BhZGRlZENvbnRhaW5lcic7XG5leHBvcnQgaW50ZXJmYWNlIFJhZGlvQnV0dG9uQ2hhbmdlRXZlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHNlbGVjdGVkIHN0YXRlIG9mIHRoZSByYWRpbyBidXR0b24uXG4gICAgICovXG4gICAgdmFsdWU6IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIFJhZGlvQnV0dG9uUHJvcHMgZXh0ZW5kcyBTdGFuZGFyZFByb3BzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgcmFkaW8gYnV0dG9uLlxuICAgICAqL1xuICAgIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICAgIC8qKlxuICAgICAqIEV2ZW50IGVtaXR0ZWQgb25jZSB0aGUgcmFkaW8gYnV0dG9uIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIG9uQ2hhbmdlPyhlOiBSYWRpb0J1dHRvbkNoYW5nZUV2ZW50KTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSByYWRpbyBidXR0b24gYXMgZGlzYWJsZWQuXG4gICAgICovXG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIHRoZSBlcnJvciBtZXNzYWdlIGJlbG93IHRoZSByYWRpbyBidXR0b24uXG4gICAgICovXG4gICAgZXJyb3I/OiBSZWFjdC5SZWFjdENoaWxkO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNlbGVjdGVkIGFuZCBlbnRlcnMgdGhlIGNvbnRyb2xsZWQgbW9kZS5cbiAgICAgKi9cbiAgICB2YWx1ZT86IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW5pdGlhbCBzZWxlY3RlZC4gRG9lcyBub3QgZW50ZXIgdGhlIGNvbnRyb2xsZWQgbW9kZS5cbiAgICAgKi9cbiAgICBkZWZhdWx0VmFsdWU/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgdGhlIHJhZGlvIGJ1dHRvbiB3aXRoaW4gYSByYWRpbyBidXR0b24gZ3JvdXAuXG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmFkaW9CdXR0b25JbnRQcm9wcyBleHRlbmRzIFJhZGlvQnV0dG9uUHJvcHMge1xuICAgIGdyb3VwPzogUmFkaW9CdXR0b25Hcm91cENvbnRleHRUeXBlO1xufVxuZXhwb3J0IGludGVyZmFjZSBSYWRpb0J1dHRvbkludFN0YXRlIHtcbiAgICB2YWx1ZTogYm9vbGVhbjtcbiAgICBlcnJvcj86IFJlYWN0LlJlYWN0Q2hpbGQ7XG4gICAgY29udHJvbGxlZDogYm9vbGVhbjtcbn1cbmludGVyZmFjZSBSYWRpb0J1dHRvbkNvbnRhaW5lclByb3BzIHtcbiAgICBkaXNhYmxlZD86IGJvb2xlYW47XG59XG5pbnRlcmZhY2UgUmFkaW9CdXR0b25DaXJjbGVQcm9wcyB7XG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgdGhlbWU6IGFueTtcbn1cbmNvbnN0IFJhZGlvQnV0dG9uQ29udGFpbmVyID0gc3R5bGVkKCdkaXYnKTxSYWRpb0J1dHRvbkNvbnRhaW5lclByb3BzPiBgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBvcGFjaXR5OiAke3Byb3BzID0+IChwcm9wcy5kaXNhYmxlZCA/ICcwLjUnIDogJzEuMCcpfTtcbiAgY3Vyc29yOiAke3Byb3BzID0+IChwcm9wcy5kaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcicpfTtcblxuICArIGRpdiB7XG4gICAgbWFyZ2luLWxlZnQ6ICR7ZGlzdGFuY2UubGFyZ2V9O1xuICB9XG5gO1xuY29uc3QgUmFkaW9CdXR0b25DaXJjbGUgPSBzdHlsZWQuZGl2KCh7IHRoZW1lOiB7IHVpMCwgdWk1IH0gfSkgPT4gYFxuICBvdXRsaW5lOiAwO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZmxleDogMCAwIGF1dG87XG4gIHBhZGRpbmc6IDAuMTg3NWVtO1xuICBib3JkZXI6IDJweCBzb2xpZCAke3VpNX07XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG5cbiAgJjpmb2N1cyB7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMnB4ICR7dWkwfTtcbiAgfVxuXG4gICsgbGFiZWwge1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIH1cbmApO1xuY29uc3QgU2VsZWN0TWFyayA9IHN0eWxlZCgnZGl2Jyk8UmFkaW9CdXR0b25DaXJjbGVQcm9wcz4gYFxuICB3aWR0aDogMC41ZW07XG4gIGhlaWdodDogMC41ZW07XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgb3V0bGluZTogMDtcbiAgYmFja2dyb3VuZDogJHt0aGVtZWQoKHsgdGhlbWUgfSkgPT4gdGhlbWUudWk1KX07XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBvcGFjaXR5OiAke3Byb3BzID0+IChwcm9wcy5zZWxlY3RlZCA/ICcxJyA6ICcwJyl9O1xuICB0cmFuc2Zvcm06ICR7cHJvcHMgPT4gKHByb3BzLnNlbGVjdGVkID8gJ3NjYWxlKDEpJyA6ICdzY2FsZSgwKScpfTtcbmA7XG5jb25zdCBGbGV4Q29udGFpbmVyID0gc3R5bGVkLmRpdjx7XG4gICAgd2l0aEVycm9yPzogYm9vbGVhbjtcbn0+IGBcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6ICR7KHsgd2l0aEVycm9yIH0pID0+ICh3aXRoRXJyb3IgPyAnc3RhcnQnIDogJ2NlbnRlcicpfTtcbmA7XG4vKipcbiAqIFRoZSBSYWRpb0J1dHRvbiBpbnB1dC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJhZGlvQnV0dG9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxSYWRpb0J1dHRvblByb3BzPiB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNoaWxkcmVuLCAuLi5wcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgcmV0dXJuICg8Rm9ybUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHtmb3JtID0+ICg8UmFkaW9CdXR0b25Hcm91cENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICB7Y3R4ID0+ICg8UmFkaW9CdXR0b25JbnQgZ3JvdXA9e2N0eH0gZm9ybT17Zm9ybX0gey4uLnByb3BzfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvUmFkaW9CdXR0b25JbnQ+KX1cbiAgICAgICAgICA8L1JhZGlvQnV0dG9uR3JvdXBDb250ZXh0LkNvbnN1bWVyPil9XG4gICAgICA8L0Zvcm1Db250ZXh0LkNvbnN1bWVyPik7XG4gICAgfVxuICAgIHN0YXRpYyBpbm5lciA9IHtcbiAgICAgICAgZ2V0IFJhZGlvQnV0dG9uSW50KCkgeyByZXR1cm4gUmFkaW9CdXR0b25JbnQgYXMgdHlwZW9mIFJhZGlvQnV0dG9uSW50OyB9XG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBSYWRpb0J1dHRvbkludCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UmFkaW9CdXR0b25JbnRQcm9wcyAmIEZvcm1Db250ZXh0UHJvcHMsIFJhZGlvQnV0dG9uSW50U3RhdGU+IHtcbiAgICByZWFkb25seSBuYW1lPzogc3RyaW5nO1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBSYWRpb0J1dHRvbkludFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gcHJvcHMubmFtZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZWQ6IHByb3BzLnZhbHVlICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMudmFsdWUgfHwgcHJvcHMuZGVmYXVsdFZhbHVlIHx8IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IHByb3BzLmVycm9yLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyh7IHZhbHVlID0gZmFsc2UsIGVycm9yIH06IFJhZGlvQnV0dG9uSW50UHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29udHJvbGxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvciB9KTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgZ3JvdXAsIGZvcm0gfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgaWYgKCFjb250cm9sbGVkKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBncm91cC5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmb3JtKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgZ3JvdXAsIGZvcm0gfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgaWYgKCFjb250cm9sbGVkKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBncm91cC51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZvcm0pIHtcbiAgICAgICAgICAgICAgICBmb3JtLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFZhbHVlID0gKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIG9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcHJpdmF0ZSBzZWxlY3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgb25DaGFuZ2UsIGRpc2FibGVkLCBncm91cCwgZm9ybSwgbmFtZSA9ICcnIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IGNvbnRyb2xsZWQsIHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoIWRpc2FibGVkICYmICF2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFjb250cm9sbGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLnNlbGVjdCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZm9ybSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByaXZhdGUgb25TZWxlY3RlZCA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdCgpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICBwcml2YXRlIGNvbnRyb2wgPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuZW50ZXI6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGVzLnNwYWNlOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIGRpc2FibGVkLCB0aGVtZSwgdmFsdWU6IF8wLCBkZWZhdWx0VmFsdWU6IF8xLCBvbkNoYW5nZTogXzIsIGdyb3VwOiBfMywgZm9ybTogXzQsIG5hbWU6IF81LCAuLi5wcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZXJyb3IgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclByb3BzID0ge1xuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICB0aGVtZSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25TZWxlY3RlZCxcbiAgICAgICAgICAgIGRpc2FibGVkLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjaXJjbGVQcm9wcyA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiB2YWx1ZSxcbiAgICAgICAgICAgIGRpc2FibGVkOiAhIWRpc2FibGVkLFxuICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmNvbnRyb2wsXG4gICAgICAgICAgICB0aGVtZSxcbiAgICAgICAgICAgIHRhYkluZGV4OiBkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IEVycm9yID0gZXJyb3IgJiYgKDxQYWRkZWRDb250YWluZXIgdG9wPVwieHNtYWxsXCIgYm90dG9tPVwieHNtYWxsXCI+XG4gICAgICAgIDxJbnB1dEVycm9yPntlcnJvcn08L0lucHV0RXJyb3I+XG4gICAgICA8L1BhZGRlZENvbnRhaW5lcj4pO1xuICAgICAgICByZXR1cm4gKDxSYWRpb0J1dHRvbkNvbnRhaW5lciB7Li4uY29udGFpbmVyUHJvcHN9PlxuICAgICAgICA8RmxleENvbnRhaW5lciB3aXRoRXJyb3I9eyEhZXJyb3J9PlxuICAgICAgICAgIDxSYWRpb0J1dHRvbkNpcmNsZSB7Li4uY2lyY2xlUHJvcHN9PlxuICAgICAgICAgICAgPFNlbGVjdE1hcmsgey4uLmNpcmNsZVByb3BzfS8+XG4gICAgICAgICAgPC9SYWRpb0J1dHRvbkNpcmNsZT5cbiAgICAgICAgICB7Y2hpbGRyZW4gJiYgKDxMYWJlbCBhdHRhY2hlZCB0aGVtZT17dGhlbWV9PlxuICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIHtFcnJvcn1cbiAgICAgICAgICAgIDwvTGFiZWw+KX1cbiAgICAgICAgPC9GbGV4Q29udGFpbmVyPlxuICAgICAgICB7IWNoaWxkcmVuICYmIEVycm9yfVxuICAgICAgPC9SYWRpb0J1dHRvbkNvbnRhaW5lcj4pO1xuICAgIH1cbiAgICBzdGF0aWMgaW5uZXIgPSB7XG4gICAgICAgIGdldCBQYWRkZWRDb250YWluZXIoKSB7IHJldHVybiBQYWRkZWRDb250YWluZXIgYXMgdHlwZW9mIFBhZGRlZENvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IElucHV0RXJyb3IoKSB7IHJldHVybiBJbnB1dEVycm9yIGFzIHR5cGVvZiBJbnB1dEVycm9yOyB9LFxuICAgICAgICBnZXQgUmFkaW9CdXR0b25Db250YWluZXIoKSB7IHJldHVybiBSYWRpb0J1dHRvbkNvbnRhaW5lciBhcyB0eXBlb2YgUmFkaW9CdXR0b25Db250YWluZXI7IH0sXG4gICAgICAgIGdldCBGbGV4Q29udGFpbmVyKCkgeyByZXR1cm4gRmxleENvbnRhaW5lciBhcyB0eXBlb2YgRmxleENvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IFJhZGlvQnV0dG9uQ2lyY2xlKCkgeyByZXR1cm4gUmFkaW9CdXR0b25DaXJjbGUgYXMgdHlwZW9mIFJhZGlvQnV0dG9uQ2lyY2xlOyB9LFxuICAgICAgICBnZXQgU2VsZWN0TWFyaygpIHsgcmV0dXJuIFNlbGVjdE1hcmsgYXMgdHlwZW9mIFNlbGVjdE1hcms7IH0sXG4gICAgICAgIGdldCBMYWJlbCgpIHsgcmV0dXJuIExhYmVsIGFzIHR5cGVvZiBMYWJlbDsgfVxuICAgIH07XG59XG4iXX0=