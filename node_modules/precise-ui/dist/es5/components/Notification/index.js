"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var colors = require("../../colors");
var styled_1 = require("../../utils/styled");
var distance_1 = require("../../distance");
var IconLink_1 = require("../IconLink");
var Icon_1 = require("../Icon");
var textStyles_1 = require("../../textStyles");
function getNotificationColor(type, theme) {
    if (type === void 0) { type = 'none'; }
    switch (type) {
        case 'success':
            return theme.notificationColorSuccess;
        case 'info':
            return theme.notificationColorInfo;
        case 'warning':
            return theme.notificationColorWarning;
        case 'error':
            return theme.notificationColorError;
        case 'none':
        default:
            return theme.notificationColorNone;
    }
}
function getNotificationIcon(type) {
    if (type === void 0) { type = 'none'; }
    switch (type) {
        case 'success':
            return 'CheckCircle';
        case 'info':
            return 'Info';
        case 'warning':
            return 'Warning';
        case 'error':
            return 'Error';
        case 'none':
        default:
            return 'Notifications';
    }
}
var StyledNotification = styled_1.default.div(styled_1.themed(function (_a) {
    var closed = _a.closed, type = _a.type, theme = _a.theme;
    return "\n  position: relative;\n  display: " + (closed ? 'none' : 'flex') + ";\n  background: #fff;\n  border-style: solid;\n  border-color: " + getNotificationColor(type, theme) + ";\n  margin-bottom: " + distance_1.distance.small + ";\n  padding: " + theme.notificationPadding + ";\n  box-shadow: " + theme.notificationBoxShadow + ";\n  border-width: " + theme.notificationBorderWidth + ";\n";
}));
var StyledTitle = styled_1.default.div(styled_1.themed(function (_a) {
    var _b = _a.theme, notificationTitleFontSize = _b.notificationTitleFontSize, notificationTitleLineHeight = _b.notificationTitleLineHeight;
    return "\n  font-family: inherit;\n  font-size: " + notificationTitleFontSize + ";\n  line-height: " + notificationTitleLineHeight + ";\n  color: #404040;\n  margin-right: " + distance_1.distance.small + ";\n";
}));
var ContentWrapper = styled_1.default.span(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  display: contents;\n"], ["\n  display: contents;\n"])));
var StyledContent = styled_1.default.div(styled_1.themed(function (_a) {
    var inline = _a.inline, _b = _a.theme, notificationTextFontSize = _b.notificationTextFontSize, notificationTextLineHeight = _b.notificationTextLineHeight;
    return "\n  display: " + (inline ? 'inline' : 'block') + ";\n  font-family: inherit;\n  font-size: " + notificationTextFontSize + ";\n  line-height: " + notificationTextLineHeight + ";\n  color: #404040;\n  margin-right: " + distance_1.distance.small + ";\n";
}));
var ActionContainer = styled_1.default('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  display: ", ";\n"], ["\n  display: ", ";\n"])), function (props) { return (props.inline ? 'inline' : 'block'); });
var CloseButton = styled_1.default(IconLink_1.IconLink)(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  ", "\n\n  position: absolute;\n  right: ", ";\n  top: ", ";\n  background-color: ", ";\n  color: ", ";\n  padding: 0;\n  border: none;\n  outline: none;\n"], ["\n  ", "\n\n  position: absolute;\n  right: ", ";\n  top: ", ";\n  background-color: ", ";\n  color: ", ";\n  padding: 0;\n  border: none;\n  outline: none;\n"])), textStyles_1.getFontStyle({ size: 'medium' }), distance_1.distance.small, distance_1.distance.small, colors.transparent, colors.black);
var LayoutVertical = styled_1.css(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  display: flex;\n  flex-direction: column;\n"], ["\n  display: flex;\n  flex-direction: column;\n"])));
var LayoutInline = styled_1.css(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n  display: block;\n"], ["\n  display: block;\n"])));
var ContentContainer = styled_1.default.div(templateObject_6 || (templateObject_6 = __makeTemplateObject(["\n  ", ";\n  margin-right: ", ";\n  width: 100%;\n"], ["\n  ", ";\n  margin-right: ", ";\n  width: 100%;\n"])), function (props) { return (props.inline ? LayoutInline : LayoutVertical); }, distance_1.distance.medium);
var IconContainer = styled_1.default.div(styled_1.themed(function (_a) {
    var notificationIconMarginRight = _a.theme.notificationIconMarginRight;
    return styled_1.css(templateObject_7 || (templateObject_7 = __makeTemplateObject(["\n      margin-right: ", ";\n    "], ["\n      margin-right: ", ";\n    "])), notificationIconMarginRight);
}));
var StyledIconInt = Object.assign((function (_a) {
    var _0 = _a.type, props = __rest(_a, ["type"]);
    return React.createElement(Icon_1.Icon, __assign({}, props));
}), { inner: {
        get Icon() { return Icon_1.Icon; }
    } });
var StyledIcon = styled_1.default(StyledIconInt)(templateObject_8 || (templateObject_8 = __makeTemplateObject(["\n  color: ", ";\n"], ["\n  color: ", ";\n"])), styled_1.themed(function (props) { return getNotificationColor(props.type, props.theme); }));
/**
 * The Notification component for rendering an inline notification message.
 */
var Notification = /** @class */ (function (_super) {
    __extends(Notification, _super);
    function Notification(props) {
        var _this = _super.call(this, props) || this;
        _this.onCloseHandler = function (e) {
            var _a = _this.props, onClose = _a.onClose, closeable = _a.closeable;
            if (typeof onClose === 'function' && closeable) {
                var selfClose = onClose(e);
                if (selfClose === false) {
                    return;
                }
            }
            _this.setState({ closed: true });
        };
        _this.state = {
            closed: false,
        };
        return _this;
    }
    Notification.prototype.render = function () {
        var _a = this.props, _b = _a.type, type = _b === void 0 ? 'none' : _b, children = _a.children, title = _a.title, actionRenderer = _a.actionRenderer, theme = _a.theme, style = _a.style, closeable = _a.closeable, other = __rest(_a, ["type", "children", "title", "actionRenderer", "theme", "style", "closeable"]);
        var closed = this.state.closed;
        var isInline = !title;
        return (React.createElement(StyledNotification, __assign({ theme: theme, closed: closed, type: type }, other),
            React.createElement(IconContainer, { theme: theme },
                React.createElement(StyledIcon, { type: type, name: getNotificationIcon(type), size: "22px", theme: theme })),
            React.createElement(ContentContainer, { inline: isInline },
                title && React.createElement(StyledTitle, { theme: theme }, title),
                React.createElement(StyledContent, { inline: isInline, theme: theme }, children),
                React.createElement(ActionContainer, { inline: isInline },
                    React.createElement(ContentWrapper, { onClick: this.onCloseHandler }, actionRenderer && actionRenderer()))),
            closeable && React.createElement(CloseButton, { onClick: this.onCloseHandler, icon: "Close" })));
    };
    Notification.defaultProps = {
        closeable: true,
    };
    Notification.inner = {
        get StyledNotification() { return StyledNotification; },
        get IconContainer() { return IconContainer; },
        get StyledIcon() { return StyledIcon; },
        get ContentContainer() { return ContentContainer; },
        get StyledTitle() { return StyledTitle; },
        get StyledContent() { return StyledContent; },
        get ActionContainer() { return ActionContainer; },
        get ContentWrapper() { return ContentWrapper; },
        get CloseButton() { return CloseButton; }
    };
    return Notification;
}(React.Component));
exports.Notification = Notification;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Ob3RpZmljYXRpb24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZCQUErQjtBQUMvQixxQ0FBdUM7QUFDdkMsNkNBQXlEO0FBRXpELDJDQUEwQztBQUUxQyx3Q0FBdUM7QUFDdkMsZ0NBQTBDO0FBQzFDLCtDQUFnRDtBQWlDaEQsU0FBUyxvQkFBb0IsQ0FBQyxJQUErQixFQUFFLEtBQXVCO0lBQXhELHFCQUFBLEVBQUEsYUFBK0I7SUFDekQsUUFBUSxJQUFJLEVBQUU7UUFDVixLQUFLLFNBQVM7WUFDVixPQUFPLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQztRQUMxQyxLQUFLLE1BQU07WUFDUCxPQUFPLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQztRQUN2QyxLQUFLLFNBQVM7WUFDVixPQUFPLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQztRQUMxQyxLQUFLLE9BQU87WUFDUixPQUFPLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQztRQUN4QyxLQUFLLE1BQU0sQ0FBQztRQUNaO1lBQ0ksT0FBTyxLQUFLLENBQUMscUJBQXFCLENBQUM7S0FDMUM7QUFDTCxDQUFDO0FBQ0QsU0FBUyxtQkFBbUIsQ0FBQyxJQUErQjtJQUEvQixxQkFBQSxFQUFBLGFBQStCO0lBQ3hELFFBQVEsSUFBSSxFQUFFO1FBQ1YsS0FBSyxTQUFTO1lBQ1YsT0FBTyxhQUFhLENBQUM7UUFDekIsS0FBSyxNQUFNO1lBQ1AsT0FBTyxNQUFNLENBQUM7UUFDbEIsS0FBSyxTQUFTO1lBQ1YsT0FBTyxTQUFTLENBQUM7UUFDckIsS0FBSyxPQUFPO1lBQ1IsT0FBTyxPQUFPLENBQUM7UUFDbkIsS0FBSyxNQUFNLENBQUM7UUFDWjtZQUNJLE9BQU8sZUFBZSxDQUFDO0tBQzlCO0FBQ0wsQ0FBQztBQUlELElBQU0s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O1FBQ3JFLElBQUksVUFBVSxLQUFLLE9BQU8sVUFBK0IsQ0FBQyxDQUFDLENBQUM7UUFDNUQsSUFBSSxnQkFBZ0IsS0FBSyxPQUFPLGdCQUEyQyxDQUFDLENBQUMsQ0FBQztRQUM5RSxJQUFJLFdBQVcsS0FBSyxPQUFPLFdBQWlDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksYUFBYSxLQUFLLE9BQU8sYUFBcUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsSUFBSSxlQUFlLEtBQUssT0FBTyxlQUF5QyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLGNBQWMsS0FBSyxPQUFPLGNBQXVDLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLElBQUksV0FBVyxLQUFLLE9BQU8sV0FBaUMsQ0FBQyxDQUFDLENBQUM7S0FDbEUsQ0FBQztJQUNOLG1CQUFDO0NBQUEsQUFuREQsQ0FBa0MsS0FBSyxDQUFDLFNBQVMsR0FtRGhEO0FBbkRZLG9DQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgY29sb3JzIGZyb20gJy4uLy4uL2NvbG9ycyc7XG5pbXBvcnQgc3R5bGVkLCB7IHRoZW1lZCwgY3NzIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3R5bGVkJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvblR5cGUgfSBmcm9tICcuLi9Ob3RpZmljYXRpb25zL3R5cGVzJztcbmltcG9ydCB7IGRpc3RhbmNlIH0gZnJvbSAnLi4vLi4vZGlzdGFuY2UnO1xuaW1wb3J0IHsgU3RhbmRhcmRQcm9wcywgUHJlY2lzZUZ1bGxUaGVtZSB9IGZyb20gJy4uLy4uL2NvbW1vbic7XG5pbXBvcnQgeyBJY29uTGluayB9IGZyb20gJy4uL0ljb25MaW5rJztcbmltcG9ydCB7IEljb24sIEljb25Qcm9wcyB9IGZyb20gJy4uL0ljb24nO1xuaW1wb3J0IHsgZ2V0Rm9udFN0eWxlIH0gZnJvbSAnLi4vLi4vdGV4dFN0eWxlcyc7XG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvblByb3BzIGV4dGVuZHMgU3RhbmRhcmRQcm9wcyB7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHlwZSBvZiB0aGUgbm90aWZpY2F0aW9uLlxuICAgICAqL1xuICAgIHR5cGU/OiBOb3RpZmljYXRpb25UeXBlO1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpdGxlIG9mIHRoZSBub3RpZmljYXRpb24gbWVzc2FnZS5cbiAgICAgKi9cbiAgICB0aXRsZT86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbGx5IHByb3ZpZGVzIGEgY3VzdG9tIHdheSBmb3IgcmVuZGVyaW5nIGFuIGFjdGlvbiBjb250cm9sLlxuICAgICAqIElmIGBjbG9zZWFibGVgIGlzIHNldCB0byBgdHJ1ZWAsIGNsaWNraW5nIG9uIHRoZSBhY3Rpb24gZWxlbWVudCB3aWxsIGFsc28gdHJpZ2dlciBhbiBgb25DbG9zZWAgZXZlbnQuXG4gICAgICovXG4gICAgYWN0aW9uUmVuZGVyZXI/KCk6IFJlYWN0LlJlYWN0Q2hpbGQ7XG4gICAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgY2xvc2UgYWN0aW9uIHRyaWdnZXJlZC4gUmV0dXJuIGBmYWxzZWAgaWYgZG9uJ3RcbiAgICAgKiB3YW50IG5vdGlmaWNhdGlvbiB0byBzZWxmLWNsb3NlIGFmdGVyIGV2ZW50IHdhcyBwbGF5ZWQuXG4gICAgICovXG4gICAgb25DbG9zZT8oZTogUmVhY3QuTW91c2VFdmVudCk6IGJvb2xlYW4gfCB2b2lkO1xuICAgIC8qKlxuICAgICAqIFNldHMgaWYgdGhlIG5vdGlmaWNhdGlvbiBjYW4gYmUgY2xvc2VkIG9yIG5vdC5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgY2xvc2VhYmxlPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uU3RhdGUge1xuICAgIGNsb3NlZDogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVkTm90aWZpY2F0aW9uUHJvcHMge1xuICAgIGNsb3NlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlO1xufVxuZnVuY3Rpb24gZ2V0Tm90aWZpY2F0aW9uQ29sb3IodHlwZTogTm90aWZpY2F0aW9uVHlwZSA9ICdub25lJywgdGhlbWU6IFByZWNpc2VGdWxsVGhlbWUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgICAgICByZXR1cm4gdGhlbWUubm90aWZpY2F0aW9uQ29sb3JTdWNjZXNzO1xuICAgICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgICAgIHJldHVybiB0aGVtZS5ub3RpZmljYXRpb25Db2xvckluZm87XG4gICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICAgICAgcmV0dXJuIHRoZW1lLm5vdGlmaWNhdGlvbkNvbG9yV2FybmluZztcbiAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgcmV0dXJuIHRoZW1lLm5vdGlmaWNhdGlvbkNvbG9yRXJyb3I7XG4gICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRoZW1lLm5vdGlmaWNhdGlvbkNvbG9yTm9uZTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXROb3RpZmljYXRpb25JY29uKHR5cGU6IE5vdGlmaWNhdGlvblR5cGUgPSAnbm9uZScpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgICAgICByZXR1cm4gJ0NoZWNrQ2lyY2xlJztcbiAgICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgICAgICByZXR1cm4gJ0luZm8nO1xuICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgIHJldHVybiAnV2FybmluZyc7XG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIHJldHVybiAnRXJyb3InO1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnTm90aWZpY2F0aW9ucyc7XG4gICAgfVxufVxuaW50ZXJmYWNlIExheW91dFByb3BzIHtcbiAgICBpbmxpbmU6IGJvb2xlYW47XG59XG5jb25zdCBTdHlsZWROb3RpZmljYXRpb24gPSBzdHlsZWQuZGl2PFN0eWxlZE5vdGlmaWNhdGlvblByb3BzPih0aGVtZWQoKHsgY2xvc2VkLCB0eXBlLCB0aGVtZSB9KSA9PiBgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZGlzcGxheTogJHtjbG9zZWQgPyAnbm9uZScgOiAnZmxleCd9O1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6ICR7Z2V0Tm90aWZpY2F0aW9uQ29sb3IodHlwZSwgdGhlbWUpfTtcbiAgbWFyZ2luLWJvdHRvbTogJHtkaXN0YW5jZS5zbWFsbH07XG4gIHBhZGRpbmc6ICR7dGhlbWUubm90aWZpY2F0aW9uUGFkZGluZ307XG4gIGJveC1zaGFkb3c6ICR7dGhlbWUubm90aWZpY2F0aW9uQm94U2hhZG93fTtcbiAgYm9yZGVyLXdpZHRoOiAke3RoZW1lLm5vdGlmaWNhdGlvbkJvcmRlcldpZHRofTtcbmApKTtcbmNvbnN0IFN0eWxlZFRpdGxlID0gc3R5bGVkLmRpdih0aGVtZWQoKHsgdGhlbWU6IHsgbm90aWZpY2F0aW9uVGl0bGVGb250U2l6ZSwgbm90aWZpY2F0aW9uVGl0bGVMaW5lSGVpZ2h0IH0gfSkgPT4gYFxuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiAke25vdGlmaWNhdGlvblRpdGxlRm9udFNpemV9O1xuICBsaW5lLWhlaWdodDogJHtub3RpZmljYXRpb25UaXRsZUxpbmVIZWlnaHR9O1xuICBjb2xvcjogIzQwNDA0MDtcbiAgbWFyZ2luLXJpZ2h0OiAke2Rpc3RhbmNlLnNtYWxsfTtcbmApKTtcbmNvbnN0IENvbnRlbnRXcmFwcGVyID0gc3R5bGVkLnNwYW4gYFxuICBkaXNwbGF5OiBjb250ZW50cztcbmA7XG5jb25zdCBTdHlsZWRDb250ZW50ID0gc3R5bGVkLmRpdjxMYXlvdXRQcm9wcz4odGhlbWVkKCh7IGlubGluZSwgdGhlbWU6IHsgbm90aWZpY2F0aW9uVGV4dEZvbnRTaXplLCBub3RpZmljYXRpb25UZXh0TGluZUhlaWdodCB9IH0pID0+IGBcbiAgZGlzcGxheTogJHtpbmxpbmUgPyAnaW5saW5lJyA6ICdibG9jayd9O1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiAke25vdGlmaWNhdGlvblRleHRGb250U2l6ZX07XG4gIGxpbmUtaGVpZ2h0OiAke25vdGlmaWNhdGlvblRleHRMaW5lSGVpZ2h0fTtcbiAgY29sb3I6ICM0MDQwNDA7XG4gIG1hcmdpbi1yaWdodDogJHtkaXN0YW5jZS5zbWFsbH07XG5gKSk7XG5jb25zdCBBY3Rpb25Db250YWluZXIgPSBzdHlsZWQoJ2RpdicpPExheW91dFByb3BzPiBgXG4gIGRpc3BsYXk6ICR7cHJvcHMgPT4gKHByb3BzLmlubGluZSA/ICdpbmxpbmUnIDogJ2Jsb2NrJyl9O1xuYDtcbmNvbnN0IENsb3NlQnV0dG9uID0gc3R5bGVkKEljb25MaW5rKSBgXG4gICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ21lZGl1bScgfSl9XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogJHtkaXN0YW5jZS5zbWFsbH07XG4gIHRvcDogJHtkaXN0YW5jZS5zbWFsbH07XG4gIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3JzLnRyYW5zcGFyZW50fTtcbiAgY29sb3I6ICR7Y29sb3JzLmJsYWNrfTtcbiAgcGFkZGluZzogMDtcbiAgYm9yZGVyOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuYDtcbmNvbnN0IExheW91dFZlcnRpY2FsID0gY3NzIGBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmA7XG5jb25zdCBMYXlvdXRJbmxpbmUgPSBjc3MgYFxuICBkaXNwbGF5OiBibG9jaztcbmA7XG5jb25zdCBDb250ZW50Q29udGFpbmVyID0gc3R5bGVkLmRpdjxMYXlvdXRQcm9wcz4gYFxuICAke3Byb3BzID0+IChwcm9wcy5pbmxpbmUgPyBMYXlvdXRJbmxpbmUgOiBMYXlvdXRWZXJ0aWNhbCl9O1xuICBtYXJnaW4tcmlnaHQ6ICR7ZGlzdGFuY2UubWVkaXVtfTtcbiAgd2lkdGg6IDEwMCU7XG5gO1xuY29uc3QgSWNvbkNvbnRhaW5lciA9IHN0eWxlZC5kaXYodGhlbWVkKCh7IHRoZW1lOiB7IG5vdGlmaWNhdGlvbkljb25NYXJnaW5SaWdodCB9IH0pID0+IGNzcyBgXG4gICAgICBtYXJnaW4tcmlnaHQ6ICR7bm90aWZpY2F0aW9uSWNvbk1hcmdpblJpZ2h0fTtcbiAgICBgKSk7XG5pbnRlcmZhY2UgU3R5bGVkSWNvblByb3BzIGV4dGVuZHMgSWNvblByb3BzIHtcbiAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlO1xufVxuY29uc3QgU3R5bGVkSWNvbkludCA9IE9iamVjdC5hc3NpZ24oKCgoeyB0eXBlOiBfMCwgLi4ucHJvcHMgfSkgPT4gPEljb24gey4uLnByb3BzfS8+KSBhcyBSZWFjdC5TRkM8U3R5bGVkSWNvblByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IEljb24oKSB7IHJldHVybiBJY29uIGFzIHR5cGVvZiBJY29uOyB9XG4gICAgfSB9KTtcbmNvbnN0IFN0eWxlZEljb24gPSBzdHlsZWQoU3R5bGVkSWNvbkludCk8U3R5bGVkSWNvblByb3BzPiBgXG4gIGNvbG9yOiAke3RoZW1lZChwcm9wcyA9PiBnZXROb3RpZmljYXRpb25Db2xvcihwcm9wcy50eXBlLCBwcm9wcy50aGVtZSkpfTtcbmA7XG4vKipcbiAqIFRoZSBOb3RpZmljYXRpb24gY29tcG9uZW50IGZvciByZW5kZXJpbmcgYW4gaW5saW5lIG5vdGlmaWNhdGlvbiBtZXNzYWdlLlxuICovXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PE5vdGlmaWNhdGlvblByb3BzLCBOb3RpZmljYXRpb25TdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBOb3RpZmljYXRpb25Qcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjbG9zZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBjbG9zZWFibGU6IHRydWUsXG4gICAgfTtcbiAgICBwcml2YXRlIG9uQ2xvc2VIYW5kbGVyID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBvbkNsb3NlLCBjbG9zZWFibGUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICh0eXBlb2Ygb25DbG9zZSA9PT0gJ2Z1bmN0aW9uJyAmJiBjbG9zZWFibGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGZDbG9zZSA9IG9uQ2xvc2UoZSk7XG4gICAgICAgICAgICBpZiAoc2VsZkNsb3NlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY2xvc2VkOiB0cnVlIH0pO1xuICAgIH07XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHR5cGUgPSAnbm9uZScsIGNoaWxkcmVuLCB0aXRsZSwgYWN0aW9uUmVuZGVyZXIsIHRoZW1lLCBzdHlsZSwgY2xvc2VhYmxlLCAuLi5vdGhlciB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBjbG9zZWQgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IGlzSW5saW5lID0gIXRpdGxlO1xuICAgICAgICByZXR1cm4gKDxTdHlsZWROb3RpZmljYXRpb24gdGhlbWU9e3RoZW1lfSBjbG9zZWQ9e2Nsb3NlZH0gdHlwZT17dHlwZX0gey4uLm90aGVyfT5cbiAgICAgICAgPEljb25Db250YWluZXIgdGhlbWU9e3RoZW1lfT5cbiAgICAgICAgICA8U3R5bGVkSWNvbiB0eXBlPXt0eXBlfSBuYW1lPXtnZXROb3RpZmljYXRpb25JY29uKHR5cGUpfSBzaXplPVwiMjJweFwiIHRoZW1lPXt0aGVtZX0vPlxuICAgICAgICA8L0ljb25Db250YWluZXI+XG4gICAgICAgIDxDb250ZW50Q29udGFpbmVyIGlubGluZT17aXNJbmxpbmV9PlxuICAgICAgICAgIHt0aXRsZSAmJiA8U3R5bGVkVGl0bGUgdGhlbWU9e3RoZW1lfT57dGl0bGV9PC9TdHlsZWRUaXRsZT59XG4gICAgICAgICAgPFN0eWxlZENvbnRlbnQgaW5saW5lPXtpc0lubGluZX0gdGhlbWU9e3RoZW1lfT5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L1N0eWxlZENvbnRlbnQ+XG4gICAgICAgICAgPEFjdGlvbkNvbnRhaW5lciBpbmxpbmU9e2lzSW5saW5lfT5cbiAgICAgICAgICAgIDxDb250ZW50V3JhcHBlciBvbkNsaWNrPXt0aGlzLm9uQ2xvc2VIYW5kbGVyfT57YWN0aW9uUmVuZGVyZXIgJiYgYWN0aW9uUmVuZGVyZXIoKX08L0NvbnRlbnRXcmFwcGVyPlxuICAgICAgICAgIDwvQWN0aW9uQ29udGFpbmVyPlxuICAgICAgICA8L0NvbnRlbnRDb250YWluZXI+XG4gICAgICAgIHtjbG9zZWFibGUgJiYgPENsb3NlQnV0dG9uIG9uQ2xpY2s9e3RoaXMub25DbG9zZUhhbmRsZXJ9IGljb249XCJDbG9zZVwiLz59XG4gICAgICA8L1N0eWxlZE5vdGlmaWNhdGlvbj4pO1xuICAgIH1cbiAgICBzdGF0aWMgaW5uZXIgPSB7XG4gICAgICAgIGdldCBTdHlsZWROb3RpZmljYXRpb24oKSB7IHJldHVybiBTdHlsZWROb3RpZmljYXRpb24gYXMgdHlwZW9mIFN0eWxlZE5vdGlmaWNhdGlvbjsgfSxcbiAgICAgICAgZ2V0IEljb25Db250YWluZXIoKSB7IHJldHVybiBJY29uQ29udGFpbmVyIGFzIHR5cGVvZiBJY29uQ29udGFpbmVyOyB9LFxuICAgICAgICBnZXQgU3R5bGVkSWNvbigpIHsgcmV0dXJuIFN0eWxlZEljb24gYXMgdHlwZW9mIFN0eWxlZEljb247IH0sXG4gICAgICAgIGdldCBDb250ZW50Q29udGFpbmVyKCkgeyByZXR1cm4gQ29udGVudENvbnRhaW5lciBhcyB0eXBlb2YgQ29udGVudENvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IFN0eWxlZFRpdGxlKCkgeyByZXR1cm4gU3R5bGVkVGl0bGUgYXMgdHlwZW9mIFN0eWxlZFRpdGxlOyB9LFxuICAgICAgICBnZXQgU3R5bGVkQ29udGVudCgpIHsgcmV0dXJuIFN0eWxlZENvbnRlbnQgYXMgdHlwZW9mIFN0eWxlZENvbnRlbnQ7IH0sXG4gICAgICAgIGdldCBBY3Rpb25Db250YWluZXIoKSB7IHJldHVybiBBY3Rpb25Db250YWluZXIgYXMgdHlwZW9mIEFjdGlvbkNvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IENvbnRlbnRXcmFwcGVyKCkgeyByZXR1cm4gQ29udGVudFdyYXBwZXIgYXMgdHlwZW9mIENvbnRlbnRXcmFwcGVyOyB9LFxuICAgICAgICBnZXQgQ2xvc2VCdXR0b24oKSB7IHJldHVybiBDbG9zZUJ1dHRvbiBhcyB0eXBlb2YgQ2xvc2VCdXR0b247IH1cbiAgICB9O1xufVxuIl19