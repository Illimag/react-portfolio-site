"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var react_datepicker_1 = require("react-datepicker");
var en_GB_1 = require("date-fns/esm/locale/en-GB");
var PaddedContainer_1 = require("../PaddedContainer");
var Icon_1 = require("../Icon");
var styled_1 = require("../../utils/styled");
var distance_1 = require("../../distance");
var textStyles_1 = require("../../textStyles");
var IncreaseDecrease_1 = require("../IncreaseDecrease");
var colors_1 = require("../../colors");
var defaultWeekDays = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
var defaultMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
function patchLocale(locale, inputWeekDays, months) {
    if (inputWeekDays === void 0) { inputWeekDays = defaultWeekDays; }
    if (months === void 0) { months = defaultMonths; }
    // in react-datepicker week starts from Sunday, not from Monday
    var weekDays = inputWeekDays.slice(-1).concat(inputWeekDays.slice(0, -1));
    return __assign({}, locale, { localize: __assign({ ordinalNumber: function () { },
            era: function () { },
            quarter: function () { },
            dayPeriod: function () { } }, locale.localize, { month: function (month) { return months[month]; }, day: function (day) { return weekDays[day]; } }), match: __assign({ ordinalNumber: function () { },
            era: function () { },
            quarter: function () { },
            dayPeriod: function () { } }, locale.match, { month: function (month) { return months.indexOf(month); }, day: function (day) { return weekDays.indexOf(day); } }) });
}
var Arrow = styled_1.default.button(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  ", "\n\n  background-color: transparent;\n  padding: 0;\n  border: none;\n\n  align-self: start;\n  cursor: pointer;\n  > i {\n    vertical-align: middle;\n  }\n"], ["\n  ", "\n\n  background-color: transparent;\n  padding: 0;\n  border: none;\n\n  align-self: start;\n  cursor: pointer;\n  > i {\n    vertical-align: middle;\n  }\n"])), textStyles_1.getFontStyle({ size: 'medium' }));
var Row = styled_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  margin-bottom: ", ";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"], ["\n  margin-bottom: ", ";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])), distance_1.distance.medium);
var HeaderDateContainer = styled_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  ", "\n"], ["\n  ", "\n"])), textStyles_1.getFontWeight('medium'));
var StyledIncreaseDecrease = styled_1.default(IncreaseDecrease_1.IncreaseDecrease)(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  margin-left: ", ";\n"], ["\n  margin-left: ", ";\n"])), distance_1.distance.xsmall);
var itemSize = '40px';
var ReactDatePickerContainer = styled_1.default.div(styled_1.themed(function (_a) {
    var _b = _a.theme, ui0 = _b.ui0, ui1 = _b.ui1, ui3 = _b.ui3, ui4 = _b.ui4;
    return "\n    .react-datepicker {\n      background-color: " + ui1 + ";\n      border: 1px solid " + ui4 + ";\n      display: inline-block;\n      position: relative;\n    }\n\n    .react-datepicker--time-only {\n      .react-datepicker__time-container {\n        border-left: 0;\n      }\n\n      .react-datepicker__time {\n        border-radius: 0.3rem;\n      }\n\n      .react-datepicker__time-box {\n        border-radius: 0.3rem;\n      }\n    }\n\n    .react-datepicker__triangle {\n      display: none;\n    }\n\n    .react-datepicker-popper {\n      z-index: 9999;\n    }\n\n    .react-datepicker__header {\n      text-align: center;\n      position: relative;\n\n      &--time {\n        padding-top: 20px;\n        padding-bottom: 10px;\n        padding-left: 5px;\n        padding-right: 5px;\n      }\n    }\n\n    .react-datepicker__current-month,\n    .react-datepicker-time__header,\n    .react-datepicker-year-header {\n      margin-top: 0;\n      " + textStyles_1.getFontWeight('bold') + "\n    }\n\n    .react-datepicker-year-header {\n      line-height: " + itemSize + ";\n    }\n\n    .react-datepicker-time__header {\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n\n    .react-datepicker__month-container {\n      float: left;\n      padding: 0 " + distance_1.distance.medium + ";\n    }\n\n    .react-datepicker__time-container {\n      float: right;\n      border-left: 1px solid " + ui4 + ";\n      width: 90px;\n\n      .react-datepicker__time {\n        position: relative;\n        background: " + ui1 + ";\n\n        .react-datepicker__time-box {\n          width: 100%;\n          overflow-x: hidden;\n          margin: 0;\n          text-align: center;\n          ul.react-datepicker__time-list {\n            list-style: none;\n            margin: 0;\n            height: calc(195px + (#{" + itemSize + "} / 2));\n            overflow-y: scroll;\n            padding-right: 0px;\n            padding-left: 0px;\n            width: 100%;\n            box-sizing: content-box;\n\n            li.react-datepicker__time-list-item {\n              height: " + itemSize + ";\n              line-height: " + itemSize + ";\n              &:hover {\n                cursor: pointer;\n                background-color: " + ui4 + ";\n              }\n              &--selected {\n                background-color: " + ui0 + ";\n                color: white;\n                font-weight: bold;\n                &:hover {\n                  background-color: " + ui0 + ";\n                }\n              }\n              &--disabled {\n                color: " + ui4 + ";\n                background: repeating-linear-gradient(-45deg, " + ui3 + " 2px, " + ui1 + " 2px, " + ui1 + " 4px, " + ui3 + " 4px, " + ui3 + " 6px);\n                background-size: 41px 41px;\n\n                &:hover {\n                  cursor: default;\n                  background-color: transparent;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .react-datepicker__week-number {\n      color: " + ui4 + ";\n      display: inline-block;\n      width: " + itemSize + ";\n      line-height: " + itemSize + ";\n      text-align: center;\n      margin: 0;\n      &.react-datepicker__week-number--clickable {\n        cursor: pointer;\n        &:hover {\n          background-color: " + ui4 + ";\n        }\n      }\n    }\n\n    .react-datepicker__day-names,\n    .react-datepicker__week {\n      white-space: nowrap;\n      margin-bottom: " + distance_1.distancePx.large / 2 + "px;\n    }\n\n    .react-datepicker__day-name,\n    .react-datepicker__day,\n    .react-datepicker__time-name {\n      display: inline-block;\n      width: " + itemSize + ";\n      line-height: " + itemSize + ";\n      text-align: center;\n      margin: 0;\n    }\n\n    .react-datepicker__day,\n    .react-datepicker__month-text {\n      cursor: pointer;\n      text-align: center;\n\n      &:hover {\n        background-color: " + ui4 + ";\n      }\n\n      &:focus {\n        border: 1px solid " + ui0 + ";\n        outline: none;\n      }\n\n      &--today {\n        color: " + ui0 + ";\n      }\n\n      &--highlighted {\n        border-radius: 0;\n        background-color: " + colors_1.greenNeon + ";\n\n        &:hover {\n          background-color: darken(" + colors_1.greenNeon + ", 5%);\n        }\n\n        &-custom-1 {\n          color: magenta;\n        }\n\n        &-custom-2 {\n          color: green;\n        }\n      }\n\n      &--selected {\n        background-color: " + ui0 + ";\n        color: " + ui1 + ";\n\n        &:hover {\n          background-color: darken(" + ui0 + ", 5%);\n        }\n      }\n\n      &--in-selecting-range,\n      &--in-range {\n        background-color: " + ui3 + ";\n      }\n\n      &--range-start,\n      &--range-end,\n      &--selecting-range-start {\n        color: " + ui1 + ";\n        background-color: " + ui0 + ";\n      }\n\n      &--disabled {\n        cursor: default;\n        color: " + ui4 + ";\n        background: repeating-linear-gradient(-45deg, " + ui3 + " 2px, " + ui1 + " 2px, " + ui1 + " 4px, " + ui3 + " 4px, " + ui3 + " 6px);\n\n        &:hover {\n          background-color: transparent;\n        }\n      }\n    }\n\n    .react-datepicker__month-text {\n      &.react-datepicker__month--selected {\n        background-color: " + ui0 + ";\n        color: " + ui1 + ";\n      }\n      &:hover {\n        background-color: " + ui4 + ";\n      }\n    }\n\n    .react-datepicker__input-container {\n      position: relative;\n    }\n\n    .react-datepicker__day-name {\n      text-transform: uppercase;\n      line-height: 1;\n    }\n\n    .react-datepicker__day--outside-month {\n      color: " + ui4 + ";\n    }\n\n    .react-datepicker__day--keyboard-selected {\n      border: 1px solid " + ui0 + ";\n      box-sizing: border-box;\n      width: " + itemSize + ";\n      height: " + itemSize + ";\n    }\n  ";
}));
var getHeaderRender = function (_a) {
    var _b = _a.months, months = _b === void 0 ? defaultMonths : _b;
    return function (_a) {
        var date = _a.date, increaseMonth = _a.increaseMonth, decreaseMonth = _a.decreaseMonth, changeYear = _a.changeYear;
        var monthName = months[date.getMonth()];
        var year = date.getFullYear();
        return (React.createElement(PaddedContainer_1.PaddedContainer, { gutter: "medium" },
            React.createElement(Row, null,
                React.createElement(Arrow, { onClick: decreaseMonth, type: "button" },
                    React.createElement(Icon_1.Icon, { name: "KeyboardArrowLeft", size: 2 })),
                React.createElement(HeaderDateContainer, null,
                    monthName,
                    " ",
                    year,
                    React.createElement(StyledIncreaseDecrease, { onIncrease: function () { return changeYear(year + 1); }, onDecrease: function () { return changeYear(year - 1); } })),
                React.createElement(Arrow, { onClick: increaseMonth, type: "button" },
                    React.createElement(Icon_1.Icon, { name: "KeyboardArrowRight", size: 2 })))));
    };
};
exports.CustomReactDatepicker = Object.assign((function (_a) {
    var months = _a.months, weekDays = _a.weekDays, showMonthYearPicker = _a.showMonthYearPicker, props = __rest(_a, ["months", "weekDays", "showMonthYearPicker"]);
    return (React.createElement(ReactDatePickerContainer, null,
        React.createElement(react_datepicker_1.default, __assign({ locale: patchLocale(en_GB_1.default, weekDays, months), renderCustomHeader: getHeaderRender({ months: months }), showMonthYearPicker: showMonthYearPicker }, props))));
}), { inner: {
        get ReactDatePickerContainer() { return ReactDatePickerContainer; },
        get ReactDatePicker() { return react_datepicker_1.default; }
    } });
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VzdG9tUmVhY3REYXRlcGlja2VyLnBhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EYXRlRmllbGQvQ3VzdG9tUmVhY3REYXRlcGlja2VyLnBhcnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkJBQStCO0FBQy9CLHFEQUF5RTtBQUN6RSxtREFBNkM7QUFFN0Msc0RBQXFEO0FBQ3JELGdDQUErQjtBQUMvQiw2Q0FBb0Q7QUFDcEQsMkNBQXNEO0FBQ3RELCtDQUErRDtBQUMvRCx3REFBdUQ7QUFDdkQsdUNBQXlDO0FBQ3pDLElBQU0sZUFBZSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDMUUsSUFBTSxhQUFhLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzNHLFNBQVMsV0FBVyxDQUFDLE1BQWMsRUFBRSxhQUErQixFQUFFLE1BQXNCO0lBQXZELDhCQUFBLEVBQUEsK0JBQStCO0lBQUUsdUJBQUEsRUFBQSxzQkFBc0I7SUFDeEYsK0RBQStEO0lBQy9ELElBQU0sUUFBUSxHQUFPLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBSyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0Usb0JBQ08sTUFBTSxJQUNULFFBQVEsYUFDSixhQUFhLGdCQUFLLENBQUM7WUFDbkIsR0FBRyxnQkFBSyxDQUFDO1lBQ1QsT0FBTyxnQkFBSyxDQUFDO1lBQ2Is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RSxlQUFlLENBQUMsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLEVBQUUsbUJBQW1CLEVBQUUsbUJBQW1CLElBQU0sS0FBSyxFQUFHLENBQzVJLENBQUMsQ0FBQTtDQUFBLENBQTBDLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDM0UsSUFBSSx3QkFBd0IsS0FBSyxPQUFPLHdCQUEyRCxDQUFDLENBQUMsQ0FBQztRQUN0RyxJQUFJLGVBQWUsS0FBSyxPQUFPLDBCQUF5QyxDQUFDLENBQUMsQ0FBQztLQUM5RSxFQUFFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERhdGVQaWNrZXIsIHsgUmVhY3REYXRlUGlja2VyUHJvcHMgfSBmcm9tICdyZWFjdC1kYXRlcGlja2VyJztcbmltcG9ydCBlbkdCIGZyb20gJ2RhdGUtZm5zL2VzbS9sb2NhbGUvZW4tR0InO1xuaW1wb3J0IHsgTG9jYWxlIH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgUGFkZGVkQ29udGFpbmVyIH0gZnJvbSAnLi4vUGFkZGVkQ29udGFpbmVyJztcbmltcG9ydCB7IEljb24gfSBmcm9tICcuLi9JY29uJztcbmltcG9ydCBzdHlsZWQsIHsgdGhlbWVkIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3R5bGVkJztcbmltcG9ydCB7IGRpc3RhbmNlLCBkaXN0YW5jZVB4IH0gZnJvbSAnLi4vLi4vZGlzdGFuY2UnO1xuaW1wb3J0IHsgZ2V0Rm9udFN0eWxlLCBnZXRGb250V2VpZ2h0IH0gZnJvbSAnLi4vLi4vdGV4dFN0eWxlcyc7XG5pbXBvcnQgeyBJbmNyZWFzZURlY3JlYXNlIH0gZnJvbSAnLi4vSW5jcmVhc2VEZWNyZWFzZSc7XG5pbXBvcnQgeyBncmVlbk5lb24gfSBmcm9tICcuLi8uLi9jb2xvcnMnO1xuY29uc3QgZGVmYXVsdFdlZWtEYXlzID0gWydtb24nLCAndHVlJywgJ3dlZCcsICd0aHUnLCAnZnJpJywgJ3NhdCcsICdzdW4nXTtcbmNvbnN0IGRlZmF1bHRNb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5mdW5jdGlvbiBwYXRjaExvY2FsZShsb2NhbGU6IExvY2FsZSwgaW5wdXRXZWVrRGF5cyA9IGRlZmF1bHRXZWVrRGF5cywgbW9udGhzID0gZGVmYXVsdE1vbnRocyk6IExvY2FsZSB7XG4gICAgLy8gaW4gcmVhY3QtZGF0ZXBpY2tlciB3ZWVrIHN0YXJ0cyBmcm9tIFN1bmRheSwgbm90IGZyb20gTW9uZGF5XG4gICAgY29uc3Qgd2Vla0RheXMgPSBbLi4uaW5wdXRXZWVrRGF5cy5zbGljZSgtMSksIC4uLmlucHV0V2Vla0RheXMuc2xpY2UoMCwgLTEpXTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5sb2NhbGUsXG4gICAgICAgIGxvY2FsaXplOiB7XG4gICAgICAgICAgICBvcmRpbmFsTnVtYmVyKCkgeyB9LFxuICAgICAgICAgICAgZXJhKCkgeyB9LFxuICAgICAgICAgICAgcXVhcnRlcigpIHsgfSxcbiAgICAgICAgICAgIGRheVBlcmlvZCgpIHsgfSxcbiAgICAgICAgICAgIC4uLmxvY2FsZS5sb2NhbGl6ZSxcbiAgICAgICAgICAgIG1vbnRoOiAobW9udGg6IG51bWJlcikgPT4gbW9udGhzW21vbnRoXSxcbiAgICAgICAgICAgIGRheTogKGRheTogbnVtYmVyKSA9PiB3ZWVrRGF5c1tkYXldLFxuICAgICAgICB9LFxuICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgb3JkaW5hbE51bWJlcigpIHsgfSxcbiAgICAgICAgICAgIGVyYSgpIHsgfSxcbiAgICAgICAgICAgIHF1YXJ0ZXIoKSB7IH0sXG4gICAgICAgICAgICBkYXlQZXJpb2QoKSB7IH0sXG4gICAgICAgICAgICAuLi5sb2NhbGUubWF0Y2gsXG4gICAgICAgICAgICBtb250aDogKG1vbnRoOiBzdHJpbmcpID0+IG1vbnRocy5pbmRleE9mKG1vbnRoKSxcbiAgICAgICAgICAgIGRheTogKGRheTogc3RyaW5nKSA9PiB3ZWVrRGF5cy5pbmRleE9mKGRheSksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmNvbnN0IEFycm93ID0gc3R5bGVkLmJ1dHRvbiBgXG4gICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ21lZGl1bScgfSl9XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHBhZGRpbmc6IDA7XG4gIGJvcmRlcjogbm9uZTtcblxuICBhbGlnbi1zZWxmOiBzdGFydDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICA+IGkge1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIH1cbmA7XG5jb25zdCBSb3cgPSBzdHlsZWQuZGl2IGBcbiAgbWFyZ2luLWJvdHRvbTogJHtkaXN0YW5jZS5tZWRpdW19O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgJjpsYXN0LWNoaWxkIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xuICB9XG5gO1xuY29uc3QgSGVhZGVyRGF0ZUNvbnRhaW5lciA9IHN0eWxlZC5kaXYgYFxuICAke2dldEZvbnRXZWlnaHQoJ21lZGl1bScpfVxuYDtcbmNvbnN0IFN0eWxlZEluY3JlYXNlRGVjcmVhc2UgPSBzdHlsZWQoSW5jcmVhc2VEZWNyZWFzZSkgYFxuICBtYXJnaW4tbGVmdDogJHtkaXN0YW5jZS54c21hbGx9O1xuYDtcbmNvbnN0IGl0ZW1TaXplID0gJzQwcHgnO1xuY29uc3QgUmVhY3REYXRlUGlja2VyQ29udGFpbmVyID0gc3R5bGVkLmRpdih0aGVtZWQoKHsgdGhlbWU6IHsgdWkwLCB1aTEsIHVpMywgdWk0IH0gfSkgPT4gYFxuICAgIC5yZWFjdC1kYXRlcGlja2VyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWkxfTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dWk0fTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlci0tdGltZS1vbmx5IHtcbiAgICAgIC5yZWFjdC1kYXRlcGlja2VyX190aW1lLWNvbnRhaW5lciB7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAwO1xuICAgICAgfVxuXG4gICAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZSB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAuM3JlbTtcbiAgICAgIH1cblxuICAgICAgLnJlYWN0LWRhdGVwaWNrZXJfX3RpbWUtYm94IHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zcmVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX190cmlhbmdsZSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyLXBvcHBlciB7XG4gICAgICB6LWluZGV4OiA5OTk5O1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19oZWFkZXIge1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAmLS10aW1lIHtcbiAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDVweDtcbiAgICAgICAgcGFkZGluZy1yaWdodDogNXB4O1xuICAgICAgfVxuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19jdXJyZW50LW1vbnRoLFxuICAgIC5yZWFjdC1kYXRlcGlja2VyLXRpbWVfX2hlYWRlcixcbiAgICAucmVhY3QtZGF0ZXBpY2tlci15ZWFyLWhlYWRlciB7XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgJHtnZXRGb250V2VpZ2h0KCdib2xkJyl9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXIteWVhci1oZWFkZXIge1xuICAgICAgbGluZS1oZWlnaHQ6ICR7aXRlbVNpemV9O1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyLXRpbWVfX2hlYWRlciB7XG4gICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19tb250aC1jb250YWluZXIge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBwYWRkaW5nOiAwICR7ZGlzdGFuY2UubWVkaXVtfTtcbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZS1jb250YWluZXIge1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3VpNH07XG4gICAgICB3aWR0aDogOTBweDtcblxuICAgICAgLnJlYWN0LWRhdGVwaWNrZXJfX3RpbWUge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7dWkxfTtcblxuICAgICAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZS1ib3gge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHVsLnJlYWN0LWRhdGVwaWNrZXJfX3RpbWUtbGlzdCB7XG4gICAgICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDE5NXB4ICsgKCN7JHtpdGVtU2l6ZX19IC8gMikpO1xuICAgICAgICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMHB4O1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAwcHg7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xuXG4gICAgICAgICAgICBsaS5yZWFjdC1kYXRlcGlja2VyX190aW1lLWxpc3QtaXRlbSB7XG4gICAgICAgICAgICAgIGhlaWdodDogJHtpdGVtU2l6ZX07XG4gICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAke2l0ZW1TaXplfTtcbiAgICAgICAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWk0fTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAmLS1zZWxlY3RlZCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTB9O1xuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWkwfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJi0tZGlzYWJsZWQge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAke3VpNH07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCgtNDVkZWcsICR7dWkzfSAycHgsICR7dWkxfSAycHgsICR7dWkxfSA0cHgsICR7dWkzfSA0cHgsICR7dWkzfSA2cHgpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNDFweCA0MXB4O1xuXG4gICAgICAgICAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fd2Vlay1udW1iZXIge1xuICAgICAgY29sb3I6ICR7dWk0fTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiAke2l0ZW1TaXplfTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAke2l0ZW1TaXplfTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIG1hcmdpbjogMDtcbiAgICAgICYucmVhY3QtZGF0ZXBpY2tlcl9fd2Vlay1udW1iZXItLWNsaWNrYWJsZSB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTR9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2RheS1uYW1lcyxcbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fd2VlayB7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgbWFyZ2luLWJvdHRvbTogJHtkaXN0YW5jZVB4LmxhcmdlIC8gMn1weDtcbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fZGF5LW5hbWUsXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2RheSxcbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fdGltZS1uYW1lIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiAke2l0ZW1TaXplfTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAke2l0ZW1TaXplfTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIG1hcmdpbjogMDtcbiAgICB9XG5cbiAgICAucmVhY3QtZGF0ZXBpY2tlcl9fZGF5LFxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19tb250aC10ZXh0IHtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcblxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWk0fTtcbiAgICAgIH1cblxuICAgICAgJjpmb2N1cyB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dWkwfTtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgJi0tdG9kYXkge1xuICAgICAgICBjb2xvcjogJHt1aTB9O1xuICAgICAgfVxuXG4gICAgICAmLS1oaWdobGlnaHRlZCB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7Z3JlZW5OZW9ufTtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZW4oJHtncmVlbk5lb259LCA1JSk7XG4gICAgICAgIH1cblxuICAgICAgICAmLWN1c3RvbS0xIHtcbiAgICAgICAgICBjb2xvcjogbWFnZW50YTtcbiAgICAgICAgfVxuXG4gICAgICAgICYtY3VzdG9tLTIge1xuICAgICAgICAgIGNvbG9yOiBncmVlbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLS1zZWxlY3RlZCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dWkwfTtcbiAgICAgICAgY29sb3I6ICR7dWkxfTtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZW4oJHt1aTB9LCA1JSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJi0taW4tc2VsZWN0aW5nLXJhbmdlLFxuICAgICAgJi0taW4tcmFuZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpM307XG4gICAgICB9XG5cbiAgICAgICYtLXJhbmdlLXN0YXJ0LFxuICAgICAgJi0tcmFuZ2UtZW5kLFxuICAgICAgJi0tc2VsZWN0aW5nLXJhbmdlLXN0YXJ0IHtcbiAgICAgICAgY29sb3I6ICR7dWkxfTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTB9O1xuICAgICAgfVxuXG4gICAgICAmLS1kaXNhYmxlZCB7XG4gICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgICAgY29sb3I6ICR7dWk0fTtcbiAgICAgICAgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCgtNDVkZWcsICR7dWkzfSAycHgsICR7dWkxfSAycHgsICR7dWkxfSA0cHgsICR7dWkzfSA0cHgsICR7dWkzfSA2cHgpO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX21vbnRoLXRleHQge1xuICAgICAgJi5yZWFjdC1kYXRlcGlja2VyX19tb250aC0tc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3VpMH07XG4gICAgICAgIGNvbG9yOiAke3VpMX07XG4gICAgICB9XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt1aTR9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19pbnB1dC1jb250YWluZXIge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19kYXktbmFtZSB7XG4gICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgbGluZS1oZWlnaHQ6IDE7XG4gICAgfVxuXG4gICAgLnJlYWN0LWRhdGVwaWNrZXJfX2RheS0tb3V0c2lkZS1tb250aCB7XG4gICAgICBjb2xvcjogJHt1aTR9O1xuICAgIH1cblxuICAgIC5yZWFjdC1kYXRlcGlja2VyX19kYXktLWtleWJvYXJkLXNlbGVjdGVkIHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dWkwfTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB3aWR0aDogJHtpdGVtU2l6ZX07XG4gICAgICBoZWlnaHQ6ICR7aXRlbVNpemV9O1xuICAgIH1cbiAgYCkpO1xuY29uc3QgZ2V0SGVhZGVyUmVuZGVyID0gKHsgbW9udGhzID0gZGVmYXVsdE1vbnRocywgfToge1xuICAgIG1vbnRoczogQ3VzdG9tUmVhY3REYXRlcGlja2VyUHJvcHNbJ21vbnRocyddO1xufSk6IFJlYWN0RGF0ZVBpY2tlclByb3BzWydyZW5kZXJDdXN0b21IZWFkZXInXSA9PiAoeyBkYXRlLCBpbmNyZWFzZU1vbnRoLCBkZWNyZWFzZU1vbnRoLCBjaGFuZ2VZZWFyIH0pID0+IHtcbiAgICBjb25zdCBtb250aE5hbWUgPSBtb250aHNbZGF0ZS5nZXRNb250aCgpXTtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIHJldHVybiAoPFBhZGRlZENvbnRhaW5lciBndXR0ZXI9XCJtZWRpdW1cIj5cbiAgICAgIDxSb3c+XG4gICAgICAgIDxBcnJvdyBvbkNsaWNrPXtkZWNyZWFzZU1vbnRofSB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgPEljb24gbmFtZT1cIktleWJvYXJkQXJyb3dMZWZ0XCIgc2l6ZT17Mn0vPlxuICAgICAgICA8L0Fycm93PlxuICAgICAgICA8SGVhZGVyRGF0ZUNvbnRhaW5lcj5cbiAgICAgICAgICB7bW9udGhOYW1lfSB7eWVhcn1cbiAgICAgICAgICA8U3R5bGVkSW5jcmVhc2VEZWNyZWFzZSBvbkluY3JlYXNlPXsoKSA9PiBjaGFuZ2VZZWFyKHllYXIgKyAxKX0gb25EZWNyZWFzZT17KCkgPT4gY2hhbmdlWWVhcih5ZWFyIC0gMSl9Lz5cbiAgICAgICAgPC9IZWFkZXJEYXRlQ29udGFpbmVyPlxuICAgICAgICA8QXJyb3cgb25DbGljaz17aW5jcmVhc2VNb250aH0gdHlwZT1cImJ1dHRvblwiPlxuICAgICAgICAgIDxJY29uIG5hbWU9XCJLZXlib2FyZEFycm93UmlnaHRcIiBzaXplPXsyfS8+XG4gICAgICAgIDwvQXJyb3c+XG4gICAgICA8L1Jvdz5cbiAgICA8L1BhZGRlZENvbnRhaW5lcj4pO1xufTtcbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tUmVhY3REYXRlcGlja2VyUHJvcHMgZXh0ZW5kcyBSZWFjdERhdGVQaWNrZXJQcm9wcyB7XG4gICAgbW9udGhzPzogQXJyYXk8c3RyaW5nPjtcbiAgICB3ZWVrRGF5cz86IEFycmF5PHN0cmluZz47XG59XG5leHBvcnQgY29uc3QgQ3VzdG9tUmVhY3REYXRlcGlja2VyID0gT2JqZWN0LmFzc2lnbigoKCh7IG1vbnRocywgd2Vla0RheXMsIHNob3dNb250aFllYXJQaWNrZXIsIC4uLnByb3BzIH0pID0+ICg8UmVhY3REYXRlUGlja2VyQ29udGFpbmVyPlxuICAgIDxSZWFjdERhdGVQaWNrZXIgbG9jYWxlPXtwYXRjaExvY2FsZShlbkdCLCB3ZWVrRGF5cywgbW9udGhzKX0gcmVuZGVyQ3VzdG9tSGVhZGVyPXtnZXRIZWFkZXJSZW5kZXIoeyBtb250aHMgfSl9IHNob3dNb250aFllYXJQaWNrZXI9e3Nob3dNb250aFllYXJQaWNrZXJ9IHsuLi5wcm9wc30vPlxuICA8L1JlYWN0RGF0ZVBpY2tlckNvbnRhaW5lcj4pKSBhcyBSZWFjdC5GQzxDdXN0b21SZWFjdERhdGVwaWNrZXJQcm9wcz4pLCB7IGlubmVyOiB7XG4gICAgICAgIGdldCBSZWFjdERhdGVQaWNrZXJDb250YWluZXIoKSB7IHJldHVybiBSZWFjdERhdGVQaWNrZXJDb250YWluZXIgYXMgdHlwZW9mIFJlYWN0RGF0ZVBpY2tlckNvbnRhaW5lcjsgfSxcbiAgICAgICAgZ2V0IFJlYWN0RGF0ZVBpY2tlcigpIHsgcmV0dXJuIFJlYWN0RGF0ZVBpY2tlciBhcyB0eXBlb2YgUmVhY3REYXRlUGlja2VyOyB9XG4gICAgfSB9KTtcbiJdfQ==