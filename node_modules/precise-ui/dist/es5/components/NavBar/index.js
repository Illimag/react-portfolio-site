"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var styled_1 = require("../../utils/styled");
var StackPanel_1 = require("../StackPanel");
var Anchor_1 = require("../Anchor");
var Icon_1 = require("../Icon");
var colors_1 = require("../../colors");
var distance_1 = require("../../distance");
var multiply_1 = require("../../utils/multiply");
var textStyles_1 = require("../../textStyles");
var HeaderStackPanel = styled_1.default(StackPanel_1.StackPanel)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n"], ["\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n"])));
var StyledNavBar = styled_1.default(HeaderStackPanel)(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  padding-top: ", ";\n  margin-bottom: ", ";\n  flex-wrap: wrap;\n"], ["\n  padding-top: ", ";\n  margin-bottom: ", ";\n  flex-wrap: wrap;\n"])), distance_1.distance.xlarge, distance_1.distance.xxxlarge);
var StyledMenuLink = styled_1.default.a(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  ", "\n\n  position: relative;\n\n  cursor: pointer;\n  color: ", ";\n  text-decoration: none;\n  display: flex;\n  margin-left: ", ";\n  align-items: center;\n  i {\n    vertical-align: text-bottom;\n  }\n  span {\n    margin-left: ", ";\n  }\n  &:hover {\n    color: ", ";\n  }\n"], ["\n  ", "\n\n  position: relative;\n\n  cursor: pointer;\n  color: ", ";\n  text-decoration: none;\n  display: flex;\n  margin-left: ", ";\n  align-items: center;\n  i {\n    vertical-align: text-bottom;\n  }\n  span {\n    margin-left: ", ";\n  }\n  &:hover {\n    color: ", ";\n  }\n"])), textStyles_1.getFontStyle({ size: 'xxLarge' }), colors_1.black, distance_1.distance.medium, distance_1.distance.small, colors_1.cyan);
var StyledMenu = styled_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: right;\n  max-height: 0;\n  overflow: hidden;\n  &.open {\n    max-height: 500px;\n  }\n"], ["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: right;\n  max-height: 0;\n  overflow: hidden;\n  &.open {\n    max-height: 500px;\n  }\n"])));
var StyledMenuItems = styled_1.default.ul(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n  padding: 0;\n  margin: 0;\n  list-style-type: none;\n  width: 100%;\n"], ["\n  padding: 0;\n  margin: 0;\n  list-style-type: none;\n  width: 100%;\n"])));
var StyledMenuItem = styled_1.default.li(templateObject_6 || (templateObject_6 = __makeTemplateObject(["\n  ", "\n\n  margin: ", " 0;\n\n  text-align: right;\n  & a {\n    text-decoration: none;\n    color: ", ";\n  }\n  & a:hover {\n    color: ", ";\n  }\n"], ["\n  ", "\n\n  margin: ", " 0;\n\n  text-align: right;\n  & a {\n    text-decoration: none;\n    color: ", ";\n  }\n  & a:hover {\n    color: ", ";\n  }\n"])), textStyles_1.getFontStyle({ size: 'medium' }), distance_1.distance.small, colors_1.grey2, colors_1.cyan);
var StyledLogoLink = styled_1.default(Anchor_1.Anchor)(templateObject_7 || (templateObject_7 = __makeTemplateObject(["\n  margin-left: ", ";\n  margin-right: ", ";\n  height: 57px;\n"], ["\n  margin-left: ", ";\n  margin-right: ", ";\n  height: 57px;\n"])), distance_1.distance.xlarge, distance_1.distance.medium);
var StyledLinks = styled_1.default.div(templateObject_8 || (templateObject_8 = __makeTemplateObject(["\n  margin-right: auto;\n  margin-left: ", ";\n"], ["\n  margin-right: auto;\n  margin-left: ", ";\n"])), multiply_1.multiply(distance_1.distance.xxxlarge, 2));
var StyledLead = styled_1.default.div(templateObject_9 || (templateObject_9 = __makeTemplateObject(["\n  ", "\n\n  margin-right: ", ";\n"], ["\n  ", "\n\n  margin-right: ", ";\n"])), textStyles_1.getFontStyle({ size: 'xxLarge' }), distance_1.distance.medium);
var StyledPin = styled_1.default.div(templateObject_10 || (templateObject_10 = __makeTemplateObject(["\n  ", "\n  \n  margin-left: ", ";\n"], ["\n  ", "\n  \n  margin-left: ", ";\n"])), textStyles_1.getFontStyle({ size: 'xxLarge' }), distance_1.distance.medium);
var breakPoint = 780;
function isFullMode(width) {
    return width > breakPoint;
}
var DesktopHeader = Object.assign((function (_a) {
    var leads = _a.leads, pins = _a.pins;
    return (React.createElement(React.Fragment, null,
        React.createElement(StyledLinks, null, leads.map(function (item) { return (React.createElement(StyledLead, { key: item.id }, item.content)); })),
        React.createElement(HeaderStackPanel, null, pins.map(function (item) { return (React.createElement(StyledPin, { key: item.id }, item.content)); }))));
}), { inner: {
        get StyledLinks() { return StyledLinks; },
        get StyledLead() { return StyledLead; },
        get HeaderStackPanel() { return HeaderStackPanel; },
        get StyledPin() { return StyledPin; }
    } });
var MobileHeader = Object.assign((function (_a) {
    var entries = _a.entries, onToggle = _a.onToggle, open = _a.open;
    return (React.createElement(React.Fragment, null,
        React.createElement(HeaderStackPanel, null,
            React.createElement(StyledMenuLink, { onClick: onToggle },
                React.createElement(Icon_1.Icon, { name: open ? 'Close' : 'Menu' }))),
        React.createElement(StyledMenu, { onClick: onToggle, className: open ? 'open' : '' },
            React.createElement(StyledMenuItems, null, entries.map(function (item) { return (React.createElement(StyledMenuItem, { key: item.id }, item.content)); })))));
}), { inner: {
        get HeaderStackPanel() { return HeaderStackPanel; },
        get StyledMenuLink() { return StyledMenuLink; },
        get Icon() { return Icon_1.Icon; },
        get StyledMenu() { return StyledMenu; },
        get StyledMenuItems() { return StyledMenuItems; },
        get StyledMenuItem() { return StyledMenuItem; }
    } });
/**
 * A simple navigation bar that is responsive by nature.
 */
var NavBar = /** @class */ (function (_super) {
    __extends(NavBar, _super);
    function NavBar(props) {
        var _this = _super.call(this, props) || this;
        _this.toggle = function () {
            var onToggle = _this.props.onToggle;
            var _a = _this.state, open = _a.open, controlledOpen = _a.controlledOpen;
            if (!controlledOpen) {
                _this.setState({
                    open: !open,
                });
            }
            if (typeof onToggle === 'function') {
                onToggle({
                    shouldOpen: !open,
                });
            }
        };
        _this.state = {
            controlledMode: props.mode !== undefined,
            controlledOpen: props.open !== undefined,
            open: !!props.open,
            mode: props.mode,
        };
        return _this;
    }
    NavBar.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {
        if (this.state.controlledMode) {
            this.setState({
                mode: nextProps.mode,
            });
        }
        if (this.state.controlledOpen) {
            this.setState({
                open: !!nextProps.open,
            });
        }
    };
    NavBar.prototype.render = function () {
        var _a = this.props, logo = _a.logo, hidden = _a.hidden, items = _a.items, _0 = _a.mode, children = _a.children, rest = __rest(_a, ["logo", "hidden", "items", "mode", "children"]);
        var _b = this.state, mode = _b.mode, open = _b.open;
        return (React.createElement(StyledNavBar, __assign({}, rest),
            logo &&
                (typeof logo === 'string' ? (React.createElement(StyledLogoLink, { to: "/" },
                    React.createElement("img", { src: logo, width: 57, height: 57 }))) : (logo)),
            children,
            !hidden &&
                (mode === 'full' ? (React.createElement(DesktopHeader, { leads: items.filter(function (item) { return item.display === 'lead'; }), pins: items.filter(function (item) { return item.display === 'pin'; }) })) : mode === 'hamburger' ? (React.createElement(MobileHeader, { entries: items.filter(function (item) { return !item.display || item.display === 'mobile'; }), open: open, onToggle: this.toggle })) : (false))));
    };
    NavBar.inner = {
        get StyledNavBar() { return StyledNavBar; },
        get StyledLogoLink() { return StyledLogoLink; },
        get DesktopHeader() { return DesktopHeader; },
        get MobileHeader() { return MobileHeader; }
    };
    return NavBar;
}(React.Component));
exports.NavBar = NavBar;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9OYXZCYXIvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZCQUErQjtBQUMvQiw2Q0FBaUQ7QUFDakQsNENBQTJDO0FBQzNDLG9DQUFtQztBQUNuQyxnQ0FBK0I7QUFDL0IsdUNBQWtEO0FBQ2xELDJDQUEwQztBQUMxQyxpREFBZ0Q7QUFDaEQsK0NBQWdEO0FBcURoRCxJQUFNLGdCQUFnQixHQUFHLGdCQUFNLENBQUMsdUJBQVUsQ0FBQyxxSkFBQyxrRkFJM0MsSUFBQSxDQUFDO0FBQ0YsSUFBTSxZQUFZLEdBQUcsZ0JBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyx5SUFBQyxtQkFDN0IsRUFBZSxzQkFDYixFQUFpQix5QkFFbkMsS0FIZ0IsbUJBQVEsQ0FBQyxNQUFNLEVBQ2IsbUJBQVEsQ0FBQyxRQUFRLENBRW5DLENBQUM7QUFDRixJQUFNLGNBQWMsR0FBRyxnQkFBTSxDQUFDLENBQUMsaVdBQUMsTUFDNUIsRUFBaUMsNERBSzFCLEVBQUssZ0VBR0MsRUFBZSxzR0FNYixFQUFjLGtDQUdwQixFQUFJLFVBRWhCLEtBbkJHLHlCQUFZLENBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFLMUIsY0FBSyxFQUdDLG1CQUFRLENBQUMsTUFBTSxFQU1iLG1CQUFRLENBQUMsS0FBSyxFQUdwQixhQUFJLENBRWhCLENBQUM7QUFDRixJQUFNLFVBQVUsR0FBRyxnQkFBTSxDQUFDLEdBQUcsNE9BQUMseUtBVTdCLElBQUEsQ0FBQztBQUNGLElBQU0sZUFBZSxHQUFHLGdCQUFNLENBQUMsRUFBRSw4SUFBQywyRUFLakMsSUFBQSxDQUFDO0FBQ0YsSUFBTSxjQUFjLEdBQUcsZ0JBQU0sQ0FBQyxFQUFFLDhOQUFDLE1BQzdCLEVBQWdDLGdCQUV4QixFQUFjLCtF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bmltcG9ydCBzdHlsZWQsIHsgY3NzIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3R5bGVkJztcbmltcG9ydCB7IFN0YWNrUGFuZWwgfSBmcm9tICcuLi9TdGFja1BhbmVsJztcbmltcG9ydCB7IEFuY2hvciB9IGZyb20gJy4uL0FuY2hvcic7XG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnLi4vSWNvbic7XG5pbXBvcnQgeyBjeWFuLCBibGFjaywgZ3JleTIgfSBmcm9tICcuLi8uLi9jb2xvcnMnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICcuLi8uLi9kaXN0YW5jZSc7XG5pbXBvcnQgeyBtdWx0aXBseSB9IGZyb20gJy4uLy4uL3V0aWxzL211bHRpcGx5JztcbmltcG9ydCB7IGdldEZvbnRTdHlsZSB9IGZyb20gJy4uLy4uL3RleHRTdHlsZXMnO1xuaW1wb3J0IHsgZGlzcGxheVRvIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGlzcGxheVRvJztcbmltcG9ydCB7IHJlbUNhbGMgfSBmcm9tICcuLi8uLi91dGlscy9yZW1DYWxjJztcbmV4cG9ydCBpbnRlcmZhY2UgTmF2QmFySXRlbSB7XG4gICAgY29udGVudDogUmVhY3QuUmVhY3ROb2RlO1xuICAgIGRpc3BsYXk/OiAnbW9iaWxlJyB8ICdwaW4nIHwgJ2xlYWQnO1xuICAgIGlkOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIE5hdkJhclRvZ2dsZUV2ZW50IHtcbiAgICBzaG91bGRPcGVuOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBOYXZCYXJQcm9wcyB7XG4gICAgLyoqXG4gICAgICogU2V0cyBjb21wb25lbnQgZGlzcGxheSBtb2RlLiBCeSBkZWZhdWx0IGF1dG9tYXRpYyBtb2RlIGlzIHVzZWQsXG4gICAgICogd2hpY2ggZGVwZW5kcyBvbiB0aGUgY29tcG9uZW50J3Mgd2lkdGguXG4gICAgICovXG4gICAgbW9kZT86ICdoYW1idXJnZXInIHwgJ2Z1bGwnO1xuICAgIC8qKlxuICAgICAqIFRoZSBvcHRpb25hbCBsb2dvIHRvIGRlZmluZS4gRWl0aGVyIGEgc3RyaW5nIG9yIGEgUmVhY3QgZWxlbWVudC5cbiAgICAgKiBBIHN0cmluZyBpcyBpbnRlcnByZXRlZCBhcyBhbiBpbWFnZSBVUkwsIHdoaWNoIHdpbGwgZGlzcGxheWVkIGluXG4gICAgICogYW4gNTd4NTcgbGFyZ2UgaW1hZ2UgaW5zaWRlIGEgbGluayBjb21wb25lbnQuXG4gICAgICovXG4gICAgbG9nbz86IFJlYWN0LlJlYWN0Q2hpbGQ7XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgbWVudSBpcyBvcGVuZWQgb3IgY2xvc2VkLiBJZiB0aGUgdmFsdWUgaXMgc2V0IHRoZVxuICAgICAqIGNvbnRyb2wgZ29lcyBpbnRvIGNvbnRyb2xsZWQgbW9kZS4gT21pdHRpbmcgdGhpcyB2YWx1ZSB3aWxsIHRyaWdnZXJcbiAgICAgKiB0aGUgbWFuYWdlZCBtb2RlLlxuICAgICAqL1xuICAgIG9wZW4/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEV2ZW50IGVtaXR0ZWQgb25jZSB0aGUgaGFtYnVyZ2VyIG1lbnUgc2hvdWxkIGJlIHRvZ2dsZWQuXG4gICAgICovXG4gICAgb25Ub2dnbGU/KGU6IE5hdkJhclRvZ2dsZUV2ZW50KTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBPcHRpb24gdG8gaGlkZSB0aGUgc3RhbmRhcmQgbWVudSBhbmQgb25seSBkaXNwbGF5IHRoZSBsb2dvLCBpZiBhdmFpbGFibGUuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBoaWRkZW4/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFRoZSBtZW51IGl0ZW1zIHRvIHNob3cuXG4gICAgICovXG4gICAgaXRlbXM6IEFycmF5PE5hdkJhckl0ZW0+O1xuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsIGFkZGl0aW9uYWwgY29udGVudCB0byBwbGFjZSBpbnNpZGUgdGhlIG5hdiBiYXIgY29udGFpbmVyLlxuICAgICAqL1xuICAgIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xufVxuZXhwb3J0IGludGVyZmFjZSBOYXZCYXJTdGF0ZSB7XG4gICAgY29udHJvbGxlZE1vZGU6IGJvb2xlYW47XG4gICAgY29udHJvbGxlZE9wZW46IGJvb2xlYW47XG4gICAgb3BlbjogYm9vbGVhbjtcbiAgICBtb2RlOiAnaGFtYnVyZ2VyJyB8ICdmdWxsJyB8IHVuZGVmaW5lZDtcbn1cbmNvbnN0IEhlYWRlclN0YWNrUGFuZWwgPSBzdHlsZWQoU3RhY2tQYW5lbCkgYFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGZsZXgtc2hyaW5rOiAwO1xuYDtcbmNvbnN0IFN0eWxlZE5hdkJhciA9IHN0eWxlZChIZWFkZXJTdGFja1BhbmVsKSBgXG4gIHBhZGRpbmctdG9wOiAke2Rpc3RhbmNlLnhsYXJnZX07XG4gIG1hcmdpbi1ib3R0b206ICR7ZGlzdGFuY2UueHh4bGFyZ2V9O1xuICBmbGV4LXdyYXA6IHdyYXA7XG5gO1xuY29uc3QgU3R5bGVkTWVudUxpbmsgPSBzdHlsZWQuYSBgXG4gICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ3h4TGFyZ2UnIH0pfVxuXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGNvbG9yOiAke2JsYWNrfTtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW4tbGVmdDogJHtkaXN0YW5jZS5tZWRpdW19O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBpIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC1ib3R0b207XG4gIH1cbiAgc3BhbiB7XG4gICAgbWFyZ2luLWxlZnQ6ICR7ZGlzdGFuY2Uuc21hbGx9O1xuICB9XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAke2N5YW59O1xuICB9XG5gO1xuY29uc3QgU3R5bGVkTWVudSA9IHN0eWxlZC5kaXYgYFxuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiByaWdodDtcbiAgbWF4LWhlaWdodDogMDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgJi5vcGVuIHtcbiAgICBtYXgtaGVpZ2h0OiA1MDBweDtcbiAgfVxuYDtcbmNvbnN0IFN0eWxlZE1lbnVJdGVtcyA9IHN0eWxlZC51bCBgXG4gIHBhZGRpbmc6IDA7XG4gIG1hcmdpbjogMDtcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICB3aWR0aDogMTAwJTtcbmA7XG5jb25zdCBTdHlsZWRNZW51SXRlbSA9IHN0eWxlZC5saSBgXG4gICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ21lZGl1bScgfSl9XG5cbiAgbWFyZ2luOiAke2Rpc3RhbmNlLnNtYWxsfSAwO1xuXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAmIGEge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogJHtncmV5Mn07XG4gIH1cbiAgJiBhOmhvdmVyIHtcbiAgICBjb2xvcjogJHtjeWFufTtcbiAgfVxuYDtcbmNvbnN0IFN0eWxlZExvZ29MaW5rID0gc3R5bGVkKEFuY2hvcikgYFxuICBtYXJnaW4tbGVmdDogJHtkaXN0YW5jZS54bGFyZ2V9O1xuICBtYXJnaW4tcmlnaHQ6ICR7ZGlzdGFuY2UubWVkaXVtfTtcbiAgaGVpZ2h0OiA1N3B4O1xuYDtcbmNvbnN0IFN0eWxlZExpbmtzID0gc3R5bGVkLmRpdiBgXG4gIG1hcmdpbi1yaWdodDogYXV0bztcbiAgbWFyZ2luLWxlZnQ6ICR7bXVsdGlwbHkoZGlzdGFuY2UueHh4bGFyZ2UsIDIpfTtcbmA7XG5jb25zdCBTdHlsZWRMZWFkID0gc3R5bGVkLmRpdiBgXG4gICR7Z2V0Rm9udFN0eWxlKHsgc2l6ZTogJ3h4TGFyZ2UnIH0pfVxuXG4gIG1hcmdpbi1yaWdodDogJHtkaXN0YW5jZS5tZWRpdW19O1xuYDtcbmNvbnN0IFN0eWxlZFBpbiA9IHN0eWxlZC5kaXYgYFxuICAke2dldEZvbnRTdHlsZSh7IHNpemU6ICd4eExhcmdlJyB9KX1cbiAgXG4gIG1hcmdpbi1sZWZ0OiAke2Rpc3RhbmNlLm1lZGl1bX07XG5gO1xuY29uc3QgYnJlYWtQb2ludCA9IDc4MDtcbmZ1bmN0aW9uIGlzRnVsbE1vZGUod2lkdGg6IG51bWJlcikge1xuICAgIHJldHVybiB3aWR0aCA+IGJyZWFrUG9pbnQ7XG59XG5pbnRlcmZhY2UgRGVza3RvcEhlYWRlclByb3BzIHtcbiAgICBsZWFkczogQXJyYXk8TmF2QmFySXRlbT47XG4gICAgcGluczogQXJyYXk8TmF2QmFySXRlbT47XG59XG5jb25zdCBEZXNrdG9wSGVhZGVyID0gT2JqZWN0LmFzc2lnbigoKCh7IGxlYWRzLCBwaW5zIH0pID0+ICg8PlxuICAgIDxTdHlsZWRMaW5rcz5cbiAgICAgIHtsZWFkcy5tYXAoaXRlbSA9PiAoPFN0eWxlZExlYWQga2V5PXtpdGVtLmlkfT57aXRlbS5jb250ZW50fTwvU3R5bGVkTGVhZD4pKX1cbiAgICA8L1N0eWxlZExpbmtzPlxuICAgIDxIZWFkZXJTdGFja1BhbmVsPlxuICAgICAge3BpbnMubWFwKGl0ZW0gPT4gKDxTdHlsZWRQaW4ga2V5PXtpdGVtLmlkfT57aXRlbS5jb250ZW50fTwvU3R5bGVkUGluPikpfVxuICAgIDwvSGVhZGVyU3RhY2tQYW5lbD5cbiAgPC8+KSkgYXMgUmVhY3QuU0ZDPERlc2t0b3BIZWFkZXJQcm9wcz4pLCB7IGlubmVyOiB7XG4gICAgICAgIGdldCBTdHlsZWRMaW5rcygpIHsgcmV0dXJuIFN0eWxlZExpbmtzIGFzIHR5cGVvZiBTdHlsZWRMaW5rczsgfSxcbiAgICAgICAgZ2V0IFN0eWxlZExlYWQoKSB7IHJldHVybiBTdHlsZWRMZWFkIGFzIHR5cGVvZiBTdHlsZWRMZWFkOyB9LFxuICAgICAgICBnZXQgSGVhZGVyU3RhY2tQYW5lbCgpIHsgcmV0dXJuIEhlYWRlclN0YWNrUGFuZWwgYXMgdHlwZW9mIEhlYWRlclN0YWNrUGFuZWw7IH0sXG4gICAgICAgIGdldCBTdHlsZWRQaW4oKSB7IHJldHVybiBTdHlsZWRQaW4gYXMgdHlwZW9mIFN0eWxlZFBpbjsgfVxuICAgIH0gfSk7XG5pbnRlcmZhY2UgTW9iaWxlSGVhZGVyUHJvcHMge1xuICAgIGVudHJpZXM6IEFycmF5PE5hdkJhckl0ZW0+O1xuICAgIG9uVG9nZ2xlKCk6IHZvaWQ7XG4gICAgb3BlbjogYm9vbGVhbjtcbn1cbmNvbnN0IE1vYmlsZUhlYWRlciA9IE9iamVjdC5hc3NpZ24oKCgoeyBlbnRyaWVzLCBvblRvZ2dsZSwgb3BlbiB9KSA9PiAoPD5cbiAgICA8SGVhZGVyU3RhY2tQYW5lbD5cbiAgICAgIDxTdHlsZWRNZW51TGluayBvbkNsaWNrPXtvblRvZ2dsZX0+XG4gICAgICAgIDxJY29uIG5hbWU9e29wZW4gPyAnQ2xvc2UnIDogJ01lbnUnfS8+XG4gICAgICA8L1N0eWxlZE1lbnVMaW5rPlxuICAgIDwvSGVhZGVyU3RhY2tQYW5lbD5cbiAgICA8U3R5bGVkTWVudSBvbkNsaWNrPXtvblRvZ2dsZX0gY2xhc3NOYW1lPXtvcGVuID8gJ29wZW4nIDogJyd9PlxuICAgICAgPFN0eWxlZE1lbnVJdGVtcz5cbiAgICAgICAge2VudHJpZXMubWFwKGl0ZW0gPT4gKDxTdHlsZWRNZW51SXRlbSBrZXk9e2l0ZW0uaWR9PntpdGVtLmNvbnRlbnR9PC9TdHlsZWRNZW51SXRlbT4pKX1cbiAgICAgIDwvU3R5bGVkTWVudUl0ZW1zPlxuICAgIDwvU3R5bGVkTWVudT5cbiAgPC8+KSkgYXMgUmVhY3QuU0ZDPE1vYmlsZUhlYWRlclByb3BzPiksIHsgaW5uZXI6IHtcbiAgICAgICAgZ2V0IEhlYWRlclN0YWNrUGFuZWwoKSB7IHJldHVybiBIZWFkZXJTdGFja1BhbmVsIGFzIHR5cGVvZiBIZWFkZXJTdGFja1BhbmVsOyB9LFxuICAgICAgICBnZXQgU3R5bGVkTWVudUxpbmsoKSB7IHJldHVybiBTdHlsZWRNZW51TGluayBhcyB0eXBlb2YgU3R5bGVkTWVudUxpbms7IH0sXG4gICAgICAgIGdldCBJY29uKCkgeyByZXR1cm4gSWNvbiBhcyB0eXBlb2YgSWNvbjsgfSxcbiAgICAgICAgZ2V0IFN0eWxlZE1lbnUoKSB7IHJldHVybiBTdHlsZWRNZW51IGFzIHR5cGVvZiBTdHlsZWRNZW51OyB9LFxuICAgICAgICBnZXQgU3R5bGVkTWVudUl0ZW1zKCkgeyByZXR1cm4gU3R5bGVkTWVudUl0ZW1zIGFzIHR5cGVvZiBTdHlsZWRNZW51SXRlbXM7IH0sXG4gICAgICAgIGdldCBTdHlsZWRNZW51SXRlbSgpIHsgcmV0dXJuIFN0eWxlZE1lbnVJdGVtIGFzIHR5cGVvZiBTdHlsZWRNZW51SXRlbTsgfVxuICAgIH0gfSk7XG4vKipcbiAqIEEgc2ltcGxlIG5hdmlnYXRpb24gYmFyIHRoYXQgaXMgcmVzcG9uc2l2ZSBieSBuYXR1cmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBOYXZCYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8TmF2QmFyUHJvcHMsIE5hdkJhclN0YXRlPiB7XG4gICAgY29uc3RydWN0b3IocHJvcHM6IE5hdkJhclByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZWRNb2RlOiBwcm9wcy5tb2RlICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb250cm9sbGVkT3BlbjogcHJvcHMub3BlbiAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgb3BlbjogISFwcm9wcy5vcGVuLFxuICAgICAgICAgICAgbW9kZTogcHJvcHMubW9kZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBOYXZCYXJQcm9wcykge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb250cm9sbGVkTW9kZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgbW9kZTogbmV4dFByb3BzLm1vZGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb250cm9sbGVkT3Blbikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgb3BlbjogISFuZXh0UHJvcHMub3BlbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgdG9nZ2xlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uVG9nZ2xlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG9wZW4sIGNvbnRyb2xsZWRPcGVuIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoIWNvbnRyb2xsZWRPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcGVuOiAhb3BlbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb25Ub2dnbGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uVG9nZ2xlKHtcbiAgICAgICAgICAgICAgICBzaG91bGRPcGVuOiAhb3BlbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgbG9nbywgaGlkZGVuLCBpdGVtcywgbW9kZTogXzAsIGNoaWxkcmVuLCAuLi5yZXN0IH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG1vZGUsIG9wZW4gfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHJldHVybiAoPFN0eWxlZE5hdkJhciB7Li4ucmVzdH0+XG4gICAgICAgIHtsb2dvICYmXG4gICAgICAgICAgICAodHlwZW9mIGxvZ28gPT09ICdzdHJpbmcnID8gKDxTdHlsZWRMb2dvTGluayB0bz1cIi9cIj5cbiAgICAgICAgICAgICAgPGltZyBzcmM9e2xvZ299IHdpZHRoPXs1N30gaGVpZ2h0PXs1N30vPlxuICAgICAgICAgICAgPC9TdHlsZWRMb2dvTGluaz4pIDogKGxvZ28pKX1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgICB7IWhpZGRlbiAmJlxuICAgICAgICAgICAgKG1vZGUgPT09ICdmdWxsJyA/ICg8RGVza3RvcEhlYWRlciBsZWFkcz17aXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5kaXNwbGF5ID09PSAnbGVhZCcpfSBwaW5zPXtpdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmRpc3BsYXkgPT09ICdwaW4nKX0vPikgOiBtb2RlID09PSAnaGFtYnVyZ2VyJyA/ICg8TW9iaWxlSGVhZGVyIGVudHJpZXM9e2l0ZW1zLmZpbHRlcihpdGVtID0+ICFpdGVtLmRpc3BsYXkgfHwgaXRlbS5kaXNwbGF5ID09PSAnbW9iaWxlJyl9IG9wZW49e29wZW59IG9uVG9nZ2xlPXt0aGlzLnRvZ2dsZX0vPikgOiAoZmFsc2UpKX1cbiAgICAgIDwvU3R5bGVkTmF2QmFyPik7XG4gICAgfVxuICAgIHN0YXRpYyBpbm5lciA9IHtcbiAgICAgICAgZ2V0IFN0eWxlZE5hdkJhcigpIHsgcmV0dXJuIFN0eWxlZE5hdkJhciBhcyB0eXBlb2YgU3R5bGVkTmF2QmFyOyB9LFxuICAgICAgICBnZXQgU3R5bGVkTG9nb0xpbmsoKSB7IHJldHVybiBTdHlsZWRMb2dvTGluayBhcyB0eXBlb2YgU3R5bGVkTG9nb0xpbms7IH0sXG4gICAgICAgIGdldCBEZXNrdG9wSGVhZGVyKCkgeyByZXR1cm4gRGVza3RvcEhlYWRlciBhcyB0eXBlb2YgRGVza3RvcEhlYWRlcjsgfSxcbiAgICAgICAgZ2V0IE1vYmlsZUhlYWRlcigpIHsgcmV0dXJuIE1vYmlsZUhlYWRlciBhcyB0eXBlb2YgTW9iaWxlSGVhZGVyOyB9XG4gICAgfTtcbn1cbiJdfQ==