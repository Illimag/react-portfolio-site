"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var SidebarPopup_part_1 = require("./SidebarPopup.part");
var SidebarActivatorContainer_part_1 = require("./SidebarActivatorContainer.part");
var Sidebar = /** @class */ (function (_super) {
    __extends(Sidebar, _super);
    function Sidebar(props) {
        var _this = _super.call(this, props) || this;
        _this.show = function () {
            if (!_this.controlled) {
                _this.setState({ open: true });
            }
            typeof _this.props.onShow === 'function' && _this.props.onShow();
        };
        _this.hide = function () {
            if (!_this.controlled) {
                _this.setState({ open: false });
            }
            typeof _this.props.onClose === 'function' && _this.props.onClose();
        };
        _this.onKeyPress = function (e) {
            if (e.keyCode === 27 /* escape */) {
                _this.hide();
            }
        };
        var open = _this.props.open;
        _this.controlled = open !== undefined;
        _this.state = {
            open: open !== undefined ? open : false,
        };
        return _this;
    }
    Sidebar.prototype.UNSAFE_componentWillReceiveProps = function (props) {
        if (this.controlled) {
            this.setState({ open: Boolean(props.open) });
        }
    };
    Sidebar.prototype.componentDidMount = function () {
        document.addEventListener('keydown', this.onKeyPress);
    };
    Sidebar.prototype.componentWillUnmount = function () {
        document.removeEventListener('keydown', this.onKeyPress);
    };
    Sidebar.prototype.render = function () {
        var _a = this.props, _0 = _a.onShow, activator = _a.activator, _b = _a.size, size = _b === void 0 ? '275px' : _b, props = __rest(_a, ["onShow", "activator", "size"]);
        var open = this.state.open;
        return (React.createElement(React.Fragment, null,
            React.createElement(SidebarActivatorContainer_part_1.SidebarActivatorContainer, { onClick: this.show }, activator),
            React.createElement(SidebarPopup_part_1.SidebarPopup, __assign({}, props, { open: open, onClose: this.hide, size: size }))));
    };
    Sidebar.inner = {
        get SidebarActivatorContainer() { return SidebarActivatorContainer_part_1.SidebarActivatorContainer; },
        get SidebarPopup() { return SidebarPopup_part_1.SidebarPopup; }
    };
    return Sidebar;
}(React.Component));
exports.Sidebar = Sidebar;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9TaWRlYmFyL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZCQUErQjtBQUUvQix5REFBbUQ7QUFDbkQsbUZBQTZFO0FBaUM3RTtJQUE2QiwyQkFBMkM7SUFFcEUsaUJBQVksS0FBbUI7UUFBL0IsWUFDSSxrQkFBTSxLQUFLLENBQUMsU0FNZjtRQVlPLFVBQUksR0FBRztZQUNYLElBQUksQ0FBQyxLQUFJLENBQUMsVUFBVSxFQUFFO2dCQUNsQixLQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7YUFDakM7WUFDRCxPQUFPLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLFVBQVUsSUFBSSxLQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ25FLENBQUMsQ0FBQztRQUNNLFVBQUksR0FBRztZQUNYLElBQUksQ0FBQyxLQUFJLENBQUMsVUFBVSxFQUFFO2dCQUNsQixLQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7YUFDbEM7WUFDRCxPQUFPLEtBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxLQUFLLFVBQVUsSUFBSSxLQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JFLENBQUMsQ0FBQztRQUNNLGdCQUFVLEdBQUcsVUFBQyxDQUFnQjtZQUNsQyxJQUFJLENBQUMsQ0FBQyxPQUFPLG9CQUFvQixFQUFFO2dCQUMvQixLQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDZjtRQUNMLENBQUMsQ0FBQztRQWpDVSxJQUFBLHVCQUFJLENBQWdCO1FBQzVCLEtBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLFNBQVMsQ0FBQztRQUNyQyxLQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1QsSUFBSSxFQUFFLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSztTQUMxQyxDQUFDOztJQUNOLENBQUM7SUFDRCxrREFBZ0MsR0FBaEMsVUFBaUMsS0FBbUI7UUFDaEQsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEQ7SUFDTCxDQUFDO0lBQ0QsbUNBQWlCLEdBQWpCO1FBQ0ksUUFBUSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUNELHNDQUFvQixHQUFwQjtRQUNJLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFrQkQsd0JBQU0sR0FBTjtRQUNJLElBQU0sZUFBZ0UsRUFBOUQsY0FBVSxFQUFFLHdCQUFTLEVBQUUsWUFBYyxFQUFkLG1DQUFjLEVBQUUsbURBQXVCLENBQUM7UUFDL0QsSUFBQSxzQkFBSSxDQUFnQjtRQUM1QixPQUFPLENBQUM7WUFDUixvQkFBQywwREFBeUIsSUFBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksSUFBRyxTQUFTLENBQTZCO1lBQ3RGLG9CQUFDLGdDQUFZLGVBQUssS0FBSyxJQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksSUFBRyxDQUNyRSxDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ00sYUFBSyxHQUFHO1FBQ1gsSUFBSSx5QkFBeUIsS0FBSyxPQUFPLDBEQUE2RCxDQUFDLENBQUMsQ0FBQztRQUN6RyxJQUFJLFlBQVksS0FBSyxPQUFPLGdDQUFtQyxDQUFDLENBQUMsQ0FBQztLQUNyRSxDQUFDO0lBQ04sY0FBQztDQUFBLEFBbERELENBQTZCLEtBQUssQ0FBQyxTQUFTLEdBa0QzQztBQWxEWSwwQkFBTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEtleUNvZGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMva2V5Q29kZXMnO1xuaW1wb3J0IHsgU2lkZWJhclBvcHVwIH0gZnJvbSAnLi9TaWRlYmFyUG9wdXAucGFydCc7XG5pbXBvcnQgeyBTaWRlYmFyQWN0aXZhdG9yQ29udGFpbmVyIH0gZnJvbSAnLi9TaWRlYmFyQWN0aXZhdG9yQ29udGFpbmVyLnBhcnQnO1xudHlwZSBQb3NpdGlvblR5cGUgPSAndG9wJyB8ICdsZWZ0JyB8ICdib3R0b20nIHwgJ3JpZ2h0JztcbmV4cG9ydCBpbnRlcmZhY2UgU2lkZWJhclByb3BzIHtcbiAgICAvKipcbiAgICAgKiBFbGVtZW50IHdoaWNoIHRyaWdnZXJzIHNpZGViYXIgc2hvd2luZyBieSBjbGljay5cbiAgICAgKi9cbiAgICBhY3RpdmF0b3I6IFJlYWN0LlJlYWN0Q2hpbGQ7XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGVyZSB0byBzaG93IGEgc2lkZWJhci4gVmFsaWQgcG9zaXRpb25zIGFyZTogbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLlxuICAgICAqIEBkZWZhdWx0IHJpZ2h0XG4gICAgICovXG4gICAgcG9zaXRpb24/OiBQb3NpdGlvblR5cGU7XG4gICAgLyoqXG4gICAgICogU2l6ZSBpbiB2YWxpZCBjc3MgdW5pdHMuXG4gICAgICogQGRlZmF1bHQgMjc1cHhcbiAgICAgKi9cbiAgICBzaXplPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgc2lkZWJhciBpcyBvcGVuZWQgb3IgY2xvc2VkLiBQdXRzIHNpZGViYXIgaW4gY29udHJvbGxlZCBtb2RlLlxuICAgICAqL1xuICAgIG9wZW4/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEZpcmVzIHRoaXMgZXZlbnQgYWZ0ZXIgdHJpZ2dlciBlbGVtZW50IHdhcyBjbGlja2VkLlxuICAgICAqL1xuICAgIG9uU2hvdz8oKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBGaXJlcyB0aGlzIGV2ZW50IHdoZW4gc2lkZWJhciBzaG91bGQgYmUgY2xvc2VkLlxuICAgICAqL1xuICAgIG9uQ2xvc2U/KCk6IHZvaWQ7XG59XG5pbnRlcmZhY2UgU2lkZWJhclN0YXRlIHtcbiAgICBvcGVuOiBib29sZWFuO1xufVxuZXhwb3J0IGNsYXNzIFNpZGViYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8U2lkZWJhclByb3BzLCBTaWRlYmFyU3RhdGU+IHtcbiAgICBwcml2YXRlIGNvbnRyb2xsZWQ6IGJvb2xlYW47XG4gICAgY29uc3RydWN0b3IocHJvcHM6IFNpZGViYXJQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIGNvbnN0IHsgb3BlbiB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgdGhpcy5jb250cm9sbGVkID0gb3BlbiAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgb3Blbjogb3BlbiAhPT0gdW5kZWZpbmVkID8gb3BlbiA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhwcm9wczogU2lkZWJhclByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiBCb29sZWFuKHByb3BzLm9wZW4pIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleVByZXNzKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5UHJlc3MpO1xuICAgIH1cbiAgICBwcml2YXRlIHNob3cgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5jb250cm9sbGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0eXBlb2YgdGhpcy5wcm9wcy5vblNob3cgPT09ICdmdW5jdGlvbicgJiYgdGhpcy5wcm9wcy5vblNob3coKTtcbiAgICB9O1xuICAgIHByaXZhdGUgaGlkZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0eXBlb2YgdGhpcy5wcm9wcy5vbkNsb3NlID09PSAnZnVuY3Rpb24nICYmIHRoaXMucHJvcHMub25DbG9zZSgpO1xuICAgIH07XG4gICAgcHJpdmF0ZSBvbktleVByZXNzID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS2V5Q29kZXMuZXNjYXBlKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IG9uU2hvdzogXzAsIGFjdGl2YXRvciwgc2l6ZSA9ICcyNzVweCcsIC4uLnByb3BzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IG9wZW4gfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHJldHVybiAoPD5cbiAgICAgICAgPFNpZGViYXJBY3RpdmF0b3JDb250YWluZXIgb25DbGljaz17dGhpcy5zaG93fT57YWN0aXZhdG9yfTwvU2lkZWJhckFjdGl2YXRvckNvbnRhaW5lcj5cbiAgICAgICAgPFNpZGViYXJQb3B1cCB7Li4ucHJvcHN9IG9wZW49e29wZW59IG9uQ2xvc2U9e3RoaXMuaGlkZX0gc2l6ZT17c2l6ZX0vPlxuICAgICAgPC8+KTtcbiAgICB9XG4gICAgc3RhdGljIGlubmVyID0ge1xuICAgICAgICBnZXQgU2lkZWJhckFjdGl2YXRvckNvbnRhaW5lcigpIHsgcmV0dXJuIFNpZGViYXJBY3RpdmF0b3JDb250YWluZXIgYXMgdHlwZW9mIFNpZGViYXJBY3RpdmF0b3JDb250YWluZXI7IH0sXG4gICAgICAgIGdldCBTaWRlYmFyUG9wdXAoKSB7IHJldHVybiBTaWRlYmFyUG9wdXAgYXMgdHlwZW9mIFNpZGViYXJQb3B1cDsgfVxuICAgIH07XG59XG4iXX0=