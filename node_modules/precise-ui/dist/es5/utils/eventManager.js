"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var SimpleEventManager = /** @class */ (function () {
    function SimpleEventManager() {
        this.eventListeners = {};
    }
    SimpleEventManager.prototype.on = function (type, callback) {
        var callbacks = this.eventListeners[type] || [];
        this.eventListeners[type] = callbacks.concat([callback]);
    };
    SimpleEventManager.prototype.off = function (type, callback) {
        var callbacks = this.eventListeners[type] || [];
        this.eventListeners[type] = callbacks.filter(function (cb) { return cb !== callback; });
    };
    SimpleEventManager.prototype.emit = function (type, arg) {
        var _this = this;
        var callbacks = this.eventListeners[type] || [];
        var _loop_1 = function (callback) {
            setTimeout(function () { return callback.call(_this, arg); }, 0);
        };
        for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {
            var callback = callbacks_1[_i];
            _loop_1(callback);
        }
    };
    return SimpleEventManager;
}());
exports.SimpleEventManager = SimpleEventManager;
exports.eventManagers = [new SimpleEventManager()];
function setDefaultEventManager(events) {
    exports.eventManagers.splice(0, 1, events);
}
exports.setDefaultEventManager = setDefaultEventManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWxzL2V2ZW50TWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWNBO0lBQUE7UUFDbUIsbUJBQWMsR0FBbUIsRUFBRSxDQUFDO0lBbUJ2RCxDQUFDO0lBakJDLCtCQUFFLEdBQUYsVUFBTSxJQUFZLEVBQUUsUUFBMEI7UUFDNUMsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FBTyxTQUFTLFNBQUUsUUFBUSxFQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELGdDQUFHLEdBQUgsVUFBTyxJQUFZLEVBQUUsUUFBMEI7UUFDN0MsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQUEsRUFBRSxJQUFJLE9BQUEsRUFBRSxLQUFLLFFBQVEsRUFBZixDQUFlLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRUQsaUNBQUksR0FBSixVQUFRLElBQVksRUFBRSxHQUFNO1FBQTVCLGlCQU1DO1FBTEMsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0NBRXZDLFFBQVE7WUFDakIsVUFBVSxDQUFDLGNBQU0sT0FBQSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUksRUFBRSxHQUFHLENBQUMsRUFBeEIsQ0FBd0IsRUFBRSxDQUFDLENBQUMsQ0FBQzs7UUFEaEQsS0FBdUIsVUFBUyxFQUFULHVCQUFTLEVBQVQsdUJBQVMsRUFBVCxJQUFTO1lBQTNCLElBQU0sUUFBUSxrQkFBQTtvQkFBUixRQUFRO1NBRWxCO0lBQ0gsQ0FBQztJQUNILHlCQUFDO0FBQUQsQ0FBQyxBQXBCRCxJQW9CQztBQXBCWSxnREFBa0I7QUFzQmxCLFFBQUEsYUFBYSxHQUF3QixDQUFDLElBQUksa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO0FBRTdFLFNBQWdCLHNCQUFzQixDQUFDLE1BQW9CO0lBQ3pELHFCQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUZELHdEQUVDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBDYWxsYmFjayB7XG4gIChhcmc6IGFueSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRMaXN0ZW5lcnMge1xuICBbZXZlbnQ6IHN0cmluZ106IEFycmF5PENhbGxiYWNrPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudE1hbmFnZXIge1xuICBvbih0eXBlOiBzdHJpbmcsIGNhbGxiYWNrOiBDYWxsYmFjayk6IHZvaWQ7XG4gIG9mZih0eXBlOiBzdHJpbmcsIGNhbGxiYWNrOiBDYWxsYmFjayk6IHZvaWQ7XG4gIGVtaXQ8VD4odHlwZTogc3RyaW5nLCBhcmc6IFQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgU2ltcGxlRXZlbnRNYW5hZ2VyIGltcGxlbWVudHMgRXZlbnRNYW5hZ2VyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBldmVudExpc3RlbmVyczogRXZlbnRMaXN0ZW5lcnMgPSB7fTtcblxuICBvbjxUPih0eXBlOiBzdHJpbmcsIGNhbGxiYWNrOiAoYXJnOiBUKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5ldmVudExpc3RlbmVyc1t0eXBlXSB8fCBbXTtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW3R5cGVdID0gWy4uLmNhbGxiYWNrcywgY2FsbGJhY2tdO1xuICB9XG5cbiAgb2ZmPFQ+KHR5cGU6IHN0cmluZywgY2FsbGJhY2s6IChhcmc6IFQpID0+IHZvaWQpIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmV2ZW50TGlzdGVuZXJzW3R5cGVdIHx8IFtdO1xuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbdHlwZV0gPSBjYWxsYmFja3MuZmlsdGVyKGNiID0+IGNiICE9PSBjYWxsYmFjayk7XG4gIH1cblxuICBlbWl0PFQ+KHR5cGU6IHN0cmluZywgYXJnOiBUKSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5ldmVudExpc3RlbmVyc1t0eXBlXSB8fCBbXTtcblxuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrLmNhbGwodGhpcywgYXJnKSwgMCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBldmVudE1hbmFnZXJzOiBBcnJheTxFdmVudE1hbmFnZXI+ID0gW25ldyBTaW1wbGVFdmVudE1hbmFnZXIoKV07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0RXZlbnRNYW5hZ2VyKGV2ZW50czogRXZlbnRNYW5hZ2VyKSB7XG4gIGV2ZW50TWFuYWdlcnMuc3BsaWNlKDAsIDEsIGV2ZW50cyk7XG59XG4iXX0=